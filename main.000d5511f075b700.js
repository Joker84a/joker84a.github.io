(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(sn,mt,B)=>{"use strict";B.d(mt,{nm:()=>Ei});var d=B(5813);B(4650),B(5867);var W=B(5861),Xe=B(9681),Ge=B(4859),Je=B(2090),et=B(1877);const ee=new Map,qe={activated:!1,tokenObservers:[]},he={initialized:!1,enabled:!1};function pe(rt){return ee.get(rt)||qe}function fe(rt,ct){ee.set(rt,ct)}function le(){return he}class be{constructor(ct,_t,jt,tn,An){if(this.operation=ct,this.retryPolicy=_t,this.getWaitDuration=jt,this.lowerBound=tn,this.upperBound=An,this.pending=null,this.nextErrorWaitInterval=tn,tn>An)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ct){var _t=this;return(0,W.Z)(function*(){_t.stop();try{_t.pending=new Je.BH,yield function Ye(rt){return new Promise(ct=>{setTimeout(ct,rt)})}(_t.getNextRun(ct)),_t.pending.resolve(),yield _t.pending.promise,_t.pending=new Je.BH,yield _t.operation(),_t.pending.resolve(),yield _t.pending.promise,_t.process(!0).catch(()=>{})}catch(jt){_t.retryPolicy(jt)?_t.process(!1).catch(()=>{}):_t.stop()}})()}getNextRun(ct){if(ct)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const _t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),_t}}}const st=new Je.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vt(rt){if(!pe(rt).activated)throw st.create("use-before-activation",{appName:rt.name})}function hn(rt,ct){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,W.Z)(function*({url:rt,body:ct},_t){var jt,tn;const An={"Content-Type":"application/json"},Ir=_t.getImmediate({optional:!0});if(Ir){const Ys=yield Ir.getHeartbeatsHeader();Ys&&(An["X-Firebase-Client"]=Ys)}const Vi={method:"POST",body:JSON.stringify(ct),headers:An};let xr,Wi;try{xr=yield fetch(rt,Vi)}catch(Ys){throw st.create("fetch-network-error",{originalErrorMessage:null===(jt=Ys)||void 0===jt?void 0:jt.message})}if(200!==xr.status)throw st.create("fetch-status-error",{httpStatus:xr.status});try{Wi=yield xr.json()}catch(Ys){throw st.create("fetch-parse-error",{originalErrorMessage:null===(tn=Ys)||void 0===tn?void 0:tn.message})}const ws=Wi.ttl.match(/^([\d.]+)(s)$/);if(!ws||!ws[2]||isNaN(Number(ws[1])))throw st.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Wi.ttl}`});const Is=1e3*Number(ws[1]),ns=Date.now();return{token:Wi.token,expireTimeMillis:ns+Is,issuedAtTimeMillis:ns}})).apply(this,arguments)}function En(rt,ct){const{projectId:_t,appId:jt,apiKey:tn}=rt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${_t}/apps/${jt}:exchangeDebugToken?key=${tn}`,body:{debug_token:ct}}}const Dt="firebase-app-check-store";let Zn=null;function rr(){return Zn||(Zn=new Promise((rt,ct)=>{var _t;try{const jt=indexedDB.open("firebase-app-check-database",1);jt.onsuccess=tn=>{rt(tn.target.result)},jt.onerror=tn=>{var An;ct(st.create("storage-open",{originalErrorMessage:null===(An=tn.target.error)||void 0===An?void 0:An.message}))},jt.onupgradeneeded=tn=>{0===tn.oldVersion&&tn.target.result.createObjectStore(Dt,{keyPath:"compositeKey"})}}catch(jt){ct(st.create("storage-open",{originalErrorMessage:null===(_t=jt)||void 0===_t?void 0:_t.message}))}}),Zn)}function mi(){return(mi=(0,W.Z)(function*(rt,ct){const jt=(yield rr()).transaction(Dt,"readwrite"),An=jt.objectStore(Dt).put({compositeKey:rt,value:ct});return new Promise((Ir,Vi)=>{An.onsuccess=xr=>{Ir()},jt.onerror=xr=>{var Wi;Vi(st.create("storage-set",{originalErrorMessage:null===(Wi=xr.target.error)||void 0===Wi?void 0:Wi.message}))}})})).apply(this,arguments)}const Tn=new et.Yd("@firebase/app-check");function hi(rt,ct){return(0,Je.hl)()?function gi(rt,ct){return function qr(rt,ct){return mi.apply(this,arguments)}(function zn(rt){return`${rt.options.appId}-${rt.name}`}(rt),ct)}(rt,ct).catch(_t=>{Tn.warn(`Failed to write token to IndexedDB. Error: ${_t}`)}):Promise.resolve()}function Er(){return le().enabled}function Pr(){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,W.Z)(function*(){const rt=le();if(rt.enabled&&rt.token)return rt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ue={error:"UNKNOWN_ERROR"};function tt(rt){return Je.US.encodeString(JSON.stringify(rt),!1)}function We(rt){return zt.apply(this,arguments)}function zt(){return(zt=(0,W.Z)(function*(rt,ct=!1){const _t=rt.app;vt(_t);const jt=pe(_t);let An,tn=jt.token;if(!tn){const xr=yield jt.cachedTokenPromise;xr&&Un(xr)&&(tn=xr)}if(!ct&&tn&&Un(tn))return{token:tn.token};let Vi,Ir=!1;if(Er()){jt.exchangeTokenPromise||(jt.exchangeTokenPromise=hn(En(_t,yield Pr()),rt.heartbeatServiceProvider).then(Wi=>(jt.exchangeTokenPromise=void 0,Wi)),Ir=!0);const xr=yield jt.exchangeTokenPromise;return yield hi(_t,xr),fe(_t,Object.assign(Object.assign({},jt),{token:xr})),{token:xr.token}}try{jt.exchangeTokenPromise||(jt.exchangeTokenPromise=jt.provider.getToken().then(xr=>(jt.exchangeTokenPromise=void 0,xr)),Ir=!0),tn=yield jt.exchangeTokenPromise}catch(xr){"appCheck/throttled"===xr.code?Tn.warn(xr.message):Tn.error(xr),An=xr}return tn?(Vi={token:tn.token},fe(_t,Object.assign(Object.assign({},jt),{token:tn})),yield hi(_t,tn)):Vi=Jn(An),Ir&&ir(_t,Vi),Vi})).apply(this,arguments)}function un(rt,ct){const _t=pe(rt),jt=_t.tokenObservers.filter(tn=>tn.next!==ct);0===jt.length&&_t.tokenRefresher&&_t.tokenRefresher.isRunning()&&_t.tokenRefresher.stop(),fe(rt,Object.assign(Object.assign({},_t),{tokenObservers:jt}))}function ar(rt){const{app:ct}=rt,_t=pe(ct);let jt=_t.tokenRefresher;jt||(jt=function On(rt){const{app:ct}=rt;return new be((0,W.Z)(function*(){let jt;if(jt=pe(ct).token?yield We(rt,!0):yield We(rt),jt.error)throw jt.error}),()=>!0,()=>{const _t=pe(ct);if(_t.token){let jt=_t.token.issuedAtTimeMillis+.5*(_t.token.expireTimeMillis-_t.token.issuedAtTimeMillis)+3e5;return jt=Math.min(jt,_t.token.expireTimeMillis-3e5),Math.max(0,jt-Date.now())}return 0},3e4,96e4)}(rt),fe(ct,Object.assign(Object.assign({},_t),{tokenRefresher:jt}))),!jt.isRunning()&&_t.isTokenAutoRefreshEnabled&&jt.start()}function ir(rt,ct){const _t=pe(rt).tokenObservers;for(const jt of _t)try{"EXTERNAL"===jt.type&&null!=ct.error?jt.error(ct.error):jt.next(ct)}catch{}}function Un(rt){return rt.expireTimeMillis-Date.now()>0}function Jn(rt){return{token:tt(Ue),error:rt}}class Ar{constructor(ct,_t){this.app=ct,this.heartbeatServiceProvider=_t}_delete(){const{tokenObservers:ct}=pe(this.app);for(const _t of ct)un(this.app,_t.next);return Promise.resolve()}}const ts="app-check-internal";!function Li(){(0,Xe._registerComponent)(new Ge.wA("app-check",rt=>function Ur(rt,ct){return new Ar(rt,ct)}(rt.getProvider("app").getImmediate(),rt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((rt,ct,_t)=>{rt.getProvider(ts).initialize()})),(0,Xe._registerComponent)(new Ge.wA(ts,rt=>function or(rt){return{getToken:ct=>We(rt,ct),addTokenListener:ct=>function Yt(rt,ct,_t,jt){const{app:tn}=rt,An=pe(tn),Ir={next:_t,error:jt,type:ct};if(fe(tn,Object.assign(Object.assign({},An),{tokenObservers:[...An.tokenObservers,Ir]})),An.token&&Un(An.token)){const Vi=An.token;Promise.resolve().then(()=>{_t({token:Vi.token}),ar(rt)}).catch(()=>{})}An.cachedTokenPromise.then(()=>ar(rt))}(rt,"INTERNAL",ct),removeTokenListener:ct=>un(rt.app,ct)}}(rt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.5.11")}();class Ei{constructor(){return(0,d.vb)("app-check")}}typeof window<"u"&&window},3385:(sn,mt,B)=>{"use strict";B.d(mt,{zQ:()=>pe,ww:()=>fe,rT:()=>et,f7:()=>qe,L6:()=>Ge,_Q:()=>Je,lh:()=>ee,Qv:()=>Xe,nw:()=>he});var d=B(4650),O=B(7579),Z=B(9646),He=B(8306),De=B(8996),_e=B(6451),ve=B(3900),ze=B(576);function Le(le,Qe){return(0,ze.m)(Qe)?(0,ve.w)(()=>le,Qe):(0,ve.w)(()=>le)}var ge=B(5363),me=B(4004),Te=B(3151),Fe=B(590),je=B(9468),$e=B(9300),Ve=B(5813),Ce=B(2011),Re=B(6895),Ae=B(440),bt=B(127);const Xe=new d.OlP("angularfire2.auth.use-emulator"),Ge=new d.OlP("angularfire2.auth.settings"),Je=new d.OlP("angularfire2.auth.tenant-id"),et=new d.OlP("angularfire2.auth.langugage-code"),ee=new d.OlP("angularfire2.auth.use-device-language"),qe=new d.OlP("angularfire.auth.persistence"),he=(le,Qe,Tt,Gt,Et,yt,Be,be)=>(0,Ce.cc)(`${le.name}.auth`,"AngularFireAuth",le.name,()=>{const Ye=Qe.runOutsideAngular(()=>le.auth());if(Tt&&Ye.useEmulator(...Tt),Gt&&(Ye.tenantId=Gt),Ye.languageCode=Et,yt&&Ye.useDeviceLanguage(),Be)for(const[Ie,st]of Object.entries(Be))Ye.settings[Ie]=st;return be&&Ye.setPersistence(be),Ye},[Tt,Gt,Et,yt,Be,be]);let pe=(()=>{class le{constructor(Tt,Gt,Et,yt,Be,be,Ye,Ie,st,Rt,vt,Vt){const fn=new O.x,hn=(0,Z.of)(void 0).pipe((0,ge.Q)(Be.outsideAngular),(0,ve.w)(()=>yt.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,1451)))),(0,me.U)(()=>(0,Ce.on)(Tt,yt,Gt)),(0,me.U)(Dn=>he(Dn,yt,be,Ie,st,Rt,Ye,vt)),(0,Te.d)({bufferSize:1,refCount:!1}));if((0,Re.PM)(Et))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{hn.pipe((0,Fe.P)()).subscribe();const Zt=hn.pipe((0,ve.w)(Qt=>Qt.getRedirectResult().then(kn=>kn,()=>null)),Ve.iC,(0,Te.d)({bufferSize:1,refCount:!1})),In=hn.pipe((0,ve.w)(Qt=>new He.y(kn=>({unsubscribe:yt.runOutsideAngular(()=>Qt.onAuthStateChanged(Dt=>kn.next(Dt),Dt=>kn.error(Dt),()=>kn.complete()))})))),En=hn.pipe((0,ve.w)(Qt=>new He.y(kn=>({unsubscribe:yt.runOutsideAngular(()=>Qt.onIdTokenChanged(Dt=>kn.next(Dt),Dt=>kn.error(Dt),()=>kn.complete()))}))));this.authState=Zt.pipe(Le(In),(0,je.R)(Be.outsideAngular),(0,ge.Q)(Be.insideAngular)),this.user=Zt.pipe(Le(En),(0,je.R)(Be.outsideAngular),(0,ge.Q)(Be.insideAngular)),this.idToken=this.user.pipe((0,ve.w)(Qt=>Qt?(0,De.D)(Qt.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,ve.w)(Qt=>Qt?(0,De.D)(Qt.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,_e.T)(Zt,fn,this.authState.pipe((0,$e.h)(Qt=>!Qt))).pipe((0,me.U)(Qt=>Qt?.user?Qt:null),(0,je.R)(Be.outsideAngular),(0,ge.Q)(Be.insideAngular))}return(0,Ce.pX)(this,hn,yt,{spy:{apply:(Dn,Zt,In)=>{(Dn.startsWith("signIn")||Dn.startsWith("createUser"))&&In.then(En=>fn.next(En))}}})}}return le.\u0275fac=function(Tt){return new(Tt||le)(d.LFG(Ce.Dh),d.LFG(Ce.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ve.HU),d.LFG(Xe,8),d.LFG(Ge,8),d.LFG(Je,8),d.LFG(et,8),d.LFG(ee,8),d.LFG(qe,8),d.LFG(Ae.nm,8))},le.\u0275prov=d.Yz7({token:le,factory:le.\u0275fac,providedIn:"any"}),le})(),fe=(()=>{class le{constructor(){bt.Z.registerVersion("angularfire",Ve.q4.full,"auth-compat")}}return le.\u0275fac=function(Tt){return new(Tt||le)},le.\u0275mod=d.oAB({type:le}),le.\u0275inj=d.cJS({providers:[pe]}),le})()},7407:(sn,mt,B)=>{"use strict";B.d(mt,{ST:()=>ap,yb:()=>E_});var d=B(4650),O=B(4986),Z=B(8306),He=B(8996),De=B(9646),_e=B(5813),ve=B(4482),ze=B(5403);function Le(){return(0,ve.e)((i,e)=>{let t,o=!1;i.subscribe((0,ze.x)(e,h=>{const m=t;t=h,o&&e.next([m,h]),o=!0}))})}var ee,ge=B(8675),me=B(4004),Te=B(5026),Fe=B(1884),je=B(9300),$e=B(2011),Ve=B(6895),Re=(B(1451),B(3942)),Ae=B(5861),bt=B(9681),W=B(4859),Xe=B(1877),Ge=B(2090),Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},et={},qe=qe||{},he=Je||self;function pe(){}function fe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function le(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Tt="closure_uid_"+(1e9*Math.random()>>>0),Gt=0;function Et(i,e,t){return i.call.apply(i.bind,arguments)}function yt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,o),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function Be(i,e,t){return(Be=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Et:yt).apply(null,arguments)}function be(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ye(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,h,m){for(var w=Array(arguments.length-2),R=2;R<arguments.length;R++)w[R-2]=arguments[R];return e.prototype[h].apply(o,w)}}function Ie(){this.s=this.s,this.o=this.o}var Rt={};Ie.prototype.s=!1,Ie.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Qe(i){return Object.prototype.hasOwnProperty.call(i,Tt)&&i[Tt]||(i[Tt]=++Gt)}(this);delete Rt[i]}},Ie.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Vt=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,h="string"==typeof i?i.split(""):i;for(let m=0;m<o;m++)m in h&&e.call(t,h[m],m,i)};function hn(i){return Array.prototype.concat.apply([],arguments)}function Dn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Zt(i){return/^[\s\xa0]*$/.test(i)}var kn,In=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function En(i,e){return-1!=i.indexOf(e)}function Qt(i,e){return i<e?-1:i>e?1:0}e:{var Dt=he.navigator;if(Dt){var Sr=Dt.userAgent;if(Sr){kn=Sr;break e}}kn=""}function Zn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function rr(i){const e={};for(const t in i)e[t]=i[t];return e}var yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gi(i,e){let t,o;for(let h=1;h<arguments.length;h++){for(t in o=arguments[h],o)i[t]=o[t];for(let m=0;m<yr.length;m++)t=yr[m],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function dr(i){return dr[" "](i),i}dr[" "]=pe;var vn,i,qr=En(kn,"Opera"),mi=En(kn,"Trident")||En(kn,"MSIE"),Yn=En(kn,"Edge"),en=Yn||mi,zn=En(kn,"Gecko")&&!(En(kn.toLowerCase(),"webkit")&&!En(kn,"Edge"))&&!(En(kn,"Trident")||En(kn,"MSIE"))&&!En(kn,"Edge"),Tn=En(kn.toLowerCase(),"webkit")&&!En(kn,"Edge");function Yr(){var i=he.document;return i?i.documentMode:void 0}e:{var hi="",Zr=(i=kn,zn?/rv:([^\);]+)(\)|;)/.exec(i):Yn?/Edge\/([\d\.]+)/.exec(i):mi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Tn?/WebKit\/(\S+)/.exec(i):qr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Zr&&(hi=Zr?Zr[1]:""),mi){var ti=Yr();if(null!=ti&&ti>parseFloat(hi)){vn=String(ti);break e}}vn=hi}var Er={};var Ue=he.document&&mi&&(Yr()||parseInt(vn,10))||void 0,tt=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{he.addEventListener("test",pe,e),he.removeEventListener("test",pe,e)}catch{}return i}();function We(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function zt(i,e){if(We.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(zn){e:{try{dr(e.nodeName);var h=!0;break e}catch{}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Yt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&zt.Z.h.call(this)}}We.prototype.h=function(){this.defaultPrevented=!0},Ye(zt,We);var Yt={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var un="closure_listenable_"+(1e6*Math.random()|0),ar=0;function On(i,e,t,o,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=h,this.key=++ar,this.ca=this.fa=!1}function ir(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Un(i){this.src=i,this.g={},this.h=0}function Jn(i,e){var t=e.type;if(t in i.g){var m,o=i.g[t],h=vt(o,e);(m=0<=h)&&Array.prototype.splice.call(o,h,1),m&&(ir(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ar(i,e,t,o){for(var h=0;h<i.length;++h){var m=i[h];if(!m.ca&&m.listener==e&&m.capture==!!t&&m.ia==o)return h}return-1}Un.prototype.add=function(i,e,t,o,h){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var w=Ar(i,e,o,h);return-1<w?(e=i[w],t||(e.fa=!1)):((e=new On(e,this.src,m,!!o,h)).fa=t,i.push(e)),e};var Ur="closure_lm_"+(1e6*Math.random()|0),or={};function Xr(i,e,t,o,h){if(o&&o.once)return ut(i,e,t,o,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Xr(i,e[m],t,o,h);return null}return t=hr(t),i&&i[un]?i.N(e,t,le(o)?!!o.capture:!!o,h):on(i,e,t,!1,o,h)}function on(i,e,t,o,h,m){if(!e)throw Error("Invalid event type");var w=le(h)?!!h.capture:!!h,R=pn(i);if(R||(i[Ur]=R=new Un(i)),(t=R.add(e,t,o,w,m)).proxy)return t;if(o=function jn(){var e=Ut;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)tt||(h=w),void 0===h&&(h=!1),i.addEventListener(e.toString(),o,h);else if(i.attachEvent)i.attachEvent(pt(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function ut(i,e,t,o,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)ut(i,e[m],t,o,h);return null}return t=hr(t),i&&i[un]?i.O(e,t,le(o)?!!o.capture:!!o,h):on(i,e,t,!0,o,h)}function ke(i,e,t,o,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)ke(i,e[m],t,o,h);else o=le(o)?!!o.capture:!!o,t=hr(t),i&&i[un]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ar(m=i.g[e],t,o,h))&&(ir(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=pn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ar(e,t,o,h)),(t=-1<i?e[i]:null)&&Me(t))}function Me(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[un])Jn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(pt(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=pn(e))?(Jn(t,i),0==t.h&&(t.src=null,e[Ur]=null)):ir(i)}}}function pt(i){return i in or?or[i]:or[i]="on"+i}function Ut(i,e){if(i.ca)i=!0;else{e=new zt(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Me(i),i=t.call(o,e)}return i}function pn(i){return(i=i[Ur])instanceof Un?i:null}var qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function hr(i){return"function"==typeof i?i:(i[qn]||(i[qn]=function(e){return i.handleEvent(e)}),i[qn])}function gn(){Ie.call(this),this.i=new Un(this),this.P=this,this.I=null}function er(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new We(e,i);else if(e instanceof We)e.target=e.target||i;else{var h=e;gi(e=new We(o,i),h)}if(h=!0,t)for(var m=t.length-1;0<=m;m--){var w=e.g=t[m];h=tr(w,o,!0,e)&&h}if(h=tr(w=e.g=i,o,!0,e)&&h,h=tr(w,o,!1,e)&&h,t)for(m=0;m<t.length;m++)h=tr(w=e.g=t[m],o,!1,e)&&h}function tr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var w=e[m];if(w&&!w.ca&&w.capture==t){var R=w.listener,Y=w.ia||w.src;w.fa&&Jn(i.i,w),h=!1!==R.call(Y,o)&&h}}return h&&!o.defaultPrevented}Ye(gn,Ie),gn.prototype[un]=!0,gn.prototype.removeEventListener=function(i,e,t,o){ke(this,i,e,t,o)},gn.prototype.M=function(){if(gn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ir(t[o]);delete i.g[e],i.h--}}this.I=null},gn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},gn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var ri=he.JSON.stringify;function Fi(){var i=es;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var si,kr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Si,i=>i.reset());class Si{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ii(i){he.setTimeout(()=>{throw i},0)}function Ai(i,e){si||function Cr(){var i=he.Promise.resolve(void 0);si=function(){i.then(ts)}}(),xs||(si(),xs=!0),es.add(i,e)}var xs=!1,es=new class Vr{constructor(){this.h=this.g=null}add(e,t){const o=kr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ts(){for(var i;i=Fi();){try{i.h.call(i.g)}catch(t){ii(t)}var e=kr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}xs=!1}function Li(i,e){gn.call(this),this.h=i||1,this.g=e||he,this.j=Be(this.kb,this),this.l=Date.now()}function Bi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function xi(i,e,t){if("function"==typeof i)t&&(i=Be(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Be(i.handleEvent,i)}return 2147483647<Number(e)?-1:he.setTimeout(i,e||0)}function Ei(i){i.g=xi(()=>{i.g=null,i.i&&(i.i=!1,Ei(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ye(Li,gn),(ee=Li.prototype).da=!1,ee.S=null,ee.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),er(this,"tick"),this.da&&(Bi(this),this.start()))}},ee.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ee.M=function(){Li.Z.M.call(this),Bi(this),delete this.g};class te extends Ie{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ei(this)}M(){super.M(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(i){Ie.call(this),this.h=i,this.g={}}Ye(Ee,Ie);var nt=[];function dt(i,e,t,o){Array.isArray(t)||(t&&(nt[0]=t.toString()),t=nt);for(var h=0;h<t.length;h++){var m=Xr(e,t[h],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function we(i){Zn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Me(e)},i),i.g={}}function Pe(){this.g=!0}function Ot(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yn(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var h=o[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var w=1;w<h.length;w++)h[w]=""}}}return ri(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Ee.prototype.M=function(){Ee.Z.M.call(this),we(this)},Ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pe.prototype.Aa=function(){this.g=!1},Pe.prototype.info=function(){};var Fn={},Wn=null;function Nr(){return Wn=Wn||new gn}function wi(i){We.call(this,Fn.Ma,i)}function rt(i){const e=Nr();er(e,new wi(e,i))}function ct(i,e){We.call(this,Fn.STAT_EVENT,i),this.stat=e}function _t(i){const e=Nr();er(e,new ct(e,i))}function jt(i,e){We.call(this,Fn.Na,i),this.size=e}function tn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){i()},e)}Fn.Ma="serverreachability",Ye(wi,We),Fn.STAT_EVENT="statevent",Ye(ct,We),Fn.Na="timingevent",Ye(jt,We);var An={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ir={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Vi(){}function Wi(){}Vi.prototype.h=null;var Ys,ws={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Is(){We.call(this,"d")}function ns(){We.call(this,"c")}function Us(){}function Ks(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Ee(this),this.P=xo,this.W=new Li(i=en?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ms}function Ms(){this.i=null,this.g="",this.h=!1}Ye(Is,We),Ye(ns,We),Ye(Us,Vi),Us.prototype.g=function(){return new XMLHttpRequest},Us.prototype.i=function(){return{}},Ys=new Us;var xo=45e3,Ui={},ps={};function rs(i,e,t){i.K=1,i.v=ue(Mi(e)),i.s=t,i.U=!0,js(i,null)}function js(i,e){i.F=Date.now(),ls(i),i.A=Mi(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),j(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Ms,i.g=gu(i.l,t?e:null,!i.s),0<i.O&&(i.L=new te(Be(i.Ia,i,i.g),i.O)),dt(i.V,i.g,"readystatechange",i.gb),e=i.H?rr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),rt(1),function gt(i,e,t,o,h,m){i.info(function(){if(i.g)if(m)for(var w="",R=m.split("&"),Y=0;Y<R.length;Y++){var J=R[Y].split("=");if(1<J.length){var ye=J[0];J=J[1];var at=ye.split("_");w=2<=at.length&&"type"==at[1]?w+(ye+"=")+J+"&":w+(ye+"=redacted&")}}else w=null;else w=m;return"XMLHTTP REQ ("+o+") [attempt "+h+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Zs(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Qs(i,e,t){let h,o=!0;for(;!i.I&&i.C<t.length;){if(h=Go(i,t),h==ps){4==e&&(i.o=4,_t(14),o=!1),Ot(i.j,i.m,null,"[Incomplete Response]");break}if(h==Ui){i.o=4,_t(15),Ot(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Ot(i.j,i.m,h,null),Mo(i,h)}Zs(i)&&h!=ps&&h!=Ui&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,_t(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xs(e),e.L=!0,_t(11))):(Ot(i.j,i.m,t,"[Invalid Chunked Response]"),Rs(i),so(i))}function Go(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ps:(t=Number(e.substring(t,o)),isNaN(t)?Ui:(o+=1)+t>e.length?ps:(e=e.substr(o,t),i.C=o+t,e))}function ls(i){i.Y=Date.now()+i.P,qi(i,i.P)}function qi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=tn(Be(i.eb,i),e)}function jr(i){i.B&&(he.clearTimeout(i.B),i.B=null)}function so(i){0==i.l.G||i.I||Ll(i.l,i)}function Rs(i){jr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Bi(i.W),we(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Mo(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||fi(t.i,i)))if(t.I=i.N,!i.J&&fi(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var h=o;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Pi(t),hs(t)}Gs(t),_t(18)}}else t.ta=h[1],0<t.ta-t.U&&37500>h[2]&&t.N&&0==t.A&&!t.v&&(t.v=tn(Be(t.ab,t),6e3));if(1>=bi(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else ji(t,11)}else if((i.J||t.g==i)&&Pi(t),!Zt(e))for(h=t.Ca.g.parse(e),e=0;e<h.length;e++){let J=h[e];if(t.U=J[0],J=J[1],2==t.G)if("c"==J[0]){t.J=J[1],t.la=J[2];const ye=J[3];null!=ye&&(t.ma=ye,t.h.info("VER="+t.ma));const at=J[4];null!=at&&(t.za=at,t.h.info("SVER="+t.za));const kt=J[5];null!=kt&&"number"==typeof kt&&0<kt&&(t.K=o=1.5*kt,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const Kt=i.g;if(Kt){const nn=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nn){var m=o.i;!m.g&&(En(nn,"spdy")||En(nn,"quic")||En(nn,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&($i(m,m.h),m.h=null))}if(o.D){const Gn=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gn&&(o.sa=Gn,U(o.F,o.D,Gn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var w=i;if((o=t).oa=Xo(o,o.H?o.la:null,o.W),w.J){z(o.i,w);var R=w,Y=o.K;Y&&R.setTimeout(Y),R.B&&(jr(R),ls(R)),o.g=w}else yo(o);0<t.l.length&&Ss(t)}else"stop"!=J[0]&&"close"!=J[0]||ji(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ji(t,7):al(t):"noop"!=J[0]&&t.j&&t.j.wa(J),t.A=0)}rt(4)}catch{}}function Ro(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(fe(i)||"string"==typeof i)Vt(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(fe(i)||"string"==typeof i){t=[];for(var o=i.length,h=0;h<o;h++)t.push(h)}else for(h in t=[],o=0,i)t[o++]=h;o=function gs(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(fe(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),h=o.length;for(var m=0;m<h;m++)e.call(void 0,o[m],t&&t[m],i)}}function oi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof oi)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function na(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Hs(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var h={};for(t=e=0;e<i.g.length;)Hs(h,o=i.g[e])||(i.g[t++]=o,h[o]=1),e++;i.g.length=t}}function Hs(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ee=Ks.prototype).setTimeout=function(i){this.P=i},ee.gb=function(i){i=i.target;const e=this.L;e&&3==Yi(i)?e.l():this.Ia(i)},ee.Ia=function(i){try{if(i==this.g)e:{const ye=Yi(this.g);var e=this.g.Da();const at=this.g.ba();if(!(3>ye)&&(3!=ye||en||this.g&&(this.h.h||this.g.ga()||_i(this.g)))){this.I||4!=ye||7==e||rt(8==e||0>=at?3:2),jr(this);var t=this.g.ba();this.N=t;t:if(Zs(this)){var o=_i(this.g);i="";var h=o.length,m=4==Yi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rs(this),so(this);var w="";break t}this.h.i=new he.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==h-1});o.splice(0,h),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==t,function Lt(i,e,t,o,h,m,w){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+m+" "+w})}(this.j,this.u,this.A,this.m,this.X,ye,t),this.i){if(this.$&&!this.J){t:{if(this.g){var R,Y=this.g;if((R=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zt(R)){var J=R;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,_t(12),Rs(this),so(this);break e}Ot(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mo(this,t)}this.U?(Qs(this,ye,w),en&&this.i&&3==ye&&(dt(this.V,this.W,"tick",this.fb),this.W.start())):(Ot(this.j,this.m,w,null),Mo(this,w)),4==ye&&Rs(this),this.i&&!this.I&&(4==ye?Ll(this.l,this):(this.i=!1,ls(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,_t(12)):(this.o=0,_t(13)),Rs(this),so(this)}}}catch{}},ee.fb=function(){if(this.g){var i=Yi(this.g),e=this.g.ga();this.C<e.length&&(jr(this),Qs(this,i,e),this.i&&4!=i&&ls(this))}},ee.cancel=function(){this.I=!0,Rs(this)},ee.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Wt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rt(3),_t(17)),Rs(this),this.o=2,so(this)):qi(this,this.Y-i)},(ee=oi.prototype).R=function(){na(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ee.T=function(){return na(this),this.g.concat()},ee.get=function(i,e){return Hs(this.h,i)?this.h[i]:e},ee.set=function(i,e){Hs(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ee.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var h=t[o],m=this.get(h);i.call(e,m,h,this)}};var zo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ts(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ts){this.g=void 0!==e?e:i.g,Os(this,i.j),this.s=i.s,Ci(this,i.i),$(this,i.m),this.l=i.l,e=i.h;var t=new Ri;t.i=e.i,e.g&&(t.g=new oi(e.g),t.h=e.h),re(this,t),this.o=i.o}else i&&(t=String(i).match(zo))?(this.g=!!e,Os(this,t[1]||"",!0),this.s=Ct(t[2]||""),Ci(this,t[3]||"",!0),$(this,t[4]),this.l=Ct(t[5]||"",!0),re(this,t[6]||"",!0),this.o=Ct(t[7]||"")):(this.g=!!e,this.h=new Ri(null,this.g))}function Mi(i){return new Ts(i)}function Os(i,e,t){i.j=t?Ct(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ci(i,e,t){i.i=t?Ct(e,!0):e}function $(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function re(i,e,t){e instanceof Ri?(i.h=e,function xt(i,e){e&&!i.j&&(E(i),i.i=null,i.g.forEach(function(t,o){var h=o.toLowerCase();o!=h&&(H(this,o),j(this,h,t))},i)),i.j=e}(i.h,i.g)):(t||(e=_n(e,vi)),i.h=new Ri(e,i.g))}function U(i,e,t){i.h.set(e,t)}function ue(i){return U(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ct(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function _n(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ai),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ai(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ts.prototype.toString=function(){var i=[],e=this.j;e&&i.push(_n(e,Jr,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(_n(e,Jr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(_n(t,"/"==t.charAt(0)?br:li,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",_n(t,Gr)),i.join("")};var Jr=/[#\/\?@]/g,li=/[#\?:]/g,br=/[#\?]/g,vi=/[#\?@]/g,Gr=/#/g;function Ri(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function E(i){i.g||(i.g=new oi,i.h=0,i.i&&function Ii(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),h=null;if(0<=o){var m=i[t].substring(0,o);h=i[t].substring(o+1)}else m=i[t];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function H(i,e){E(i),e=ie(i,e),Hs(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Hs((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&na(i)))}function I(i,e){return E(i),e=ie(i,e),Hs(i.g.h,e)}function j(i,e,t){H(i,e),0<t.length&&(i.i=null,i.g.set(ie(i,e),Dn(t)),i.h+=t.length)}function ie(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Mn(i){this.l=i||fr,i=he.PerformanceNavigationTiming?0<(i=he.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(he.g&&he.g.Ea&&he.g.Ea()&&he.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ee=Ri.prototype).add=function(i,e){E(this),this.i=null,i=ie(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ee.forEach=function(i,e){E(this),this.g.forEach(function(t,o){Vt(t,function(h){i.call(e,h,o,this)},this)},this)},ee.T=function(){E(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var h=i[o],m=0;m<h.length;m++)t.push(e[o]);return t},ee.R=function(i){E(this);var e=[];if("string"==typeof i)I(this,i)&&(e=hn(e,this.g.get(ie(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=hn(e,i[t])}return e},ee.set=function(i,e){return E(this),this.i=null,I(this,i=ie(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ee.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],h=encodeURIComponent(String(o));o=this.R(o);for(var m=0;m<o.length;m++){var w=h;""!==o[m]&&(w+="="+encodeURIComponent(String(o[m]))),i.push(w)}}return this.i=i.join("&")};var fr=10;function Mr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function bi(i){return i.h?1:i.g?i.g.size:0}function fi(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function $i(i,e){i.g?i.g.add(e):i.h=e}function z(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function V(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Dn(i.i)}function F(){}function ce(){this.g=new F}function Bt(i,e,t){const o=t||"";try{Ro(i,function(h,m){let w=h;le(h)&&(w=ri(h)),e.push(o+m+"="+encodeURIComponent(w))})}catch(h){throw e.push(o+"type="+encodeURIComponent("_badmap")),h}}function ui(i,e,t,o,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(o)}catch{}}function us(i){this.l=i.$b||null,this.j=i.ib||!1}function Ps(i,e){gn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mn.prototype.cancel=function(){if(this.i=V(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},F.prototype.stringify=function(i){return he.JSON.stringify(i,void 0)},F.prototype.parse=function(i){return he.JSON.parse(i,void 0)},Ye(us,Vi),us.prototype.g=function(){return new Ps(this.l,this.j)},us.prototype.i=function(i){return function(){return i}}({}),Ye(Ps,gn);var fo=0;function Oo(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function po(i){i.readyState=4,i.l=null,i.j=null,i.A=null,go(i)}function go(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ee=Ps.prototype).open=function(i,e){if(this.readyState!=fo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,go(this)},ee.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||he).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,po(this)),this.readyState=fo},ee.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,go(this)),this.g&&(this.readyState=3,go(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof he.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oo(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ee.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?po(this):go(this),3==this.readyState&&Oo(this)}},ee.Ua=function(i){this.g&&(this.response=this.responseText=i,po(this))},ee.Ta=function(i){this.g&&(this.response=i,po(this))},ee.ha=function(){this.g&&po(this)},ee.setRequestHeader=function(i,e){this.v.append(i,e)},ee.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ee.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ra=he.JSON.parse;function cs(i){gn.call(this),this.headers=new oi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$a,this.K=this.L=!1}Ye(cs,gn);var $a="",Wo=/^https?$/i,Ol=["POST","PUT"];function Pl(i){return"content-type"==i.toLowerCase()}function kl(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Zl(i),Po(i)}function Zl(i){i.D||(i.D=!0,er(i,"complete"),er(i,"error"))}function Nl(i){if(i.h&&typeof qe<"u"&&(!i.C[1]||4!=Yi(i)||2!=i.ba()))if(i.v&&4==Yi(i))xi(i.Fa,0,i);else if(er(i,"readystatechange"),4==Yi(i)){i.h=!1;try{const R=i.ba();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===R){var h=String(i.H).match(zo)[1]||null;if(!h&&he.self&&he.self.location){var m=he.self.location.protocol;h=m.substr(0,m.length-1)}o=!Wo.test(h?h.toLowerCase():"")}t=o}if(t)er(i,"complete"),er(i,"success");else{i.m=6;try{var w=2<Yi(i)?i.g.statusText:""}catch{w=""}i.j=w+" ["+i.ba()+"]",Zl(i)}}finally{Po(i)}}}function Po(i,e){if(i.g){ds(i);const t=i.g,o=i.C[0]?pe:null;i.g=null,i.C=null,e||er(i,"ready");try{t.onreadystatechange=o}catch{}}}function ds(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(he.clearTimeout(i.A),i.A=null)}function Yi(i){return i.g?i.g.readyState:0}function _i(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case $a:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function Ql(i){let e="";return Zn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):U(i,e,t))}function mo(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function fu(i){this.za=0,this.l=[],this.h=new Pe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mo("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mo("baseRetryDelayMs",5e3,i),this.$a=mo("retryDelaySeedMs",1e4,i),this.Ya=mo("forwardChannelMaxRetries",2,i),this.ra=mo("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Mn(i&&i.concurrentRequestLimit),this.Ca=new ce,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function al(i){if(va(i),3==i.G){var e=i.V++,t=Mi(i.F);U(t,"SID",i.J),U(t,"RID",e),U(t,"TYPE","terminate"),qo(i,t),(e=new Ks(i,i.h,e,void 0)).K=2,e.v=ue(Mi(t)),t=!1,he.navigator&&he.navigator.sendBeacon&&(t=he.navigator.sendBeacon(e.v.toString(),"")),!t&&he.Image&&((new Image).src=e.v,t=!0),t||(e.g=gu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ls(e)}ll(i)}function hs(i){i.g&&(Xs(i),i.g.cancel(),i.g=null)}function va(i){hs(i),i.u&&(he.clearTimeout(i.u),i.u=null),Pi(i),i.i.cancel(),i.m&&("number"==typeof i.m&&he.clearTimeout(i.m),i.m=null)}function Fl(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ss(i)}function Ss(i){Mr(i.i)||i.m||(i.m=!0,Ai(i.Ha,i),i.C=0)}function Yu(i,e){var t;t=e?e.m:i.V++;const o=Mi(i.F);U(o,"SID",i.J),U(o,"RID",t),U(o,"AID",i.U),qo(i,o),i.o&&i.s&&ya(o,i.o,i.s),t=new Ks(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=ia(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),$i(i.i,t),rs(t,o,e)}function qo(i,e){i.j&&Ro({},function(t,o){U(e,o,t)})}function ia(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Be(i.j.Oa,i.j,i):null;e:{var h=i.l;let m=-1;for(;;){const w=["count="+t];-1==m?0<t?(m=h[0].h,w.push("ofs="+m)):m=0:w.push("ofs="+m);let R=!0;for(let Y=0;Y<t;Y++){let J=h[Y].h;const ye=h[Y].g;if(J-=m,0>J)m=Math.max(0,h[Y].h-100),R=!1;else try{Bt(ye,w,"req"+J+"_")}catch{o&&o(ye)}}if(R){o=w.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function yo(i){i.g||i.u||(i.Y=1,Ai(i.Ga,i),i.A=0)}function Gs(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=tn(Be(i.Ga,i),pu(i,i.A)),i.A++,0))}function Xs(i){null!=i.B&&(he.clearTimeout(i.B),i.B=null)}function sa(i){i.g=new Ks(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Mi(i.oa);U(e,"RID","rpc"),U(e,"SID",i.J),U(e,"CI",i.N?"0":"1"),U(e,"AID",i.U),qo(i,e),U(e,"TYPE","xmlhttp"),i.o&&i.s&&ya(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=ue(Mi(e)),t.s=null,t.U=!0,js(t,i)}function Pi(i){null!=i.v&&(he.clearTimeout(i.v),i.v=null)}function Ll(i,e){var t=null;if(i.g==e){Pi(i),Xs(i),i.g=null;var o=2}else{if(!fi(i.i,e))return;t=e.D,z(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;er(o=Nr(),new jt(o,t,e,h)),Ss(i)}else yo(i);else if(3==(h=e.o)||0==h&&0<i.I||!(1==o&&function ks(i,e){return!(bi(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=tn(Be(i.Ha,i,e),pu(i,i.C)),i.C++,0)))}(i,e)||2==o&&Gs(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),h){case 1:ji(i,5);break;case 4:ji(i,10);break;case 3:ji(i,6);break;default:ji(i,2)}}function pu(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function ji(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Be(i.jb,i);t||(t=new Ts("//www.google.com/images/cleardot.gif"),he.location&&"http"==he.location.protocol||Os(t,"https"),ue(t)),function Pn(i,e){const t=new Pe;if(he.Image){const o=new Image;o.onload=be(ui,t,o,"TestLoadImage: loaded",!0,e),o.onerror=be(ui,t,o,"TestLoadImage: error",!1,e),o.onabort=be(ui,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=be(ui,t,o,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else _t(2);i.G=0,i.j&&i.j.va(e),ll(i),va(i)}function ll(i){i.G=0,i.I=-1,i.j&&((0!=V(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Dn(i.l),i.l.length=0),i.j.ua())}function Xo(i,e,t){let o=function lt(i){return i instanceof Ts?Mi(i):new Ts(i,void 0)}(t);if(""!=o.i)e&&Ci(o,e+"."+o.i),$(o,o.m);else{const h=he.location;o=function Ft(i,e,t,o){var h=new Ts(null,void 0);return i&&Os(h,i),e&&Ci(h,e),t&&$(h,t),o&&(h.l=o),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,t)}return i.aa&&Zn(i.aa,function(h,m){U(o,m,h)}),t=i.sa,(e=i.D)&&t&&U(o,e,t),U(o,"VER",i.ma),qo(i,o),o}function gu(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cs(t&&i.Ba&&!i.qa?new us({ib:!0}):i.qa)).L=i.H,e}function _a(){}function oa(){if(mi&&!(10<=Number(Ue)))throw Error("Environmental error: no available transport.")}function Ns(i,e){gn.call(this),this.g=new fu(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Zt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new is(this)}function Ua(i){Is.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Jo(){ns.call(this),this.status=1}function is(i){this.g=i}(ee=cs.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ys.g(),this.C=function xr(i){return i.h||(i.h=i.i())}(this.u?this.u:Ys),this.g.onreadystatechange=Be(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void kl(this,m)}i=t||"";const h=new oi(this.headers);o&&Ro(o,function(m,w){h.set(w,m)}),o=function fn(i){e:{var e=Pl;const t=i.length,o="string"==typeof i?i.split(""):i;for(let h=0;h<t;h++)if(h in o&&e.call(void 0,o[h],h,i)){e=h;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(h.T()),t=he.FormData&&i instanceof he.FormData,!(0<=vt(Ol,e))||o||t||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(m,w){this.g.setRequestHeader(w,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ds(this),0<this.B&&((this.K=function ol(i){return mi&&function Pr(){return function ei(i){var e=Er;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=In(String(vn)).split("."),t=In("9").split("."),o=Math.max(e.length,t.length);for(let w=0;0==i&&w<o;w++){var h=e[w]||"",m=t[w]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;i=Qt(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||Qt(0==h[2].length,0==m[2].length)||Qt(h[2],m[2]),h=h[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Be(this.pa,this)):this.A=xi(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){kl(this,m)}},ee.pa=function(){typeof qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,er(this,"timeout"),this.abort(8))},ee.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,er(this,"complete"),er(this,"abort"),Po(this))},ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Po(this,!0)),cs.Z.M.call(this)},ee.Fa=function(){this.s||(this.F||this.v||this.l?Nl(this):this.cb())},ee.cb=function(){Nl(this)},ee.ba=function(){try{return 2<Yi(this)?this.g.status:-1}catch{return-1}},ee.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ee.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ra(e)}},ee.Da=function(){return this.m},ee.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ee=fu.prototype).ma=8,ee.G=1,ee.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch{}},ee.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const h=new Ks(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=rr(m),gi(m,this.P)):m=this.P),null===this.o&&(h.H=m),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ia(this,h,e),U(t=Mi(this.F),"RID",i),U(t,"CVER",22),this.D&&U(t,"X-HTTP-Session-Id",this.D),qo(this,t),this.o&&m&&ya(t,this.o,m),$i(this.i,h),this.Ra&&U(t,"TYPE","init"),this.ja?(U(t,"$req",e),U(t,"SID","null"),h.$=!0,rs(h,t,null)):rs(h,t,e),this.G=2}}else 3==this.G&&(i?Yu(this,i):0==this.l.length||Mr(this.i)||Yu(this))},ee.Ga=function(){if(this.u=null,sa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=tn(Be(this.bb,this),i)}},ee.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_t(10),hs(this),sa(this))},ee.ab=function(){null!=this.v&&(this.v=null,hs(this),Gs(this),_t(19))},ee.jb=function(i){i?(this.h.info("Successfully pinged google.com"),_t(2)):(this.h.info("Failed to ping google.com"),_t(1))},(ee=_a.prototype).xa=function(){},ee.wa=function(){},ee.va=function(){},ee.ua=function(){},ee.Oa=function(){},oa.prototype.g=function(i,e){return new Ns(i,e)},Ye(Ns,gn),Ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ai(Be(i.hb,i,e))),_t(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Xo(i,null,i.W),Ss(i)},Ns.prototype.close=function(){al(this.g)},Ns.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Fl(this.g,e)}else this.v?((e={}).__data__=ri(i),Fl(this.g,e)):Fl(this.g,i)},Ns.prototype.M=function(){this.g.j=null,delete this.j,al(this.g),delete this.g,Ns.Z.M.call(this)},Ye(Ua,Is),Ye(Jo,ns),Ye(is,_a),is.prototype.xa=function(){er(this.g,"a")},is.prototype.wa=function(i){er(this.g,new Ua(i))},is.prototype.va=function(i){er(this.g,new Jo(i))},is.prototype.ua=function(){er(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,An.NO_ERROR=0,An.TIMEOUT=8,An.HTTP_ERROR=6,Ir.COMPLETE="complete",Wi.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",gn.prototype.listen=gn.prototype.N,cs.prototype.listenOnce=cs.prototype.O,cs.prototype.getLastError=cs.prototype.La,cs.prototype.getLastErrorCode=cs.prototype.Da,cs.prototype.getStatus=cs.prototype.ba,cs.prototype.getResponseJson=cs.prototype.Qa,cs.prototype.getResponseText=cs.prototype.ga,cs.prototype.send=cs.prototype.ea;var ea=et.createWebChannelTransport=function(){return new oa},ul=et.getStatEventTarget=function(){return Nr()},vo=et.ErrorCode=An,Rc=et.EventType=Ir,cl=et.Event=Fn,ki=et.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Xl=et.FetchXmlHttpFactory=us,ni=et.WebChannel=Wi,ja=et.XhrIo=cs;const _o="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let Yo="9.9.0";const Eo=new Xe.Yd("@firebase/firestore");function Ea(){return Eo.logLevel}function rn(i,...e){if(Eo.logLevel<=Xe.in.DEBUG){const t=e.map(ko);Eo.debug(`Firestore (${Yo}): ${i}`,...t)}}function Oi(i,...e){if(Eo.logLevel<=Xe.in.ERROR){const t=e.map(ko);Eo.error(`Firestore (${Yo}): ${i}`,...t)}}function wa(i,...e){if(Eo.logLevel<=Xe.in.WARN){const t=e.map(ko);Eo.warn(`Firestore (${Yo}): ${i}`,...t)}}function ko(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Ln(i="Unexpected state"){const e=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: `+i;throw Oi(e),new Error(e)}function Hn(i,e){i||Ln()}function wn(i,e){return i}const Nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends Ge.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Jl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class yu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vu{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let h=this.i;const m=J=>this.i!==h?(h=this.i,t(J)):Promise.resolve();let w=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Di,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const J=w;e.enqueueRetryable((0,Ae.Z)(function*(){yield J.promise,yield m(o.currentUser)}))},Y=J=>{rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(J=>Y(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?Y(J):(rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Di)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Hn("string"==typeof o.accessToken),new Jl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Hn(null===e||"string"==typeof e),new Ki(e)}}class Ca{constructor(e,t,o){this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class hl{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Ca(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ba{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=m=>{null!=m.error&&rn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const w=m.token!==this.p;return this.p=m.token,rn("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const h=m=>{rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?h(m):rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Hn("string"==typeof t.token),this.p=t.token,new ba(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _u(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ta{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const h=_u(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<t&&(o+=e.charAt(h[m]%e.length))}return o}}function lr(i,e){return i<e?-1:i>e?1:0}function Ha(i,e,t){return i.length===e.length&&i.every((o,h)=>t(o,e[h]))}function ta(i){return i+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jt(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jt(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jt(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Qn(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pr(e)}static min(){return new pr(new Qn(0,0))}static max(){return new pr(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wo{constructor(e,t,o){void 0===t?t=0:t>e.length&&Ln(),void 0===o?o=e.length-t:o>e.length-t&&Ln(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===wo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wo?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let h=0;h<o;h++){const m=e.get(h),w=t.get(h);if(m<w)return-1;if(m>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qr extends wo{construct(e,t,o){return new Qr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(h=>h.length>0))}return new Qr(t)}static emptyPath(){return new Qr([])}}const Oc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends wo{construct(e,t,o){return new ms(e,t,o)}static isValidIdentifier(e){return Oc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ms(["__name__"])}static fromServerFormat(e){const t=[];let o="",h=0;const m=()=>{if(0===o.length)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let w=!1;for(;h<e.length;){const R=e[h];if("\\"===R){if(h+1===e.length)throw new Jt(Nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Y=e[h+1];if("\\"!==Y&&"."!==Y&&"`"!==Y)throw new Jt(Nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=Y,h+=2}else"`"===R?(w=!w,h++):"."!==R||w?(o+=R,h++):(m(),h++)}if(m(),w)throw new Jt(Nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(t)}static emptyPath(){return new ms([])}}class Cn{constructor(e){this.path=e}static fromPath(e){return new Cn(Qr.fromString(e))}static fromName(e){return new Cn(Qr.fromString(e).popFirst(5))}static empty(){return new Cn(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cn(new Qr(e.slice()))}}class x{constructor(e,t,o,h){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=h}}function A(i){return i.fields.find(e=>2===e.kind)}function D(i){return i.fields.filter(e=>2!==e.kind)}x.UNKNOWN_ID=-1;class L{constructor(e,t){this.fieldPath=e,this.kind=t}}class q{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new q(0,it.min())}}function oe(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,h=pr.fromTimestamp(1e9===o?new Qn(t+1,0):new Qn(t,o));return new it(h,Cn.empty(),e)}function Oe(i){return new it(i.readTime,i.key,-1)}class it{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new it(pr.min(),Cn.empty(),-1)}static max(){return new it(pr.max(),Cn.empty(),-1)}}function Ht(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Cn.comparator(i.documentKey,e.documentKey),0!==t?t:lr(i.largestBatchId,e.largestBatchId))}const ln="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xn(i){return ci.apply(this,arguments)}function ci(){return ci=(0,Ae.Z)(function*(i){if(i.code!==Nt.FAILED_PRECONDITION||i.message!==ln)throw i;rn("LocalStore","Unexpectedly lost primary lease")}),ci.apply(this,arguments)}class It{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new It((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(t,m).next(o,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof It?t:It.resolve(t)}catch(t){return It.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):It.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):It.reject(t)}static resolve(e){return new It((t,o)=>{t(e)})}static reject(e){return new It((t,o)=>{o(e)})}static waitFor(e){return new It((t,o)=>{let h=0,m=0,w=!1;e.forEach(R=>{++h,R.next(()=>{++m,w&&m===h&&t()},Y=>o(Y))}),w=!0,m===h&&t()})}static or(e){let t=It.resolve(!1);for(const o of e)t=t.next(h=>h?It.resolve(h):o());return t}static forEach(e,t){const o=[];return e.forEach((h,m)=>{o.push(t.call(this,h,m))}),this.waitFor(o)}static mapArray(e,t){return new It((o,h)=>{const m=e.length,w=new Array(m);let R=0;for(let Y=0;Y<m;Y++){const J=Y;t(e[J]).next(ye=>{w[J]=ye,++R,R===m&&o(w)},ye=>h(ye))}})}static doWhile(e,t){return new It((o,h)=>{const m=()=>{!0===e()?t().next(()=>{m()},h):o()};m()})}}class Cs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Di,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Sa(e,t.error)):this.T.resolve()},this.transaction.onerror=o=>{const h=zr(o.target.error);this.T.reject(new Sa(e,h))}}static open(e,t,o,h){try{return new Cs(t,e.transaction(h,o))}catch(m){throw new Sa(t,m)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(rn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new No(t)}}class Fs{constructor(e,t,o){this.name=e,this.version=t,this.P=o,12.2===Fs.v((0,Ge.z$)())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rn("SimpleDb","Removing database:",e),ys(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Ge.hl)())return!1;if(Fs.S())return!0;const e=(0,Ge.z$)(),t=Fs.v(e),o=0<t&&t<10,h=Fs.D(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static D(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}k(e){var t=this;return(0,Ae.Z)(function*(){return t.db||(rn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,h)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=w=>{o(w.target.result)},m.onblocked=()=>{h(new Sa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=w=>{const R=w.target.error;h("VersionError"===R.name?new Jt(Nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Jt(Nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Sa(e,R))},m.onupgradeneeded=w=>{rn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.P.O(w.target.result,m.transaction,w.oldVersion,t.version).next(()=>{rn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=o=>t.M(o)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,h){var m=this;return(0,Ae.Z)(function*(){const w="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.k(e);const Y=Cs.open(m.db,e,w?"readonly":"readwrite",o),J=h(Y).next(ye=>(Y.R(),ye)).catch(ye=>(Y.abort(ye),It.reject(ye))).toPromise();return J.catch(()=>{}),yield Y.A,J}catch(Y){const J=Y,ye="FirebaseError"!==J.name&&R<3;if(rn("SimpleDb","Transaction failed with error:",J.message,"Retrying:",ye),m.close(),!ye)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Eu{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ys(this.$.delete())}}class Sa extends Jt{constructor(e,t){super(Nt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zs(i){return"IndexedDbTransactionError"===i.name}class No{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(rn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),ys(o)}add(e){return rn("SimpleDb","ADD",this.store.name,e,e),ys(this.store.add(e))}get(e){return ys(this.store.get(e)).next(t=>(void 0===t&&(t=null),rn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return rn("SimpleDb","DELETE",this.store.name,e),ys(this.store.delete(e))}count(){return rn("SimpleDb","COUNT",this.store.name),ys(this.store.count())}K(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const h=this.cursor(o),m=[];return this.G(h,(w,R)=>{m.push(R)}).next(()=>m)}{const h=this.store.getAll(o.range);return new It((m,w)=>{h.onerror=R=>{w(R.target.error)},h.onsuccess=R=>{m(R.target.result)}})}}j(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new It((h,m)=>{o.onerror=w=>{m(w.target.error)},o.onsuccess=w=>{h(w.target.result)}})}W(e,t){rn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.H=!1;const h=this.cursor(o);return this.G(h,(m,w,R)=>R.delete())}J(e,t){let o;t?o=e:(o={},t=e);const h=this.cursor(o);return this.G(h,t)}Y(e){const t=this.cursor({});return new It((o,h)=>{t.onerror=m=>{const w=zr(m.target.error);h(w)},t.onsuccess=m=>{const w=m.target.result;w?e(w.primaryKey,w.value).next(R=>{R?w.continue():o()}):o()}})}G(e,t){const o=[];return new It((h,m)=>{e.onerror=w=>{m(w.target.error)},e.onsuccess=w=>{const R=w.target.result;if(!R)return void h();const Y=new Eu(R),J=t(R.primaryKey,R.value,Y);if(J instanceof It){const ye=J.catch(at=>(Y.done(),It.reject(at)));o.push(ye)}Y.isDone?h():null===Y.U?R.continue():R.continue(Y.U)}}).next(()=>It.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.H?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ys(i){return new It((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const h=zr(o.target.error);t(h)}})}let wu=!1;function zr(i){const e=Fs.v((0,Ge.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wu||(wu=!0,setTimeout(()=>{throw o},0)),o}}return i}class pi{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;rn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ae.Z)(function*(){t.task=null;try{rn("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(o){zs(o)?rn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield xn(o)}yield t.Z(1)}))}}class Dr{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.et(o,e))})()}et(e,t){const o=new Set;let h=t,m=!0;return It.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!o.has(w))return rn("IndexBackiller",`Processing collection: ${w}`),this.nt(e,w,h).next(R=>{h-=R,o.add(w)});m=!1})).next(()=>t-h)}nt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,o).next(m=>{const w=m.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.st(h,m)).next(R=>(rn("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>w.size)}))}st(e,t){let o=e;return t.changes.forEach((h,m)=>{const w=Oe(m);Ht(w,o)>0&&(o=w)}),new it(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.it(o),this.rt=o=>t.writeSequenceNumber(o))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Ti(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function aa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function eu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}ss.ot=-1;class Zi{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new Zi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new Zi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(0===h)return t+o.left.size;h<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tu(this.root,e,this.comparator,!0)}}class tu{constructor(e,t,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?o(e.key,t):1,t&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,o,h,m){this.key=e,this.value=t,this.color=o??$r.RED,this.left=h??$r.EMPTY,this.right=m??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,h,m){return new $r(e??this.key,t??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,t,o),null):0===m?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return $r.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ln();const e=this.left.check();if(e!==this.right.check())throw Ln();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Ln()}get value(){throw Ln()}get color(){throw Ln()}get left(){throw Ln()}get right(){throw Ln()}copy(i,e,t,o,h){return this}insert(i,e,t){return new $r(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new Zi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Js(this.data.getIterator())}getIteratorFrom(e){return new Js(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=o.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class Js{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Io(i){return i.hasNext()?i.getNext():void 0}class vs{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new vs([])}unionWith(e){let t=new Nn(ms.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ls(t)}static fromUint8Array(e){const t=function(o){let h="";for(let m=0;m<o.length;++m)h+=String.fromCharCode(o[m]);return h}(e);return new Ls(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ls.EMPTY_BYTE_STRING=new Ls("");const Ga=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(i){if(Hn(!!i),"string"==typeof i){let e=0;const t=Ga.exec(i);if(Hn(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:yi(i.seconds),nanos:yi(i.nanos)}}function yi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function eo(i){return"string"==typeof i?Ls.fromBase64String(i):Ls.fromUint8Array(i)}function za(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fl(i){const e=i.mapValue.fields.__previous_value__;return za(e)?fl(e):e}function Qi(i){const e=Aa(i.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class Pc{constructor(e,t,o,h,m,w,R,Y){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=w,this.autoDetectLongPolling=R,this.useFetchStreams=Y}}class Wa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}function N(i){return null==i}function G(i){return 0===i&&1/i==-1/0}function ne(i){return"number"==typeof i&&Number.isInteger(i)&&!G(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Ne={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ot={nullValue:"NULL_VALUE"};function Mt(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?za(i)?4:pl(i)?9007199254740991:10:Ln()}function qt(i,e){if(i===e)return!0;const t=Mt(i);if(t!==Mt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Qi(i).isEqual(Qi(e));case 3:return function(o,h){if("string"==typeof o.timestampValue&&"string"==typeof h.timestampValue&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const m=Aa(o.timestampValue),w=Aa(h.timestampValue);return m.seconds===w.seconds&&m.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,eo(i.bytesValue).isEqual(eo(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,h){return yi(o.geoPointValue.latitude)===yi(h.geoPointValue.latitude)&&yi(o.geoPointValue.longitude)===yi(h.geoPointValue.longitude)}(i,e);case 2:return function(o,h){if("integerValue"in o&&"integerValue"in h)return yi(o.integerValue)===yi(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const m=yi(o.doubleValue),w=yi(h.doubleValue);return m===w?G(m)===G(w):isNaN(m)&&isNaN(w)}return!1}(i,e);case 9:return Ha(i.arrayValue.values||[],e.arrayValue.values||[],qt);case 10:return function(o,h){const m=o.mapValue.fields||{},w=h.mapValue.fields||{};if(Ti(m)!==Ti(w))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===w[R]||!qt(m[R],w[R])))return!1;return!0}(i,e);default:return Ln()}var h}function bn(i,e){return void 0!==(i.values||[]).find(t=>qt(t,e))}function Rn(i,e){if(i===e)return 0;const t=Mt(i),o=Mt(e);if(t!==o)return lr(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return lr(i.booleanValue,e.booleanValue);case 2:return function(h,m){const w=yi(h.integerValue||h.doubleValue),R=yi(m.integerValue||m.doubleValue);return w<R?-1:w>R?1:w===R?0:isNaN(w)?isNaN(R)?0:-1:1}(i,e);case 3:return mr(i.timestampValue,e.timestampValue);case 4:return mr(Qi(i),Qi(e));case 5:return lr(i.stringValue,e.stringValue);case 6:return function(h,m){const w=eo(h),R=eo(m);return w.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(h,m){const w=h.split("/"),R=m.split("/");for(let Y=0;Y<w.length&&Y<R.length;Y++){const J=lr(w[Y],R[Y]);if(0!==J)return J}return lr(w.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,m){const w=lr(yi(h.latitude),yi(m.latitude));return 0!==w?w:lr(yi(h.longitude),yi(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,m){const w=h.values||[],R=m.values||[];for(let Y=0;Y<w.length&&Y<R.length;++Y){const J=Rn(w[Y],R[Y]);if(J)return J}return lr(w.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===Ne.mapValue&&m===Ne.mapValue)return 0;if(h===Ne.mapValue)return 1;if(m===Ne.mapValue)return-1;const w=h.fields||{},R=Object.keys(w),Y=m.fields||{},J=Object.keys(Y);R.sort(),J.sort();for(let ye=0;ye<R.length&&ye<J.length;++ye){const at=lr(R[ye],J[ye]);if(0!==at)return at;const kt=Rn(w[R[ye]],Y[J[ye]]);if(0!==kt)return kt}return lr(R.length,J.length)}(i.mapValue,e.mapValue);default:throw Ln()}}function mr(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return lr(i,e);const t=Aa(i),o=Aa(e),h=lr(t.seconds,o.seconds);return 0!==h?h:lr(t.nanos,o.nanos)}function nr(i){return Xn(i)}function Xn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const h=Aa(o);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?eo(i.bytesValue).toBase64():"referenceValue"in i?Cn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let h="[",m=!0;for(const w of o.values||[])m?m=!1:h+=",",h+=Xn(w);return h+"]"}(i.arrayValue):"mapValue"in i?function(o){const h=Object.keys(o.fields||{}).sort();let m="{",w=!0;for(const R of h)w?w=!1:m+=",",m+=`${R}:${Xn(o.fields[R])}`;return m+"}"}(i.mapValue):Ln();var e}function Hr(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ao(i){return!!i&&"integerValue"in i}function la(i){return!!i&&"arrayValue"in i}function qa(i){return!!i&&"nullValue"in i}function Ko(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ya(i){return!!i&&"mapValue"in i}function Ka(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return aa(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Ka(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ka(i.arrayValue.values[t]);return e}return Object.assign({},i)}function pl(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Zo(i){return"nullValue"in i?ot:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Hr(Wa.empty(),Cn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Ln()}function Bl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Hr(Wa.empty(),Cn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ne:Ln()}function kc(i,e){const t=Rn(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ud(i,e){const t=Rn(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class bo{constructor(e){this.value=e}static empty(){return new bo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=ms.emptyPath(),o={},h=[];e.forEach((w,R)=>{if(!t.isImmediateParentOf(R)){const Y=this.getFieldsMap(t);this.applyChanges(Y,o,h),o={},h=[],t=R.popLast()}w?o[R.lastSegment()]=Ka(w):h.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,o,h)}delete(e){const t=this.field(e.popLast());Ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=t.mapValue.fields[e.get(o)];Ya(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,o){aa(t,(h,m)=>e[h]=m);for(const h of o)delete e[h]}clone(){return new bo(Ka(this.value))}}function rf(i){const e=[];return aa(i.fields,(t,o)=>{const h=new ms([t]);if(Ya(o)){const m=rf(o.mapValue).fields;if(0===m.length)e.push(h);else for(const w of m)e.push(h.child(w))}else e.push(h)}),new vs(e)}class ur{constructor(e,t,o,h,m,w){this.key=e,this.documentType=t,this.version=o,this.readTime=h,this.data=m,this.documentState=w}static newInvalidDocument(e){return new ur(e,0,pr.min(),pr.min(),bo.empty(),0)}static newFoundDocument(e,t,o){return new ur(e,1,t,pr.min(),o,0)}static newNoDocument(e,t){return new ur(e,2,t,pr.min(),bo.empty(),0)}static newUnknownDocument(e,t){return new ur(e,3,t,pr.min(),bo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sf{constructor(e,t=null,o=[],h=[],m=null,w=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=w,this.endAt=R,this.ut=null}}function Nc(i,e=null,t=[],o=[],h=null,m=null,w=null){return new sf(i,e,t,o,h,m,w)}function Za(i){const e=wn(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(h=o).field.canonicalString()+h.op.toString()+nr(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),N(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>nr(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>nr(o)).join(",")),e.ut=t}return e.ut}function Qa(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!nu(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(o=e.filters[h]).op||!t.field.isEqual(o.field)||!qt(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ah(i.startAt,e.startAt)&&ah(i.endAt,e.endAt)}function Xa(i){return Cn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function gl(i,e){return i.filters.filter(t=>t instanceof _s&&t.field.isEqual(e))}function Fr(i,e,t){let o=ot,h=!0;for(const m of gl(i,e)){let w=ot,R=!0;switch(m.op){case"<":case"<=":w=Zo(m.value);break;case"==":case"in":case">=":w=m.value;break;case">":w=m.value,R=!1;break;case"!=":case"not-in":w=ot}kc({value:o,inclusive:h},{value:w,inclusive:R})<0&&(o=w,h=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const w=t.position[m];kc({value:o,inclusive:h},{value:w,inclusive:t.inclusive})<0&&(o=w,h=t.inclusive);break}return{value:o,inclusive:h}}function ih(i,e,t){let o=Ne,h=!0;for(const m of gl(i,e)){let w=Ne,R=!0;switch(m.op){case">=":case">":w=Bl(m.value),R=!1;break;case"==":case"in":case"<=":w=m.value;break;case"<":w=m.value,R=!1;break;case"!=":case"not-in":w=Ne}ud({value:o,inclusive:h},{value:w,inclusive:R})>0&&(o=w,h=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const w=t.position[m];ud({value:o,inclusive:h},{value:w,inclusive:t.inclusive})>0&&(o=w,h=t.inclusive);break}return{value:o,inclusive:h}}class _s extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,o):new Fc(e,t,o):"array-contains"===t?new uf(e,o):"in"===t?new Vl(e,o):"not-in"===t?new Ku(e,o):"array-contains-any"===t?new oh(e,o):new _s(e,t,o)}static ct(e,t,o){return"in"===t?new Hi(e,o):new sh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Rn(t,this.value)):null!==t&&Mt(this.value)===Mt(t)&&this.at(Rn(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ln()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Fc extends _s{constructor(e,t,o){super(e,t,o),this.key=Cn.fromName(o.referenceValue)}matches(e){const t=Cn.comparator(e.key,this.key);return this.at(t)}}class Hi extends _s{constructor(e,t){super(e,"in",t),this.keys=lf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sh extends _s{constructor(e,t){super(e,"not-in",t),this.keys=lf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Cn.fromName(o.referenceValue))}class uf extends _s{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return la(t)&&bn(t.arrayValue,this.value)}}class Vl extends _s{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bn(this.value.arrayValue,t)}}class Ku extends _s{constructor(e,t){super(e,"not-in",t)}matches(e){if(bn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bn(this.value.arrayValue,t)}}class oh extends _s{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!la(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>bn(this.value.arrayValue,o))}}class ml{constructor(e,t){this.position=e,this.inclusive=t}}class Iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function nu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Lc(i,e,t){let o=0;for(let h=0;h<i.position.length;h++){const m=e[h],w=i.position[h];if(o=m.field.isKeyField()?Cn.comparator(Cn.fromName(w.referenceValue),t.key):Rn(w,t.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function ah(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!qt(i.position[t],e.position[t]))return!1;return!0}class Fo{constructor(e,t=null,o=[],h=[],m=null,w="F",R=null,Y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=w,this.startAt=R,this.endAt=Y,this.lt=null,this.ft=null}}function Zu(i,e,t,o,h,m,w,R){return new Fo(i,e,t,o,h,m,w,R)}function Ja(i){return new Fo(i)}function xa(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Cu(i){for(const e of i.filters)if(e.ht())return e.field;return null}function cd(i){return null!==i.collectionGroup}function yl(i){const e=wn(i);if(null===e.lt){e.lt=[];const t=Cu(e),o=xa(e);if(null!==t&&null===o)t.isKeyField()||e.lt.push(new Iu(t)),e.lt.push(new Iu(ms.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e.lt.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Iu(ms.keyField(),m))}}}return e.lt}function Ma(i){const e=wn(i);if(!e.ft)if("F"===e.limitType)e.ft=Nc(e.path,e.collectionGroup,yl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of yl(e))t.push(new Iu(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new ml(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new ml(e.startAt.position,e.startAt.inclusive):null;e.ft=Nc(e.path,e.collectionGroup,t,e.filters,e.limit,o,h)}return e.ft}function cf(i,e,t){return new Fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Bc(i,e){return Qa(Ma(i),Ma(e))&&i.limitType===e.limitType}function dd(i){return`${Za(Ma(i))}|lt:${i.limitType}`}function Ul(i){return`Query(target=${function af(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${nr(o.value)}`;var o}).join(", ")}]`),N(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>nr(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>nr(t)).join(",")),`Target(${e})`}(Ma(i))}; limitType=${i.limitType})`}function Vc(i,e){return e.isFoundDocument()&&function(t,o){const h=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):Cn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,o){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===o.data.field(h.field))return!1;return!0}(i,e)&&function(t,o){for(const h of t.filters)if(!h.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(h,m,w){const R=Lc(h,m,w);return h.inclusive?R<=0:R<0}(t.startAt,yl(t),o)||t.endAt&&!function(h,m,w){const R=Lc(h,m,w);return h.inclusive?R>=0:R>0}(t.endAt,yl(t),o)));var t,o}function df(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function bu(i){return(e,t)=>{let o=!1;for(const h of yl(i)){const m=cp(h,e,t);if(0!==m)return m;o=o||h.field.isKeyField()}return 0}}function cp(i,e,t){const o=i.field.isKeyField()?Cn.comparator(e.key,t.key):function(h,m,w){const R=m.data.field(h),Y=w.data.field(h);return null!==R&&null!==Y?Rn(R,Y):Ln()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Ln()}}function $c(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:G(e)?"-0":e}}function jl(i){return{integerValue:""+i}}function lh(i,e){return ne(e)?jl(e):$c(i,e)}class lo{constructor(){this._=void 0}}function vl(i,e,t){return i instanceof Tu?function(o,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(t,e):i instanceof Qu?hf(i,e):i instanceof Xu?fd(i,e):function(o,h){const m=Du(o,h),w=Do(m)+Do(o._t);return ao(m)&&ao(o._t)?jl(w):$c(o.wt,w)}(i,e)}function hd(i,e,t){return i instanceof Qu?hf(i,e):i instanceof Xu?fd(i,e):t}function Du(i,e){return i instanceof Hl?ao(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Tu extends lo{}class Qu extends lo{constructor(e){super(),this.elements=e}}function hf(i,e){const t=uh(e);for(const o of i.elements)t.some(h=>qt(h,o))||t.push(o);return{arrayValue:{values:t}}}class Xu extends lo{constructor(e){super(),this.elements=e}}function fd(i,e){let t=uh(e);for(const o of i.elements)t=t.filter(h=>!qt(h,o));return{arrayValue:{values:t}}}class Hl extends lo{constructor(e,t){super(),this.wt=e,this._t=t}}function Do(i){return yi(i.integerValue||i.doubleValue)}function uh(i){return la(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ju{constructor(e,t){this.field=e,this.transform=t}}class tc{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Ra{}function El(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ca(i.key,Xi.none()):new os(i.key,i.data,Xi.none());{const t=i.data,o=bo.empty();let h=new Nn(ms.comparator);for(let m of e.fields)if(!h.has(m)){let w=t.field(m);null===w&&m.length>1&&(m=m.popLast(),w=t.field(m)),null===w?o.delete(m):o.set(m,w),h=h.add(m)}return new ua(i.key,o,new vs(h.toArray()),Xi.none())}}function pd(i,e,t){i instanceof os?function(o,h,m){const w=o.value.clone(),R=Gl(o.fieldTransforms,h,m.transformResults);w.setAll(R),h.convertToFoundDocument(m.version,w).setHasCommittedMutations()}(i,e,t):i instanceof ua?function(o,h,m){if(!_l(o.precondition,h))return void h.convertToUnknownDocument(m.version);const w=Gl(o.fieldTransforms,h,m.transformResults),R=h.data;R.setAll(rc(o)),R.setAll(w),h.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nc(i,e,t,o){return i instanceof os?function(h,m,w,R){if(!_l(h.precondition,m))return w;const Y=h.value.clone(),J=ic(h.fieldTransforms,R,m);return Y.setAll(J),m.convertToFoundDocument(m.version,Y).setHasLocalMutations(),null}(i,e,t,o):i instanceof ua?function(h,m,w,R){if(!_l(h.precondition,m))return w;const Y=ic(h.fieldTransforms,R,m),J=m.data;return J.setAll(rc(h)),J.setAll(Y),m.convertToFoundDocument(m.version,J).setHasLocalMutations(),null===w?null:w.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ye=>ye.field))}(i,e,t,o):(w=t,_l(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):w);var m,w}function ru(i,e){let t=null;for(const o of i.fieldTransforms){const h=e.data.field(o.field),m=Du(o.transform,h||null);null!=m&&(null===t&&(t=bo.empty()),t.set(o.field,m))}return t||null}function ff(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ha(t,o,(h,m)=>function ec(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Qu&&o instanceof Qu||t instanceof Xu&&o instanceof Xu?Ha(t.elements,o.elements,qt):t instanceof Hl&&o instanceof Hl?qt(t._t,o._t):t instanceof Tu&&o instanceof Tu);var t,o}(h,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class os extends Ra{constructor(e,t,o,h=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class ua extends Ra{constructor(e,t,o,h,m=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function rc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Gl(i,e,t){const o=new Map;Hn(i.length===t.length);for(let h=0;h<t.length;h++){const m=i[h],w=m.transform,R=e.data.field(m.field);o.set(m.field,hd(w,R,t[h]))}return o}function ic(i,e,t){const o=new Map;for(const h of i){const m=h.transform,w=t.data.field(h.field);o.set(h.field,vl(m,w,e))}return o}class ca extends Ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uc extends Ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dp{constructor(e){this.count=e}}var Rr,Lr;function sc(i){switch(i){default:return Ln();case Nt.CANCELLED:case Nt.UNKNOWN:case Nt.DEADLINE_EXCEEDED:case Nt.RESOURCE_EXHAUSTED:case Nt.INTERNAL:case Nt.UNAVAILABLE:case Nt.UNAUTHENTICATED:return!1;case Nt.INVALID_ARGUMENT:case Nt.NOT_FOUND:case Nt.ALREADY_EXISTS:case Nt.PERMISSION_DENIED:case Nt.FAILED_PRECONDITION:case Nt.ABORTED:case Nt.OUT_OF_RANGE:case Nt.UNIMPLEMENTED:case Nt.DATA_LOSS:return!0}}function jc(i){if(void 0===i)return Oi("GRPC error has no .code"),Nt.UNKNOWN;switch(i){case Rr.OK:return Nt.OK;case Rr.CANCELLED:return Nt.CANCELLED;case Rr.UNKNOWN:return Nt.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return Nt.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return Nt.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return Nt.INTERNAL;case Rr.UNAVAILABLE:return Nt.UNAVAILABLE;case Rr.UNAUTHENTICATED:return Nt.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return Nt.INVALID_ARGUMENT;case Rr.NOT_FOUND:return Nt.NOT_FOUND;case Rr.ALREADY_EXISTS:return Nt.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return Nt.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return Nt.FAILED_PRECONDITION;case Rr.ABORTED:return Nt.ABORTED;case Rr.OUT_OF_RANGE:return Nt.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return Nt.UNIMPLEMENTED;case Rr.DATA_LOSS:return Nt.DATA_LOSS;default:return Ln()}}(Lr=Rr||(Rr={}))[Lr.OK=0]="OK",Lr[Lr.CANCELLED=1]="CANCELLED",Lr[Lr.UNKNOWN=2]="UNKNOWN",Lr[Lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lr[Lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lr[Lr.NOT_FOUND=5]="NOT_FOUND",Lr[Lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lr[Lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lr[Lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lr[Lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lr[Lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lr[Lr.ABORTED=10]="ABORTED",Lr[Lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lr[Lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lr[Lr.INTERNAL=13]="INTERNAL",Lr[Lr.UNAVAILABLE=14]="UNAVAILABLE",Lr[Lr.DATA_LOSS=15]="DATA_LOSS";class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[h,m]of o)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),h=this.inner[o];if(void 0===h)return this.inner[o]=[[e,t]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return 1===o.length?delete this.inner[t]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(t,o)=>{for(const[h,m]of o)e(h,m)})}isEmpty(){return eu(this.inner)}size(){return this.innerSize}}const oc=new Zi(Cn.comparator);function Ws(){return oc}const Su=new Zi(Cn.comparator);function Lo(...i){let e=Su;for(const t of i)e=e.insert(t.key,t);return e}function Bo(i){let e=Su;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function to(){return zl()}function gd(){return zl()}function zl(){return new Qo(i=>i.toString(),(i,e)=>i.isEqual(e))}const ch=new Zi(Cn.comparator),dh=new Nn(Cn.comparator);function Wr(...i){let e=dh;for(const t of i)e=e.add(t);return e}const pf=new Nn(lr);function ac(){return pf}class Oa{constructor(e,t,o,h,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,t)),new Oa(pr.min(),o,ac(),Ws(),Wr())}}class lc{constructor(e,t,o,h,m){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lc(Ls.EMPTY_BYTE_STRING,t,Wr(),Wr(),Wr())}}class Hc{constructor(e,t,o,h){this.gt=e,this.removedTargetIds=t,this.key=o,this.yt=h}}class md{constructor(e,t){this.targetId=e,this.It=t}}class gf{constructor(e,t,o=Ls.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=h}}class hh{constructor(){this.Tt=0,this.Et=Gc(),this.At=Ls.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Wr(),t=Wr(),o=Wr();return this.Et.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:o=o.add(h);break;default:Ln()}}),new lc(this.At,this.Rt,e,t,o)}Dt(){this.bt=!1,this.Et=Gc()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Gi{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ws(),this.Bt=uc(),this.Lt=new Nn(lr)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const o=this.Qt(t);switch(e.state){case 0:this.jt(t)&&o.Vt(e.resumeToken);break;case 1:o.kt(),o.Pt||o.Dt(),o.Vt(e.resumeToken);break;case 2:o.kt(),o.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(o.Ot(),o.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),o.Vt(e.resumeToken));break;default:Ln()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((o,h)=>{this.jt(h)&&t(h)})}zt(e){const t=e.targetId,o=e.It.count,h=this.Ht(t);if(h){const m=h.target;if(Xa(m))if(0===o){const w=new Cn(m.path);this.Kt(t,w,ur.newNoDocument(w,pr.min()))}else Hn(1===o);else this.Jt(t)!==o&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((m,w)=>{const R=this.Ht(w);if(R){if(m.current&&Xa(R.target)){const Y=new Cn(R.target.path);null!==this.$t.get(Y)||this.Xt(w,Y)||this.Kt(w,Y,ur.newNoDocument(Y,e))}m.vt&&(t.set(w,m.St()),m.Dt())}});let o=Wr();this.Bt.forEach((m,w)=>{let R=!0;w.forEachWhile(Y=>{const J=this.Ht(Y);return!J||2===J.purpose||(R=!1,!1)}),R&&(o=o.add(m))}),this.$t.forEach((m,w)=>w.setReadTime(e));const h=new Oa(e,t,this.Lt,this.$t,o);return this.$t=Ws(),this.Bt=uc(),this.Lt=new Nn(lr),h}qt(e,t){if(!this.jt(e))return;const o=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,o),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,o){if(!this.jt(e))return;const h=this.Qt(e);this.Xt(e,t)?h.Ct(t,1):h.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),o&&(this.$t=this.$t.insert(t,o))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new hh,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Nn(lr),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||rn("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new hh),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function uc(){return new Zi(Cn.comparator)}function Gc(){return new Zi(Cn.comparator)}const fh={asc:"ASCENDING",desc:"DESCENDING"},Ji={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class el{constructor(e,t){this.databaseId=e,this.dt=t}}function Wl(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cc(i,e){return i.dt?e.toBase64():e.toUint8Array()}function hp(i,e){return Wl(i,e.toTimestamp())}function bs(i){return Hn(!!i),pr.fromTimestamp(function(e){const t=Aa(e);return new Qn(t.seconds,t.nanos)}(i))}function yd(i,e){return(t=i,new Qr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vd(i){const e=Qr.fromString(i);return Hn(fc(e)),e}function zc(i,e){return yd(i.databaseId,e.path)}function tl(i,e){const t=vd(e);if(t.get(1)!==i.databaseId.projectId)throw new Jt(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Jt(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Cn(T(t))}function C(i,e){return yd(i.databaseId,e)}function g(i){const e=vd(i);return 4===e.length?Qr.emptyPath():T(e)}function v(i){return new Qr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function T(i){return Hn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Q(i,e,t){return{name:zc(i,e),fields:t.value.mapValue.fields}}function de(i,e,t){const o=tl(i,e.name),h=bs(e.updateTime),m=new bo({mapValue:{fields:e.fields}}),w=ur.newFoundDocument(o,h,m);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function dn(i,e){let t;if(e instanceof os)t={update:Q(i,e.key,e.value)};else if(e instanceof ca)t={delete:zc(i,e.key)};else if(e instanceof ua)t={update:Q(i,e.key,e.data),updateMask:hc(e.fieldMask)};else{if(!(e instanceof Uc))return Ln();t={verify:zc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(h,m){const w=m.transform;if(w instanceof Tu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Qu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Xu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Hl)return{fieldPath:m.field.canonicalString(),increment:w._t};throw Ln()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:hp(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Ln()),t;var h}function Vn(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Xi.updateTime(bs(h.updateTime)):void 0!==h.exists?Xi.exists(h.exists):Xi.none():Xi.none(),o=e.updateTransforms?e.updateTransforms.map(h=>function(m,w){let R=null;"setToServerValue"in w?(Hn("REQUEST_TIME"===w.setToServerValue),R=new Tu):"appendMissingElements"in w?R=new Qu(w.appendMissingElements.values||[]):"removeAllFromArray"in w?R=new Xu(w.removeAllFromArray.values||[]):"increment"in w?R=new Hl(m,w.increment):Ln();const Y=ms.fromServerFormat(w.fieldPath);return new Ju(Y,R)}(i,h)):[];var h;if(e.update){const h=tl(i,e.update.name),m=new bo({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new vs((e.updateMask.fieldPaths||[]).map(J=>ms.fromServerFormat(J)));return new ua(h,m,w,t,o)}return new os(h,m,t,o)}if(e.delete){const h=tl(i,e.delete);return new ca(h,t)}if(e.verify){const h=tl(i,e.verify);return new Uc(h,t)}return Ln()}function sr(i,e){return{documents:[C(i,e.path)]}}function Bs(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=C(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=C(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const h=function(Y){if(0===Y.length)return;const J=Y.map(ye=>function(at){if("=="===at.op){if(Ko(at.value))return{unaryFilter:{field:Au(at.field),op:"IS_NAN"}};if(qa(at.value))return{unaryFilter:{field:Au(at.field),op:"IS_NULL"}}}else if("!="===at.op){if(Ko(at.value))return{unaryFilter:{field:Au(at.field),op:"IS_NOT_NAN"}};if(qa(at.value))return{unaryFilter:{field:Au(at.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(at.field),op:gh(at.op),value:at.value}}}(ye));return 1===J.length?J[0]:{compositeFilter:{op:"AND",filters:J}}}(e.filters);h&&(t.structuredQuery.where=h);const m=function(Y){if(0!==Y.length)return Y.map(J=>{return{field:Au((ye=J).field),direction:ph(ye.dir)};var ye})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const w=(J=e.limit,i.dt||N(J)?J:{value:J});var J,R,Y;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Y=e.endAt).inclusive,values:Y.position}),t}function Vs(i){let e=g(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let h=null;if(o>0){Hn(1===o);const ye=t.from[0];ye.allDescendants?h=ye.collectionId:e=e.child(ye.collectionId)}let m=[];t.where&&(m=Wc(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ye=>{return new Iu(Pa((at=ye).field),function(kt){switch(kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(at.direction));var at}));let R=null;t.limit&&(R=function(ye){let at;return at="object"==typeof ye?ye.value:ye,N(at)?null:at}(t.limit));let Y=null;var ye;t.startAt&&(Y=new ml((ye=t.startAt).values||[],!!ye.before));let J=null;return t.endAt&&(J=function(ye){return new ml(ye.values||[],!ye.before)}(t.endAt)),Zu(e,h,w,m,R,"F",Y,J)}function Wc(i){return i?void 0!==i.unaryFilter?[yh(i)]:void 0!==i.fieldFilter?[mh(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Wc(e)).reduce((e,t)=>e.concat(t)):Ln():[]}function ph(i){return fh[i]}function gh(i){return Ji[i]}function Au(i){return{fieldPath:i.canonicalString()}}function Pa(i){return ms.fromServerFormat(i.fieldPath)}function mh(i){return _s.create(Pa(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ln()}}(i.fieldFilter.op),i.fieldFilter.value)}function yh(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Pa(i.unaryFilter.field);return _s.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Pa(i.unaryFilter.field);return _s.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pa(i.unaryFilter.field);return _s.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Pa(i.unaryFilter.field);return _s.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ln()}}function hc(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Vo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=wl(e)),e=vh(i.get(t),e);return wl(e)}function vh(i,e){let t=e;const o=i.length;for(let h=0;h<o;h++){const m=i.charAt(h);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function wl(i){return i+"\x01\x01"}function nl(i){const e=i.length;if(Hn(e>=2),2===e)return Hn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Qr.emptyPath();const t=e-2,o=[];let h="";for(let m=0;m<e;){const w=i.indexOf("\x01",m);switch((w<0||w>t)&&Ln(),i.charAt(w+1)){case"\x01":const R=i.substring(m,w);let Y;0===h.length?Y=R:(h+=R,Y=h,h=""),o.push(Y);break;case"\x10":h+=i.substring(m,w),h+="\0";break;case"\x11":h+=i.substring(m,w+1);break;default:Ln()}m=w+2}return new Qr(o)}const fp=["userId","batchId"];function mf(i,e){return[i,Vo(e)]}function yf(i,e,t){return[i,Vo(e),t]}const pp={},gp=["prefixPath","collectionGroup","readTime","documentId"],Sm=["prefixPath","collectionGroup","documentId"],Am=["collectionGroup","readTime","prefixPath","documentId"],gg=["canonicalId","targetId"],pc=["targetId","path"],mp=["path","targetId"],vf=["collectionId","parent"],xu=["indexId","uid"],_d=["uid","sequenceNumber"],_f=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xm=["indexId","uid","orderedDocumentKey"],mg=["userId","collectionPath","documentId"],yg=["userId","collectionPath","largestBatchId"],gc=["userId","collectionGroup","largestBatchId"],_h=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vg=[..._h,"documentOverlays"],Mu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Eh=Mu,Ef=[...Eh,"indexConfiguration","indexState","indexEntries"];class yp extends gr{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function To(i,e){const t=wn(i);return Fs.N(t.ee,e)}class qc{constructor(e,t,o,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&pd(m,e,o[h])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=nc(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=nc(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=gd();return this.mutations.forEach(h=>{const m=e.get(h.key),w=m.overlayedDocument;let R=this.applyToLocalView(w,m.mutatedFields);R=t.has(h.key)?null:R;const Y=El(w,R);null!==Y&&o.set(h.key,Y),w.isValidDocument()||w.convertToNoDocument(pr.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wr())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(t,o)=>ff(t,o))&&Ha(this.baseMutations,e.baseMutations,(t,o)=>ff(t,o))}}class wf{constructor(e,t,o,h){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=h}static from(e,t,o){Hn(e.mutations.length===o.length);let h=ch;const m=e.mutations;for(let w=0;w<m.length;w++)h=h.insert(m[w].key,o[w].version);return new wf(e,t,o,h)}}class Ed{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ru{constructor(e,t,o,h,m=pr.min(),w=pr.min(),R=Ls.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=R}withSequenceNumber(e){return new Ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wd{constructor(e){this.ne=e}}function Id(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:zc(h=i.ne,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Wl(h,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:rl(e.version)};else{if(!e.isUnknownDocument())return Ln();o.unknownDocument={path:t.path.toArray(),version:rl(e.version)}}var h,m;return o}function Cd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function rl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function iu(i){const e=new Qn(i.seconds,i.nanoseconds);return pr.fromTimestamp(e)}function Il(i,e){const t=(e.baseMutations||[]).map(m=>Vn(i.ne,m));for(let m=0;m<e.mutations.length-1;++m){const w=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(w.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>Vn(i.ne,m)),h=Qn.fromMillis(e.localWriteTimeMs);return new qc(e.batchId,h,t,o)}function bd(i){const e=iu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?iu(i.lastLimboFreeSnapshotVersion):pr.min();let o;var h;return void 0!==i.query.documents?(Hn(1===(h=i.query).documents.length),o=Ma(Ja(g(h.documents[0])))):o=Ma(Vs(i.query)),new Ru(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Ls.fromBase64String(i.resumeToken))}function Yc(i,e){const t=rl(e.snapshotVersion),o=rl(e.lastLimboFreeSnapshotVersion);let h;h=Xa(e.target)?sr(i.ne,e.target):Bs(i.ne,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Za(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:h}}function Dd(i){const e=Vs({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?cf(e,e.limit,"L"):e}function Ih(i,e){return new Ed(e.largestBatchId,Vn(i.ne,e.overlayMutation))}function Ch(i,e){const t=e.path.lastSegment();return[i,Vo(e.path.popLast()),t]}function Td(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:rl(o.readTime),documentKey:Vo(o.documentKey.path),largestBatchId:o.largestBatchId}}class _g{getBundleMetadata(e,t){return bh(e).get(t).next(o=>{if(o)return{id:(h=o).bundleId,createTime:iu(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return bh(e).put({bundleId:(o=t).id,createTime:rl(bs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return vp(e).get(t).next(o=>{if(o)return{name:(h=o).name,query:Dd(h.bundledQuery),readTime:iu(h.readTime)};var h})}saveNamedQuery(e,t){return vp(e).put({name:(o=t).name,readTime:rl(bs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function bh(i){return To(i,"bundles")}function vp(i){return To(i,"namedQueries")}class If{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new If(e,t.uid||"")}getOverlay(e,t){return Sd(e).get(Ch(this.userId,t)).next(o=>o?Ih(this.wt,o):null)}getOverlays(e,t){const o=to();return It.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&o.set(h,m)})).next(()=>o)}saveOverlays(e,t,o){const h=[];return o.forEach((m,w)=>{const R=new Ed(t,w);h.push(this.ie(e,R))}),It.waitFor(h)}removeOverlaysForBatchId(e,t,o){const h=new Set;t.forEach(w=>h.add(Vo(w.getCollectionPath())));const m=[];return h.forEach(w=>{const R=IDBKeyRange.bound([this.userId,w,o],[this.userId,w,o+1],!1,!0);m.push(Sd(e).W("collectionPathOverlayIndex",R))}),It.waitFor(m)}getOverlaysForCollection(e,t,o){const h=to(),m=Vo(t),w=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Sd(e).K("collectionPathOverlayIndex",w).next(R=>{for(const Y of R){const J=Ih(this.wt,Y);h.set(J.getKey(),J)}return h})}getOverlaysForCollectionGroup(e,t,o,h){const m=to();let w;const R=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sd(e).J({index:"collectionGroupOverlayIndex",range:R},(Y,J,ye)=>{const at=Ih(this.wt,J);m.size()<h||at.largestBatchId===w?(m.set(at.getKey(),at),w=at.largestBatchId):ye.done()}).next(()=>m)}ie(e,t){return Sd(e).put(function(o,h,m){const[w,R,Y]=Ch(h,m.mutation.key);return{userId:h,collectionPath:R,documentId:Y,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:dn(o.ne,m.mutation)}}(this.wt,this.userId,t))}}function Sd(i){return To(i,"documentOverlays")}class Ou{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(yi(e.integerValue));else if("doubleValue"in e){const o=yi(e.doubleValue);isNaN(o)?this.ce(t,13):(this.ce(t,15),G(o)?t.ae(0):t.ae(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ce(t,20),"string"==typeof o?t.he(o):(t.he(`${o.seconds||""}`),t.ae(o.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(eo(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ce(t,45),t.ae(o.latitude||0),t.ae(o.longitude||0)}else"mapValue"in e?pl(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Ln()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const o=e.fields||{};this.ce(t,55);for(const h of Object.keys(o))this.le(h,t),this.oe(o[h],t)}me(e,t){const o=e.values||[];this.ce(t,50);for(const h of o)this.oe(h,t)}_e(e,t){this.ce(t,37),Cn.fromName(e).path.forEach(o=>{this.ce(t,60),this.ge(o,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function _p(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Cl(i){const e=64-function(t){let o=0;for(let h=0;h<8;++h){const m=_p(255&t[h]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}Ou.ye=new Ou;class Eg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ie(o.value),o=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ie(o);else if(o<2048)this.Ie(960|o>>>6),this.Ie(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o);else{const h=t.codePointAt(0);this.Ie(240|h>>>18),this.Ie(128|63&h>>>12),this.Ie(128|63&h>>>6),this.Ie(128|63&h)}}this.Te()}Pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}ve(e){const t=this.Ve(e),o=Cl(t);this.Se(1+o),this.buffer[this.position++]=255&o;for(let h=t.length-o;h<t.length;++h)this.buffer[this.position++]=255&t[h]}De(e){const t=this.Ve(e),o=Cl(t);this.Se(1+o),this.buffer[this.position++]=~(255&o);for(let h=t.length-o;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let h=1;h<t.length;++h)t[h]^=o?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const h=new Uint8Array(o);h.set(this.buffer),this.buffer=h}}class wg{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class Mm{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Ad{constructor(){this.Me=new Eg,this.Fe=new wg(this.Me),this.$e=new Mm(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Pu{constructor(e,t,o,h){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=h}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Pu(this.indexId,this.documentKey,this.arrayValue,o)}}function ku(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Dh(i.arrayValue,e.arrayValue),0!==t?t:(t=Dh(i.directionalValue,e.directionalValue),0!==t?t:Cn.comparator(i.documentKey,e.documentKey)))}function Dh(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Cf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const o=t;o.ht()?this.Ke=o:this.qe.push(o)}}Ge(e){const t=A(e);if(void 0!==t&&!this.Qe(t))return!1;const o=D(e);let h=0,m=0;for(;h<o.length&&this.Qe(o[h]);++h);if(h===o.length)return!0;if(void 0!==this.Ke){const w=o[h];if(!this.je(this.Ke,w)||!this.We(this.Ue[m++],w))return!1;++h}for(;h<o.length;++h){const w=o[h];if(m>=this.Ue.length||!this.We(this.Ue[m++],w))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Kc{constructor(){this.ze=new Th}addToCollectionParentIndex(e,t){return this.ze.add(t),It.resolve()}getCollectionParents(e,t){return It.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return It.resolve()}deleteFieldIndex(e,t){return It.resolve()}getDocumentsMatchingTarget(e,t){return It.resolve(null)}getIndexType(e,t){return It.resolve(0)}getFieldIndexes(e,t){return It.resolve([])}getNextCollectionGroupToUpdate(e){return It.resolve(null)}getMinOffset(e,t){return It.resolve(it.min())}getMinOffsetFromCollectionGroup(e,t){return It.resolve(it.min())}updateCollectionGroup(e,t,o){return It.resolve()}updateIndexEntries(e,t){return It.resolve()}}class Th{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),h=this.index[t]||new Nn(Qr.comparator),m=!h.has(o);return this.index[t]=h.add(o),m}has(e){const t=e.lastSegment(),o=e.popLast(),h=this.index[t];return h&&h.has(o)}getEntries(e){return(this.index[e]||new Nn(Qr.comparator)).toArray()}}const Tr=new Uint8Array(0);class Ig{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Th,this.Je=new Qo(o=>Za(o),(o,h)=>Qa(o,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const o=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const m={collectionId:o,parent:Vo(h)};return xd(e).put(m)}return It.resolve()}getCollectionParents(e,t){const o=[],h=IDBKeyRange.bound([t,""],[ta(t),""],!1,!0);return xd(e).K(h).next(m=>{for(const w of m){if(w.collectionId!==t)break;o.push(nl(w.parent))}return o})}addFieldIndex(e,t){const o=bf(e),h={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var w;delete h.indexId;const m=o.add(h);if(t.indexState){const w=Nu(e);return m.next(R=>{w.put(Td(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const o=bf(e),h=Nu(e),m=Zc(e);return o.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Zc(e);let h=!0;const m=new Map;return It.forEach(this.Ye(t),w=>this.Xe(e,w).next(R=>{h&&(h=!!R),m.set(w,R)})).next(()=>{if(h){let w=Wr();const R=[];return It.forEach(m,(Y,J)=>{var ye;rn("IndexedDbIndexManager",`Using index ${ye=Y,`id=${ye.indexId}|cg=${ye.collectionGroup}|f=${ye.fields.map(Es=>`${Es.fieldPath}:${Es.kind}`).join(",")}`} to execute ${Za(t)}`);const at=function(Es,Ho){const $s=A(Ho);if(void 0===$s)return null;for(const ro of gl(Es,$s.fieldPath))switch(ro.op){case"array-contains-any":return ro.value.arrayValue.values||[];case"array-contains":return[ro.value]}return null}(J,Y),kt=function(Es,Ho){const $s=new Map;for(const ro of D(Ho))for(const Va of gl(Es,ro.fieldPath))switch(Va.op){case"==":case"in":$s.set(ro.fieldPath.canonicalString(),Va.value);break;case"not-in":case"!=":return $s.set(ro.fieldPath.canonicalString(),Va.value),Array.from($s.values())}return null}(J,Y),Kt=function(Es,Ho){const $s=[];let ro=!0;for(const Va of D(Ho)){const lp=0===Va.kind?Fr(Es,Va.fieldPath,Es.startAt):ih(Es,Va.fieldPath,Es.startAt);$s.push(lp.value),ro&&(ro=lp.inclusive)}return new ml($s,ro)}(J,Y),nn=function(Es,Ho){const $s=[];let ro=!0;for(const Va of D(Ho)){const lp=0===Va.kind?ih(Es,Va.fieldPath,Es.endAt):Fr(Es,Va.fieldPath,Es.endAt);$s.push(lp.value),ro&&(ro=lp.inclusive)}return new ml($s,ro)}(J,Y),Gn=this.Ze(Y,J,Kt),cr=this.Ze(Y,J,nn),zi=this.tn(Y,J,kt),fs=this.en(Y.indexId,at,Gn,Kt.inclusive,cr,nn.inclusive,zi);return It.forEach(fs,Es=>o.j(Es,t.limit).next(Ho=>{Ho.forEach($s=>{const ro=Cn.fromSegments($s.documentKey);w.has(ro)||(w=w.add(ro),R.push(ro))})}))}).next(()=>R)}return It.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,o,h,m,w,R){const Y=(null!=t?t.length:1)*Math.max(o.length,m.length),J=Y/(null!=t?t.length:1),ye=[];for(let at=0;at<Y;++at){const kt=t?this.nn(t[at/J]):Tr,Kt=this.sn(e,kt,o[at%J],h),nn=this.rn(e,kt,m[at%J],w),Gn=R.map(cr=>this.sn(e,kt,cr,!0));ye.push(...this.createRange(Kt,nn,Gn))}return ye}sn(e,t,o,h){const m=new Pu(e,Cn.empty(),t,o);return h?m:m.Le()}rn(e,t,o,h){const m=new Pu(e,Cn.empty(),t,o);return h?m.Le():m}Xe(e,t){const o=new Cf(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let w=null;for(const R of m)o.Ge(R)&&(!w||R.fields.length>w.fields.length)&&(w=R);return w})}getIndexType(e,t){let o=2;return It.forEach(this.Ye(t),h=>this.Xe(e,h).next(m=>{m?0!==o&&m.fields.length<function(w){let R=new Nn(ms.comparator),Y=!1;for(const J of w.filters){const ye=J;ye.field.isKeyField()||("array-contains"===ye.op||"array-contains-any"===ye.op?Y=!0:R=R.add(ye.field))}for(const J of w.orderBy)J.field.isKeyField()||(R=R.add(J.field));return R.size+(Y?1:0)}(h)&&(o=1):o=0})).next(()=>o)}on(e,t){const o=new Ad;for(const h of D(e)){const m=t.data.field(h.fieldPath);if(null==m)return null;const w=o.Be(h.kind);Ou.ye.re(m,w)}return o.Oe()}nn(e){const t=new Ad;return Ou.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const o=new Ad;return Ou.ye.re(Hr(this.databaseId,t),o.Be(function(h){const m=D(h);return 0===m.length?0:m[m.length-1].kind}(e))),o.Oe()}tn(e,t,o){if(null===o)return[];let h=[];h.push(new Ad);let m=0;for(const w of D(e)){const R=o[m++];for(const Y of h)if(this.cn(t,w.fieldPath)&&la(R))h=this.an(h,w,R);else{const J=Y.Be(w.kind);Ou.ye.re(R,J)}}return this.hn(h)}Ze(e,t,o){return this.tn(e,t,o.position)}hn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Oe();return t}an(e,t,o){const h=[...e],m=[];for(const w of o.arrayValue.values||[])for(const R of h){const Y=new Ad;Y.seed(R.Oe()),Ou.ye.re(w,Y.Be(t.kind)),m.push(Y)}return m}cn(e,t){return!!e.filters.find(o=>o instanceof _s&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=bf(e),h=Nu(e);return(t?o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.K()).next(m=>{const w=[];return It.forEach(m,R=>h.get([R.indexId,this.uid]).next(Y=>{w.push(function(J,ye){const at=ye?new q(ye.sequenceNumber,new it(iu(ye.readTime),new Cn(nl(ye.documentKey)),ye.largestBatchId)):q.empty(),kt=J.fields.map(([Kt,nn])=>new L(ms.fromServerFormat(Kt),nn));return new x(J.indexId,J.collectionGroup,kt,at)}(R,Y))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,h)=>{const m=o.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:lr(o.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const h=bf(e),m=Nu(e);return this.ln(e).next(w=>h.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>It.forEach(R,Y=>m.put(Td(Y.indexId,this.user,w,o)))))}updateIndexEntries(e,t){const o=new Map;return It.forEach(t,(h,m)=>{const w=o.get(h.collectionGroup);return(w?It.resolve(w):this.getFieldIndexes(e,h.collectionGroup)).next(R=>(o.set(h.collectionGroup,R),It.forEach(R,Y=>this.fn(e,h,Y).next(J=>{const ye=this.dn(m,Y);return J.isEqual(ye)?It.resolve():this._n(e,m,Y,J,ye)}))))})}wn(e,t,o,h){return Zc(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.un(o,t.key),documentKey:t.key.path.toArray()})}mn(e,t,o,h){return Zc(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.un(o,t.key),t.key.path.toArray()])}fn(e,t,o){const h=Zc(e);let m=new Nn(ku);return h.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.un(o,t)])},(w,R)=>{m=m.add(new Pu(o.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}dn(e,t){let o=new Nn(ku);const h=this.on(t,e);if(null==h)return o;const m=A(t);if(null!=m){const w=e.data.field(m.fieldPath);if(la(w))for(const R of w.arrayValue.values||[])o=o.add(new Pu(t.indexId,e.key,this.nn(R),h))}else o=o.add(new Pu(t.indexId,e.key,Tr,h));return o}_n(e,t,o,h,m){rn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(R,Y,J,ye,at){const kt=R.getIterator(),Kt=Y.getIterator();let nn=Io(kt),Gn=Io(Kt);for(;nn||Gn;){let cr=!1,zi=!1;if(nn&&Gn){const fs=J(nn,Gn);fs<0?zi=!0:fs>0&&(cr=!0)}else null!=nn?zi=!0:cr=!0;cr?(ye(Gn),Gn=Io(Kt)):zi?(at(nn),nn=Io(kt)):(nn=Io(kt),Gn=Io(Kt))}}(h,m,ku,R=>{w.push(this.wn(e,t,o,R))},R=>{w.push(this.mn(e,t,o,R))}),It.waitFor(w)}ln(e){let t=1;return Nu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,h,m)=>{m.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((w,R)=>ku(w,R)).filter((w,R,Y)=>!R||0!==ku(w,Y[R-1]));const h=[];h.push(e);for(const w of o){const R=ku(w,e),Y=ku(w,t);if(0===R)h[0]=e.Le();else if(R>0&&Y<0)h.push(w),h.push(w.Le());else if(Y>0)break}h.push(t);const m=[];for(let w=0;w<h.length;w+=2)m.push(IDBKeyRange.bound([h[w].indexId,this.uid,h[w].arrayValue,h[w].directionalValue,Tr,[]],[h[w+1].indexId,this.uid,h[w+1].arrayValue,h[w+1].directionalValue,Tr,[]]));return m}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sh)}getMinOffset(e,t){return It.mapArray(this.Ye(t),o=>this.Xe(e,o).next(h=>h||Ln())).next(Sh)}}function xd(i){return To(i,"collectionParents")}function Zc(i){return To(i,"indexEntries")}function bf(i){return To(i,"indexConfiguration")}function Nu(i){return To(i,"indexState")}function Sh(i){Hn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const h=i[o].indexState.offset;Ht(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new it(e.readTime,e.documentKey,t)}const Cg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class da{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new da(e,da.DEFAULT_COLLECTION_PERCENTILE,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bg(i,e,t){const o=i.store("mutations"),h=i.store("documentMutations"),m=[],w=IDBKeyRange.only(t.batchId);let R=0;const Y=o.J({range:w},(ye,at,kt)=>(R++,kt.delete()));m.push(Y.next(()=>{Hn(1===R)}));const J=[];for(const ye of t.mutations){const at=yf(e,ye.key.path,t.batchId);m.push(h.delete(at)),J.push(ye.key)}return It.waitFor(m).next(()=>J)}function Md(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ln();e=i.noDocument}return JSON.stringify(e).length}da.DEFAULT_COLLECTION_PERCENTILE=10,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,da.DEFAULT=new da(41943040,da.DEFAULT_COLLECTION_PERCENTILE,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),da.DISABLED=new da(-1,0,0);class Rd{constructor(e,t,o,h){this.userId=e,this.wt=t,this.indexManager=o,this.referenceDelegate=h,this.gn={}}static se(e,t,o,h){Hn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Rd(m,t,o,h)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).J({index:"userMutationsIndex",range:o},(h,m,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,o,h){const m=su(e),w=Fu(e);return w.add({}).next(R=>{Hn("number"==typeof R);const Y=new qc(R,t,o,h),J=function(kt,Kt,nn){const Gn=nn.baseMutations.map(zi=>dn(kt.ne,zi)),cr=nn.mutations.map(zi=>dn(kt.ne,zi));return{userId:Kt,batchId:nn.batchId,localWriteTimeMs:nn.localWriteTime.toMillis(),baseMutations:Gn,mutations:cr}}(this.wt,this.userId,Y),ye=[];let at=new Nn((kt,Kt)=>lr(kt.canonicalString(),Kt.canonicalString()));for(const kt of h){const Kt=yf(this.userId,kt.key.path,R);at=at.add(kt.key.path.popLast()),ye.push(w.put(J)),ye.push(m.put(Kt,pp))}return at.forEach(kt=>{ye.push(this.indexManager.addToCollectionParentIndex(e,kt))}),e.addOnCommittedListener(()=>{this.gn[R]=Y.keys()}),It.waitFor(ye).next(()=>Y)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(o=>o?(Hn(o.userId===this.userId),Il(this.wt,o)):null)}yn(e,t){return this.gn[t]?It.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const h=o.keys();return this.gn[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,h=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return Fu(e).J({index:"userMutationsIndex",range:h},(w,R,Y)=>{R.userId===this.userId&&(Hn(R.batchId>=o),m=Il(this.wt,R)),Y.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Fu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(h,m,w)=>{o=m.batchId,w.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).K("userMutationsIndex",t).next(o=>o.map(h=>Il(this.wt,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=mf(this.userId,t.path),h=IDBKeyRange.lowerBound(o),m=[];return su(e).J({range:h},(w,R,Y)=>{const[J,ye,at]=w,kt=nl(ye);if(J===this.userId&&t.path.isEqual(kt))return Fu(e).get(at).next(Kt=>{if(!Kt)throw Ln();Hn(Kt.userId===this.userId),m.push(Il(this.wt,Kt))});Y.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Nn(lr);const h=[];return t.forEach(m=>{const w=mf(this.userId,m.path),R=IDBKeyRange.lowerBound(w),Y=su(e).J({range:R},(J,ye,at)=>{const[kt,Kt,nn]=J,Gn=nl(Kt);kt===this.userId&&m.path.isEqual(Gn)?o=o.add(nn):at.done()});h.push(Y)}),It.waitFor(h).next(()=>this.pn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,h=o.length+1,m=mf(this.userId,o),w=IDBKeyRange.lowerBound(m);let R=new Nn(lr);return su(e).J({range:w},(Y,J,ye)=>{const[at,kt,Kt]=Y,nn=nl(kt);at===this.userId&&o.isPrefixOf(nn)?nn.length===h&&(R=R.add(Kt)):ye.done()}).next(()=>this.pn(e,R))}pn(e,t){const o=[],h=[];return t.forEach(m=>{h.push(Fu(e).get(m).next(w=>{if(null===w)throw Ln();Hn(w.userId===this.userId),o.push(Il(this.wt,w))}))}),It.waitFor(h).next(()=>o)}removeMutationBatch(e,t){return bg(e.ee,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),It.forEach(o,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return It.resolve();const o=IDBKeyRange.lowerBound([this.userId]),h=[];return su(e).J({range:o},(m,w,R)=>{if(m[0]===this.userId){const Y=nl(m[1]);h.push(Y)}else R.done()}).next(()=>{Hn(0===h.length)})})}containsKey(e,t){return Ah(e,this.userId,t)}Tn(e){return bl(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ah(i,e,t){const o=mf(e,t.path),h=o[1],m=IDBKeyRange.lowerBound(o);let w=!1;return su(i).J({range:m,H:!0},(R,Y,J)=>{const[ye,at,kt]=R;ye===e&&at===h&&(w=!0),J.done()}).next(()=>w)}function Fu(i){return To(i,"mutations")}function su(i){return To(i,"documentMutations")}function bl(i){return To(i,"mutationQueues")}class Dl{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Dl(0)}static Rn(){return new Dl(-1)}}class Ep{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const o=new Dl(t.highestTargetId);return t.highestTargetId=o.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>pr.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.bn(e).next(h=>(h.highestListenSequenceNumber=t,o&&(h.lastRemoteSnapshotVersion=o.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Pn(e,h)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(o=>(o.targetCount+=1,this.Vn(t,o),this.Pn(e,o))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Od(e).delete(t.targetId)).next(()=>this.bn(e)).next(o=>(Hn(o.targetCount>0),o.targetCount-=1,this.Pn(e,o)))}removeTargets(e,t,o){let h=0;const m=[];return Od(e).J((w,R)=>{const Y=bd(R);Y.sequenceNumber<=t&&null===o.get(Y.targetId)&&(h++,m.push(this.removeTargetData(e,Y)))}).next(()=>It.waitFor(m)).next(()=>h)}forEachTarget(e,t){return Od(e).J((o,h)=>{const m=bd(h);t(m)})}bn(e){return Df(e).get("targetGlobalKey").next(t=>(Hn(null!==t),t))}Pn(e,t){return Df(e).put("targetGlobalKey",t)}vn(e,t){return Od(e).put(Yc(this.wt,t))}Vn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Za(t),h=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return Od(e).J({range:h,index:"queryTargetsIndex"},(w,R,Y)=>{const J=bd(R);Qa(t,J.target)&&(m=J,Y.done())}).next(()=>m)}addMatchingKeys(e,t,o){const h=[],m=ka(e);return t.forEach(w=>{const R=Vo(w.path);h.push(m.put({targetId:o,path:R})),h.push(this.referenceDelegate.addReference(e,o,w))}),It.waitFor(h)}removeMatchingKeys(e,t,o){const h=ka(e);return It.forEach(t,m=>{const w=Vo(m.path);return It.waitFor([h.delete([o,w]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,t){const o=ka(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(h)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),h=ka(e);let m=Wr();return h.J({range:o,H:!0},(w,R,Y)=>{const J=nl(w[1]),ye=new Cn(J);m=m.add(ye)}).next(()=>m)}containsKey(e,t){const o=Vo(t.path),h=IDBKeyRange.bound([o],[ta(o)],!1,!0);let m=0;return ka(e).J({index:"documentTargetsIndex",H:!0,range:h},([w,R],Y,J)=>{0!==w&&(m++,J.done())}).next(()=>m>0)}te(e,t){return Od(e).get(t).next(o=>o?bd(o):null)}}function Od(i){return To(i,"targets")}function Df(i){return To(i,"targetGlobal")}function ka(i){return To(i,"targetDocuments")}function Qc([i,e],[t,o]){const h=lr(i,t);return 0===h?lr(e,o):h}class Dg{constructor(e){this.Sn=e,this.buffer=new Nn(Qc),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Qc(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $o{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;rn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ae.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){zs(o)?rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield xn(o)}yield t.kn(3e5)}))}}class Tg{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return It.resolve(ss.ot);const o=new Dg(t);return this.On.forEachTarget(e,h=>o.xn(h.sequenceNumber)).next(()=>this.On.Fn(e,h=>o.xn(h))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.On.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),It.resolve(Cg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cg):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let o,h,m,w,R,Y,J;const ye=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(at=>(at>this.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${at}`),h=this.params.maximumSequenceNumbersToCollect):h=at,w=Date.now(),this.nthSequenceNumber(e,h))).next(at=>(o=at,R=Date.now(),this.removeTargets(e,o,t))).next(at=>(m=at,Y=Date.now(),this.removeOrphanedDocuments(e,o))).next(at=>(J=Date.now(),Ea()<=Xe.in.DEBUG&&rn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ye}ms\n\tDetermined least recently used ${h} in `+(R-w)+`ms\n\tRemoved ${m} targets in `+(Y-R)+`ms\n\tRemoved ${at} documents in `+(J-Y)+`ms\nTotal Duration: ${J-ye}ms`),It.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:at})))}}class wp{constructor(e,t){this.db=e,this.garbageCollector=new Tg(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(h=>o+h))}Bn(e){let t=0;return this.Fn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(o,h)=>t(h))}addReference(e,t,o){return mc(e,o)}removeReference(e,t,o){return mc(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return mc(e,t)}Un(e,t){return function(o,h){let m=!1;return bl(o).Y(w=>Ah(o,w,h).next(R=>(R&&(m=!0),It.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Ln(e,(w,R)=>{if(R<=t){const Y=this.Un(e,w).next(J=>{if(!J)return m++,o.getEntry(e,w).next(()=>(o.removeEntry(w,pr.min()),ka(e).delete([0,Vo(w.path)])))});h.push(Y)}}).next(()=>It.waitFor(h)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return mc(e,t)}Ln(e,t){const o=ka(e);let h,m=ss.ot;return o.J({index:"documentTargetsIndex"},([w,R],{path:Y,sequenceNumber:J})=>{0===w?(m!==ss.ot&&t(new Cn(nl(h)),m),m=J,h=Y):m=ss.ot}).next(()=>{m!==ss.ot&&t(new Cn(nl(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mc(i,e){return ka(i).put((o=i.currentSequenceNumber,{targetId:0,path:Vo(e.path),sequenceNumber:o}));var o}class xh{constructor(){this.changes=new Qo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?It.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ha{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Tl(e).put(o)}removeEntry(e,t,o){return Tl(e).delete(function(h,m){const w=h.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Cd(m),w[w.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.qn(e,o)))}getEntry(e,t){let o=ur.newInvalidDocument(t);return Tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pd(t))},(h,m)=>{o=this.Kn(t,m)}).next(()=>o)}Gn(e,t){let o={size:0,document:ur.newInvalidDocument(t)};return Tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pd(t))},(h,m)=>{o={document:this.Kn(t,m),size:Md(m)}}).next(()=>o)}getEntries(e,t){let o=Ws();return this.Qn(e,t,(h,m)=>{const w=this.Kn(h,m);o=o.insert(h,w)}).next(()=>o)}jn(e,t){let o=Ws(),h=new Zi(Cn.comparator);return this.Qn(e,t,(m,w)=>{const R=this.Kn(m,w);o=o.insert(m,R),h=h.insert(m,Md(w))}).next(()=>({documents:o,Wn:h}))}Qn(e,t,o){if(t.isEmpty())return It.resolve();let h=new Nn(bp);t.forEach(Y=>h=h.add(Y));const m=IDBKeyRange.bound(Pd(h.first()),Pd(h.last())),w=h.getIterator();let R=w.getNext();return Tl(e).J({index:"documentKeyIndex",range:m},(Y,J,ye)=>{const at=Cn.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;R&&bp(R,at)<0;)o(R,null),R=w.getNext();R&&R.isEqual(at)&&(o(R,J),R=w.hasNext()?w.getNext():null),R?ye.q(Pd(R)):ye.done()}).next(()=>{for(;R;)o(R,null),R=w.hasNext()?w.getNext():null})}getAllFromCollection(e,t,o){const h=[t.popLast().toArray(),t.lastSegment(),Cd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tl(e).K(IDBKeyRange.bound(h,m,!0)).next(w=>{let R=Ws();for(const Y of w){const J=this.Kn(Cn.fromSegments(Y.prefixPath.concat(Y.collectionGroup,Y.documentId)),Y);R=R.insert(J.key,J)}return R})}getAllFromCollectionGroup(e,t,o,h){let m=Ws();const w=Tf(t,o),R=Tf(t,it.max());return Tl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,R,!0)},(Y,J,ye)=>{const at=this.Kn(Cn.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);m=m.insert(at.key,at),m.size===h&&ye.done()}).next(()=>m)}newChangeBuffer(e){return new Cp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Mh(e).get("remoteDocumentGlobalKey").next(t=>(Hn(!!t),t))}qn(e,t){return Mh(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const o=function wh(i,e){let t;if(e.document)t=de(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Cn.fromSegments(e.noDocument.path),h=iu(e.noDocument.readTime);t=ur.newNoDocument(o,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ln();{const o=Cn.fromSegments(e.unknownDocument.path),h=iu(e.unknownDocument.version);t=ur.newUnknownDocument(o,h)}}return e.readTime&&t.setReadTime(function(o){const h=new Qn(o[0],o[1]);return pr.fromTimestamp(h)}(e.readTime)),t}(this.wt,t);if(!o.isNoDocument()||!o.version.isEqual(pr.min()))return o}return ur.newInvalidDocument(e)}}function Ip(i){return new ha(i)}class Cp extends xh{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Qo(o=>o.toString(),(o,h)=>o.isEqual(h))}applyChanges(e){const t=[];let o=0,h=new Nn((m,w)=>lr(m.canonicalString(),w.canonicalString()));return this.changes.forEach((m,w)=>{const R=this.Hn.get(m);if(t.push(this.zn.removeEntry(e,m,R.readTime)),w.isValidDocument()){const Y=Id(this.zn.wt,w);h=h.add(m.path.popLast()),o+=Md(Y)-R.size,t.push(this.zn.addEntry(e,m,Y))}else if(o-=R.size,this.trackRemovals){const Y=Id(this.zn.wt,w.convertToNoDocument(pr.min()));t.push(this.zn.addEntry(e,m,Y))}}),h.forEach(m=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.zn.updateMetadata(e,o)),It.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(o=>(this.Hn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:o,Wn:h})=>(h.forEach((m,w)=>{this.Hn.set(m,{size:w,readTime:o.get(m).readTime})}),o))}}function Mh(i){return To(i,"remoteDocumentGlobal")}function Tl(i){return To(i,"remoteDocumentsV14")}function Pd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tf(i,e){const t=e.documentKey.path.toArray();return[i,Cd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bp(i,e){const t=i.path.toArray(),o=e.path.toArray();let h=0;for(let m=0;m<t.length-2&&m<o.length-2;++m)if(h=lr(t[m],o[m]),h)return h;return h=lr(t.length,o.length),h||(h=lr(t[t.length-2],o[o.length-2]),h||lr(t[t.length-1],o[o.length-1]))}class Rh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sf{constructor(e,t,o,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(o=h,this.getBaseDocument(e,t,o))).next(h=>(null!==o&&nc(o.mutation,h,vs.empty(),Qn.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Wr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Wr()){const h=to();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,o).next(m=>{let w=Lo();return m.forEach((R,Y)=>{w=w.insert(R,Y.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const o=to();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Wr()))}populateOverlays(e,t,o){const h=[];return o.forEach(m=>{t.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((w,R)=>{t.set(w,R)})})}computeViews(e,t,o,h){let m=Ws();const w=zl(),R=zl();return t.forEach((Y,J)=>{const ye=o.get(J.key);h.has(J.key)&&(void 0===ye||ye.mutation instanceof ua)?m=m.insert(J.key,J):void 0!==ye&&(w.set(J.key,ye.mutation.getFieldMask()),nc(ye.mutation,J,ye.mutation.getFieldMask(),Qn.now()))}),this.recalculateAndSaveOverlays(e,m).next(Y=>(Y.forEach((J,ye)=>w.set(J,ye)),t.forEach((J,ye)=>{var at;return R.set(J,new Rh(ye,null!==(at=w.get(J))&&void 0!==at?at:null))}),R))}recalculateAndSaveOverlays(e,t){const o=zl();let h=new Zi((w,R)=>w-R),m=Wr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const R of w)R.keys().forEach(Y=>{const J=t.get(Y);if(null===J)return;let ye=o.get(Y)||vs.empty();ye=R.applyToLocalView(J,ye),o.set(Y,ye);const at=(h.get(R.batchId)||Wr()).add(Y);h=h.insert(R.batchId,at)})}).next(()=>{const w=[],R=h.getReverseIterator();for(;R.hasNext();){const Y=R.getNext(),J=Y.key,ye=Y.value,at=gd();ye.forEach(kt=>{if(!m.has(kt)){const Kt=El(t.get(kt),o.get(kt));null!==Kt&&at.set(kt,Kt),m=m.add(kt)}}),w.push(this.documentOverlayCache.saveOverlays(e,J,at))}return It.waitFor(w)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Cn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var h}getNextDocuments(e,t,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,h).next(m=>{const w=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,h-m.size):It.resolve(to());let R=-1,Y=m;return w.next(J=>It.forEach(J,(ye,at)=>(R<at.largestBatchId&&(R=at.largestBatchId),m.get(ye)?It.resolve():this.getBaseDocument(e,ye,at).next(kt=>{Y=Y.insert(ye,kt)}))).next(()=>this.populateOverlays(e,J,m)).next(()=>this.computeViews(e,Y,J,Wr())).next(ye=>({batchId:R,changes:Bo(ye)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Cn(t)).next(o=>{let h=Lo();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const h=t.collectionGroup;let m=Lo();return this.indexManager.getCollectionParents(e,h).next(w=>It.forEach(w,R=>{const Y=(J=t,ye=R.child(h),new Fo(ye,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,ye;return this.getDocumentsMatchingCollectionQuery(e,Y,o).next(J=>{J.forEach((ye,at)=>{m=m.insert(ye,at)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,o){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(m=>{m.forEach((R,Y)=>{const J=Y.getKey();null===h.get(J)&&(h=h.insert(J,ur.newInvalidDocument(J)))});let w=Lo();return h.forEach((R,Y)=>{const J=m.get(R);void 0!==J&&nc(J.mutation,Y,vs.empty(),Qn.now()),Vc(t,Y)&&(w=w.insert(R,Y))}),w})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):It.resolve(ur.newInvalidDocument(t))}}class Xc{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return It.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var o;return this.Jn.set(t.id,{id:(o=t).id,version:o.version,createTime:bs(o.createTime)}),It.resolve()}getNamedQuery(e,t){return It.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(o=t).name,query:Dd(o.bundledQuery),readTime:bs(o.readTime)}),It.resolve();var o}}class Rm{constructor(){this.overlays=new Zi(Cn.comparator),this.Xn=new Map}getOverlay(e,t){return It.resolve(this.overlays.get(t))}getOverlays(e,t){const o=to();return It.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&o.set(h,m)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((h,m)=>{this.ie(e,t,m)}),It.resolve()}removeOverlaysForBatchId(e,t,o){const h=this.Xn.get(o);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.Xn.delete(o)),It.resolve()}getOverlaysForCollection(e,t,o){const h=to(),m=t.length+1,w=new Cn(t.child("")),R=this.overlays.getIteratorFrom(w);for(;R.hasNext();){const Y=R.getNext().value,J=Y.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===m&&Y.largestBatchId>o&&h.set(Y.getKey(),Y)}return It.resolve(h)}getOverlaysForCollectionGroup(e,t,o,h){let m=new Zi((J,ye)=>J-ye);const w=this.overlays.getIterator();for(;w.hasNext();){const J=w.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>o){let ye=m.get(J.largestBatchId);null===ye&&(ye=to(),m=m.insert(J.largestBatchId,ye)),ye.set(J.getKey(),J)}}const R=to(),Y=m.getIterator();for(;Y.hasNext()&&(Y.getNext().value.forEach((J,ye)=>R.set(J,ye)),!(R.size()>=h)););return It.resolve(R)}ie(e,t,o){const h=this.overlays.get(o.key);if(null!==h){const w=this.Xn.get(h.largestBatchId).delete(o.key);this.Xn.set(h.largestBatchId,w)}this.overlays=this.overlays.insert(o.key,new Ed(t,o));let m=this.Xn.get(t);void 0===m&&(m=Wr(),this.Xn.set(t,m)),this.Xn.set(t,m.add(o.key))}}class Oh{constructor(){this.Zn=new Nn(no.ts),this.es=new Nn(no.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const o=new no(e,t);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.rs(new no(e,t))}os(e,t){e.forEach(o=>this.removeReference(o,t))}us(e){const t=new Cn(new Qr([])),o=new no(t,e),h=new no(t,e+1),m=[];return this.es.forEachInRange([o,h],w=>{this.rs(w),m.push(w.key)}),m}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Cn(new Qr([])),o=new no(t,e),h=new no(t,e+1);let m=Wr();return this.es.forEachInRange([o,h],w=>{m=m.add(w.key)}),m}containsKey(e){const t=new no(e,0),o=this.Zn.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class no{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Cn.comparator(e.key,t.key)||lr(e.ls,t.ls)}static ns(e,t){return lr(e.ls,t.ls)||Cn.comparator(e.key,t.key)}}class Om{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Nn(no.ts)}checkEmpty(e){return It.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,h){const m=this.fs;this.fs++;const w=new qc(m,t,o,h);this.mutationQueue.push(w);for(const R of h)this.ds=this.ds.add(new no(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return It.resolve(w)}lookupMutationBatch(e,t){return It.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ws(t+1),m=h<0?0:h;return It.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return It.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return It.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new no(t,0),h=new no(t,Number.POSITIVE_INFINITY),m=[];return this.ds.forEachInRange([o,h],w=>{const R=this._s(w.ls);m.push(R)}),It.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Nn(lr);return t.forEach(h=>{const m=new no(h,0),w=new no(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([m,w],R=>{o=o.add(R.ls)})}),It.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,h=o.length+1;let m=o;Cn.isDocumentKey(m)||(m=m.child(""));const w=new no(new Cn(m),0);let R=new Nn(lr);return this.ds.forEachWhile(Y=>{const J=Y.key.path;return!!o.isPrefixOf(J)&&(J.length===h&&(R=R.add(Y.ls)),!0)},w),It.resolve(this.gs(R))}gs(e){const t=[];return e.forEach(o=>{const h=this._s(o);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){Hn(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let o=this.ds;return It.forEach(t.mutations,h=>{const m=new no(h.key,t.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ds=o})}In(e){}containsKey(e,t){const o=new no(t,0),h=this.ds.firstAfterOrEqual(o);return It.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return It.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ph{constructor(e){this.ps=e,this.docs=new Zi(Cn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,h=this.docs.get(o),m=h?h.size:0,w=this.ps(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:w}),this.size+=w-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return It.resolve(o?o.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let o=Ws();return t.forEach(h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():ur.newInvalidDocument(h))}),It.resolve(o)}getAllFromCollection(e,t,o){let h=Ws();const m=new Cn(t.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:R,value:{document:Y}}=w.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Ht(Oe(Y),o)<=0||(h=h.insert(Y.key,Y.mutableCopy()))}return It.resolve(h)}getAllFromCollectionGroup(e,t,o,h){Ln()}Is(e,t){return It.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Sg(this)}getSize(e){return It.resolve(this.size)}}class Sg extends xh{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((o,h)=>{h.isValidDocument()?t.push(this.zn.addEntry(e,h)):this.zn.removeEntry(o)}),It.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Ag{constructor(e){this.persistence=e,this.Ts=new Qo(t=>Za(t),Qa),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.Es=0,this.As=new Oh,this.targetCount=0,this.Rs=Dl.An()}forEachTarget(e,t){return this.Ts.forEach((o,h)=>t(h)),It.resolve()}getLastRemoteSnapshotVersion(e){return It.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return It.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),It.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Es&&(this.Es=t),It.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,It.resolve()}updateTargetData(e,t){return this.vn(t),It.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,It.resolve()}removeTargets(e,t,o){let h=0;const m=[];return this.Ts.forEach((w,R)=>{R.sequenceNumber<=t&&null===o.get(R.targetId)&&(this.Ts.delete(w),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),h++)}),It.waitFor(m).next(()=>h)}getTargetCount(e){return It.resolve(this.targetCount)}getTargetData(e,t){const o=this.Ts.get(t)||null;return It.resolve(o)}addMatchingKeys(e,t,o){return this.As.ss(t,o),It.resolve()}removeMatchingKeys(e,t,o){this.As.os(t,o);const h=this.persistence.referenceDelegate,m=[];return h&&t.forEach(w=>{m.push(h.markPotentiallyOrphaned(e,w))}),It.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),It.resolve()}getMatchingKeysForTargetId(e,t){const o=this.As.hs(t);return It.resolve(o)}containsKey(e,t){return It.resolve(this.As.containsKey(t))}}class ql{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ss(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Ag(this),this.indexManager=new Kc,this.remoteDocumentCache=new Ph(o=>this.referenceDelegate.Ss(o)),this.wt=new wd(t),this.Ds=new Xc(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.bs[e.toKey()];return o||(o=new Om(t,this.referenceDelegate),this.bs[e.toKey()]=o),o}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,o){rn("MemoryPersistence","Starting transaction:",e);const h=new xg(this.Ps.next());return this.referenceDelegate.Cs(),o(h).next(m=>this.referenceDelegate.xs(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ns(e,t){return It.or(Object.values(this.bs).map(o=>()=>o.containsKey(e,t)))}}class xg extends gr{constructor(e){super(),this.currentSequenceNumber=e}}class kd{constructor(e){this.persistence=e,this.ks=new Oh,this.Os=null}static Ms(e){return new kd(e)}get Fs(){if(this.Os)return this.Os;throw Ln()}addReference(e,t,o){return this.ks.addReference(o,t),this.Fs.delete(o.toString()),It.resolve()}removeReference(e,t,o){return this.ks.removeReference(o,t),this.Fs.add(o.toString()),It.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),It.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(h=>this.Fs.add(h.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(m=>this.Fs.add(m.toString()))}).next(()=>o.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return It.forEach(this.Fs,o=>{const h=Cn.fromPath(o);return this.$s(e,h).next(m=>{m||t.removeEntry(h,pr.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(o=>{o?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return It.or([()=>It.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Dp{constructor(e){this.wt=e}O(e,t,o,h){const m=new Cs("createOrUpgrade",t);var R;o<1&&h>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fp,{unique:!0}),R.createObjectStore("documentMutations"),Mg(e),function(R){R.createObjectStore("remoteDocuments")}(e));let w=It.resolve();return o<3&&h>=3&&(0!==o&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),Mg(e)),w=w.next(()=>function(R){const Y=R.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pr.min().toTimestamp(),targetCount:0};return Y.put("targetGlobalKey",J)}(m))),o<4&&h>=4&&(0!==o&&(w=w.next(()=>function(R,Y){return Y.store("mutations").K().next(J=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fp,{unique:!0});const ye=Y.store("mutations"),at=J.map(kt=>ye.put(kt));return It.waitFor(at)})}(e,m))),w=w.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&h>=5&&(w=w.next(()=>this.Bs(m))),o<6&&h>=6&&(w=w.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(m)))),o<7&&h>=7&&(w=w.next(()=>this.Us(m))),o<8&&h>=8&&(w=w.next(()=>this.qs(e,m))),o<9&&h>=9&&(w=w.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&h>=10&&(w=w.next(()=>this.Ks(m))),o<11&&h>=11&&(w=w.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&h>=12&&(w=w.next(()=>{!function(R){const Y=R.createObjectStore("documentOverlays",{keyPath:mg});Y.createIndex("collectionPathOverlayIndex",yg,{unique:!1}),Y.createIndex("collectionGroupOverlayIndex",gc,{unique:!1})}(e)})),o<13&&h>=13&&(w=w.next(()=>function(R){const Y=R.createObjectStore("remoteDocumentsV14",{keyPath:gp});Y.createIndex("documentKeyIndex",Sm),Y.createIndex("collectionGroupIndex",Am)}(e)).next(()=>this.Gs(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&h>=14&&(w=w.next(()=>this.Qs(e,m))),o<15&&h>=15&&(w=w.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:xu}).createIndex("sequenceNumberIndex",_d,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:_f}).createIndex("documentKeyIndex",xm,{unique:!1})}(e))),w}Ls(e){let t=0;return e.store("remoteDocuments").J((o,h)=>{t+=Md(h)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Bs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.K().next(h=>It.forEach(h,m=>{const w=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.K("userMutationsIndex",w).next(R=>It.forEach(R,Y=>{Hn(Y.userId===m.userId);const J=Il(this.wt,Y);return bg(e,m.userId,J).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return o.J((w,R)=>{const Y=new Qr(w),J=[0,Vo(Y)];m.push(t.get(J).next(ye=>ye?It.resolve():t.put({targetId:0,path:Vo(Y),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>It.waitFor(m))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:vf});const o=t.store("collectionParents"),h=new Th,m=w=>{if(h.add(w)){const R=w.lastSegment(),Y=w.popLast();return o.put({collectionId:R,parent:Vo(Y)})}};return t.store("remoteDocuments").J({H:!0},(w,R)=>{const Y=new Qr(w);return m(Y.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([w,R,Y],J)=>{const ye=nl(R);return m(ye.popLast())}))}Ks(e){const t=e.store("targets");return t.J((o,h)=>{const m=bd(h),w=Yc(this.wt,m);return t.put(w)})}Gs(e,t){const o=t.store("remoteDocuments"),h=[];return o.J((m,w)=>{const R=t.store("remoteDocumentsV14"),Y=(J=w,J.document?new Cn(Qr.fromString(J.document.name).popFirst(5)):J.noDocument?Cn.fromSegments(J.noDocument.path):J.unknownDocument?Cn.fromSegments(J.unknownDocument.path):Ln()).path.toArray();var J;const ye={prefixPath:Y.slice(0,Y.length-2),collectionGroup:Y[Y.length-2],documentId:Y[Y.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};h.push(R.put(ye))}).next(()=>It.waitFor(h))}Qs(e,t){const o=t.store("mutations"),h=Ip(this.wt),m=new ql(kd.Ms,this.wt.ne);return o.K().next(w=>{const R=new Map;return w.forEach(Y=>{var J;let ye=null!==(J=R.get(Y.userId))&&void 0!==J?J:Wr();Il(this.wt,Y).keys().forEach(at=>ye=ye.add(at)),R.set(Y.userId,ye)}),It.forEach(R,(Y,J)=>{const ye=new Ki(J),at=If.se(this.wt,ye),kt=m.getIndexManager(ye),Kt=Rd.se(ye,this.wt,kt,m.referenceDelegate);return new Sf(h,Kt,at,kt).recalculateAndSaveOverlaysForDocumentKeys(new yp(t,ss.ot),Y).next()})})}}function Mg(i){i.createObjectStore("targetDocuments",{keyPath:pc}).createIndex("documentTargetsIndex",mp,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gg,{unique:!0}),i.createObjectStore("targetGlobal")}const Af="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tp{constructor(e,t,o,h,m,w,R,Y,J,ye,at=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.js=m,this.window=w,this.document=R,this.Ws=J,this.zs=ye,this.Hs=at,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=kt=>Promise.resolve(),!Tp.V())throw new Jt(Nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wp(this,h),this.ei=t+"main",this.wt=new wd(Y),this.ni=new Fs(this.ei,this.Hs,new Dp(this.wt)),this.Vs=new Ep(this.referenceDelegate,this.wt),this.remoteDocumentCache=Ip(this.wt),this.Ds=new _g,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ye&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jt(Nt.FAILED_PRECONDITION,Af);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ss(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var o=(0,Ae.Z)(function*(h){if(t.started)return e(h)});return function(h){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ae.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ou(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(zs(e))return rn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return xf(e).get("owner").next(t=>It.resolve(this.di(t)))}_i(e){return ou(e).delete(this.clientId)}wi(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const h=To(o,"clientMetadata");return h.K().next(m=>{const w=e.gi(m,18e5),R=m.filter(Y=>-1===w.indexOf(Y));return It.forEach(R,Y=>h.delete(Y.clientId)).next(()=>R)})}).catch(()=>[]);if(e.si)for(const o of t)e.si.removeItem(e.yi(o.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?It.resolve(!0):xf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Jt(Nt.FAILED_PRECONDITION,Af);return!1}}return!(!this.networkEnabled||!this.inForeground)||ou(e).K().next(o=>void 0===this.gi(o,5e3).find(h=>{if(this.clientId!==h.clientId){const w=!this.inForeground&&h.inForeground,R=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||w&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&rn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new yp(t,ss.ot);return e.li(o).next(()=>e._i(o))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(o=>this.mi(o.updateTimeMs,t)&&!this.pi(o.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>ou(e).K().next(t=>this.gi(t,18e5).map(o=>o.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Rd.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ig(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return If.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,o){rn("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",m=15===(w=this.Hs)?Ef:14===w?Eh:13===w?Mu:12===w?vg:11===w?_h:void Ln();var w;let R;return this.ni.runTransaction(e,h,m,Y=>(R=new yp(Y,this.Ps?this.Ps.next():ss.ot),"readwrite-primary"===t?this.ai(R).next(J=>!!J||this.hi(R)).next(J=>{if(!J)throw Oi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Jt(Nt.FAILED_PRECONDITION,ln);return o(R)}).next(J=>this.fi(R).next(()=>J)):this.bi(R).next(()=>o(R)))).then(Y=>(R.raiseOnCommittedEvent(),Y))}bi(e){return xf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Jt(Nt.FAILED_PRECONDITION,Af)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xf(e).put("owner",t)}static V(){return Fs.V()}li(e){const t=xf(e);return t.get("owner").next(o=>this.di(o)?(rn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):It.resolve())}mi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Oi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Ge.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const o=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return rn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Oi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Oi("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xf(i){return To(i,"owner")}function ou(i){return To(i,"clientMetadata")}function Yl(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Rg{constructor(e,t,o,h){this.targetId=e,this.fromCache=t,this.Pi=o,this.vi=h}static Vi(e,t){let o=Wr(),h=Wr();for(const m of t.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Rg(e,t.fromCache,o,h)}}class Mf{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,o,h){return this.Ci(e,t).next(m=>m||this.xi(e,t,h,o)).next(m=>m||this.Ni(e,t))}Ci(e,t){return It.resolve(null)}xi(e,t,o,h){return function $l(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||h.isEqual(pr.min())?this.Ni(e,t):this.Di.getDocuments(e,o).next(m=>{const w=this.ki(t,m);return this.Oi(t,w,o,h)?this.Ni(e,t):(Ea()<=Xe.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Ul(t)),this.Mi(e,w,t,oe(h,-1)))})}ki(e,t){let o=new Nn(bu(e));return t.forEach((h,m)=>{Vc(e,m)&&(o=o.add(m))}),o}Oi(e,t,o,h){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ni(e,t){return Ea()<=Xe.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",Ul(t)),this.Di.getDocumentsMatchingQuery(e,t,it.min())}Mi(e,t,o,h){return this.Di.getDocumentsMatchingQuery(e,o,h).next(m=>(t.forEach(w=>{m=m.insert(w.key,w)}),m))}}class Lu{constructor(e,t,o,h){this.persistence=e,this.Fi=t,this.wt=h,this.$i=new Zi(lr),this.Bi=new Qo(m=>Za(m),Qa),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(o)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sf(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Og(i,e,t,o){return new Lu(i,e,t,o)}function yc(i,e){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,Ae.Z)(function*(i,e){const t=wn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let h;return t.mutationQueue.getAllMutationBatches(o).next(m=>(h=m,t.qi(e),t.mutationQueue.getAllMutationBatches(o))).next(m=>{const w=[],R=[];let Y=Wr();for(const J of h){w.push(J.batchId);for(const ye of J.mutations)Y=Y.add(ye.key)}for(const J of m){R.push(J.batchId);for(const ye of J.mutations)Y=Y.add(ye.key)}return t.localDocuments.getDocuments(o,Y).next(J=>({Ki:J,removedBatchIds:w,addedBatchIds:R}))})})}),Nd.apply(this,arguments)}function Pg(i,e){const t=wn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const h=e.batch.keys(),m=t.Ui.newChangeBuffer({trackRemovals:!0});return function(w,R,Y,J){const ye=Y.batch,at=ye.keys();let kt=It.resolve();return at.forEach(Kt=>{kt=kt.next(()=>J.getEntry(R,Kt)).next(nn=>{const Gn=Y.docVersions.get(Kt);Hn(null!==Gn),nn.version.compareTo(Gn)<0&&(ye.applyToRemoteDocument(nn,Y),nn.isValidDocument()&&(nn.setReadTime(Y.commitVersion),J.addEntry(nn)))})}),kt.next(()=>w.mutationQueue.removeMutationBatch(R,ye))}(t,o,e,m).next(()=>m.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(w){let R=Wr();for(let Y=0;Y<w.mutationResults.length;++Y)w.mutationResults[Y].transformResults.length>0&&(R=R.add(w.batch.mutations[Y].key));return R}(e))).next(()=>t.localDocuments.getDocuments(o,h))})}function Rf(i){const e=wn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function kg(i,e){const t=wn(i),o=e.snapshotVersion;let h=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const w=t.Ui.newChangeBuffer({trackRemovals:!0});h=t.$i;const R=[];e.targetChanges.forEach((ye,at)=>{const kt=h.get(at);if(!kt)return;R.push(t.Vs.removeMatchingKeys(m,ye.removedDocuments,at).next(()=>t.Vs.addMatchingKeys(m,ye.addedDocuments,at)));let Kt=kt.withSequenceNumber(m.currentSequenceNumber);var nn,Gn,cr;e.targetMismatches.has(at)?Kt=Kt.withResumeToken(Ls.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):ye.resumeToken.approximateByteSize()>0&&(Kt=Kt.withResumeToken(ye.resumeToken,o)),h=h.insert(at,Kt),Gn=Kt,cr=ye,(0===(nn=kt).resumeToken.approximateByteSize()||Gn.snapshotVersion.toMicroseconds()-nn.snapshotVersion.toMicroseconds()>=3e8||cr.addedDocuments.size+cr.modifiedDocuments.size+cr.removedDocuments.size>0)&&R.push(t.Vs.updateTargetData(m,Kt))});let Y=Ws(),J=Wr();if(e.documentUpdates.forEach(ye=>{e.resolvedLimboDocuments.has(ye)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,ye))}),R.push(kh(m,w,e.documentUpdates).next(ye=>{Y=ye.Gi,J=ye.Qi})),!o.isEqual(pr.min())){const ye=t.Vs.getLastRemoteSnapshotVersion(m).next(at=>t.Vs.setTargetsMetadata(m,m.currentSequenceNumber,o));R.push(ye)}return It.waitFor(R).next(()=>w.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,Y,J)).next(()=>Y)}).then(m=>(t.$i=h,m))}function kh(i,e,t){let o=Wr(),h=Wr();return t.forEach(m=>o=o.add(m)),e.getEntries(i,o).next(m=>{let w=Ws();return t.forEach((R,Y)=>{const J=m.get(R);Y.isFoundDocument()!==J.isFoundDocument()&&(h=h.add(R)),Y.isNoDocument()&&Y.version.isEqual(pr.min())?(e.removeEntry(R,Y.readTime),w=w.insert(R,Y)):!J.isValidDocument()||Y.version.compareTo(J.version)>0||0===Y.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(Y),w=w.insert(R,Y)):rn("LocalStore","Ignoring outdated watch update for ",R,". Current version:",J.version," Watch version:",Y.version)}),{Gi:w,Qi:h}})}function Sp(i,e){const t=wn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function vc(i,e){const t=wn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let h;return t.Vs.getTargetData(o,e).next(m=>m?(h=m,It.resolve(h)):t.Vs.allocateTargetId(o).next(w=>(h=new Ru(e,w,0,o.currentSequenceNumber),t.Vs.addTargetData(o,h).next(()=>h))))}).then(o=>{const h=t.$i.get(o.targetId);return(null===h||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.$i=t.$i.insert(o.targetId,o),t.Bi.set(e,o.targetId)),o})}function Fd(i,e,t){return Of.apply(this,arguments)}function Of(){return Of=(0,Ae.Z)(function*(i,e,t){const o=wn(i),h=o.$i.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",m,w=>o.persistence.referenceDelegate.removeTarget(w,h)))}catch(w){if(!zs(w))throw w;rn("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}o.$i=o.$i.remove(e),o.Bi.delete(h.target)}),Of.apply(this,arguments)}function Ld(i,e,t){const o=wn(i);let h=pr.min(),m=Wr();return o.persistence.runTransaction("Execute query","readonly",w=>function(R,Y,J){const ye=wn(R),at=ye.Bi.get(J);return void 0!==at?It.resolve(ye.$i.get(at)):ye.Vs.getTargetData(Y,J)}(o,w,Ma(e)).next(R=>{if(R)return h=R.lastLimboFreeSnapshotVersion,o.Vs.getMatchingKeysForTargetId(w,R.targetId).next(Y=>{m=Y})}).next(()=>o.Fi.getDocumentsMatchingQuery(w,e,t?h:pr.min(),t?m:Wr())).next(R=>(Nh(o,df(e),R),{documents:R,ji:m})))}function Ap(i,e){const t=wn(i),o=wn(t.Vs),h=t.$i.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",m=>o.te(m,e).next(w=>w?w.target:null))}function Pf(i,e){const t=wn(i),o=t.Li.get(e)||pr.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Ui.getAllFromCollectionGroup(h,e,oe(o,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Nh(t,e,h),h))}function Nh(i,e,t){let o=pr.min();t.forEach((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.Li.set(e,o)}function Bd(){return Bd=(0,Ae.Z)(function*(i,e,t,o){const h=wn(i);let m=Wr(),w=Ws();for(const J of t){const ye=e.Wi(J.metadata.name);J.document&&(m=m.add(ye));const at=e.zi(J);at.setReadTime(e.Hi(J.metadata.readTime)),w=w.insert(ye,at)}const R=h.Ui.newChangeBuffer({trackRemovals:!0}),Y=yield vc(h,(J=o,Ma(Ja(Qr.fromString(`__bundle__/docs/${J}`)))));var J;return h.persistence.runTransaction("Apply bundle documents","readwrite",J=>kh(J,R,w).next(ye=>(R.apply(J),ye)).next(ye=>h.Vs.removeMatchingKeysForTargetId(J,Y.targetId).next(()=>h.Vs.addMatchingKeys(J,m,Y.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(J,ye.Gi,ye.Qi)).next(()=>ye.Gi)))}),Bd.apply(this,arguments)}function Na(i,e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Ae.Z)(function*(i,e,t=Wr()){const o=yield vc(i,Ma(Dd(e.bundledQuery))),h=wn(i);return h.persistence.runTransaction("Save named query","readwrite",m=>{const w=bs(e.readTime);if(o.snapshotVersion.compareTo(w)>=0)return h.Ds.saveNamedQuery(m,e);const R=o.withResumeToken(Ls.EMPTY_BYTE_STRING,w);return h.$i=h.$i.insert(R.targetId,R),h.Vs.updateTargetData(m,R).next(()=>h.Vs.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>h.Vs.addMatchingKeys(m,t,o.targetId)).next(()=>h.Ds.saveNamedQuery(m,e))})}),Fh.apply(this,arguments)}function Fa(i,e){return`firestore_clients_${i}_${e}`}function Vd(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function La(i,e){return`firestore_targets_${i}_${e}`}class au{constructor(e,t,o,h){this.user=e,this.batchId=t,this.state=o,this.error=h}static Ji(e,t,o){const h=JSON.parse(o);let m,w="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return w&&h.error&&(w="string"==typeof h.error.message&&"string"==typeof h.error.code,w&&(m=new Jt(h.error.code,h.error.message))),w?new au(e,t,h.state,m):(Oi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _c{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Ji(e,t){const o=JSON.parse(t);let h,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(h=new Jt(o.error.code,o.error.message))),m?new _c(e,o.state,h):(Oi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const o=JSON.parse(t);let h="object"==typeof o&&o.activeTargetIds instanceof Array,m=ac();for(let w=0;h&&w<o.activeTargetIds.length;++w)h=ne(o.activeTargetIds[w]),m=m.add(o.activeTargetIds[w]);return h?new kf(e,m):(Oi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ec{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ec(t.clientId,t.onlineState):(Oi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nf{constructor(){this.activeTargetIds=ac()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ng{constructor(e,t,o,h,m){this.window=e,this.js=t,this.persistenceKey=o,this.tr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Zi(lr),this.started=!1,this.ir=[];const w=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.rr=Fa(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Nf),this.cr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.Ri();for(const h of t){if(h===e.tr)continue;const m=e.getItem(Fa(e.persistenceKey,h));if(m){const w=kf.Ji(h,m);w&&(e.sr=e.sr.insert(w.clientId,w))}}e._r();const o=e.storage.getItem(e.lr);if(o){const h=e.wr(o);h&&e.mr(h)}for(const h of e.ir)e.nr(h);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((o,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,o){this.yr(e,t,o),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(La(this.persistenceKey,e));if(o){const h=_c.Ji(e,o);h&&(t=h.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(La(this.persistenceKey,e))}updateQueryState(e,t,o){this.Tr(e,t,o)}handleUserChange(e,t,o){t.forEach(h=>{this.pr(h)}),this.currentUser=e,o.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rn("SharedClientState","READ",e,t),t}setItem(e,t){rn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(rn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const h=t.Rr(o.key);return t.br(h,null)}{const h=t.Pr(o.key,o.newValue);if(h)return t.br(h.clientId,h)}}else if(t.ar.test(o.key)){if(null!==o.newValue){const h=t.vr(o.key,o.newValue);if(h)return t.Vr(h)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const h=t.Sr(o.key,o.newValue);if(h)return t.Dr(h)}}else if(o.key===t.lr){if(null!==o.newValue){const h=t.wr(o.newValue);if(h)return t.mr(h)}}else if(o.key===t.ur){const h=function(m){let w=ss.ot;if(null!=m)try{const R=JSON.parse(m);Hn("number"==typeof R),w=R}catch(R){Oi("SharedClientState","Failed to read sequence number from WebStorage",R)}return w}(o.newValue);h!==ss.ot&&t.sequenceNumberHandler(h)}else if(o.key===t.dr){const h=t.Cr(o.newValue);yield Promise.all(h.map(m=>t.syncEngine.Nr(m)))}}else t.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,o){const h=new au(this.currentUser,e,t,o),m=Vd(this.persistenceKey,this.currentUser,e);this.setItem(m,h.Yi())}pr(e){const t=Vd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,o){const h=La(this.persistenceKey,e),m=new _c(e,t,o);this.setItem(h,m.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const o=this.Rr(e);return kf.Ji(o,t)}vr(e,t){const o=this.ar.exec(e),h=Number(o[1]);return au.Ji(new Ki(void 0!==o[2]?o[2]:null),h,t)}Sr(e,t){const o=this.hr.exec(e),h=Number(o[1]);return _c.Ji(h,t)}wr(e){return Ec.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);rn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.sr.insert(e,t):this.sr.remove(e),h=this.gr(this.sr),m=this.gr(o),w=[],R=[];return m.forEach(Y=>{h.has(Y)||w.push(Y)}),h.forEach(Y=>{m.has(Y)||R.push(Y)}),this.syncEngine.Mr(w,R).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=ac();return e.forEach((o,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class km{constructor(){this.Fr=new Nf,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,o){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Nf,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fg{Br(e){}shutdown(){}}class Nm{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ly={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Lg{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class xp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,o,h,m){const w=this.oo(e,t);rn("RestConnection","Sending: ",w,o);const R={};return this.uo(R,h,m),this.co(e,w,R,o).then(Y=>(rn("RestConnection","Received: ",Y),Y),Y=>{throw wa("RestConnection",`${e} failed with error: `,Y,"url: ",w,"request:",o),Y})}ao(e,t,o,h,m,w){return this.ro(e,t,o,h,m)}uo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,m)=>e[m]=h),o&&o.headers.forEach((h,m)=>e[m]=h)}oo(e,t){return`${this.so}/v1/${t}:${Ly[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,h){return new Promise((m,w)=>{const R=new ja;R.listenOnce(Rc.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case vo.NO_ERROR:const J=R.getResponseJson();rn("Connection","XHR received:",JSON.stringify(J)),m(J);break;case vo.TIMEOUT:rn("Connection",'RPC "'+e+'" timed out'),w(new Jt(Nt.DEADLINE_EXCEEDED,"Request time out"));break;case vo.HTTP_ERROR:const ye=R.getStatus();if(rn("Connection",'RPC "'+e+'" failed with status:',ye,"response text:",R.getResponseText()),ye>0){const at=R.getResponseJson().error;if(at&&at.status&&at.message){const kt=function(Kt){const nn=Kt.toLowerCase().replace(/_/g,"-");return Object.values(Nt).indexOf(nn)>=0?nn:Nt.UNKNOWN}(at.status);w(new Jt(kt,at.message))}else w(new Jt(Nt.UNKNOWN,"Server responded with status "+R.getStatus()))}else w(new Jt(Nt.UNAVAILABLE,"Connection failed."));break;default:Ln()}}finally{rn("Connection",'RPC "'+e+'" completed.')}});const Y=JSON.stringify(h);R.send(t,"POST",Y,o,15)})}ho(e,t,o){const h=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=ea(),w=ul(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Xl({})),this.uo(R.initMessageHeaders,t,o),(0,Ge.uI)()||(0,Ge.b$)()||(0,Ge.d)()||(0,Ge.w1)()||(0,Ge.Mn)()||(0,Ge.ru)()||(R.httpHeadersOverwriteParam="$httpHeaders");const Y=h.join("");rn("Connection","Creating WebChannel: "+Y,R);const J=m.createWebChannel(Y,R);let ye=!1,at=!1;const kt=new Lg({jr:nn=>{at?rn("Connection","Not sending because WebChannel is closed:",nn):(ye||(rn("Connection","Opening WebChannel transport."),J.open(),ye=!0),rn("Connection","WebChannel sending:",nn),J.send(nn))},Wr:()=>J.close()}),Kt=(nn,Gn,cr)=>{nn.listen(Gn,zi=>{try{cr(zi)}catch(fs){setTimeout(()=>{throw fs},0)}})};return Kt(J,ni.EventType.OPEN,()=>{at||rn("Connection","WebChannel transport opened.")}),Kt(J,ni.EventType.CLOSE,()=>{at||(at=!0,rn("Connection","WebChannel transport closed"),kt.eo())}),Kt(J,ni.EventType.ERROR,nn=>{at||(at=!0,wa("Connection","WebChannel transport errored:",nn),kt.eo(new Jt(Nt.UNAVAILABLE,"The operation could not be completed")))}),Kt(J,ni.EventType.MESSAGE,nn=>{var Gn;if(!at){const cr=nn.data[0];Hn(!!cr);const zi=cr,fs=zi.error||(null===(Gn=zi[0])||void 0===Gn?void 0:Gn.error);if(fs){rn("Connection","WebChannel received error:",fs);const Es=fs.status;let Ho=function(ro){const Va=Rr[ro];if(void 0!==Va)return jc(Va)}(Es),$s=fs.message;void 0===Ho&&(Ho=Nt.INTERNAL,$s="Unknown error status: "+Es+" with message "+fs.message),at=!0,kt.eo(new Jt(Ho,$s)),J.close()}else rn("Connection","WebChannel received:",cr),kt.no(cr)}}),Kt(w,cl.STAT_EVENT,nn=>{nn.stat===ki.PROXY?rn("Connection","Detected buffering proxy"):nn.stat===ki.NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(()=>{kt.Zr()},0),kt}}function $d(){return typeof window<"u"?window:null}function Jc(){return typeof document<"u"?document:null}function lu(i){return new el(i,!0)}class Ud{constructor(e,t,o=1e3,h=1.5,m=6e4){this.js=e,this.timerId=t,this.lo=o,this.fo=h,this._o=m,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),h=Math.max(0,t-o);h>0&&rn("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,h,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class jd{constructor(e,t,o,h,m,w,R,Y){this.js=e,this.Ao=o,this.Ro=h,this.bo=m,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=R,this.listener=Y,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Ud(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ae.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ae.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var o=this;return(0,Ae.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():t&&t.code===Nt.RESOURCE_EXHAUSTED?(Oi(t.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):t&&t.code===Nt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,h])=>{this.Po===t&&this.Uo(o,h)},o=>{e(()=>{const h=new Jt(Nt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(h)})})}Uo(e,t){const o=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{o(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(h=>{o(()=>this.qo(h))}),this.stream.onMessage(h=>{o(()=>this.onMessage(h))})}xo(){var e=this;this.state=5,this.So.Io((0,Ae.Z)(function*(){e.state=0,e.start()}))}qo(e){return rn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sl extends jd{constructor(e,t,o,h,m,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,h,w),this.wt=m}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Pt(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(Y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Y?1:"REMOVE"===Y?2:"CURRENT"===Y?3:"RESET"===Y?4:Ln(),h=e.targetChange.targetIds||[],m=function(Y,J){return Y.dt?(Hn(void 0===J||"string"==typeof J),Ls.fromBase64String(J||"")):(Hn(void 0===J||J instanceof Uint8Array),Ls.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,R=w&&function(Y){const J=void 0===Y.code?Nt.UNKNOWN:jc(Y.code);return new Jt(J,Y.message||"")}(w);t=new gf(o,h,m,R||null)}else if("documentChange"in e){const o=e.documentChange,h=tl(i,o.document.name),m=bs(o.document.updateTime),w=new bo({mapValue:{fields:o.document.fields}}),R=ur.newFoundDocument(h,m,w);t=new Hc(o.targetIds||[],o.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const o=e.documentDelete,h=tl(i,o.document),m=o.readTime?bs(o.readTime):pr.min(),w=ur.newNoDocument(h,m);t=new Hc([],o.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const o=e.documentRemove,h=tl(i,o.document);t=new Hc([],o.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Ln();{const o=e.filter,m=new dp(o.count||0);t=new md(o.targetId,m)}}var Y;return t}(this.wt,e),o=function(h){if(!("targetChange"in h))return pr.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?pr.min():m.readTime?bs(m.readTime):pr.min()}(e);return this.listener.Go(t,o)}Qo(e){const t={};t.database=v(this.wt),t.addTarget=function(h,m){let w;const R=m.target;return w=Xa(R)?{documents:sr(h,R)}:{query:Bs(h,R)},w.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?w.resumeToken=cc(h,m.resumeToken):m.snapshotVersion.compareTo(pr.min())>0&&(w.readTime=Wl(h,m.snapshotVersion.toTimestamp())),w}(this.wt,e);const o=function dc(i,e){const t=function(o,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ln()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Mo(t)}jo(e){const t={};t.database=v(this.wt),t.removeTarget=e,this.Mo(t)}}class Mp extends jd{constructor(e,t,o,h,m,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,h,w),this.wt=m,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Hn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function vr(i,e){return i&&i.length>0?(Hn(void 0!==e),i.map(t=>function(o,h){let m=bs(o.updateTime?o.updateTime:h);return m.isEqual(pr.min())&&(m=bs(h)),new tc(m,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=bs(e.commitTime);return this.listener.Jo(o,t)}return Hn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=v(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>dn(this.wt,o))};this.Mo(t)}}class Bg extends class{}{constructor(e,t,o,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.wt=h,this.Zo=!1}tu(){if(this.Zo)throw new Jt(Nt.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.bo.ro(e,t,o,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Jt(Nt.UNKNOWN,h.toString())})}ao(e,t,o,h){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,w])=>this.bo.ao(e,t,o,m,w,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Jt(Nt.UNKNOWN,m.toString())})}terminate(){this.Zo=!0}}class Ff{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Oi(t),this.su=!1):rn("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class So{constructor(e,t,o,h,m){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=m,this.du.Br(R=>{o.enqueueAndForget((0,Ae.Z)(function*(){var Y;uu(w)&&(rn("RemoteStore","Restarting streams for network reachability change."),yield(Y=(0,Ae.Z)(function*(J){const ye=wn(J);ye.lu.add(4),yield Ic(ye),ye._u.set("Unknown"),ye.lu.delete(4),yield wc(ye)}),function(J){return Y.apply(this,arguments)})(w))}))}),this._u=new Ff(o,h)}}function wc(i){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Ae.Z)(function*(i){if(uu(i))for(const e of i.fu)yield e(!0)}),Lf.apply(this,arguments)}function Ic(i){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,Ae.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Vg.apply(this,arguments)}function Hd(i,e){const t=wn(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Vh(t)?Bh(t):td(t).Co()&&Gd(t,e))}function Bf(i,e){const t=wn(i),o=td(t);t.hu.delete(e),o.Co()&&Lh(t,e),0===t.hu.size&&(o.Co()?o.ko():uu(t)&&t._u.set("Unknown"))}function Gd(i,e){i.wu.Nt(e.targetId),td(i).Qo(e)}function Lh(i,e){i.wu.Nt(e),td(i).jo(e)}function Bh(i){i.wu=new Gi({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),td(i).start(),i._u.iu()}function Vh(i){return uu(i)&&!td(i).Do()&&i.hu.size>0}function uu(i){return 0===wn(i).lu.size}function Fm(i){i.wu=void 0}function Lm(i){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Ae.Z)(function*(i){i.hu.forEach((e,t)=>{Gd(i,e)})}),Rp.apply(this,arguments)}function Bm(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,Ae.Z)(function*(i,e){Fm(i),Vh(i)?(i._u.uu(e),Bh(i)):i._u.set("Unknown")}),Op.apply(this,arguments)}function $g(i,e,t){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,Ae.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof gf&&2===e.state&&e.cause)try{yield(o=(0,Ae.Z)(function*(h,m){const w=m.cause;for(const R of m.targetIds)h.hu.has(R)&&(yield h.remoteSyncer.rejectListen(R,w),h.hu.delete(R),h.wu.removeTarget(R))}),function(h,m){return o.apply(this,arguments)})(i,e)}catch(o){rn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Vf(i,o)}else if(e instanceof Hc?i.wu.Ut(e):e instanceof md?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(pr.min()))try{const o=yield Rf(i.localStore);t.compareTo(o)>=0&&(yield function(h,m){const w=h.wu.Yt(m);return w.targetChanges.forEach((R,Y)=>{if(R.resumeToken.approximateByteSize()>0){const J=h.hu.get(Y);J&&h.hu.set(Y,J.withResumeToken(R.resumeToken,m))}}),w.targetMismatches.forEach(R=>{const Y=h.hu.get(R);if(!Y)return;h.hu.set(R,Y.withResumeToken(Ls.EMPTY_BYTE_STRING,Y.snapshotVersion)),Lh(h,R);const J=new Ru(Y.target,R,1,Y.sequenceNumber);Gd(h,J)}),h.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(o){rn("RemoteStore","Failed to raise snapshot:",o),yield Vf(i,o)}var o}),Ug.apply(this,arguments)}function Vf(i,e,t){return jg.apply(this,arguments)}function jg(){return jg=(0,Ae.Z)(function*(i,e,t){if(!zs(e))throw e;i.lu.add(1),yield Ic(i),i._u.set("Offline"),t||(t=()=>Rf(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){rn("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield wc(i)}))}),jg.apply(this,arguments)}function Pp(i,e){return e().catch(t=>Vf(i,t,e))}function ed(i){return il.apply(this,arguments)}function il(){return il=(0,Ae.Z)(function*(i){const e=wn(i),t=du(e);let o=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;kp(e);)try{const h=yield Sp(e.localStore,o);if(null===h){0===e.au.length&&t.ko();break}o=h.batchId,Hg(e,h)}catch(h){yield Vf(e,h)}Gg(e)&&Vm(e)}),il.apply(this,arguments)}function kp(i){return uu(i)&&i.au.length<10}function Hg(i,e){i.au.push(e);const t=du(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function Gg(i){return uu(i)&&!du(i).Do()&&i.au.length>0}function Vm(i){du(i).start()}function $m(i){return zg.apply(this,arguments)}function zg(){return zg=(0,Ae.Z)(function*(i){du(i).Xo()}),zg.apply(this,arguments)}function By(i){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,Ae.Z)(function*(i){const e=du(i);for(const t of i.au)e.Ho(t.mutations)}),Wg.apply(this,arguments)}function Vy(i,e,t){return Np.apply(this,arguments)}function Np(){return Np=(0,Ae.Z)(function*(i,e,t){const o=i.au.shift(),h=wf.from(o,e,t);yield Pp(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield ed(i)}),Np.apply(this,arguments)}function $y(i,e){return cu.apply(this,arguments)}function cu(){return cu=(0,Ae.Z)(function*(i,e){var t;e&&du(i).zo&&(yield(t=(0,Ae.Z)(function*(o,h){if(sc(m=h.code)&&m!==Nt.ABORTED){const w=o.au.shift();du(o).No(),yield Pp(o,()=>o.remoteSyncer.rejectFailedWrite(w.batchId,h)),yield ed(o)}var m}),function(o,h){return t.apply(this,arguments)})(i,e)),Gg(i)&&Vm(i)}),cu.apply(this,arguments)}function Fp(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,Ae.Z)(function*(i,e){const t=wn(i);t.asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials");const o=uu(t);t.lu.add(3),yield Ic(t),o&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield wc(t)}),Lp.apply(this,arguments)}function $f(i,e){return $h.apply(this,arguments)}function $h(){return $h=(0,Ae.Z)(function*(i,e){const t=wn(i);e?(t.lu.delete(2),yield wc(t)):e||(t.lu.add(2),yield Ic(t),t._u.set("Unknown"))}),$h.apply(this,arguments)}function td(i){return i.mu||(i.mu=function(e,t,o){const h=wn(e);return h.tu(),new Sl(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,o)}(i.datastore,i.asyncQueue,{zr:Lm.bind(null,i),Jr:Bm.bind(null,i),Go:$g.bind(null,i)}),i.fu.push(function(){var e=(0,Ae.Z)(function*(t){t?(i.mu.No(),Vh(i)?Bh(i):i._u.set("Unknown")):(yield i.mu.stop(),Fm(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function du(i){return i.gu||(i.gu=function(e,t,o){const h=wn(e);return h.tu(),new Mp(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,o)}(i.datastore,i.asyncQueue,{zr:$m.bind(null,i),Jr:$y.bind(null,i),Yo:By.bind(null,i),Jo:Vy.bind(null,i)}),i.fu.push(function(){var e=(0,Ae.Z)(function*(t){t?(i.gu.No(),yield ed(i)):(yield i.gu.stop(),i.au.length>0&&(rn("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Bp{constructor(e,t,o,h,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,o,h,m){const w=Date.now()+o,R=new Bp(e,t,w,h,m);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt(Nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sl(i,e){if(Oi("AsyncQueue",`${e}: ${i}`),zs(i))return new Jt(Nt.UNAVAILABLE,`${e}: ${i}`);throw i}class nd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Cn.comparator(t.key,o.key):(t,o)=>Cn.comparator(t.key,o.key),this.keyedMap=Lo(),this.sortedSet=new Zi(this.comparator)}static emptySet(e){return new nd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new nd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class qg{constructor(){this.yu=new Zi(Cn.comparator)}track(e){const t=e.doc.key,o=this.yu.get(t);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(t):1===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ln():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Cc{constructor(e,t,o,h,m,w,R,Y){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=w,this.syncStateChanged=R,this.excludesMetadataChanges=Y}static fromInitialDocuments(e,t,o,h){const m=[];return t.forEach(w=>{m.push({type:0,doc:w})}),new Cc(e,t,nd.emptySet(t),m,o,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==o[h].type||!t[h].doc.isEqual(o[h].doc))return!1;return!0}}class Uy{constructor(){this.Iu=void 0,this.listeners=[]}}class Um{constructor(){this.queries=new Qo(e=>dd(e),Bc),this.onlineState="Unknown",this.Tu=new Set}}function Vp(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,Ae.Z)(function*(i,e){const t=wn(i),o=e.query;let h=!1,m=t.queries.get(o);if(m||(h=!0,m=new Uy),h)try{m.Iu=yield t.onListen(o)}catch(w){const R=sl(w,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(R)}t.queries.set(o,m),m.listeners.push(e),e.Eu(t.onlineState),m.Iu&&e.Au(m.Iu)&&qd(t)}),$p.apply(this,arguments)}function zd(i,e){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,Ae.Z)(function*(i,e){const t=wn(i),o=e.query;let h=!1;const m=t.queries.get(o);if(m){const w=m.listeners.indexOf(e);w>=0&&(m.listeners.splice(w,1),h=0===m.listeners.length)}if(h)return t.queries.delete(o),t.onUnlisten(o)}),Bu.apply(this,arguments)}function Up(i,e){const t=wn(i);let o=!1;for(const h of e){const w=t.queries.get(h.query);if(w){for(const R of w.listeners)R.Au(h)&&(o=!0);w.Iu=h}}o&&qd(t)}function Wd(i,e,t){const o=wn(i),h=o.queries.get(e);if(h)for(const m of h.listeners)m.onError(t);o.queries.delete(e)}function qd(i){i.Tu.forEach(e=>{e.next()})}class rd{constructor(e,t,o){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)3!==h.type&&o.push(h);e=new Cc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class bc{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Ao{constructor(e){this.wt=e}Wi(e){return tl(this.wt,e)}zi(e){return e.metadata.exists?de(this.wt,e.document,!1):ur.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return bs(e)}}class Ba{constructor(e,t,o){this.xu=e,this.localStore=t,this.wt=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dc(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Qr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,o=new Ao(this.wt);for(const h of e)if(h.metadata.queries){const m=o.Wi(h.metadata.name);for(const w of h.metadata.queries){const R=(t.get(w)||Wr()).add(m);t.set(w,R)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function Pm(i,e,t,o){return Bd.apply(this,arguments)}(e.localStore,new Ao(e.wt),e.documents,e.xu.id),o=e.ku(e.documents);for(const h of e.queries)yield Na(e.localStore,h,o.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Dc(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Uf{constructor(e){this.key=e}}class jp{constructor(e){this.key=e}}class jf{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Wr(),this.mutatedKeys=Wr(),this.Lu=bu(e),this.Uu=new nd(this.Lu)}get qu(){return this.Fu}Ku(e,t){const o=t?t.Gu:new qg,h=t?t.Uu:this.Uu;let m=t?t.mutatedKeys:this.mutatedKeys,w=h,R=!1;const Y="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,J="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((ye,at)=>{const kt=h.get(ye),Kt=Vc(this.query,at)?at:null,nn=!!kt&&this.mutatedKeys.has(kt.key),Gn=!!Kt&&(Kt.hasLocalMutations||this.mutatedKeys.has(Kt.key)&&Kt.hasCommittedMutations);let cr=!1;kt&&Kt?kt.data.isEqual(Kt.data)?nn!==Gn&&(o.track({type:3,doc:Kt}),cr=!0):this.Qu(kt,Kt)||(o.track({type:2,doc:Kt}),cr=!0,(Y&&this.Lu(Kt,Y)>0||J&&this.Lu(Kt,J)<0)&&(R=!0)):!kt&&Kt?(o.track({type:0,doc:Kt}),cr=!0):kt&&!Kt&&(o.track({type:1,doc:kt}),cr=!0,(Y||J)&&(R=!0)),cr&&(Kt?(w=w.add(Kt),m=Gn?m.add(ye):m.delete(ye)):(w=w.delete(ye),m=m.delete(ye)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ye="F"===this.query.limitType?w.last():w.first();w=w.delete(ye.key),m=m.delete(ye.key),o.track({type:1,doc:ye})}return{Uu:w,Gu:o,Oi:R,mutatedKeys:m}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const h=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const m=e.Gu.pu();m.sort((J,ye)=>function(at,kt){const Kt=nn=>{switch(nn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ln()}};return Kt(at)-Kt(kt)}(J.type,ye.type)||this.Lu(J.doc,ye.doc)),this.ju(o);const w=t?this.Wu():[],R=0===this.Bu.size&&this.current?1:0,Y=R!==this.$u;return this.$u=R,0!==m.length||Y?{snapshot:new Cc(this.query,e.Uu,h,m,e.mutatedKeys,0===R,Y,!1),zu:w}:{zu:w}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new qg,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Wr(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const t=[];return e.forEach(o=>{this.Bu.has(o)||t.push(new jp(o))}),this.Bu.forEach(o=>{e.has(o)||t.push(new Uf(o))}),t}Ju(e){this.Fu=e.ji,this.Bu=Wr();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Cc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class jm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class jy{constructor(e){this.key=e,this.Xu=!1}}class Hm{constructor(e,t,o,h,m,w){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=w,this.Zu={},this.tc=new Qo(R=>dd(R),Bc),this.ec=new Map,this.nc=new Set,this.sc=new Zi(Cn.comparator),this.ic=new Map,this.rc=new Oh,this.oc={},this.uc=new Map,this.cc=Dl.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Hp(i,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Ae.Z)(function*(i,e){const t=Kr(i);let o,h;const m=t.tc.get(e);if(m)o=m.targetId,t.sharedClientState.addLocalQueryTarget(o),h=m.view.Yu();else{const w=yield vc(t.localStore,Ma(e));t.isPrimaryClient&&Hd(t.remoteStore,w);const R=t.sharedClientState.addLocalQueryTarget(w.targetId);o=w.targetId,h=yield Uh(t,e,o,"current"===R)}return h}),Hf.apply(this,arguments)}function Uh(i,e,t,o){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,Ae.Z)(function*(i,e,t,o){i.hc=(ye,at,kt)=>{return(Kt=(0,Ae.Z)(function*(nn,Gn,cr,zi){let fs=Gn.view.Ku(cr);fs.Oi&&(fs=yield Ld(nn.localStore,Gn.query,!1).then(({documents:$s})=>Gn.view.Ku($s,fs)));const Es=zi&&zi.targetChanges.get(Gn.targetId),Ho=Gn.view.applyChanges(fs,nn.isPrimaryClient,Es);return Al(nn,Gn.targetId,Ho.zu),Ho.snapshot}),function(nn,Gn,cr,zi){return Kt.apply(this,arguments)})(i,ye,at,kt);var Kt};const h=yield Ld(i.localStore,e,!0),m=new jf(e,h.ji),w=m.Ku(h.documents),R=lc.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),Y=m.applyChanges(w,i.isPrimaryClient,R);Al(i,t,Y.zu);const J=new jm(e,t,m);return i.tc.set(e,J),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),Y.snapshot}),Gf.apply(this,arguments)}function jh(i,e){return fa.apply(this,arguments)}function fa(){return fa=(0,Ae.Z)(function*(i,e){const t=wn(i),o=t.tc.get(e),h=t.ec.get(o.targetId);if(h.length>1)return t.ec.set(o.targetId,h.filter(m=>!Bc(m,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Fd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Bf(t.remoteStore,o.targetId),id(t,o.targetId)}).catch(xn))):(id(t,o.targetId),yield Fd(t.localStore,o.targetId,!0))}),fa.apply(this,arguments)}function Gp(){return Gp=(0,Ae.Z)(function*(i,e,t){const o=uo(i);try{const h=yield function(m,w){const R=wn(m),Y=Qn.now(),J=w.reduce((kt,Kt)=>kt.add(Kt.key),Wr());let ye,at;return R.persistence.runTransaction("Locally write mutations","readwrite",kt=>{let Kt=Ws(),nn=Wr();return R.Ui.getEntries(kt,J).next(Gn=>{Kt=Gn,Kt.forEach((cr,zi)=>{zi.isValidDocument()||(nn=nn.add(cr))})}).next(()=>R.localDocuments.getOverlayedDocuments(kt,Kt)).next(Gn=>{ye=Gn;const cr=[];for(const zi of w){const fs=ru(zi,ye.get(zi.key).overlayedDocument);null!=fs&&cr.push(new ua(zi.key,fs,rf(fs.value.mapValue),Xi.exists(!0)))}return R.mutationQueue.addMutationBatch(kt,Y,cr,w)}).next(Gn=>{at=Gn;const cr=Gn.applyToLocalDocumentSet(ye,nn);return R.documentOverlayCache.saveOverlays(kt,Gn.batchId,cr)})}).then(()=>({batchId:at.batchId,changes:Bo(ye)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),function(m,w,R){let Y=m.oc[m.currentUser.toKey()];Y||(Y=new Zi(lr)),Y=Y.insert(w,R),m.oc[m.currentUser.toKey()]=Y}(o,h.batchId,t),yield Vu(o,h.changes),yield ed(o.remoteStore)}catch(h){const m=sl(h,"Failed to persist write");t.reject(m)}}),Gp.apply(this,arguments)}function Gm(i,e){return zf.apply(this,arguments)}function zf(){return zf=(0,Ae.Z)(function*(i,e){const t=wn(i);try{const o=yield kg(t.localStore,e);e.targetChanges.forEach((h,m)=>{const w=t.ic.get(m);w&&(Hn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?w.Xu=!0:h.modifiedDocuments.size>0?Hn(w.Xu):h.removedDocuments.size>0&&(Hn(w.Xu),w.Xu=!1))}),yield Vu(t,o,e)}catch(o){yield xn(o)}}),zf.apply(this,arguments)}function Hh(i,e,t){const o=wn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const h=[];o.tc.forEach((m,w)=>{const R=w.view.Eu(e);R.snapshot&&h.push(R.snapshot)}),function(m,w){const R=wn(m);R.onlineState=w;let Y=!1;R.queries.forEach((J,ye)=>{for(const at of ye.listeners)at.Eu(w)&&(Y=!0)}),Y&&qd(R)}(o.eventManager,e),h.length&&o.Zu.Go(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function zp(i,e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,Ae.Z)(function*(i,e,t){const o=wn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const h=o.ic.get(e),m=h&&h.key;if(m){let w=new Zi(Cn.comparator);w=w.insert(m,ur.newNoDocument(m,pr.min()));const R=Wr().add(m),Y=new Oa(pr.min(),new Map,new Nn(lr),w,R);yield Gm(o,Y),o.sc=o.sc.remove(m),o.ic.delete(e),Xp(o)}else yield Fd(o.localStore,e,!1).then(()=>id(o,e,t)).catch(xn)}),Wp.apply(this,arguments)}function zm(i,e){return qp.apply(this,arguments)}function qp(){return qp=(0,Ae.Z)(function*(i,e){const t=wn(i),o=e.batch.batchId;try{const h=yield Pg(t.localStore,e);qf(t,o,null),Zp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Vu(t,h)}catch(h){yield xn(h)}}),qp.apply(this,arguments)}function Yp(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,Ae.Z)(function*(i,e,t){const o=wn(i);try{const h=yield function(m,w){const R=wn(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",Y=>{let J;return R.mutationQueue.lookupMutationBatch(Y,w).next(ye=>(Hn(null!==ye),J=ye.keys(),R.mutationQueue.removeMutationBatch(Y,ye))).next(()=>R.mutationQueue.performConsistencyCheck(Y)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(Y,J,w)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Y,J)).next(()=>R.localDocuments.getDocuments(Y,J))})}(o.localStore,e);qf(o,e,t),Zp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Vu(o,h)}catch(h){yield xn(h)}}),Kp.apply(this,arguments)}function Wf(){return Wf=(0,Ae.Z)(function*(i,e){const t=wn(i);uu(t.remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const w=wn(m);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>w.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===o)return void e.resolve();const h=t.uc.get(o)||[];h.push(e),t.uc.set(o,h)}catch(o){const h=sl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Wf.apply(this,arguments)}function Zp(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function qf(i,e,t){const o=wn(i);let h=o.oc[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(t?m.reject(t):m.resolve(),h=h.remove(e)),o.oc[o.currentUser.toKey()]=h}}function id(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ec.get(e))i.tc.delete(o),t&&i.Zu.lc(o,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(o=>{i.rc.containsKey(o)||Zg(i,o)})}function Zg(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(Bf(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),Xp(i))}function Al(i,e,t){for(const o of t)o instanceof Uf?(i.rc.addReference(o.key,e),Qp(i,o)):o instanceof jp?(rn("SyncEngine","Document no longer in limbo: "+o.key),i.rc.removeReference(o.key,e),i.rc.containsKey(o.key)||Zg(i,o.key)):Ln()}function Qp(i,e){const t=e.key,o=t.path.canonicalString();i.sc.get(t)||i.nc.has(o)||(rn("SyncEngine","New document in limbo: "+t),i.nc.add(o),Xp(i))}function Xp(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new Cn(Qr.fromString(e)),o=i.cc.next();i.ic.set(o,new jy(t)),i.sc=i.sc.insert(t,o),Hd(i.remoteStore,new Ru(Ma(Ja(t.path)),o,2,ss.ot))}}function Vu(i,e,t){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Ae.Z)(function*(i,e,t){const o=wn(i),h=[],m=[],w=[];var R;o.tc.isEmpty()||(o.tc.forEach((R,Y)=>{w.push(o.hc(Y,e,t).then(J=>{if(J){o.isPrimaryClient&&o.sharedClientState.updateQueryState(Y.targetId,J.fromCache?"not-current":"current"),h.push(J);const ye=Rg.Vi(Y.targetId,J);m.push(ye)}}))}),yield Promise.all(w),o.Zu.Go(h),yield(R=(0,Ae.Z)(function*(Y,J){const ye=wn(Y);try{yield ye.persistence.runTransaction("notifyLocalViewChanges","readwrite",at=>It.forEach(J,kt=>It.forEach(kt.Pi,Kt=>ye.persistence.referenceDelegate.addReference(at,kt.targetId,Kt)).next(()=>It.forEach(kt.vi,Kt=>ye.persistence.referenceDelegate.removeReference(at,kt.targetId,Kt)))))}catch(at){if(!zs(at))throw at;rn("LocalStore","Failed to update sequence numbers: "+at)}for(const at of J){const kt=at.targetId;if(!at.fromCache){const Kt=ye.$i.get(kt),Gn=Kt.withLastLimboFreeSnapshotVersion(Kt.snapshotVersion);ye.$i=ye.$i.insert(kt,Gn)}}}),function(Y,J){return R.apply(this,arguments)})(o.localStore,m))}),Wm.apply(this,arguments)}function qm(i,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Ae.Z)(function*(i,e){const t=wn(i);if(!t.currentUser.isEqual(e)){rn("SyncEngine","User change. New user:",e.toKey());const o=yield yc(t.localStore,e);t.currentUser=e,(h=t).uc.forEach(w=>{w.forEach(R=>{R.reject(new Jt(Nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.uc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Vu(t,o.Ki)}var h}),Qg.apply(this,arguments)}function Hy(i,e){const t=wn(i),o=t.ic.get(e);if(o&&o.Xu)return Wr().add(o.key);{let h=Wr();const m=t.ec.get(e);if(!m)return h;for(const w of m){const R=t.tc.get(w);h=h.unionWith(R.view.qu)}return h}}function u(i,e){return a.apply(this,arguments)}function a(){return a=(0,Ae.Z)(function*(i,e){const t=wn(i),o=yield Ld(t.localStore,e.query,!0),h=e.view.Ju(o);return t.isPrimaryClient&&Al(t,e.targetId,h.zu),h}),a.apply(this,arguments)}function l(i,e){return p.apply(this,arguments)}function p(){return p=(0,Ae.Z)(function*(i,e){const t=wn(i);return Pf(t.localStore,e).then(o=>Vu(t,o))}),p.apply(this,arguments)}function _(i,e,t,o){return S.apply(this,arguments)}function S(){return S=(0,Ae.Z)(function*(i,e,t,o){const h=wn(i),m=yield function(w,R){const Y=wn(w),J=wn(Y.mutationQueue);return Y.persistence.runTransaction("Lookup mutation documents","readonly",ye=>J.yn(ye,R).next(at=>at?Y.localDocuments.getDocuments(ye,at):It.resolve(null)))}(h.localStore,e);var R;null!==m?("pending"===t?yield ed(h.remoteStore):"acknowledged"===t||"rejected"===t?(qf(h,e,o||null),Zp(h,e),R=e,wn(wn(h.localStore).mutationQueue).In(R)):Ln(),yield Vu(h,m)):rn("SyncEngine","Cannot apply mutation batch with id: "+e)}),S.apply(this,arguments)}function X(){return X=(0,Ae.Z)(function*(i,e){const t=wn(i);if(Kr(t),uo(t),!0===e&&!0!==t.ac){const o=t.sharedClientState.getAllActiveQueryTargets(),h=yield ae(t,o.toArray());t.ac=!0,yield $f(t.remoteStore,!0);for(const m of h)Hd(t.remoteStore,m)}else if(!1===e&&!1!==t.ac){const o=[];let h=Promise.resolve();t.ec.forEach((m,w)=>{t.sharedClientState.isLocalQueryTarget(w)?o.push(w):h=h.then(()=>(id(t,w),Fd(t.localStore,w,!0))),Bf(t.remoteStore,w)}),yield h,yield ae(t,o),function(m){const w=wn(m);w.ic.forEach((R,Y)=>{Bf(w.remoteStore,Y)}),w.rc.cs(),w.ic=new Map,w.sc=new Zi(Cn.comparator)}(t),t.ac=!1,yield $f(t.remoteStore,!1)}}),X.apply(this,arguments)}function ae(i,e,t){return Se.apply(this,arguments)}function Se(){return Se=(0,Ae.Z)(function*(i,e,t){const o=wn(i),h=[],m=[];for(const w of e){let R;const Y=o.ec.get(w);if(Y&&0!==Y.length){R=yield vc(o.localStore,Ma(Y[0]));for(const J of Y){const ye=o.tc.get(J),at=yield u(o,ye);at.snapshot&&m.push(at.snapshot)}}else{const J=yield Ap(o.localStore,w);R=yield vc(o.localStore,J),yield Uh(o,wt(J),w,!1)}h.push(R)}return o.Zu.Go(m),h}),Se.apply(this,arguments)}function wt(i){return Zu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function St(i){const e=wn(i);return wn(wn(e.localStore).persistence).Ri()}function $t(i,e,t,o){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,Ae.Z)(function*(i,e,t,o){const h=wn(i);if(h.ac)return void rn("SyncEngine","Ignoring unexpected query state notification.");const m=h.ec.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const w=yield Pf(h.localStore,df(m[0])),R=Oa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Vu(h,w,R);break}case"rejected":yield Fd(h.localStore,e,!0),id(h,e,o);break;default:Ln()}}),Sn.apply(this,arguments)}function $n(i,e,t){return Br.apply(this,arguments)}function Br(){return Br=(0,Ae.Z)(function*(i,e,t){const o=Kr(i);if(o.ac){for(const h of e){if(o.ec.has(h)){rn("SyncEngine","Adding an already active target "+h);continue}const m=yield Ap(o.localStore,h),w=yield vc(o.localStore,m);yield Uh(o,wt(m),w.targetId,!1),Hd(o.remoteStore,w)}for(const h of t)o.ec.has(h)&&(yield Fd(o.localStore,h,!1).then(()=>{Bf(o.remoteStore,h),id(o,h)}).catch(xn))}}),Br.apply(this,arguments)}function Kr(i){const e=wn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zp.bind(null,e),e.Zu.Go=Up.bind(null,e.eventManager),e.Zu.lc=Wd.bind(null,e.eventManager),e}function uo(i){const e=wn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yp.bind(null,e),e}class Ds{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.wt=lu(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Og(this.persistence,new Mf,e.initialUser,this.wt)}_c(e){return new ql(kd.Ms,this.wt)}dc(e){return new km}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class as extends Ds{constructor(e,t,o){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,Ae.Z)(function*(){yield t().call(o,e),yield o.yc.initialize(o,e),yield uo(o.yc.syncEngine),yield ed(o.yc.remoteStore),yield o.persistence.ci(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Og(this.persistence,new Mf,e.initialUser,this.wt)}mc(e,t){return new $o(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const o=new Dr(t,this.persistence);return new pi(e.asyncQueue,o)}_c(e){const t=Yl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?da.withCacheSize(this.cacheSizeBytes):da.DEFAULT;return new Tp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,$d(),Jc(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new km}}class $u extends as{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,Ae.Z)(function*(){yield t().call(o,e);const h=o.yc.syncEngine;o.sharedClientState instanceof Ng&&(o.sharedClientState.syncEngine={kr:_.bind(null,h),Or:$t.bind(null,h),Mr:$n.bind(null,h),Ri:St.bind(null,h),Nr:l.bind(null,h)},yield o.sharedClientState.start()),yield o.persistence.ci(function(){var m=(0,Ae.Z)(function*(w){yield function k(i,e){return X.apply(this,arguments)}(o.yc.syncEngine,w),o.gcScheduler&&(w&&!o.gcScheduler.started?o.gcScheduler.start():w||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(w&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():w||o.indexBackfillerScheduler.stop())});return function(w){return m.apply(this,arguments)}}())})()}dc(e){const t=$d();if(!Ng.V(t))throw new Jt(Nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Yl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ng(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class sd{initialize(e,t){var o=this;return(0,Ae.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=h=>Hh(o.syncEngine,h,1),o.remoteStore.remoteSyncer.handleCredentialChange=qm.bind(null,o.syncEngine),yield $f(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Um}createDatastore(e){const t=lu(e.databaseInfo.databaseId),o=new xp(e.databaseInfo);return new Bg(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,h=e.asyncQueue,m=R=>Hh(this.syncEngine,R,0),w=Nm.V()?new Nm:new Fg,new So(t,o,h,m,w);var t,o,h,m,w}createSyncEngine(e,t){return function(o,h,m,w,R,Y,J){const ye=new Hm(o,h,m,w,R,Y);return J&&(ye.ac=!0),ye}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const o=wn(t);rn("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield Ic(o),o.du.shutdown(),o._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Yf(i,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Tc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jp{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Di,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.bc();if(null===t)return null;const o=e.Ac.decode(t),h=Number(o);isNaN(h)&&e.Pc(`length string (${o}) is not valid number`);const m=yield e.vc(h);return new bc(JSON.parse(m),t.length+h)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ae.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}vc(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const o=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Wv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Jt(Nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(h=(0,Ae.Z)(function*(m,w){const R=wn(m),Y=v(R.wt)+"/documents",J={documents:w.map(Kt=>zc(R.wt,Kt))},ye=yield R.ao("BatchGetDocuments",Y,J,w.length),at=new Map;ye.forEach(Kt=>{const nn=function ht(i,e){return"found"in e?function(t,o){Hn(!!o.found);const h=tl(t,o.found.name),m=bs(o.found.updateTime),w=new bo({mapValue:{fields:o.found.fields}});return ur.newFoundDocument(h,m,w)}(i,e):"missing"in e?function(t,o){Hn(!!o.missing),Hn(!!o.readTime);const h=tl(t,o.missing),m=bs(o.readTime);return ur.newNoDocument(h,m)}(i,e):Ln()}(R.wt,Kt);at.set(nn.key.toString(),nn)});const kt=[];return w.forEach(Kt=>{const nn=at.get(Kt.toString());Hn(!!nn),kt.push(nn)}),kt}),function(m,w){return h.apply(this,arguments)})(t.datastore,e);var h;return o.forEach(h=>t.recordVersion(h)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new ca(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,h)=>{const m=Cn.fromPath(h);e.mutations.push(new Uc(m,e.precondition(m)))}),yield(o=(0,Ae.Z)(function*(h,m){const w=wn(h),R=v(w.wt)+"/documents",Y={writes:m.map(J=>dn(w.wt,J))};yield w.ro("Commit",R,Y)}),function(h,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ln();t=pr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Jt(Nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xi.updateTime(t):Xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pr.min()))throw new Jt(Nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(t)}return Xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class p0{constructor(e,t,o,h,m){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=h,this.deferred=m,this.Dc=o.maxAttempts,this.So=new Ud(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ae.Z)(function*(){const t=new Wv(e.datastore),o=e.xc(t);o&&o.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Nc(m)}))}).catch(h=>{e.Nc(h)})}))}xc(e){try{const t=this.updateFunction(e);return!N(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!sc(t)}return!1}}class Gy{constructor(e,t,o,h){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=h,this.user=Ki.UNAUTHENTICATED,this.clientId=Ta.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var w=(0,Ae.Z)(function*(R){rn("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(o,w=>(rn("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jt(Nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const h=sl(o,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Xg(i,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ae.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,Ae.Z)(function*(m){o.isEqual(m)||(yield yc(e.localStore,m),o=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Ym.apply(this,arguments)}function Jg(i,e){return Km.apply(this,arguments)}function Km(){return Km=(0,Ae.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Zm(i);rn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(h=>Fp(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,m)=>Fp(e.remoteStore,m)),i.onlineComponents=e}),Km.apply(this,arguments)}function Zm(i){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Ae.Z)(function*(i){return i.offlineComponents||(rn("FirestoreClient","Using default OfflineComponentProvider"),yield Xg(i,new Ds)),i.offlineComponents}),Qm.apply(this,arguments)}function em(i){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ae.Z)(function*(i){return i.onlineComponents||(rn("FirestoreClient","Using default OnlineComponentProvider"),yield Jg(i,new sd)),i.onlineComponents}),Xm.apply(this,arguments)}function zy(i){return Zm(i).then(e=>e.persistence)}function Kf(i){return Zm(i).then(e=>e.localStore)}function Yd(i){return em(i).then(e=>e.remoteStore)}function Wy(i){return em(i).then(e=>e.syncEngine)}function Sc(i){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ae.Z)(function*(i){const e=yield em(i),t=e.eventManager;return t.onListen=Hp.bind(null,e.syncEngine),t.onUnlisten=jh.bind(null,e.syncEngine),t}),Jm.apply(this,arguments)}function Uu(i,e,t={}){const o=new Di;return i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(h,m,w,R,Y){const J=new Tc({next:at=>{m.enqueueAndForget(()=>zd(h,ye));const kt=at.docs.has(w);!kt&&at.fromCache?Y.reject(new Jt(Nt.UNAVAILABLE,"Failed to get document because the client is offline.")):kt&&at.fromCache&&R&&"server"===R.source?Y.reject(new Jt(Nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Y.resolve(at)},error:at=>Y.reject(at)}),ye=new rd(Ja(w.path),J,{includeMetadataChanges:!0,Du:!0});return Vp(h,ye)}(yield Sc(i),i.asyncQueue,e,t,o)})),o.promise}function pa(i,e,t={}){const o=new Di;return i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(h,m,w,R,Y){const J=new Tc({next:at=>{m.enqueueAndForget(()=>zd(h,ye)),at.fromCache&&"server"===R.source?Y.reject(new Jt(Nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Y.resolve(at)},error:at=>Y.reject(at)}),ye=new rd(w,J,{includeMetadataChanges:!0,Du:!0});return Vp(h,ye)}(yield Sc(i),i.asyncQueue,e,t,o)})),o.promise}const zh=new Map;function Kd(i,e,t){if(!t)throw new Jt(Nt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Wh(i,e,t,o){if(!0===e&&!0===o)throw new Jt(Nt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function qh(i){if(!Cn.isDocumentKey(i))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Yh(i){if(Cn.isDocumentKey(i))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function od(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Ln()}function di(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Jt(Nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=od(i);throw new Jt(Nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Kh(i,e){if(e<=0)throw new Jt(Nt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Zh{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt(Nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jt(Nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Wh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zh({}),this._settingsFrozen=!1,e instanceof Wa?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Jt(Nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(h.options.projectId)}(e))}get app(){if(!this._app)throw new Jt(Nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt(Nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zh(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mu;switch(t.type){case"gapi":const o=t.client;return Hn(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new hl(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Jt(Nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zh.get(e);t&&(rn("ComponentProvider","Removing Datastore"),zh.delete(e),t.terminate())}(this),Promise.resolve()}}class As{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new As(this.firestore,e,this._key)}}class ga{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class ju extends ga{constructor(e,t,o){super(e,t,Ja(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new As(this.firestore,null,new Cn(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function ny(i,e,...t){if(i=(0,Ge.m9)(i),Kd("collection","path",e),i instanceof Zf){const o=Qr.fromString(e,...t);return Yh(o),new ju(i,null,o)}{if(!(i instanceof As||i instanceof ju))throw new Jt(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qr.fromString(e,...t));return Yh(o),new ju(i.firestore,null,o)}}function tg(i,e,...t){if(i=(0,Ge.m9)(i),1===arguments.length&&(e=Ta.I()),Kd("doc","path",e),i instanceof Zf){const o=Qr.fromString(e,...t);return qh(o),new As(i,null,new Cn(o))}{if(!(i instanceof As||i instanceof ju))throw new Jt(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qr.fromString(e,...t));return qh(o),new As(i.firestore,i instanceof ju?i.converter:null,new Cn(o))}}function ry(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),(i instanceof As||i instanceof ju)&&(e instanceof As||e instanceof ju)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Ky(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),i instanceof ga&&e instanceof ga&&i.firestore===e.firestore&&Bc(i._query,e._query)&&i.converter===e.converter}class Kv{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Ud(this,"async_queue_retry"),this.Kc=()=>{const t=Jc();t&&rn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Jc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Jc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Di;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!zs(t))throw t;rn("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(o=>{throw this.Bc=o,this.Lc=!1,Oi("INTERNAL UNHANDLED ERROR: ",function(m){let w=m.message||"";return m.stack&&(w=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),w}(o)),o}).then(o=>(this.Lc=!1,o))));return this.Oc=t,t}enqueueAfterDelay(e,t,o){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const h=Bp.createAndSchedule(this,e,t,o,m=>this.Wc(m));return this.$c.push(h),h}Gc(){this.Bc&&Ln()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function iy(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const h of["next","error","complete"])if(h in o&&"function"==typeof o[h])return!0;return!1}(i)}class Zy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qs extends Zf{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Kv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ng(this),this._firestoreClient.terminate()}}function Uo(i){return i._firestoreClient||ng(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ng(i){var e;const t=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Pc(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new Gy(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Jy(i,e,t){const o=new Di;return i.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield Xg(i,t),yield Jg(i,e),o.resolve()}catch(h){const m=h;if(!("FirebaseError"===(w=m).name?w.code===Nt.FAILED_PRECONDITION||w.code===Nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw m;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+m),o.reject(m)}var w})).then(()=>o.promise)}function sm(i){if(i._initialized||i._terminated)throw new Jt(Nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Jt(Nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(Ls.fromBase64String(e))}catch(t){throw new Jt(Nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hu(Ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zd{constructor(e){this._methodName=e}}class rg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jt(Nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jt(Nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}const rv=/^__.*__$/;class Xv{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new os(e,this.data,t,this.fieldTransforms)}}class ay{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ly(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ln()}}class Qf{constructor(e,t,o,h,m,w){this.settings=e,this.databaseId=t,this.wt=o,this.ignoreUndefinedProperties=h,void 0===m&&this.Xc(),this.fieldTransforms=m||[],this.fieldMask=w||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:o,na:!1});return h.sa(e),h}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:o,na:!1});return h.Xc(),h}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return lm(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(ly(this.Zc)&&rv.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class uy{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=o||lu(e)}aa(e,t,o,h=!1){return new Qf({Zc:e,methodName:t,ca:o,path:ms.emptyPath(),na:!1,ua:h},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Qd(i){const e=i._freezeSettings(),t=lu(i._databaseId);return new uy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function ig(i,e,t,o,h,m={}){const w=i.aa(m.merge||m.mergeFields?2:0,e,t,h);am("Data must be an object, but it was:",w,o);const R=uv(o,w);let Y,J;if(m.merge)Y=new vs(w.fieldMask),J=w.fieldTransforms;else if(m.mergeFields){const ye=[];for(const at of m.mergeFields){const kt=hy(e,at,t);if(!w.contains(kt))throw new Jt(Nt.INVALID_ARGUMENT,`Field '${kt}' is specified in your field mask but missing from your input data.`);fy(ye,kt)||ye.push(kt)}Y=new vs(ye),J=w.fieldTransforms.filter(at=>Y.covers(at.field))}else Y=null,J=w.fieldTransforms;return new Xv(new bo(R),Y,J)}class Xf extends Zd{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}function cy(i,e,t){return new Qf({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class om extends Zd{_toFieldTransform(e){return new Ju(e.path,new Tu)}isEqual(e){return e instanceof om}}class iv extends Zd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=cy(this,e,!0),o=this.ha.map(m=>Xd(m,t)),h=new Qu(o);return new Ju(e.path,h)}isEqual(e){return this===e}}class sv extends Zd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=cy(this,e,!0),o=this.ha.map(m=>Xd(m,t)),h=new Xu(o);return new Ju(e.path,h)}isEqual(e){return this===e}}class ov extends Zd{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Hl(e.wt,lh(e.wt,this.la));return new Ju(e.path,t)}isEqual(e){return this===e}}function av(i,e,t,o){const h=i.aa(1,e,t);am("Data must be an object, but it was:",h,o);const m=[],w=bo.empty();aa(o,(Y,J)=>{const ye=sg(e,Y,t);J=(0,Ge.m9)(J);const at=h.ia(ye);if(J instanceof Xf)m.push(ye);else{const kt=Xd(J,at);null!=kt&&(m.push(ye),w.set(ye,kt))}});const R=new vs(m);return new ay(w,R,h.fieldTransforms)}function dy(i,e,t,o,h,m){const w=i.aa(1,e,t),R=[hy(e,o,t)],Y=[h];if(m.length%2!=0)throw new Jt(Nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let kt=0;kt<m.length;kt+=2)R.push(hy(e,m[kt])),Y.push(m[kt+1]);const J=[],ye=bo.empty();for(let kt=R.length-1;kt>=0;--kt)if(!fy(J,R[kt])){const Kt=R[kt];let nn=Y[kt];nn=(0,Ge.m9)(nn);const Gn=w.ia(Kt);if(nn instanceof Xf)J.push(Kt);else{const cr=Xd(nn,Gn);null!=cr&&(J.push(Kt),ye.set(Kt,cr))}}const at=new vs(J);return new ay(ye,at,w.fieldTransforms)}function lv(i,e,t,o=!1){return Xd(t,i.aa(o?4:3,e))}function Xd(i,e){if(jo(i=(0,Ge.m9)(i)))return am("Unsupported field value:",e,i),uv(i,e);if(i instanceof Zd)return function(t,o){if(!ly(o.Zc))throw o.oa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.oa(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(o);h&&o.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,o){const h=[];let m=0;for(const w of t){let R=Xd(w,o.ra(m));null==R&&(R={nullValue:"NULL_VALUE"}),h.push(R),m++}return{arrayValue:{values:h}}}(i,e)}return function(t,o){if(null===(t=(0,Ge.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lh(o.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Qn.fromDate(t);return{timestampValue:Wl(o.wt,h)}}if(t instanceof Qn){const h=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wl(o.wt,h)}}if(t instanceof rg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hu)return{bytesValue:cc(o.wt,t._byteString)};if(t instanceof As){const h=o.databaseId,m=t.firestore._databaseId;if(!m.isEqual(h))throw o.oa(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:yd(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.oa(`Unsupported field value: ${od(t)}`)}(i,e)}function uv(i,e){const t={};return eu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(i,(o,h)=>{const m=Xd(h,e.ea(o));null!=m&&(t[o]=m)}),{mapValue:{fields:t}}}function jo(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Qn||i instanceof rg||i instanceof Hu||i instanceof As||i instanceof Zd)}function am(i,e,t){if(!jo(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=od(t);throw e.oa("an object"===o?i+" a custom object":i+" "+o)}var o}function hy(i,e,t){if((e=(0,Ge.m9)(e))instanceof Ac)return e._internalPath;if("string"==typeof e)return sg(i,e);throw lm("Field path arguments must be of type string or ",i,!1,void 0,t)}const Jv=new RegExp("[~\\*/\\[\\]]");function sg(i,e,t){if(e.search(Jv)>=0)throw lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ac(...e.split("."))._internalPath}catch{throw lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function lm(i,e,t,o,h){const m=o&&!o.isEmpty(),w=void 0!==h;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let Y="";return(m||w)&&(Y+=" (found",m&&(Y+=` in field ${o}`),w&&(Y+=` in document ${h}`),Y+=")"),new Jt(Nt.INVALID_ARGUMENT,R+i+Y)}function fy(i,e){return i.some(t=>t.isEqual(e))}class Jf{constructor(e,t,o,h,m){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new As(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ep(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(um("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ep extends Jf{data(){return super.data()}}function um(i,e){return"string"==typeof e?sg(i,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}class Qh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xc extends Jf{constructor(e,t,o,h,m,w){super(e,t,o,h,w),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(um("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class og extends xc{data(e={}){return super.data(e)}}class ad{constructor(e,t,o,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new Qh(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new og(this._firestore,this._userDataWriter,o.key,o,new Qh(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Jt(Nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,h){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(w=>({type:"added",doc:new og(o._firestore,o._userDataWriter,w.doc.key,w.doc,new Qh(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(w=>h||3!==w.type).map(w=>{const R=new og(o._firestore,o._userDataWriter,w.doc.key,w.doc,new Qh(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter);let Y=-1,J=-1;return 0!==w.type&&(Y=m.indexOf(w.doc.key),m=m.delete(w.doc.key)),1!==w.type&&(m=m.add(w.doc),J=m.indexOf(w.doc.key)),{type:m0(w.type),doc:R,oldIndex:Y,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function m0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ln()}}function cm(i,e){return i instanceof xc&&e instanceof xc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ad&&e instanceof ad&&i._firestore===e._firestore&&Ky(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function dm(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Jt(Nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xl{}function Jd(i,...e){for(const t of e)i=t._apply(i);return i}class e_ extends xl{constructor(e,t,o){super(),this.fa=e,this.da=t,this._a=o,this.type="where"}_apply(e){const t=Qd(e.firestore),o=function(h,m,w,R,Y,J,ye){let at;if(Y.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){my(ye,J);const Kt=[];for(const nn of ye)Kt.push(hv(R,h,nn));at={arrayValue:{values:Kt}}}else at=hv(R,h,ye)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||my(ye,J),at=lv(w,"where",ye,"in"===J||"not-in"===J);const kt=_s.create(Y,J,at);return function(Kt,nn){if(nn.ht()){const cr=Cu(Kt);if(null!==cr&&!cr.isEqual(nn.field))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${cr.toString()}' and '${nn.field.toString()}'`);const zi=xa(Kt);null!==zi&&yy(0,nn.field,zi)}const Gn=function(cr,zi){for(const fs of cr.filters)if(zi.indexOf(fs.op)>=0)return fs.op;return null}(Kt,function(cr){switch(cr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(nn.op));if(null!==Gn)throw new Jt(Nt.INVALID_ARGUMENT,Gn===nn.op?`Invalid query. You cannot use more than one '${nn.op.toString()}' filter.`:`Invalid query. You cannot use '${nn.op.toString()}' filters with '${Gn.toString()}' filters.`)}(h,kt),kt}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ga(e.firestore,e.converter,function(h,m){const w=h.filters.concat([m]);return new Fo(h.path,h.collectionGroup,h.explicitOrderBy.slice(),w,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,o))}}class Gu extends xl{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(o,h,m){if(null!==o.startAt)throw new Jt(Nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Jt(Nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new Iu(h,m);return function(R,Y){if(null===xa(R)){const J=Cu(R);null!==J&&yy(0,J,Y.field)}}(o,w),w}(e._query,this.fa,this.wa);return new ga(e.firestore,e.converter,function(o,h){const m=o.explicitOrderBy.concat([h]);return new Fo(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class py extends xl{constructor(e,t,o){super(),this.type=e,this.ma=t,this.ga=o}_apply(e){return new ga(e.firestore,e.converter,cf(e._query,this.ma,this.ga))}}class dv extends xl{constructor(e,t,o){super(),this.type=e,this.ya=t,this.pa=o}_apply(e){const t=gy(e,this.type,this.ya,this.pa);return new ga(e.firestore,e.converter,(h=t,new Fo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,h,o.endAt)));var o,h}}class hm extends xl{constructor(e,t,o){super(),this.type=e,this.ya=t,this.pa=o}_apply(e){const t=gy(e,this.type,this.ya,this.pa);return new ga(e.firestore,e.converter,(h=t,new Fo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,h)));var o,h}}function gy(i,e,t,o){if(t[0]=(0,Ge.m9)(t[0]),t[0]instanceof Jf)return function(h,m,w,R,Y){if(!R)throw new Jt(Nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const J=[];for(const ye of yl(h))if(ye.field.isKeyField())J.push(Hr(m,R.key));else{const at=R.data.field(ye.field);if(za(at))throw new Jt(Nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ye.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===at){const kt=ye.field.canonicalString();throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${kt}' (used as the orderBy) does not exist.`)}J.push(at)}return new ml(J,Y)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const h=Qd(i.firestore);return function(m,w,R,Y,J,ye){const at=m.explicitOrderBy;if(J.length>at.length)throw new Jt(Nt.INVALID_ARGUMENT,`Too many arguments provided to ${Y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const kt=[];for(let Kt=0;Kt<J.length;Kt++){const nn=J[Kt];if(at[Kt].field.isKeyField()){if("string"!=typeof nn)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Y}(), but got a ${typeof nn}`);if(!cd(m)&&-1!==nn.indexOf("/"))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Y}() must be a plain document ID, but '${nn}' contains a slash.`);const Gn=m.path.child(Qr.fromString(nn));if(!Cn.isDocumentKey(Gn))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Y}() must result in a valid document path, but '${Gn}' is not because it contains an odd number of segments.`);const cr=new Cn(Gn);kt.push(Hr(w,cr))}else{const Gn=lv(R,Y,nn);kt.push(Gn)}}return new ml(kt,ye)}(i._query,i.firestore._databaseId,h,e,t,o)}}function hv(i,e,t){if("string"==typeof(t=(0,Ge.m9)(t))){if(""===t)throw new Jt(Nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cd(e)&&-1!==t.indexOf("/"))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Qr.fromString(t));if(!Cn.isDocumentKey(o))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Hr(i,new Cn(o))}if(t instanceof As)return Hr(i,t._key);throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(t)}.`)}function my(i,e){if(!Array.isArray(i)||0===i.length)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yy(i,e,t){if(!t.isEqual(e))throw new Jt(Nt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const fm={maxAttempts:5};class vy{convertValue(e,t="none"){switch(Mt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ln()}}convertObject(e,t){const o={};return aa(e.fields,(h,m)=>{o[h]=this.convertValue(m,t)}),o}convertGeoPoint(e){return new rg(yi(e.latitude),yi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=fl(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const t=Aa(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Qr.fromString(e);Hn(fc(o));const h=new Wa(o.get(1),o.get(3)),m=new Cn(o.popFirst(5));return h.isEqual(t)||Oi(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function lg(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class fv extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new As(this.firestore,null,t)}}class pm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,t,o){this._verifyNotCommitted();const h=Wu(e,this._firestore),m=lg(h.converter,t,o),w=ig(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,o);return this._mutations.push(w.toMutation(h._key,Xi.none())),this}update(e,t,o,...h){this._verifyNotCommitted();const m=Wu(e,this._firestore);let w;return w="string"==typeof(t=(0,Ge.m9)(t))||t instanceof Ac?dy(this._dataReader,"WriteBatch.update",m._key,t,o,h):av(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(w.toMutation(m._key,Xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wu(e,this._firestore);return this._mutations=this._mutations.concat(new ca(t._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(Nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wu(i,e){if((i=(0,Ge.m9)(i)).firestore!==e)throw new Jt(Nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class eh extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new As(this.firestore,null,t)}}function _y(i,e,t){i=di(i,As);const o=di(i.firestore,qs),h=lg(i.converter,e,t);return tp(o,[ig(Qd(o),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,Xi.none())])}function Ey(i,e,t,...o){i=di(i,As);const h=di(i.firestore,qs),m=Qd(h);let w;return w="string"==typeof(e=(0,Ge.m9)(e))||e instanceof Ac?dy(m,"updateDoc",i._key,e,t,o):av(m,"updateDoc",i._key,e),tp(h,[w.toMutation(i._key,Xi.exists(!0))])}function Ev(i,...e){var t,o,h;i=(0,Ge.m9)(i);let m={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||iy(e[w])||(m=e[w],w++);const R={includeMetadataChanges:m.includeMetadataChanges};if(iy(e[w])){const at=e[w];e[w]=null===(t=at.next)||void 0===t?void 0:t.bind(at),e[w+1]=null===(o=at.error)||void 0===o?void 0:o.bind(at),e[w+2]=null===(h=at.complete)||void 0===h?void 0:h.bind(at)}let Y,J,ye;if(i instanceof As)J=di(i.firestore,qs),ye=Ja(i._key.path),Y={next:at=>{e[w]&&e[w](wy(J,i,at))},error:e[w+1],complete:e[w+2]};else{const at=di(i,ga);J=di(at.firestore,qs),ye=at._query;const kt=new eh(J);Y={next:Kt=>{e[w]&&e[w](new ad(J,kt,at,Kt))},error:e[w+1],complete:e[w+2]},dm(i._query)}return function(at,kt,Kt,nn){const Gn=new Tc(nn),cr=new rd(kt,Gn,Kt);return at.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return Vp(yield Sc(at),cr)})),()=>{Gn.Tc(),at.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return zd(yield Sc(at),cr)}))}}(Uo(J),ye,R,Y)}function tp(i,e){return function(t,o){const h=new Di;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function Yg(i,e,t){return Gp.apply(this,arguments)}(yield Wy(t),o,h)})),h.promise}(Uo(i),e)}function wy(i,e,t){const o=t.docs.get(e._key),h=new eh(i);return new xc(i,h,e._key,o,new Qh(t.hasPendingWrites,t.fromCache),e.converter)}class l_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qd(e)}get(e){const t=Wu(e,this._firestore),o=new fv(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return Ln();const m=h[0];if(m.isFoundDocument())return new Jf(this._firestore,o,m.key,m,t.converter);if(m.isNoDocument())return new Jf(this._firestore,o,t._key,null,t.converter);throw Ln()})}set(e,t,o){const h=Wu(e,this._firestore),m=lg(h.converter,t,o),w=ig(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,o);return this._transaction.set(h._key,w),this}update(e,t,o,...h){const m=Wu(e,this._firestore);let w;return w="string"==typeof(t=(0,Ge.m9)(t))||t instanceof Ac?dy(this._dataReader,"Transaction.update",m._key,t,o,h):av(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,w),this}delete(e){const t=Wu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wu(e,this._firestore),o=new eh(this._firestore);return super.get(e).then(h=>new xc(this._firestore,o,t._key,h._document,new Qh(!1,!1),t.converter))}}function gm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Jt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Iy(){if(typeof Uint8Array>"u")throw new Jt("unimplemented","Uint8Arrays are not available in this environment.")}function Cy(){if(!function Co(){return typeof atob<"u"}())throw new Jt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Yo=bt.SDK_VERSION,(0,bt._registerComponent)(new W.wA("firestore",(t,{options:o})=>{const h=t.getProvider("app").getImmediate(),m=new qs(h,new vu(t.getProvider("auth-internal")),new oo(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),m._setSettings(o),m},"PUBLIC")),(0,bt.registerVersion)(_o,"3.4.12",i),(0,bt.registerVersion)(_o,"3.4.12","esm2017")}();class np{constructor(e){this._delegate=e}static fromBase64String(e){return Cy(),new np(Hu.fromBase64String(e))}static fromUint8Array(e){return Iy(),new np(Hu.fromUint8Array(e))}toBase64(){return Cy(),this._delegate.toBase64()}toUint8Array(){return Iy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mm(i){return function Cv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class bv{enableIndexedDbPersistence(e,t){return function nm(i,e){sm(i=di(i,qs));const t=Uo(i),o=i._freezeSettings(),h=new sd;return Jy(t,h,new as(h,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sy(i){sm(i=di(i,qs));const e=Uo(i),t=i._freezeSettings(),o=new sd;return Jy(e,o,new $u(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rm(i){if(i._initialized&&!i._terminated)throw new Jt(Nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(o){if(!Fs.V())return Promise.resolve();const h=o+"main";yield Fs.delete(h)}),function(o){return t.apply(this,arguments)})(Yl(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class by{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function qy(i,e,t,o={}){var h;const m=(i=di(i,Zf))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&wa("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let w,R;if("string"==typeof o.mockUserToken)w=o.mockUserToken,R=Ki.MOCK_USER;else{w=(0,Ge.Sg)(o.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const Y=o.mockUserToken.sub||o.mockUserToken.user_id;if(!Y)throw new Jt(Nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Ki(Y)}i._authCredentials=new yu(new Jl(w,R))}}(this._delegate,e,t,o)}enableNetwork(){return function oy(i){return function qv(i){return i.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield zy(i),t=yield Yd(i);return e.setNetworkEnabled(!0),function(o){const h=wn(o);return h.lu.delete(0),wc(h)}(t)}))}(Uo(i=di(i,qs)))}(this._delegate)}disableNetwork(){return function Qv(i){return function ey(i){return i.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield zy(i),t=yield Yd(i);return e.setNetworkEnabled(!1),(o=(0,Ae.Z)(function*(h){const m=wn(h);m.lu.add(0),yield Ic(m),m._u.set("Offline")}),function(h){return o.apply(this,arguments)})(t);var o}))}(Uo(i=di(i,qs)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Wh("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function im(i){return function(e){const t=new Di;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function Kg(i,e){return Wf.apply(this,arguments)}(yield Wy(e),t)})),t.promise}(Uo(i=di(i,qs)))}(this._delegate)}onSnapshotsInSync(e){return function a_(i,e){return function Gh(i,e){const t=new Tc(e);return i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return o=yield Sc(i),h=t,wn(o).Tu.add(h),void h.next();var o,h})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return o=yield Sc(i),h=t,void wn(o).Tu.delete(h);var o,h}))}}(Uo(i=di(i,qs)),iy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Jt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sp(this,ny(this._delegate,e))}catch(t){throw Ml(t,"collection()","Firestore.collection()")}}doc(e){try{return new ma(this,tg(this._delegate,e))}catch(t){throw Ml(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rl(this,function Yy(i,e){if(i=di(i,Zf),Kd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jt(Nt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ga(i,null,(t=e,new Fo(Qr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ml(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function u_(i,e,t){i=di(i,qs);const o=Object.assign(Object.assign({},fm),t);return function(h){if(h.maxAttempts<1)throw new Jt(Nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function tm(i,e,t){const o=new Di;return i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const h=yield(m=i,em(m).then(w=>w.datastore));var m;new p0(i.asyncQueue,h,t,e,o).run()})),o.promise}(Uo(i),h=>e(new l_(i,h)),o)}(this._delegate,t=>e(new th(this,t)))}batch(){return Uo(this._delegate),new Tv(new pm(this._delegate,e=>tp(this._delegate,e)))}loadBundle(e){return function tv(i,e){const t=Uo(i=di(i,qs)),o=new Zy;return function hu(i,e,t,o){const h=function(m,w){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,Y=function(Y,J){if(Y instanceof Uint8Array)return Yf(Y,J);if(Y instanceof ArrayBuffer)return Yf(new Uint8Array(Y),J);if(Y instanceof ReadableStream)return Y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new Jp(Y,w);var Y}(t,lu(e));i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function co(i,e,t){const o=wn(i);var h;(h=(0,Ae.Z)(function*(m,w,R){try{const Y=yield w.getMetadata();if(yield function(kt,Kt){const nn=wn(kt),Gn=bs(Kt.createTime);return nn.persistence.runTransaction("hasNewerBundle","readonly",cr=>nn.Ds.getBundleMetadata(cr,Kt.id)).then(cr=>!!cr&&cr.createTime.compareTo(Gn)>=0)}(m.localStore,Y))return yield w.close(),R._completeWith({taskState:"Success",documentsLoaded:(kt=Y).totalDocuments,bytesLoaded:kt.totalBytes,totalDocuments:kt.totalDocuments,totalBytes:kt.totalBytes}),Promise.resolve(new Set);R._updateProgress(Dc(Y));const J=new Ba(Y,m.localStore,w.wt);let ye=yield w.fc();for(;ye;){const kt=yield J.Nu(ye);kt&&R._updateProgress(kt),ye=yield w.fc()}const at=yield J.complete();return yield Vu(m,at.Mu,void 0),yield function(kt,Kt){const nn=wn(kt);return nn.persistence.runTransaction("Save bundle","readwrite",Gn=>nn.Ds.saveBundleMetadata(Gn,Kt))}(m.localStore,Y),R._completeWith(at.progress),Promise.resolve(at.Ou)}catch(Y){return wa("SyncEngine",`Loading bundle failed with ${Y}`),R._failWith(Y),Promise.resolve(new Set)}var kt}),function(m,w,R){return h.apply(this,arguments)})(o,e,t).then(h=>{o.sharedClientState.notifyBundleLoaded(h)})}(yield Wy(i),h,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function nv(i,e){return function ty(i,e){return i.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,o){const h=wn(t);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ds.getNamedQuery(m,o))}(yield Kf(i),e)}))}(Uo(i=di(i,qs)),e).then(t=>t?new ga(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Rl(this,t):null)}}class ug extends vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new np(new Hu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ma.forKey(t,this.firestore,null)}}class th{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ug(e)}get(e){const t=Jh(e);return this._delegate.get(t).then(o=>new rp(this._firestore,new xc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const h=Jh(e);return o?(gm("Transaction.set",o),this._delegate.set(h,t,o)):this._delegate.set(h,t),this}update(e,t,o,...h){const m=Jh(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...h),this}delete(e){const t=Jh(e);return this._delegate.delete(t),this}}class Tv{constructor(e){this._delegate=e}set(e,t,o){const h=Jh(e);return o?(gm("WriteBatch.set",o),this._delegate.set(h,t,o)):this._delegate.set(h,t),this}update(e,t,o,...h){const m=Jh(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...h),this}delete(e){const t=Jh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xh{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new og(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ip(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Xh.INSTANCES;let h=o.get(e);h||(h=new WeakMap,o.set(e,h));let m=h.get(t);return m||(m=new Xh(e,new ug(e),t),h.set(t,m)),m}}Xh.INSTANCES=new WeakMap;class ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ug(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Jt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ma(t,new As(t._delegate,o,new Cn(e)))}static forKey(e,t,o){return new ma(t,new As(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new sp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sp(this.firestore,ny(this._delegate,e))}catch(t){throw Ml(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ge.m9)(e))instanceof As&&ry(this._delegate,e)}set(e,t){t=gm("DocumentReference.set",t);try{return t?_y(this._delegate,e,t):_y(this._delegate,e)}catch(o){throw Ml(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Ey(this._delegate,e):Ey(this._delegate,e,t,...o)}catch(h){throw Ml(h,"updateDoc()","DocumentReference.update()")}}delete(){return function s_(i){return tp(di(i.firestore,qs),[new ca(i._key,Xi.none())])}(this._delegate)}onSnapshot(...e){const t=ym(e),o=m_(e,h=>new rp(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return Ev(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function gv(i){i=di(i,As);const e=di(i.firestore,qs),t=Uo(e),o=new eh(e);return function Yv(i,e){const t=new Di;return i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(o=(0,Ae.Z)(function*(h,m,w){try{const R=yield function(Y,J){const ye=wn(Y);return ye.persistence.runTransaction("read document","readonly",at=>ye.localDocuments.getDocument(at,J))}(h,m);R.isFoundDocument()?w.resolve(R):R.isNoDocument()?w.resolve(null):w.reject(new Jt(Nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const Y=sl(R,`Failed to get document '${m} from cache`);w.reject(Y)}}),function(h,m,w){return o.apply(this,arguments)})(yield Kf(i),e,t);var o})),t.promise}(t,i._key).then(h=>new xc(e,o,i._key,h,new Qh(null!==h&&h.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function mv(i){i=di(i,As);const e=di(i.firestore,qs);return Uu(Uo(e),i._key,{source:"server"}).then(t=>wy(e,i,t))}(this._delegate):function pv(i){i=di(i,As);const e=di(i.firestore,qs);return Uu(Uo(e),i._key).then(t=>wy(e,i,t))}(this._delegate),t.then(o=>new rp(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new ma(this.firestore,this._delegate.withConverter(e?Xh.getInstance(this.firestore,e):null))}}function Ml(i,e,t){return i.message=i.message.replace(e,t),i}function ym(i){for(const e of i)if("object"==typeof e&&!mm(e))return e;return{}}function m_(i,e){var t,o;let h;return h=mm(i[0])?i[0]:mm(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{h.next&&h.next(e(m))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(o=h.complete)||void 0===o?void 0:o.bind(h)}}class rp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cm(this._delegate,e._delegate)}}class ip extends rp{data(e){const t=this._delegate.data(e);return function Ia(i,e){i||Ln()}(void 0!==t),t}}class Rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ug(e)}where(e,t,o){try{return new Rl(this.firestore,Jd(this._delegate,function Mc(i,e,t){const o=e,h=um("where",i);return new e_(h,o,t)}(e,t,o)))}catch(h){throw Ml(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rl(this.firestore,Jd(this._delegate,function zu(i,e="asc"){const t=e,o=um("orderBy",i);return new Gu(o,t)}(e,t)))}catch(o){throw Ml(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rl(this.firestore,Jd(this._delegate,function cv(i){return Kh("limit",i),new py("limit",i,"F")}(e)))}catch(t){throw Ml(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rl(this.firestore,Jd(this._delegate,function t_(i){return Kh("limitToLast",i),new py("limitToLast",i,"L")}(e)))}catch(t){throw Ml(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rl(this.firestore,Jd(this._delegate,function n_(...i){return new dv("startAt",i,!0)}(...e)))}catch(t){throw Ml(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rl(this.firestore,Jd(this._delegate,function r_(...i){return new dv("startAfter",i,!1)}(...e)))}catch(t){throw Ml(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rl(this.firestore,Jd(this._delegate,function ag(...i){return new hm("endBefore",i,!1)}(...e)))}catch(t){throw Ml(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rl(this.firestore,Jd(this._delegate,function i_(...i){return new hm("endAt",i,!0)}(...e)))}catch(t){throw Ml(t,"endAt()","Query.endAt()")}}isEqual(e){return Ky(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function vv(i){i=di(i,ga);const e=di(i.firestore,qs),t=Uo(e),o=new eh(e);return function eg(i,e){const t=new Di;return i.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(o=(0,Ae.Z)(function*(h,m,w){try{const R=yield Ld(h,m,!0),Y=new jf(m,R.ji),J=Y.Ku(R.documents),ye=Y.applyChanges(J,!1);w.resolve(ye.snapshot)}catch(R){const Y=sl(R,`Failed to execute query '${m} against cache`);w.reject(Y)}}),function(h,m,w){return o.apply(this,arguments)})(yield Kf(i),e,t);var o})),t.promise}(t,i._query).then(h=>new ad(e,o,i,h))}(this._delegate):"server"===e?.source?function _v(i){i=di(i,ga);const e=di(i.firestore,qs),t=Uo(e),o=new eh(e);return pa(t,i._query,{source:"server"}).then(h=>new ad(e,o,i,h))}(this._delegate):function yv(i){i=di(i,ga);const e=di(i.firestore,qs),t=Uo(e),o=new eh(e);return dm(i._query),pa(t,i._query).then(h=>new ad(e,o,i,h))}(this._delegate),t.then(o=>new Dy(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=ym(e),o=m_(e,h=>new Dy(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return Ev(this._delegate,t,o)}withConverter(e){return new Rl(this.firestore,this._delegate.withConverter(e?Xh.getInstance(this.firestore,e):null))}}class wr{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ip(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ip(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wr(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new ip(this._firestore,o))})}isEqual(e){return cm(this._delegate,e._delegate)}}class sp extends Rl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ma(this.firestore,e):null}doc(e){try{return new ma(this.firestore,void 0===e?tg(this._delegate):tg(this._delegate,e))}catch(t){throw Ml(t,"doc()","CollectionReference.doc()")}}add(e){return function o_(i,e){const t=di(i.firestore,qs),o=tg(i),h=lg(i.converter,e);return tp(t,[ig(Qd(i.firestore),"addDoc",o._key,h,null!==i.converter,{}).toMutation(o._key,Xi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new ma(this.firestore,t))}isEqual(e){return ry(this._delegate,e._delegate)}withConverter(e){return new sp(this.firestore,this._delegate.withConverter(e?Xh.getInstance(this.firestore,e):null))}}function Jh(i){return di(i,As)}class nh{constructor(...e){this._delegate=new Ac(...e)}static documentId(){return new nh(ms.keyField().canonicalString())}isEqual(e){return(e=(0,Ge.m9)(e))instanceof Ac&&this._delegate._internalPath.isEqual(e._internalPath)}}class ef{constructor(e){this._delegate=e}static serverTimestamp(){const e=function d_(){return new om("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ef(e)}static delete(){const e=function c_(){return new Xf("deleteField")}();return e._methodName="FieldValue.delete",new ef(e)}static arrayUnion(...e){const t=function h_(...i){return new iv("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new ef(t)}static arrayRemove(...e){const t=function f_(...i){return new sv("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new ef(t)}static increment(e){const t=function p_(i){return new ov("increment",i)}(e);return t._methodName="FieldValue.increment",new ef(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vm={Firestore:by,GeoPoint:rg,Timestamp:Qn,Blob:np,Transaction:th,WriteBatch:Tv,DocumentReference:ma,DocumentSnapshot:rp,Query:Rl,QueryDocumentSnapshot:ip,QuerySnapshot:Dy,CollectionReference:sp,FieldPath:nh,FieldValue:ef,setLogLevel:function Dv(i){!function dl(i){Eo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function ho(i){(function _m(i,e){i.INTERNAL.registerComponent(new W.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(o,h)},"PUBLIC").setServiceProps(Object.assign({},vm)))})(i,(e,t)=>new by(e,t,new bv)),i.registerVersion("@firebase/firestore-compat","0.1.21")}(Re.Z);var tf=B(3385),Sv=B(440),Av=B(127);function Ty(i,e){return function y_(i,e=O.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function Em(i,e){return Ty(i,e).pipe((0,me.U)(t=>({payload:t,type:"query"})))}function cg(i,e){return Em(i,e).pipe((0,ge.O)(void 0),Le(),(0,me.U)(([t,o])=>{const h=o.payload.docChanges(),m=h.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((w,R)=>{const Y=h.find(ye=>ye.doc.ref.isEqual(w.ref)),J=t?.payload.docs.find(ye=>ye.ref.isEqual(w.ref));Y&&JSON.stringify(Y.doc.metadata)===JSON.stringify(w.metadata)||!Y&&J&&JSON.stringify(J.metadata)===JSON.stringify(w.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:w}})}),m}))}function Mv(i,e,t){return cg(i,t).pipe((0,Te.R)((o,h)=>function v_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function dg(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sy(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sy(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sy(i,e.oldIndex,1)}return i}(i,o))}),i}(o,h.map(m=>m.payload),e),[]),(0,Fe.x)(),(0,me.U)(o=>o.map(h=>({type:h.type,payload:h}))))}function Sy(i,e,t,...o){const h=i.slice();return h.splice(e,t,...o),h}function Rv(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Ov{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=cg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,me.U)(o=>o.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,ge.O)(void 0),Le(),(0,je.h)(([o,h])=>h.length>0||!o),(0,me.U)(([o,h])=>h),_e.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Te.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Rv(e);return Mv(this.query,t,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return Em(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),_e.iC)}get(e){return(0,He.D)(this.query.get(e)).pipe(_e.iC)}add(e){return this.ref.add(e)}doc(e){return new Pv(this.ref.doc(e),this.afs)}}class Pv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:h,query:m}=op(o,t);return new Ov(h,m,this.afs)}snapshotChanges(){return function xv(i,e){return Ty(i,e).pipe((0,ge.O)(void 0),Le(),(0,me.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,me.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,He.D)(this.ref.get(e)).pipe(_e.iC)}}class wm{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cg(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,je.h)(t=>t.length>0),_e.iC):cg(this.query,this.afs.schedulers.outsideAngular).pipe(_e.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Te.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Rv(e);return Mv(this.query,t,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return Em(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(o=>o.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),_e.iC)}get(e){return(0,He.D)(this.query.get(e)).pipe(_e.iC)}}const Ay=new d.OlP("angularfire2.enableFirestorePersistence"),xy=new d.OlP("angularfire2.firestore.persistenceSettings"),kv=new d.OlP("angularfire2.firestore.settings"),__=new d.OlP("angularfire2.firestore.use-emulator");function op(i,e=(t=>t)){return{query:e(i),ref:i}}let ap=(()=>{class i{constructor(t,o,h,m,w,R,Y,J,ye,at,kt,Kt,nn,Gn,cr,zi,fs){this.schedulers=Y;const Es=(0,$e.on)(t,R,o),Ho=ye;at&&(0,tf.nw)(Es,R,kt,nn,Gn,cr,Kt,zi),[this.firestore,this.persistenceEnabled$]=(0,$e.cc)(`${Es.name}.firestore`,"AngularFirestore",Es.name,()=>{const $s=R.runOutsideAngular(()=>Es.firestore());if(m&&$s.settings(m),Ho&&$s.useEmulator(...Ho),h&&!(0,Ve.PM)(w)){const ro=()=>{try{return(0,He.D)($s.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(Va){return typeof console<"u"&&console.warn(Va),(0,De.of)(!1)}};return[$s,R.runOutsideAngular(ro)]}return[$s,(0,De.of)(!1)]},[m,Ho,h])}collection(t,o){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:w}=op(h,o),R=this.schedulers.ngZone.run(()=>m);return new Ov(R,w,this)}collectionGroup(t,o){const h=o||(w=>w),m=this.firestore.collectionGroup(t);return new wm(h(m),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>o);return new Pv(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(d.LFG($e.Dh),d.LFG($e.xv,8),d.LFG(Ay,8),d.LFG(kv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(_e.HU),d.LFG(xy,8),d.LFG(__,8),d.LFG(tf.zQ,8),d.LFG(tf.Qv,8),d.LFG(tf.L6,8),d.LFG(tf._Q,8),d.LFG(tf.rT,8),d.LFG(tf.lh,8),d.LFG(tf.f7,8),d.LFG(Sv.nm,8))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),E_=(()=>{class i{constructor(){Av.Z.registerVersion("angularfire",_e.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ay,useValue:!0},{provide:xy,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({providers:[ap]}),i})()},2011:(sn,mt,B)=>{"use strict";B.d(mt,{Dh:()=>ze,GT:()=>_e,cc:()=>je,hO:()=>Fe,on:()=>ge,pX:()=>De,xv:()=>Le});var d=B(4650),O=B(127),Z=B(5813);sn=B.hmd(sn);const He=["ngOnDestroy"],De=(Re,Ae,bt,W={})=>new Proxy(Re,{get:(Xe,Ge)=>bt.runOutsideAngular(()=>{var Je;if(Re[Ge])return!(null===(Je=W?.spy)||void 0===Je)&&Je.get&&W.spy.get(Ge,Re[Ge]),Re[Ge];if(He.indexOf(Ge)>-1)return()=>{};const et=Ae.toPromise().then(ee=>{const qe=ee&&ee[Ge];return"function"==typeof qe?qe.bind(ee):qe&&qe.then?qe.then(he=>bt.run(()=>he)):bt.run(()=>qe)});return new Proxy(()=>{},{get:(ee,qe)=>et[qe],apply:(ee,qe,he)=>et.then(pe=>{var fe;const le=pe&&pe(...he);return!(null===(fe=W?.spy)||void 0===fe)&&fe.apply&&W.spy.apply(Ge,he,le),le})})})}),_e=(Re,Ae)=>{Ae.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(W=>{Object.defineProperty(Re.prototype,W,Object.getOwnPropertyDescriptor(bt.prototype||bt,W))})})};class ve{constructor(Ae){return Ae}}const ze=new d.OlP("angularfire2.app.options"),Le=new d.OlP("angularfire2.app.name");function ge(Re,Ae,bt){const Xe="object"==typeof bt&&bt||{};Xe.name=Xe.name||"string"==typeof bt&&bt||"[DEFAULT]";const Je=O.Z.apps.filter(et=>et&&et.name===Xe.name)[0]||Ae.runOutsideAngular(()=>O.Z.initializeApp(Re,Xe));try{JSON.stringify(Re)!==JSON.stringify(Je.options)&&me("error",`${Je.name} Firebase App already initialized with different options${sn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Je)}const me=(Re,...Ae)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Re](...Ae)},Te={provide:ve,useFactory:ge,deps:[ze,d.R0b,[new d.FiY,Le]]};let Fe=(()=>{class Re{constructor(bt){O.Z.registerVersion("angularfire",Z.q4.full,"core"),O.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),O.Z.registerVersion("angular",d.q4F.full,bt.toString())}static initializeApp(bt,W){return{ngModule:Re,providers:[{provide:ze,useValue:bt},{provide:Le,useValue:W}]}}}return Re.\u0275fac=function(bt){return new(bt||Re)(d.LFG(d.Lbi))},Re.\u0275mod=d.oAB({type:Re}),Re.\u0275inj=d.cJS({providers:[Te]}),Re})();function je(Re,Ae,bt,W,Xe){const[,Ge,Je]=globalThis.\u0275AngularfireInstanceCache.find(et=>et[0]===Re)||[];if(Ge)return function $e(Re,Ae){try{return Re.toString()===Ae.toString()}catch{return Re===Ae}}(Xe,Je)||(Ce("error",`${Ae} was already initialized on the ${bt} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Xe,was:Je})),Ge;{const et=W();return globalThis.\u0275AngularfireInstanceCache.push([Re,et,Xe]),et}}const Ve=!!sn.hot,Ce=(Re,...Ae)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Re](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(sn,mt,B)=>{"use strict";B.d(mt,{q4:()=>wu,iC:()=>fl,fc:()=>eo,HU:()=>Ls,vb:()=>Js,JM:()=>Nn});var d=B(4650),O=B(5867),Z=B(5861),He=B(9681),De=B(2090),_e=B(4859),ve=B(1877),ze=B(8766);const Le="@firebase/installations",ge="0.5.12",Te=`w:${ge}`,Fe="FIS_v2",Ae=new De.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bt(N){return N instanceof De.ZR&&N.code.includes("request-failed")}function W({projectId:N}){return`https://firebaseinstallations.googleapis.com/v1/projects/${N}/installations`}function Xe(N){return{token:N.token,requestStatus:2,expiresIn:pe(N.expiresIn),creationTime:Date.now()}}function Ge(N,G){return Je.apply(this,arguments)}function Je(){return(Je=(0,Z.Z)(function*(N,G){const Ne=(yield G.json()).error;return Ae.create("request-failed",{requestName:N,serverCode:Ne.code,serverMessage:Ne.message,serverStatus:Ne.status})})).apply(this,arguments)}function et({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function ee(N,{refreshToken:G}){const ne=et(N);return ne.append("Authorization",function fe(N){return`${Fe} ${N}`}(G)),ne}function qe(N){return he.apply(this,arguments)}function he(){return(he=(0,Z.Z)(function*(N){const G=yield N();return G.status>=500&&G.status<600?N():G})).apply(this,arguments)}function pe(N){return Number(N.replace("s","000"))}function le(N,G){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,Z.Z)(function*({appConfig:N,heartbeatServiceProvider:G},{fid:ne}){const Ne=W(N),ot=et(N),Mt=G.getImmediate({optional:!0});if(Mt){const mr=yield Mt.getHeartbeatsHeader();mr&&ot.append("x-firebase-client",mr)}const bn={method:"POST",headers:ot,body:JSON.stringify({fid:ne,authVersion:Fe,appId:N.appId,sdkVersion:Te})},Rn=yield qe(()=>fetch(Ne,bn));if(Rn.ok){const mr=yield Rn.json();return{fid:mr.fid||ne,registrationStatus:2,refreshToken:mr.refreshToken,authToken:Xe(mr.authToken)}}throw yield Ge("Create Installation",Rn)})).apply(this,arguments)}function Tt(N){return new Promise(G=>{setTimeout(G,N)})}const Et=/^[cdef][\w-]{21}$/;function Be(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const ne=function be(N){return function Gt(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return Et.test(ne)?ne:""}catch{return""}}function Ye(N){return`${N.appName}!${N.appId}`}const Ie=new Map;function st(N,G){const ne=Ye(N);Vt(ne,G),function fn(N,G){const ne=function Dn(){return!hn&&"BroadcastChannel"in self&&(hn=new BroadcastChannel("[Firebase] FID Change"),hn.onmessage=N=>{Vt(N.data.key,N.data.fid)}),hn}();ne&&ne.postMessage({key:N,fid:G}),function Zt(){0===Ie.size&&hn&&(hn.close(),hn=null)}()}(ne,G)}function Vt(N,G){const ne=Ie.get(N);if(ne)for(const Ne of ne)Ne(G)}let hn=null;const Qt="firebase-installations-store";let kn=null;function Dt(){return kn||(kn=(0,ze.X3)("firebase-installations-database",1,{upgrade:(N,G)=>{0===G&&N.createObjectStore(Qt)}})),kn}function Sr(N,G){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,Z.Z)(function*(N,G){const ne=Ye(N),ot=(yield Dt()).transaction(Qt,"readwrite"),Mt=ot.objectStore(Qt),qt=yield Mt.get(ne);return yield Mt.put(G,ne),yield ot.done,(!qt||qt.fid!==G.fid)&&st(N,G.fid),G})).apply(this,arguments)}function rr(N){return yr.apply(this,arguments)}function yr(){return(yr=(0,Z.Z)(function*(N){const G=Ye(N),Ne=(yield Dt()).transaction(Qt,"readwrite");yield Ne.objectStore(Qt).delete(G),yield Ne.done})).apply(this,arguments)}function gi(N,G){return dr.apply(this,arguments)}function dr(){return(dr=(0,Z.Z)(function*(N,G){const ne=Ye(N),ot=(yield Dt()).transaction(Qt,"readwrite"),Mt=ot.objectStore(Qt),qt=yield Mt.get(ne),bn=G(qt);return void 0===bn?yield Mt.delete(ne):yield Mt.put(bn,ne),yield ot.done,bn&&(!qt||qt.fid!==bn.fid)&&st(N,bn.fid),bn})).apply(this,arguments)}function ei(N){return qr.apply(this,arguments)}function qr(){return(qr=(0,Z.Z)(function*(N){let G;const ne=yield gi(N.appConfig,Ne=>{const ot=mi(Ne),Mt=Yn(N,ot);return G=Mt.registrationPromise,Mt.installationEntry});return""===ne.fid?{installationEntry:yield G}:{installationEntry:ne,registrationPromise:G}})).apply(this,arguments)}function mi(N){return hi(N||{fid:Be(),registrationStatus:0})}function Yn(N,G){if(0===G.registrationStatus){if(!navigator.onLine)return{installationEntry:G,registrationPromise:Promise.reject(Ae.create("app-offline"))};const ne={fid:G.fid,registrationStatus:1,registrationTime:Date.now()},Ne=function en(N,G){return zn.apply(this,arguments)}(N,ne);return{installationEntry:ne,registrationPromise:Ne}}return 1===G.registrationStatus?{installationEntry:G,registrationPromise:Tn(N)}:{installationEntry:G}}function zn(){return(zn=(0,Z.Z)(function*(N,G){try{const ne=yield le(N,G);return Sr(N.appConfig,ne)}catch(ne){throw bt(ne)&&409===ne.customData.serverCode?yield rr(N.appConfig):yield Sr(N.appConfig,{fid:G.fid,registrationStatus:0}),ne}})).apply(this,arguments)}function Tn(N){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,Z.Z)(function*(N){let G=yield vn(N.appConfig);for(;1===G.registrationStatus;)yield Tt(100),G=yield vn(N.appConfig);if(0===G.registrationStatus){const{installationEntry:ne,registrationPromise:Ne}=yield ei(N);return Ne||ne}return G})).apply(this,arguments)}function vn(N){return gi(N,G=>{if(!G)throw Ae.create("installation-not-found");return hi(G)})}function hi(N){return function Zr(N){return 1===N.registrationStatus&&N.registrationTime+1e4<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function ti(N,G){return Er.apply(this,arguments)}function Er(){return(Er=(0,Z.Z)(function*({appConfig:N,heartbeatServiceProvider:G},ne){const Ne=Pr(N,ne),ot=ee(N,ne),Mt=G.getImmediate({optional:!0});if(Mt){const mr=yield Mt.getHeartbeatsHeader();mr&&ot.append("x-firebase-client",mr)}const bn={method:"POST",headers:ot,body:JSON.stringify({installation:{sdkVersion:Te,appId:N.appId}})},Rn=yield qe(()=>fetch(Ne,bn));if(Rn.ok)return Xe(yield Rn.json());throw yield Ge("Generate Auth Token",Rn)})).apply(this,arguments)}function Pr(N,{fid:G}){return`${W(N)}/${G}/authTokens:generate`}function Ke(N){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Z.Z)(function*(N,G=!1){let ne;const Ne=yield gi(N.appConfig,Mt=>{if(!un(Mt))throw Ae.create("not-registered");const qt=Mt.authToken;if(!G&&ar(qt))return Mt;if(1===qt.requestStatus)return ne=Ue(N,G),Mt;{if(!navigator.onLine)throw Ae.create("app-offline");const bn=ir(Mt);return ne=zt(N,bn),bn}});return ne?yield ne:Ne.authToken})).apply(this,arguments)}function Ue(N,G){return tt.apply(this,arguments)}function tt(){return(tt=(0,Z.Z)(function*(N,G){let ne=yield We(N.appConfig);for(;1===ne.authToken.requestStatus;)yield Tt(100),ne=yield We(N.appConfig);const Ne=ne.authToken;return 0===Ne.requestStatus?Ke(N,G):Ne})).apply(this,arguments)}function We(N){return gi(N,G=>{if(!un(G))throw Ae.create("not-registered");return function Un(N){return 1===N.requestStatus&&N.requestTime+1e4<Date.now()}(G.authToken)?Object.assign(Object.assign({},G),{authToken:{requestStatus:0}}):G})}function zt(N,G){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,Z.Z)(function*(N,G){try{const ne=yield ti(N,G),Ne=Object.assign(Object.assign({},G),{authToken:ne});return yield Sr(N.appConfig,Ne),ne}catch(ne){if(!bt(ne)||401!==ne.customData.serverCode&&404!==ne.customData.serverCode){const Ne=Object.assign(Object.assign({},G),{authToken:{requestStatus:0}});yield Sr(N.appConfig,Ne)}else yield rr(N.appConfig);throw ne}})).apply(this,arguments)}function un(N){return void 0!==N&&2===N.registrationStatus}function ar(N){return 2===N.requestStatus&&!function On(N){const G=Date.now();return G<N.creationTime||N.creationTime+N.expiresIn<G+36e5}(N)}function ir(N){const G={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:G})}function Ar(){return(Ar=(0,Z.Z)(function*(N){const G=N,{installationEntry:ne,registrationPromise:Ne}=yield ei(G);return Ne?Ne.catch(console.error):Ke(G).catch(console.error),ne.fid})).apply(this,arguments)}function or(){return(or=(0,Z.Z)(function*(N,G=!1){const ne=N;return yield Xr(ne),(yield Ke(ne,G)).token})).apply(this,arguments)}function Xr(N){return on.apply(this,arguments)}function on(){return(on=(0,Z.Z)(function*(N){const{registrationPromise:G}=yield ei(N);G&&(yield G)})).apply(this,arguments)}function hr(N){return Ae.create("missing-app-config-values",{valueName:N})}const gn="installations",tr=N=>{const G=N.getProvider("app").getImmediate(),ne=function qn(N){if(!N||!N.options)throw hr("App Configuration");if(!N.name)throw hr("App Name");const G=["projectId","apiKey","appId"];for(const ne of G)if(!N.options[ne])throw hr(ne);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(G);return{app:G,appConfig:ne,heartbeatServiceProvider:(0,He._getProvider)(G,"heartbeat"),_delete:()=>Promise.resolve()}},ri=N=>{const G=N.getProvider("app").getImmediate(),ne=(0,He._getProvider)(G,gn).getImmediate();return{getId:()=>function Jn(N){return Ar.apply(this,arguments)}(ne),getToken:ot=>function Ur(N){return or.apply(this,arguments)}(ne,ot)}};(function Fi(){(0,He._registerComponent)(new _e.wA(gn,tr,"PUBLIC")),(0,He._registerComponent)(new _e.wA("installations-internal",ri,"PRIVATE"))})(),(0,He.registerVersion)(Le,ge),(0,He.registerVersion)(Le,ge,"esm2017");const Vr="@firebase/remote-config",si=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fn{constructor(G,ne,Ne,ot){this.client=G,this.storage=ne,this.storageCache=Ne,this.logger=ot}isCachedDataFresh(G,ne){if(!ne)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ne=Date.now()-ne,ot=Ne<=G;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${G}. Is cache hit: ${ot}.`),ot}fetch(G){var ne=this;return(0,Z.Z)(function*(){const[Ne,ot]=yield Promise.all([ne.storage.getLastSuccessfulFetchTimestampMillis(),ne.storage.getLastSuccessfulFetchResponse()]);if(ot&&ne.isCachedDataFresh(G.cacheMaxAgeMillis,Ne))return ot;G.eTag=ot&&ot.eTag;const Mt=yield ne.client.fetch(G),qt=[ne.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Mt.status&&qt.push(ne.storage.setLastSuccessfulFetchResponse(Mt)),yield Promise.all(qt),Mt})()}}function Wn(N=navigator){return N.languages&&N.languages[0]||N.language}class Nr{constructor(G,ne,Ne,ot,Mt,qt){this.firebaseInstallations=G,this.sdkVersion=ne,this.namespace=Ne,this.projectId=ot,this.apiKey=Mt,this.appId=qt}fetch(G){var ne=this;return(0,Z.Z)(function*(){var Ne,ot,Mt;const[qt,bn]=yield Promise.all([ne.firebaseInstallations.getId(),ne.firebaseInstallations.getToken()]),mr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ne.projectId}/namespaces/${ne.namespace}:fetch?key=${ne.apiKey}`,nr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":G.eTag||"*"},Xn={sdk_version:ne.sdkVersion,app_instance_id:qt,app_instance_id_token:bn,app_id:ne.appId,language_code:Wn()},Hr={method:"POST",headers:nr,body:JSON.stringify(Xn)},ao=fetch(mr,Hr),la=new Promise((Zo,Bl)=>{G.signal.addEventListener(()=>{const kc=new Error("The operation was aborted.");kc.name="AbortError",Bl(kc)})});let qa;try{yield Promise.race([ao,la]),qa=yield ao}catch(Zo){let Bl="fetch-client-network";throw"AbortError"===(null===(Ne=Zo)||void 0===Ne?void 0:Ne.name)&&(Bl="fetch-timeout"),si.create(Bl,{originalErrorMessage:null===(ot=Zo)||void 0===ot?void 0:ot.message})}let Ko=qa.status;const Ya=qa.headers.get("ETag")||void 0;let Ka,pl;if(200===qa.status){let Zo;try{Zo=yield qa.json()}catch(Bl){throw si.create("fetch-client-parse",{originalErrorMessage:null===(Mt=Bl)||void 0===Mt?void 0:Mt.message})}Ka=Zo.entries,pl=Zo.state}if("INSTANCE_STATE_UNSPECIFIED"===pl?Ko=500:"NO_CHANGE"===pl?Ko=304:("NO_TEMPLATE"===pl||"EMPTY_CONFIG"===pl)&&(Ka={}),304!==Ko&&200!==Ko)throw si.create("fetch-status",{httpStatus:Ko});return{status:Ko,eTag:Ya,config:Ka}})()}}class ct{constructor(G,ne){this.client=G,this.storage=ne}fetch(G){var ne=this;return(0,Z.Z)(function*(){const Ne=(yield ne.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ne.attemptFetch(G,Ne)})()}attemptFetch(G,{throttleEndTimeMillis:ne,backoffCount:Ne}){var ot=this;return(0,Z.Z)(function*(){yield function wi(N,G){return new Promise((ne,Ne)=>{const ot=Math.max(G-Date.now(),0),Mt=setTimeout(ne,ot);N.addEventListener(()=>{clearTimeout(Mt),Ne(si.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(G.signal,ne);try{const Mt=yield ot.client.fetch(G);return yield ot.storage.deleteThrottleMetadata(),Mt}catch(Mt){if(!function rt(N){if(!(N instanceof De.ZR&&N.customData))return!1;const G=Number(N.customData.httpStatus);return 429===G||500===G||503===G||504===G}(Mt))throw Mt;const qt={throttleEndTimeMillis:Date.now()+(0,De.$s)(Ne),backoffCount:Ne+1};return yield ot.storage.setThrottleMetadata(qt),ot.attemptFetch(G,qt)}})()}}class tn{constructor(G,ne,Ne,ot,Mt){this.app=G,this._client=ne,this._storageCache=Ne,this._storage=ot,this._logger=Mt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function An(N,G){var ne;const Ne=N.target.error||void 0;return si.create(G,{originalErrorMessage:Ne&&(null===(ne=Ne)||void 0===ne?void 0:ne.message)})}const Ir="app_namespace_store";class ws{constructor(G,ne,Ne,ot=function Wi(){return new Promise((N,G)=>{var ne;try{const Ne=indexedDB.open("firebase_remote_config",1);Ne.onerror=ot=>{G(An(ot,"storage-open"))},Ne.onsuccess=ot=>{N(ot.target.result)},Ne.onupgradeneeded=ot=>{0===ot.oldVersion&&ot.target.result.createObjectStore(Ir,{keyPath:"compositeKey"})}}catch(Ne){G(si.create("storage-open",{originalErrorMessage:null===(ne=Ne)||void 0===ne?void 0:ne.message}))}})}()){this.appId=G,this.appName=ne,this.namespace=Ne,this.openDbPromise=ot}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(G){return this.set("last_fetch_status",G)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(G){return this.set("last_successful_fetch_timestamp_millis",G)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(G){return this.set("last_successful_fetch_response",G)}getActiveConfig(){return this.get("active_config")}setActiveConfig(G){return this.set("active_config",G)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(G){return this.set("active_config_etag",G)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(G){return this.set("throttle_metadata",G)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(G){var ne=this;return(0,Z.Z)(function*(){const Ne=yield ne.openDbPromise;return new Promise((ot,Mt)=>{var qt;const Rn=Ne.transaction([Ir],"readonly").objectStore(Ir),mr=ne.createCompositeKey(G);try{const nr=Rn.get(mr);nr.onerror=Xn=>{Mt(An(Xn,"storage-get"))},nr.onsuccess=Xn=>{const Hr=Xn.target.result;ot(Hr?Hr.value:void 0)}}catch(nr){Mt(si.create("storage-get",{originalErrorMessage:null===(qt=nr)||void 0===qt?void 0:qt.message}))}})})()}set(G,ne){var Ne=this;return(0,Z.Z)(function*(){const ot=yield Ne.openDbPromise;return new Promise((Mt,qt)=>{var bn;const mr=ot.transaction([Ir],"readwrite").objectStore(Ir),nr=Ne.createCompositeKey(G);try{const Xn=mr.put({compositeKey:nr,value:ne});Xn.onerror=Hr=>{qt(An(Hr,"storage-set"))},Xn.onsuccess=()=>{Mt()}}catch(Xn){qt(si.create("storage-set",{originalErrorMessage:null===(bn=Xn)||void 0===bn?void 0:bn.message}))}})})()}delete(G){var ne=this;return(0,Z.Z)(function*(){const Ne=yield ne.openDbPromise;return new Promise((ot,Mt)=>{var qt;const Rn=Ne.transaction([Ir],"readwrite").objectStore(Ir),mr=ne.createCompositeKey(G);try{const nr=Rn.delete(mr);nr.onerror=Xn=>{Mt(An(Xn,"storage-delete"))},nr.onsuccess=()=>{ot()}}catch(nr){Mt(si.create("storage-delete",{originalErrorMessage:null===(qt=nr)||void 0===qt?void 0:qt.message}))}})})()}createCompositeKey(G){return[this.appId,this.appName,this.namespace,G].join()}}class Is{constructor(G){this.storage=G}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var G=this;return(0,Z.Z)(function*(){const ne=G.storage.getLastFetchStatus(),Ne=G.storage.getLastSuccessfulFetchTimestampMillis(),ot=G.storage.getActiveConfig(),Mt=yield ne;Mt&&(G.lastFetchStatus=Mt);const qt=yield Ne;qt&&(G.lastSuccessfulFetchTimestampMillis=qt);const bn=yield ot;bn&&(G.activeConfig=bn)})()}setLastFetchStatus(G){return this.lastFetchStatus=G,this.storage.setLastFetchStatus(G)}setLastSuccessfulFetchTimestampMillis(G){return this.lastSuccessfulFetchTimestampMillis=G,this.storage.setLastSuccessfulFetchTimestampMillis(G)}setActiveConfig(G){return this.activeConfig=G,this.storage.setActiveConfig(G)}}function Ks(){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,Z.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}!function ns(){(0,He._registerComponent)(new _e.wA("remote-config",function N(G,{instanceIdentifier:ne}){const Ne=G.getProvider("app").getImmediate(),ot=G.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw si.create("registration-window");if(!(0,De.hl)())throw si.create("indexed-db-unavailable");const{projectId:Mt,apiKey:qt,appId:bn}=Ne.options;if(!Mt)throw si.create("registration-project-id");if(!qt)throw si.create("registration-api-key");if(!bn)throw si.create("registration-app-id");const Rn=new ws(bn,Ne.name,ne=ne||"firebase"),mr=new Is(Rn),nr=new ve.Yd(Vr);nr.logLevel=ve.in.ERROR;const Xn=new Nr(ot,He.SDK_VERSION,ne,Mt,qt,bn),Hr=new ct(Xn,Rn),ao=new Fn(Hr,Rn,mr,nr),la=new tn(Ne,ao,mr,Rn,nr);return function Ee(N){const G=(0,De.m9)(N);G._initializePromise||(G._initializePromise=G._storageCache.loadFromStorage().then(()=>{G._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,He.registerVersion)(Vr,"0.3.11"),(0,He.registerVersion)(Vr,"0.3.11","esm2017")}();const xo="/firebase-messaging-sw.js",Ui="/firebase-cloud-messaging-push-scope",ps="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",js="google.c.a.c_id",Zs="google.c.a.c_l",Qs="google.c.a.ts",Go="google.c.a.e";var qi=(()=>{return(N=qi||(qi={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",qi;var N})();function jr(N){const G=new Uint8Array(N);return btoa(String.fromCharCode(...G)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function so(N){const ne=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ne=atob(ne),ot=new Uint8Array(Ne.length);for(let Mt=0;Mt<Ne.length;++Mt)ot[Mt]=Ne.charCodeAt(Mt);return ot}const Rs="fcm_token_details_db",gs="fcm_token_object_Store";function Ro(N){return oi.apply(this,arguments)}function oi(){return oi=(0,Z.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Mt=>Mt.name).includes(Rs))return null;let G=null;return(yield(0,ze.X3)(Rs,5,{upgrade:(Ne=(0,Z.Z)(function*(ot,Mt,qt,bn){var Rn;if(Mt<2||!ot.objectStoreNames.contains(gs))return;const mr=bn.objectStore(gs),nr=yield mr.index("fcmSenderId").get(N);if(yield mr.clear(),nr)if(2===Mt){const Xn=nr;if(!Xn.auth||!Xn.p256dh||!Xn.endpoint)return;G={token:Xn.fcmToken,createTime:null!==(Rn=Xn.createTime)&&void 0!==Rn?Rn:Date.now(),subscriptionOptions:{auth:Xn.auth,p256dh:Xn.p256dh,endpoint:Xn.endpoint,swScope:Xn.swScope,vapidKey:"string"==typeof Xn.vapidKey?Xn.vapidKey:jr(Xn.vapidKey)}}}else if(3===Mt){const Xn=nr;G={token:Xn.fcmToken,createTime:Xn.createTime,subscriptionOptions:{auth:jr(Xn.auth),p256dh:jr(Xn.p256dh),endpoint:Xn.endpoint,swScope:Xn.swScope,vapidKey:jr(Xn.vapidKey)}}}else if(4===Mt){const Xn=nr;G={token:Xn.fcmToken,createTime:Xn.createTime,subscriptionOptions:{auth:jr(Xn.auth),p256dh:jr(Xn.p256dh),endpoint:Xn.endpoint,swScope:Xn.swScope,vapidKey:jr(Xn.vapidKey)}}}}),function(Mt,qt,bn,Rn){return Ne.apply(this,arguments)})})).close(),yield(0,ze.Lj)(Rs),yield(0,ze.Lj)("fcm_vapid_details_db"),yield(0,ze.Lj)("undefined"),na(G)?G:null;var Ne}),oi.apply(this,arguments)}function na(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:G}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof G.auth&&G.auth.length>0&&"string"==typeof G.p256dh&&G.p256dh.length>0&&"string"==typeof G.endpoint&&G.endpoint.length>0&&"string"==typeof G.swScope&&G.swScope.length>0&&"string"==typeof G.vapidKey&&G.vapidKey.length>0}const Ii="firebase-messaging-store";let Ts=null;function Mi(){return Ts||(Ts=(0,ze.X3)("firebase-messaging-database",1,{upgrade:(N,G)=>{0===G&&N.createObjectStore(Ii)}})),Ts}function Os(N){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,Z.Z)(function*(N){const G=lt(N),Ne=yield(yield Mi()).transaction(Ii).objectStore(Ii).get(G);if(Ne)return Ne;{const ot=yield Ro(N.appConfig.senderId);if(ot)return yield $(N,ot),ot}})).apply(this,arguments)}function $(N,G){return re.apply(this,arguments)}function re(){return(re=(0,Z.Z)(function*(N,G){const ne=lt(N),ot=(yield Mi()).transaction(Ii,"readwrite");return yield ot.objectStore(Ii).put(G,ne),yield ot.done,G})).apply(this,arguments)}function U(N){return ue.apply(this,arguments)}function ue(){return(ue=(0,Z.Z)(function*(N){const G=lt(N),Ne=(yield Mi()).transaction(Ii,"readwrite");yield Ne.objectStore(Ii).delete(G),yield Ne.done})).apply(this,arguments)}function lt({appConfig:N}){return N.appId}const Ct=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _n(N,G){return ai.apply(this,arguments)}function ai(){return(ai=(0,Z.Z)(function*(N,G){var ne;const Ne=yield Ri(N),ot=H(G),Mt={method:"POST",headers:Ne,body:JSON.stringify(ot)};let qt;try{qt=yield(yield fetch(Gr(N.appConfig),Mt)).json()}catch(bn){throw Ct.create("token-subscribe-failed",{errorInfo:null===(ne=bn)||void 0===ne?void 0:ne.toString()})}if(qt.error)throw Ct.create("token-subscribe-failed",{errorInfo:qt.error.message});if(!qt.token)throw Ct.create("token-subscribe-no-token");return qt.token})).apply(this,arguments)}function Jr(N,G){return li.apply(this,arguments)}function li(){return(li=(0,Z.Z)(function*(N,G){var ne;const Ne=yield Ri(N),ot=H(G.subscriptionOptions),Mt={method:"PATCH",headers:Ne,body:JSON.stringify(ot)};let qt;try{qt=yield(yield fetch(`${Gr(N.appConfig)}/${G.token}`,Mt)).json()}catch(bn){throw Ct.create("token-update-failed",{errorInfo:null===(ne=bn)||void 0===ne?void 0:ne.toString()})}if(qt.error)throw Ct.create("token-update-failed",{errorInfo:qt.error.message});if(!qt.token)throw Ct.create("token-update-no-token");return qt.token})).apply(this,arguments)}function br(N,G){return vi.apply(this,arguments)}function vi(){return(vi=(0,Z.Z)(function*(N,G){var ne;const ot={method:"DELETE",headers:yield Ri(N)};try{const qt=yield(yield fetch(`${Gr(N.appConfig)}/${G}`,ot)).json();if(qt.error)throw Ct.create("token-unsubscribe-failed",{errorInfo:qt.error.message})}catch(Mt){throw Ct.create("token-unsubscribe-failed",{errorInfo:null===(ne=Mt)||void 0===ne?void 0:ne.toString()})}})).apply(this,arguments)}function Gr({projectId:N}){return`https://fcmregistrations.googleapis.com/v1/projects/${N}/registrations`}function Ri(N){return E.apply(this,arguments)}function E(){return(E=(0,Z.Z)(function*({appConfig:N,installations:G}){const ne=yield G.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${ne}`})})).apply(this,arguments)}function H({p256dh:N,auth:G,endpoint:ne,vapidKey:Ne}){const ot={web:{endpoint:ne,auth:G,p256dh:N}};return Ne!==ps&&(ot.web.applicationPubKey=Ne),ot}const I=6048e5;function j(N){return ie.apply(this,arguments)}function ie(){return(ie=(0,Z.Z)(function*(N){const G=yield fi(N.swRegistration,N.vapidKey),ne={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:G.endpoint,auth:jr(G.getKey("auth")),p256dh:jr(G.getKey("p256dh"))},Ne=yield Os(N.firebaseDependencies);if(Ne){if(z(Ne.subscriptionOptions,ne))return Date.now()>=Ne.createTime+I?Mn(N,{token:Ne.token,createTime:Date.now(),subscriptionOptions:ne}):Ne.token;try{yield br(N.firebaseDependencies,Ne.token)}catch(ot){console.warn(ot)}return Mr(N.firebaseDependencies,ne)}return Mr(N.firebaseDependencies,ne)})).apply(this,arguments)}function xt(N){return cn.apply(this,arguments)}function cn(){return(cn=(0,Z.Z)(function*(N){const G=yield Os(N.firebaseDependencies);G&&(yield br(N.firebaseDependencies,G.token),yield U(N.firebaseDependencies));const ne=yield N.swRegistration.pushManager.getSubscription();return!ne||ne.unsubscribe()})).apply(this,arguments)}function Mn(N,G){return fr.apply(this,arguments)}function fr(){return(fr=(0,Z.Z)(function*(N,G){try{const ne=yield Jr(N.firebaseDependencies,G),Ne=Object.assign(Object.assign({},G),{token:ne,createTime:Date.now()});return yield $(N.firebaseDependencies,Ne),ne}catch(ne){throw yield xt(N),ne}})).apply(this,arguments)}function Mr(N,G){return bi.apply(this,arguments)}function bi(){return(bi=(0,Z.Z)(function*(N,G){const Ne={token:yield _n(N,G),createTime:Date.now(),subscriptionOptions:G};return yield $(N,Ne),Ne.token})).apply(this,arguments)}function fi(N,G){return $i.apply(this,arguments)}function $i(){return($i=(0,Z.Z)(function*(N,G){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:so(G)})})).apply(this,arguments)}function z(N,G){return G.vapidKey===N.vapidKey&&G.endpoint===N.endpoint&&G.auth===N.auth&&G.p256dh===N.p256dh}function V(N){const G={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function F(N,G){if(!G.notification)return;N.notification={};const ne=G.notification.title;ne&&(N.notification.title=ne);const Ne=G.notification.body;Ne&&(N.notification.body=Ne);const ot=G.notification.image;ot&&(N.notification.image=ot)}(G,N),function ce(N,G){!G.data||(N.data=G.data)}(G,N),function Bt(N,G){var ne,Ne,ot,Mt,qt;if(!(G.fcmOptions||null!==(ne=G.notification)&&void 0!==ne&&ne.click_action))return;N.fcmOptions={};const bn=null!==(ot=null===(Ne=G.fcmOptions)||void 0===Ne?void 0:Ne.link)&&void 0!==ot?ot:null===(Mt=G.notification)||void 0===Mt?void 0:Mt.click_action;bn&&(N.fcmOptions.link=bn);const Rn=null===(qt=G.fcmOptions)||void 0===qt?void 0:qt.analytics_label;Rn&&(N.fcmOptions.analyticsLabel=Rn)}(G,N),G}function Pn(N){return"object"==typeof N&&!!N&&js in N}function ui(N,G){const ne=[];for(let Ne=0;Ne<N.length;Ne++)ne.push(N.charAt(Ne)),Ne<G.length&&ne.push(G.charAt(Ne));return ne.join("")}function Ps(N){return Ct.create("missing-app-config-values",{valueName:N})}ui("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ui("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fo{constructor(G,ne,Ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ot=function us(N){if(!N||!N.options)throw Ps("App Configuration Object");if(!N.name)throw Ps("App Name");const G=["projectId","apiKey","appId","messagingSenderId"],{options:ne}=N;for(const Ne of G)if(!ne[Ne])throw Ps(Ne);return{appName:N.name,projectId:ne.projectId,apiKey:ne.apiKey,appId:ne.appId,senderId:ne.messagingSenderId}}(G);this.firebaseDependencies={app:G,appConfig:ot,installations:ne,analyticsProvider:Ne}}_delete(){return Promise.resolve()}}function Oo(N){return po.apply(this,arguments)}function po(){return(po=(0,Z.Z)(function*(N){var G;try{N.swRegistration=yield navigator.serviceWorker.register(xo,{scope:Ui}),N.swRegistration.update().catch(()=>{})}catch(ne){throw Ct.create("failed-service-worker-registration",{browserErrorMessage:null===(G=ne)||void 0===G?void 0:G.message})}})).apply(this,arguments)}function go(N,G){return ra.apply(this,arguments)}function ra(){return(ra=(0,Z.Z)(function*(N,G){if(!G&&!N.swRegistration&&(yield Oo(N)),G||!N.swRegistration){if(!(G instanceof ServiceWorkerRegistration))throw Ct.create("invalid-sw-registration");N.swRegistration=G}})).apply(this,arguments)}function cs(N,G){return $a.apply(this,arguments)}function $a(){return($a=(0,Z.Z)(function*(N,G){G?N.vapidKey=G:N.vapidKey||(N.vapidKey=ps)})).apply(this,arguments)}function Ol(){return(Ol=(0,Z.Z)(function*(N,G){if(!navigator)throw Ct.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ct.create("permission-blocked");return yield cs(N,G?.vapidKey),yield go(N,G?.serviceWorkerRegistration),j(N)})).apply(this,arguments)}function ol(N,G,ne){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,Z.Z)(function*(N,G,ne){const Ne=kl(G);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(Ne,{message_id:ne[js],message_name:ne[Zs],message_time:ne[Qs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function kl(N){switch(N){case qi.NOTIFICATION_CLICKED:return"notification_open";case qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Nl(){return(Nl=(0,Z.Z)(function*(N,G){const ne=G.data;if(!ne.isFirebaseMessaging)return;N.onMessageHandler&&ne.messageType===qi.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(V(ne)):N.onMessageHandler.next(V(ne)));const Ne=ne.data;Pn(Ne)&&"1"===Ne[Go]&&(yield ol(N,ne.messageType,Ne))})).apply(this,arguments)}const Po="@firebase/messaging",Yi=N=>{const G=new fo(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ne=>function Zl(N,G){return Nl.apply(this,arguments)}(G,ne)),G},_i=N=>{const G=N.getProvider("messaging").getImmediate();return{getToken:Ne=>function Wo(N,G){return Ol.apply(this,arguments)}(G,Ne)}};function ya(){return mo.apply(this,arguments)}function mo(){return(mo=(0,Z.Z)(function*(){try{yield(0,De.eu)()}catch{return!1}return typeof window<"u"&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ql(){(0,He._registerComponent)(new _e.wA("messaging",Yi,"PUBLIC")),(0,He._registerComponent)(new _e.wA("messaging-internal",_i,"PRIVATE")),(0,He.registerVersion)(Po,"0.9.16"),(0,He.registerVersion)(Po,"0.9.16","esm2017")}();const qo="analytics",ia="firebase_id",Xs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sa="https://www.googletagmanager.com/gtag/js",Pi=new ve.Yd("@firebase/analytics");function Ll(N){return Promise.all(N.map(G=>G.catch(ne=>ne)))}function pu(N,G){const ne=document.createElement("script");ne.src=`${sa}?l=${N}&id=${G}`,ne.async=!0,document.head.appendChild(ne)}function ll(N,G,ne,Ne,ot,Mt){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,Z.Z)(function*(N,G,ne,Ne,ot,Mt){const qt=Ne[ot];try{if(qt)yield G[qt];else{const Rn=(yield Ll(ne)).find(mr=>mr.measurementId===ot);Rn&&(yield G[Rn.appId])}}catch(bn){Pi.error(bn)}N("config",ot,Mt)})).apply(this,arguments)}function gu(N,G,ne,Ne,ot){return _a.apply(this,arguments)}function _a(){return(_a=(0,Z.Z)(function*(N,G,ne,Ne,ot){try{let Mt=[];if(ot&&ot.send_to){let qt=ot.send_to;Array.isArray(qt)||(qt=[qt]);const bn=yield Ll(ne);for(const Rn of qt){const mr=bn.find(Xn=>Xn.measurementId===Rn),nr=mr&&G[mr.appId];if(!nr){Mt=[];break}Mt.push(nr)}}0===Mt.length&&(Mt=Object.values(G)),yield Promise.all(Mt),N("event",Ne,ot||{})}catch(Mt){Pi.error(Mt)}})).apply(this,arguments)}function Ua(){const N=window.document.getElementsByTagName("script");for(const G of Object.values(N))if(G.src&&G.src.includes(sa))return G;return null}const is=new De.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Rc=new class vo{constructor(G={},ne=1e3){this.throttleMetadata=G,this.intervalMillis=ne}getThrottleMetadata(G){return this.throttleMetadata[G]}setThrottleMetadata(G,ne){this.throttleMetadata[G]=ne}deleteThrottleMetadata(G){delete this.throttleMetadata[G]}};function cl(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function ki(N){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,Z.Z)(function*(N){var G;const{appId:ne,apiKey:Ne}=N,ot={method:"GET",headers:cl(Ne)},Mt=Xs.replace("{app-id}",ne),qt=yield fetch(Mt,ot);if(200!==qt.status&&304!==qt.status){let bn="";try{const Rn=yield qt.json();null!==(G=Rn.error)&&void 0!==G&&G.message&&(bn=Rn.error.message)}catch{}throw is.create("config-fetch-failed",{httpStatus:qt.status,responseMessage:bn})}return qt.json()})).apply(this,arguments)}function ni(N){return ja.apply(this,arguments)}function ja(){return(ja=(0,Z.Z)(function*(N,G=Rc,ne){const{appId:Ne,apiKey:ot,measurementId:Mt}=N.options;if(!Ne)throw is.create("no-app-id");if(!ot){if(Mt)return{measurementId:Mt,appId:Ne};throw is.create("no-api-key")}const qt=G.getThrottleMetadata(Ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},bn=new Ea;return setTimeout((0,Z.Z)(function*(){bn.abort()}),void 0!==ne?ne:6e4),_o({appId:Ne,apiKey:ot,measurementId:Mt},qt,bn,G)})).apply(this,arguments)}function _o(N,G,ne){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,Z.Z)(function*(N,{throttleEndTimeMillis:G,backoffCount:ne},Ne,ot=Rc){var Mt,qt;const{appId:bn,measurementId:Rn}=N;try{yield Yo(Ne,G)}catch(mr){if(Rn)return Pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rn} provided in the "measurementId" field in the local Firebase config. [${null===(Mt=mr)||void 0===Mt?void 0:Mt.message}]`),{appId:bn,measurementId:Rn};throw mr}try{const mr=yield ki(N);return ot.deleteThrottleMetadata(bn),mr}catch(mr){const nr=mr;if(!Eo(nr)){if(ot.deleteThrottleMetadata(bn),Rn)return Pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rn} provided in the "measurementId" field in the local Firebase config. [${nr?.message}]`),{appId:bn,measurementId:Rn};throw mr}const Xn=503===Number(null===(qt=nr?.customData)||void 0===qt?void 0:qt.httpStatus)?(0,De.$s)(ne,ot.intervalMillis,30):(0,De.$s)(ne,ot.intervalMillis),Hr={throttleEndTimeMillis:Date.now()+Xn,backoffCount:ne+1};return ot.setThrottleMetadata(bn,Hr),Pi.debug(`Calling attemptFetch again in ${Xn} millis`),_o(N,Hr,Ne,ot)}})).apply(this,arguments)}function Yo(N,G){return new Promise((ne,Ne)=>{const ot=Math.max(G-Date.now(),0),Mt=setTimeout(ne,ot);N.addEventListener(()=>{clearTimeout(Mt),Ne(is.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}function Eo(N){if(!(N instanceof De.ZR&&N.customData))return!1;const G=Number(N.customData.httpStatus);return 429===G||500===G||503===G||504===G}class Ea{constructor(){this.listeners=[]}addEventListener(G){this.listeners.push(G)}abort(){this.listeners.forEach(G=>G())}}let dl,Di;function Oi(){return(Oi=(0,Z.Z)(function*(N,G,ne,Ne,ot){if(ot&&ot.global)N("event",ne,Ne);else{const Mt=yield G;N("event",ne,Object.assign(Object.assign({},Ne),{send_to:Mt}))}})).apply(this,arguments)}function Jl(N){Di=N}function mu(N){dl=N}function yu(){return vu.apply(this,arguments)}function vu(){return(vu=(0,Z.Z)(function*(){var N;if(!(0,De.hl)())return Pi.warn(is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,De.eu)()}catch(G){return Pi.warn(is.create("indexeddb-unavailable",{errorInfo:null===(N=G)||void 0===N?void 0:N.toString()}).message),!1}return!0})).apply(this,arguments)}function hl(){return(hl=(0,Z.Z)(function*(N,G,ne,Ne,ot,Mt,qt){var bn;const Rn=ni(N);Rn.then(ao=>{ne[ao.measurementId]=ao.appId,N.options.measurementId&&ao.measurementId!==N.options.measurementId&&Pi.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${ao.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ao=>Pi.error(ao)),G.push(Rn);const mr=yu().then(ao=>{if(ao)return Ne.getId()}),[nr,Xn]=yield Promise.all([Rn,mr]);Ua()||pu(Mt,nr.measurementId),Di&&(ot("consent","default",Di),Jl(void 0)),ot("js",new Date);const Hr=null!==(bn=qt?.config)&&void 0!==bn?bn:{};return Hr.origin="firebase",Hr.update=!0,null!=Xn&&(Hr[ia]=Xn),ot("config",nr.measurementId,Hr),dl&&(ot("set",dl),mu(void 0)),nr.measurementId})).apply(this,arguments)}class ba{constructor(G){this.app=G}_delete(){return delete oo[this.app.options.appId],Promise.resolve()}}let oo={},Da=[];const _u={};let Ha,ta,Ta="dataLayer",Qn=!1;function Qr(N,G,ne){!function wo(){const N=[];if((0,De.ru)()&&N.push("This is a browser extension environment."),(0,De.zI)()||N.push("Cookies are not available."),N.length>0){const G=N.map((Ne,ot)=>`(${ot+1}) ${Ne}`).join(" "),ne=is.create("invalid-analytics-context",{errorInfo:G});Pi.warn(ne.message)}}();const Ne=N.options.appId;if(!Ne)throw is.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw is.create("no-api-key");Pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=oo[Ne])throw is.create("already-exists",{id:Ne});if(!Qn){!function ji(N){let G=[];Array.isArray(window[N])?G=window[N]:window[N]=G}(Ta);const{wrappedGtag:Mt,gtagCore:qt}=function Ns(N,G,ne,Ne,ot){let Mt=function(...qt){window[Ne].push(arguments)};return window[ot]&&"function"==typeof window[ot]&&(Mt=window[ot]),window[ot]=function oa(N,G,ne,Ne){function Mt(){return(Mt=(0,Z.Z)(function*(qt,bn,Rn){try{"event"===qt?yield gu(N,G,ne,bn,Rn):"config"===qt?yield ll(N,G,ne,Ne,bn,Rn):"consent"===qt?N("consent","update",Rn):N("set",bn)}catch(mr){Pi.error(mr)}})).apply(this,arguments)}return function ot(qt,bn,Rn){return Mt.apply(this,arguments)}}(Mt,N,G,ne),{gtagCore:Mt,wrappedGtag:window[ot]}}(oo,Da,_u,Ta,"gtag");ta=Mt,Ha=qt,Qn=!0}return oo[Ne]=function Ca(N,G,ne,Ne,ot,Mt,qt){return hl.apply(this,arguments)}(N,Da,_u,G,Ha,Ta,ne),new ba(N)}function Cn(){return x.apply(this,arguments)}function x(){return(x=(0,Z.Z)(function*(){if((0,De.ru)()||!(0,De.zI)()||!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}const Ht="@firebase/analytics";!function gr(){(0,He._registerComponent)(new _e.wA(qo,(G,{options:ne})=>Qr(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),ne),"PUBLIC")),(0,He._registerComponent)(new _e.wA("analytics-internal",function N(G){try{const ne=G.getProvider(qo).getImmediate();return{logEvent:(Ne,ot,Mt)=>function Oe(N,G,ne,Ne){N=(0,De.m9)(N),function rn(N,G,ne,Ne,ot){return Oi.apply(this,arguments)}(ta,oo[N.app.options.appId],G,ne,Ne).catch(ot=>Pi.error(ot))}(ne,Ne,ot,Mt)}}catch(ne){throw is.create("interop-component-reg-failed",{reason:ne})}},"PRIVATE")),(0,He.registerVersion)(Ht,"0.8.0"),(0,He.registerVersion)(Ht,"0.8.0","esm2017")}();var xn=B(4408),It=B(7565);const Fs=new class Cs extends It.v{}(class ci extends xn.o{constructor(G,ne){super(G,ne),this.scheduler=G,this.work=ne}schedule(G,ne=0){return ne>0?super.schedule(G,ne):(this.delay=ne,this.state=G,this.scheduler.flush(this),this)}execute(G,ne){return ne>0||this.closed?super.execute(G,ne):this._execute(G,ne)}requestAsyncId(G,ne,Ne=0){return null!=Ne&&Ne>0||null==Ne&&this.delay>0?super.requestAsyncId(G,ne,Ne):G.flush(this)}});var Sa=B(4986),zs=B(8505),No=B(5363),ys=B(9468);const wu=new d.GfV("7.4.1"),zr="__angularfire_symbol__analyticsIsSupportedValue",pi="__angularfire_symbol__analyticsIsSupported",Dr="__angularfire_symbol__remoteConfigIsSupportedValue",ss="__angularfire_symbol__remoteConfigIsSupported",Ti="__angularfire_symbol__messagingIsSupportedValue",aa="__angularfire_symbol__messagingIsSupported";function Nn(N,G,ne){if(G){if(1===G.length)return G[0];const Mt=G.filter(qt=>qt.app===ne);if(1===Mt.length)return Mt[0]}return ne.container.getProvider(N).getImmediate({optional:!0})}globalThis[pi]||(globalThis[pi]=Cn().then(N=>globalThis[zr]=N).catch(()=>globalThis[zr]=!1)),globalThis[aa]||(globalThis[aa]=ya().then(N=>globalThis[Ti]=N).catch(()=>globalThis[Ti]=!1)),globalThis[ss]||(globalThis[ss]=Ks().then(N=>globalThis[Dr]=N).catch(()=>globalThis[Dr]=!1));const Js=(N,G)=>{const ne=G?[G]:(0,O.C6)(),Ne=[];return ne.forEach(ot=>{ot.container.getProvider(N).instances.forEach(qt=>{Ne.includes(qt)||Ne.push(qt)})}),Ne};function Io(){}class vs{constructor(G,ne=Fs){this.zone=G,this.delegate=ne}now(){return this.delegate.now()}schedule(G,ne,Ne){const ot=this.zone;return this.delegate.schedule(function(qt){ot.runGuarded(()=>{G.apply(this,[qt])})},ne,Ne)}}class Co{constructor(G){this.zone=G,this.task=null}call(G,ne){const Ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Io,{},Io,Io)),ne.pipe((0,zs.b)({next:Ne,complete:Ne,error:Ne})).subscribe(G).add(Ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ls=(()=>{class N{constructor(ne){this.ngZone=ne,this.outsideAngular=ne.runOutsideAngular(()=>new vs(Zone.current)),this.insideAngular=ne.run(()=>new vs(Zone.current,Sa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(ne){return new(ne||N)(d.LFG(d.R0b))},N.\u0275prov=d.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function Ga(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function eo(N){return N.pipe((0,No.Q)(Ga().outsideAngular))}function fl(N){return Ga(),function Qi(N){return function(ne){return(ne=ne.lift(new Co(N.ngZone))).pipe((0,ys.R)(N.outsideAngular),(0,No.Q)(N.insideAngular))}}(Ga())(N)}},2090:(sn,mt,B)=>{"use strict";B.d(mt,{$s:()=>Zr,BH:()=>Fe,DV:()=>vt,Dv:()=>gi,G6:()=>et,GJ:()=>st,L:()=>ze,LL:()=>Qe,Mn:()=>Ge,Pz:()=>yt,Sg:()=>je,UG:()=>Ce,UI:()=>fn,US:()=>_e,Wj:()=>qr,Yr:()=>Je,ZB:()=>me,ZR:()=>le,b$:()=>bt,cI:()=>Et,d:()=>W,dS:()=>Yn,eu:()=>qe,g5:()=>Z,gK:()=>dr,gQ:()=>kn,h$:()=>ve,hl:()=>ee,hu:()=>O,jU:()=>Re,lb:()=>mi,m9:()=>Pr,ne:()=>Dt,p$:()=>ge,pd:()=>Qt,r3:()=>Rt,ru:()=>Ae,tV:()=>Le,uI:()=>Ve,ug:()=>en,vZ:()=>hn,w1:()=>Xe,w9:()=>Ie,xO:()=>In,xb:()=>Vt,z$:()=>$e,zI:()=>he,zd:()=>En});const O=function(Ke,Ze){if(!Ke)throw Z(Ze)},Z=function(Ke){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ke)},He=function(Ke){const Ze=[];let Ue=0;for(let tt=0;tt<Ke.length;tt++){let We=Ke.charCodeAt(tt);We<128?Ze[Ue++]=We:We<2048?(Ze[Ue++]=We>>6|192,Ze[Ue++]=63&We|128):55296==(64512&We)&&tt+1<Ke.length&&56320==(64512&Ke.charCodeAt(tt+1))?(We=65536+((1023&We)<<10)+(1023&Ke.charCodeAt(++tt)),Ze[Ue++]=We>>18|240,Ze[Ue++]=We>>12&63|128,Ze[Ue++]=We>>6&63|128,Ze[Ue++]=63&We|128):(Ze[Ue++]=We>>12|224,Ze[Ue++]=We>>6&63|128,Ze[Ue++]=63&We|128)}return Ze},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ke,Ze){if(!Array.isArray(Ke))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ue=Ze?this.byteToCharMapWebSafe_:this.byteToCharMap_,tt=[];for(let We=0;We<Ke.length;We+=3){const zt=Ke[We],Yt=We+1<Ke.length,un=Yt?Ke[We+1]:0,ar=We+2<Ke.length,On=ar?Ke[We+2]:0;let Jn=(15&un)<<2|On>>6,Ar=63&On;ar||(Ar=64,Yt||(Jn=64)),tt.push(Ue[zt>>2],Ue[(3&zt)<<4|un>>4],Ue[Jn],Ue[Ar])}return tt.join("")},encodeString(Ke,Ze){return this.HAS_NATIVE_SUPPORT&&!Ze?btoa(Ke):this.encodeByteArray(He(Ke),Ze)},decodeString(Ke,Ze){return this.HAS_NATIVE_SUPPORT&&!Ze?atob(Ke):function(Ke){const Ze=[];let Ue=0,tt=0;for(;Ue<Ke.length;){const We=Ke[Ue++];if(We<128)Ze[tt++]=String.fromCharCode(We);else if(We>191&&We<224){const zt=Ke[Ue++];Ze[tt++]=String.fromCharCode((31&We)<<6|63&zt)}else if(We>239&&We<365){const ar=((7&We)<<18|(63&Ke[Ue++])<<12|(63&Ke[Ue++])<<6|63&Ke[Ue++])-65536;Ze[tt++]=String.fromCharCode(55296+(ar>>10)),Ze[tt++]=String.fromCharCode(56320+(1023&ar))}else{const zt=Ke[Ue++],Yt=Ke[Ue++];Ze[tt++]=String.fromCharCode((15&We)<<12|(63&zt)<<6|63&Yt)}}return Ze.join("")}(this.decodeStringToByteArray(Ke,Ze))},decodeStringToByteArray(Ke,Ze){this.init_();const Ue=Ze?this.charToByteMapWebSafe_:this.charToByteMap_,tt=[];for(let We=0;We<Ke.length;){const zt=Ue[Ke.charAt(We++)],un=We<Ke.length?Ue[Ke.charAt(We)]:0;++We;const On=We<Ke.length?Ue[Ke.charAt(We)]:64;++We;const Un=We<Ke.length?Ue[Ke.charAt(We)]:64;if(++We,null==zt||null==un||null==On||null==Un)throw Error();tt.push(zt<<2|un>>4),64!==On&&(tt.push(un<<4&240|On>>2),64!==Un&&tt.push(On<<6&192|Un))}return tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ke=0;Ke<this.ENCODED_VALS.length;Ke++)this.byteToCharMap_[Ke]=this.ENCODED_VALS.charAt(Ke),this.charToByteMap_[this.byteToCharMap_[Ke]]=Ke,this.byteToCharMapWebSafe_[Ke]=this.ENCODED_VALS_WEBSAFE.charAt(Ke),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ke]]=Ke,Ke>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ke)]=Ke,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ke)]=Ke)}}},ve=function(Ke){const Ze=He(Ke);return _e.encodeByteArray(Ze,!0)},ze=function(Ke){return ve(Ke).replace(/\./g,"")},Le=function(Ke){try{return _e.decodeString(Ke,!0)}catch(Ze){console.error("base64Decode failed: ",Ze)}return null};function ge(Ke){return me(void 0,Ke)}function me(Ke,Ze){if(!(Ze instanceof Object))return Ze;switch(Ze.constructor){case Date:return new Date(Ze.getTime());case Object:void 0===Ke&&(Ke={});break;case Array:Ke=[];break;default:return Ze}for(const Ue in Ze)!Ze.hasOwnProperty(Ue)||!Te(Ue)||(Ke[Ue]=me(Ke[Ue],Ze[Ue]));return Ke}function Te(Ke){return"__proto__"!==Ke}class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ze,Ue)=>{this.resolve=Ze,this.reject=Ue})}wrapCallback(Ze){return(Ue,tt)=>{Ue?this.reject(Ue):this.resolve(tt),"function"==typeof Ze&&(this.promise.catch(()=>{}),1===Ze.length?Ze(Ue):Ze(Ue,tt))}}}function je(Ke,Ze){if(Ke.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt=Ze||"demo-project",We=Ke.iat||0,zt=Ke.sub||Ke.user_id;if(!zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Yt=Object.assign({iss:`https://securetoken.google.com/${tt}`,aud:tt,iat:We,exp:We+3600,auth_time:We,sub:zt,user_id:zt,firebase:{sign_in_provider:"custom",identities:{}}},Ke);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(Yt)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Re(){return"object"==typeof self&&self.self===self}function Ae(){const Ke="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ke&&void 0!==Ke.id}function bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function W(){return $e().indexOf("Electron/")>=0}function Xe(){const Ke=$e();return Ke.indexOf("MSIE ")>=0||Ke.indexOf("Trident/")>=0}function Ge(){return $e().indexOf("MSAppHost/")>=0}function Je(){return!1}function et(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function qe(){return new Promise((Ke,Ze)=>{try{let Ue=!0;const tt="validate-browser-context-for-indexeddb-analytics-module",We=self.indexedDB.open(tt);We.onsuccess=()=>{We.result.close(),Ue||self.indexedDB.deleteDatabase(tt),Ke(!0)},We.onupgradeneeded=()=>{Ue=!1},We.onerror=()=>{var zt;Ze((null===(zt=We.error)||void 0===zt?void 0:zt.message)||"")}}catch(Ue){Ze(Ue)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class le extends Error{constructor(Ze,Ue,tt){super(Ue),this.code=Ze,this.customData=tt,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(Ze,Ue,tt){this.service=Ze,this.serviceName=Ue,this.errors=tt}create(Ze,...Ue){const tt=Ue[0]||{},We=`${this.service}/${Ze}`,zt=this.errors[Ze],Yt=zt?function Tt(Ke,Ze){return Ke.replace(Gt,(Ue,tt)=>{const We=Ze[tt];return null!=We?String(We):`<${tt}?>`})}(zt,tt):"Error";return new le(We,`${this.serviceName}: ${Yt} (${We}).`,tt)}}const Gt=/\{\$([^}]+)}/g;function Et(Ke){return JSON.parse(Ke)}function yt(Ke){return JSON.stringify(Ke)}const Be=function(Ke){let Ze={},Ue={},tt={},We="";try{const zt=Ke.split(".");Ze=Et(Le(zt[0])||""),Ue=Et(Le(zt[1])||""),We=zt[2],tt=Ue.d||{},delete Ue.d}catch{}return{header:Ze,claims:Ue,data:tt,signature:We}},Ie=function(Ke){const Ue=Be(Ke).claims;return!!Ue&&"object"==typeof Ue&&Ue.hasOwnProperty("iat")},st=function(Ke){const Ze=Be(Ke).claims;return"object"==typeof Ze&&!0===Ze.admin};function Rt(Ke,Ze){return Object.prototype.hasOwnProperty.call(Ke,Ze)}function vt(Ke,Ze){if(Object.prototype.hasOwnProperty.call(Ke,Ze))return Ke[Ze]}function Vt(Ke){for(const Ze in Ke)if(Object.prototype.hasOwnProperty.call(Ke,Ze))return!1;return!0}function fn(Ke,Ze,Ue){const tt={};for(const We in Ke)Object.prototype.hasOwnProperty.call(Ke,We)&&(tt[We]=Ze.call(Ue,Ke[We],We,Ke));return tt}function hn(Ke,Ze){if(Ke===Ze)return!0;const Ue=Object.keys(Ke),tt=Object.keys(Ze);for(const We of Ue){if(!tt.includes(We))return!1;const zt=Ke[We],Yt=Ze[We];if(Dn(zt)&&Dn(Yt)){if(!hn(zt,Yt))return!1}else if(zt!==Yt)return!1}for(const We of tt)if(!Ue.includes(We))return!1;return!0}function Dn(Ke){return null!==Ke&&"object"==typeof Ke}function In(Ke){const Ze=[];for(const[Ue,tt]of Object.entries(Ke))Array.isArray(tt)?tt.forEach(We=>{Ze.push(encodeURIComponent(Ue)+"="+encodeURIComponent(We))}):Ze.push(encodeURIComponent(Ue)+"="+encodeURIComponent(tt));return Ze.length?"&"+Ze.join("&"):""}function En(Ke){const Ze={};return Ke.replace(/^\?/,"").split("&").forEach(tt=>{if(tt){const[We,zt]=tt.split("=");Ze[decodeURIComponent(We)]=decodeURIComponent(zt)}}),Ze}function Qt(Ke){const Ze=Ke.indexOf("?");if(!Ze)return"";const Ue=Ke.indexOf("#",Ze);return Ke.substring(Ze,Ue>0?Ue:void 0)}class kn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ze=1;Ze<this.blockSize;++Ze)this.pad_[Ze]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ze,Ue){Ue||(Ue=0);const tt=this.W_;if("string"==typeof Ze)for(let Un=0;Un<16;Un++)tt[Un]=Ze.charCodeAt(Ue)<<24|Ze.charCodeAt(Ue+1)<<16|Ze.charCodeAt(Ue+2)<<8|Ze.charCodeAt(Ue+3),Ue+=4;else for(let Un=0;Un<16;Un++)tt[Un]=Ze[Ue]<<24|Ze[Ue+1]<<16|Ze[Ue+2]<<8|Ze[Ue+3],Ue+=4;for(let Un=16;Un<80;Un++){const Jn=tt[Un-3]^tt[Un-8]^tt[Un-14]^tt[Un-16];tt[Un]=4294967295&(Jn<<1|Jn>>>31)}let On,ir,We=this.chain_[0],zt=this.chain_[1],Yt=this.chain_[2],un=this.chain_[3],ar=this.chain_[4];for(let Un=0;Un<80;Un++){Un<40?Un<20?(On=un^zt&(Yt^un),ir=1518500249):(On=zt^Yt^un,ir=1859775393):Un<60?(On=zt&Yt|un&(zt|Yt),ir=2400959708):(On=zt^Yt^un,ir=3395469782);const Jn=(We<<5|We>>>27)+On+ar+ir+tt[Un]&4294967295;ar=un,un=Yt,Yt=4294967295&(zt<<30|zt>>>2),zt=We,We=Jn}this.chain_[0]=this.chain_[0]+We&4294967295,this.chain_[1]=this.chain_[1]+zt&4294967295,this.chain_[2]=this.chain_[2]+Yt&4294967295,this.chain_[3]=this.chain_[3]+un&4294967295,this.chain_[4]=this.chain_[4]+ar&4294967295}update(Ze,Ue){if(null==Ze)return;void 0===Ue&&(Ue=Ze.length);const tt=Ue-this.blockSize;let We=0;const zt=this.buf_;let Yt=this.inbuf_;for(;We<Ue;){if(0===Yt)for(;We<=tt;)this.compress_(Ze,We),We+=this.blockSize;if("string"==typeof Ze){for(;We<Ue;)if(zt[Yt]=Ze.charCodeAt(We),++Yt,++We,Yt===this.blockSize){this.compress_(zt),Yt=0;break}}else for(;We<Ue;)if(zt[Yt]=Ze[We],++Yt,++We,Yt===this.blockSize){this.compress_(zt),Yt=0;break}}this.inbuf_=Yt,this.total_+=Ue}digest(){const Ze=[];let Ue=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let We=this.blockSize-1;We>=56;We--)this.buf_[We]=255&Ue,Ue/=256;this.compress_(this.buf_);let tt=0;for(let We=0;We<5;We++)for(let zt=24;zt>=0;zt-=8)Ze[tt]=this.chain_[We]>>zt&255,++tt;return Ze}}function Dt(Ke,Ze){const Ue=new Sr(Ke,Ze);return Ue.subscribe.bind(Ue)}class Sr{constructor(Ze,Ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ue,this.task.then(()=>{Ze(this)}).catch(tt=>{this.error(tt)})}next(Ze){this.forEachObserver(Ue=>{Ue.next(Ze)})}error(Ze){this.forEachObserver(Ue=>{Ue.error(Ze)}),this.close(Ze)}complete(){this.forEachObserver(Ze=>{Ze.complete()}),this.close()}subscribe(Ze,Ue,tt){let We;if(void 0===Ze&&void 0===Ue&&void 0===tt)throw new Error("Missing Observer.");We=function rr(Ke,Ze){if("object"!=typeof Ke||null===Ke)return!1;for(const Ue of Ze)if(Ue in Ke&&"function"==typeof Ke[Ue])return!0;return!1}(Ze,["next","error","complete"])?Ze:{next:Ze,error:Ue,complete:tt},void 0===We.next&&(We.next=yr),void 0===We.error&&(We.error=yr),void 0===We.complete&&(We.complete=yr);const zt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?We.error(this.finalError):We.complete()}catch{}}),this.observers.push(We),zt}unsubscribeOne(Ze){void 0===this.observers||void 0===this.observers[Ze]||(delete this.observers[Ze],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ze){if(!this.finalized)for(let Ue=0;Ue<this.observers.length;Ue++)this.sendOne(Ue,Ze)}sendOne(Ze,Ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ze])try{Ue(this.observers[Ze])}catch(tt){typeof console<"u"&&console.error&&console.error(tt)}})}close(Ze){this.finalized||(this.finalized=!0,void 0!==Ze&&(this.finalError=Ze),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const gi=function(Ke,Ze,Ue,tt){let We;if(tt<Ze?We="at least "+Ze:tt>Ue&&(We=0===Ue?"none":"no more than "+Ue),We)throw new Error(Ke+" failed: Was called with "+tt+(1===tt?" argument.":" arguments.")+" Expects "+We+".")};function dr(Ke,Ze){return`${Ke} failed: ${Ze} argument `}function qr(Ke,Ze,Ue,tt){if((!tt||Ue)&&"function"!=typeof Ue)throw new Error(dr(Ke,Ze)+"must be a valid function.")}function mi(Ke,Ze,Ue,tt){if((!tt||Ue)&&("object"!=typeof Ue||null===Ue))throw new Error(dr(Ke,Ze)+"must be a valid context object.")}const Yn=function(Ke){const Ze=[];let Ue=0;for(let tt=0;tt<Ke.length;tt++){let We=Ke.charCodeAt(tt);if(We>=55296&&We<=56319){const zt=We-55296;tt++,O(tt<Ke.length,"Surrogate pair missing trail surrogate."),We=65536+(zt<<10)+(Ke.charCodeAt(tt)-56320)}We<128?Ze[Ue++]=We:We<2048?(Ze[Ue++]=We>>6|192,Ze[Ue++]=63&We|128):We<65536?(Ze[Ue++]=We>>12|224,Ze[Ue++]=We>>6&63|128,Ze[Ue++]=63&We|128):(Ze[Ue++]=We>>18|240,Ze[Ue++]=We>>12&63|128,Ze[Ue++]=We>>6&63|128,Ze[Ue++]=63&We|128)}return Ze},en=function(Ke){let Ze=0;for(let Ue=0;Ue<Ke.length;Ue++){const tt=Ke.charCodeAt(Ue);tt<128?Ze++:tt<2048?Ze+=2:tt>=55296&&tt<=56319?(Ze+=4,Ue++):Ze+=3}return Ze};function Zr(Ke,Ze=1e3,Ue=2){const tt=Ze*Math.pow(Ue,Ke),We=Math.round(.5*tt*(Math.random()-.5)*2);return Math.min(144e5,tt+We)}function Pr(Ke){return Ke&&Ke._delegate?Ke._delegate:Ke}},9928:(sn,mt,B)=>{"use strict";B.d(mt,{dr:()=>rr,W2:()=>Pr,Gu:()=>Yt,gu:()=>un,jP:()=>qi,Pc:()=>Ri,r4:()=>br,YI:()=>gs,Fo:()=>Ro});var d=B(4650),Z=(B(433),B(655)),He=B(4968),De=B(7579),_e=B(1135),ve=B(2485),me=(B(4181),B(5980),B(3139),B(5729)),Te=B(3756),Fe=B(9753),$e=(B(97),B(3280)),Ce=(B(3509),B(7205)),Ge=B(9300),Je=B(3900),et=B(1884),ee=B(6895);const he=me.i,le=["*"],Be=E=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(E):"function"==typeof requestAnimationFrame?requestAnimationFrame(E):setTimeout(E),be=E=>!!E.resolveComponentFactory,In=(E,H)=>{const I=E.prototype;H.forEach(j=>{Object.defineProperty(I,j,{get(){return this.el[j]},set(ie){this.z.runOutsideAngular(()=>this.el[j]=ie)}})})},En=(E,H)=>{const I=E.prototype;H.forEach(j=>{I[j]=function(){const ie=arguments;return this.z.runOutsideAngular(()=>this.el[j].apply(this.el,ie))}})};function Dt(E){return function(I){const{defineCustomElementFn:j,inputs:ie,methods:xt}=E;return void 0!==j&&j(),ie&&In(I,ie),xt&&En(I,xt),I}}let rr=(()=>{let E=class{constructor(I,j,ie){this.z=ie,I.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(I){return new(I||E)(d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(d.R0b))},E.\u0275cmp=d.Xpm({type:E,selectors:[["ion-app"]],ngContentSelectors:le,decls:1,vars:0,template:function(I,j){1&I&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Dt({defineCustomElementFn:void 0})],E),E})(),Pr=(()=>{let E=class{constructor(I,j,ie){this.z=ie,I.detach(),this.el=j.nativeElement,((E,H,I)=>{I.forEach(j=>E[j]=(0,He.R)(H,j))})(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return E.\u0275fac=function(I){return new(I||E)(d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(d.R0b))},E.\u0275cmp=d.Xpm({type:E,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:le,decls:1,vars:0,template:function(I,j){1&I&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Dt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],E),E})(),Yt=(()=>{let E=class{constructor(I,j,ie){this.z=ie,I.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(I){return new(I||E)(d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(d.R0b))},E.\u0275cmp=d.Xpm({type:E,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:le,decls:1,vars:0,template:function(I,j){1&I&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Dt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],E),E})(),un=(()=>{let E=class{constructor(I,j,ie){this.z=ie,I.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(I){return new(I||E)(d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(d.R0b))},E.\u0275cmp=d.Xpm({type:E,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:le,decls:1,vars:0,template:function(I,j){1&I&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,Z.gn)([Dt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],E),E})();class Wt{constructor(H={}){this.data=H}get(H){return this.data[H]}}let yn=(()=>{class E{constructor(I,j){this.zone=I,this.appRef=j}create(I,j,ie){return new Fn(I,j,ie,this.appRef,this.zone)}}return E.\u0275fac=function(I){return new(I||E)(d.LFG(d.R0b),d.LFG(d.z2F))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac}),E})();class Fn{constructor(H,I,j,ie,xt){this.resolverOrInjector=H,this.injector=I,this.location=j,this.appRef=ie,this.zone=xt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(H,I,j,ie){return this.zone.run(()=>new Promise(xt=>{xt(Wn(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,H,I,j,ie))}))}removeViewFromDom(H,I){return this.zone.run(()=>new Promise(j=>{const ie=this.elRefMap.get(I);if(ie){ie.destroy(),this.elRefMap.delete(I);const xt=this.elEventsMap.get(I);xt&&(xt(),this.elEventsMap.delete(I))}j()}))}}const Wn=(E,H,I,j,ie,xt,cn,Mn,fr,Mr,bi)=>{let fi;const $i=d.zs3.create({providers:ct(Mr),parent:I});if(H&&be(H)){const ce=H.resolveComponentFactory(fr);fi=j?j.createComponent(ce,j.length,$i):ce.create($i)}else{if(!j)return null;fi=j.createComponent(fr,{index:j.indexOf,injector:$i,environmentInjector:H})}const z=fi.instance,V=fi.location.nativeElement;if(Mr&&Object.assign(z,Mr),bi)for(const ce of bi)V.classList.add(ce);const F=wi(E,z,V);return Mn.appendChild(V),j||ie.attachView(fi.hostView),fi.changeDetectorRef.reattach(),xt.set(V,fi),cn.set(V,F),V},Nr=[Fe.L,Fe.a,Fe.b,Fe.c,Fe.d],wi=(E,H,I)=>E.run(()=>{const j=Nr.filter(ie=>"function"==typeof H[ie]).map(ie=>{const xt=cn=>H[ie](cn.detail);return I.addEventListener(ie,xt),()=>I.removeEventListener(ie,xt)});return()=>j.forEach(ie=>ie())}),rt=new d.OlP("NavParamsToken"),ct=E=>[{provide:rt,useValue:E},{provide:Wt,useFactory:_t,deps:[rt]}],_t=E=>new Wt(E),tn=(E,H)=>((E=E.filter(I=>I.stackId!==H.stackId)).push(H),E),Vi=(E,H)=>{const I=E.createUrlTree(["."],{relativeTo:H});return E.serializeUrl(I)},Wi=(E,H)=>{if(!E)return;const I=ws(H);for(let j=0;j<I.length;j++){if(j>=E.length)return I[j];if(I[j]!==E[j])return}},ws=E=>E.split("/").map(H=>H.trim()).filter(H=>""!==H),Is=E=>{E&&(E.ref.destroy(),E.unlistenEvents())};class ns{constructor(H,I,j,ie,xt,cn){this.containerEl=I,this.router=j,this.navCtrl=ie,this.zone=xt,this.location=cn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==H?ws(H):void 0}createView(H,I){var j;const ie=Vi(this.router,I),xt=null===(j=H?.location)||void 0===j?void 0:j.nativeElement,cn=wi(this.zone,H.instance,xt);return{id:this.nextId++,stackId:Wi(this.tabsPrefix,ie),unlistenEvents:cn,element:xt,ref:H,url:ie}}getExistingView(H){const I=Vi(this.router,H),j=this.views.find(ie=>ie.url===I);return j&&j.ref.changeDetectorRef.reattach(),j}setActive(H){var I,j;const ie=this.navCtrl.consumeTransition();let{direction:xt,animation:cn,animationBuilder:Mn}=ie;const fr=this.activeView,Mr=((E,H)=>!H||E.stackId!==H.stackId)(H,fr);Mr&&(xt="back",cn=void 0);const bi=this.views.slice();let fi;const $i=this.router;$i.getCurrentNavigation?fi=$i.getCurrentNavigation():!(null===(I=$i.navigations)||void 0===I)&&I.value&&(fi=$i.navigations.value),null!==(j=fi?.extras)&&void 0!==j&&j.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const z=this.views.includes(H),V=this.insertView(H,xt);z||H.ref.changeDetectorRef.detectChanges();const F=H.animationBuilder;return void 0===Mn&&"back"===xt&&!Mr&&void 0!==F&&(Mn=F),fr&&(fr.animationBuilder=Mn),this.zone.runOutsideAngular(()=>this.wait(()=>(fr&&fr.ref.changeDetectorRef.detach(),H.ref.changeDetectorRef.reattach(),this.transition(H,fr,cn,this.canGoBack(1),!1,Mn).then(()=>Ys(H,V,bi,this.location,this.zone)).then(()=>({enteringView:H,direction:xt,animation:cn,tabSwitch:Mr})))))}canGoBack(H,I=this.getActiveStackId()){return this.getStack(I).length>H}pop(H,I=this.getActiveStackId()){return this.zone.run(()=>{var j,ie;const xt=this.getStack(I);if(xt.length<=H)return Promise.resolve(!1);const cn=xt[xt.length-H-1];let Mn=cn.url;const fr=cn.savedData;if(fr){const bi=fr.get("primary");null!==(ie=null===(j=bi?.route)||void 0===j?void 0:j._routerState)&&void 0!==ie&&ie.snapshot.url&&(Mn=bi.route._routerState.snapshot.url)}const{animationBuilder:Mr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Mn,Object.assign(Object.assign({},cn.savedExtras),{animation:Mr})).then(()=>!0)})}startBackTransition(){const H=this.activeView;if(H){const I=this.getStack(H.stackId),j=I[I.length-2],ie=j.animationBuilder;return this.wait(()=>this.transition(j,H,"back",this.canGoBack(2),!0,ie))}return Promise.resolve()}endBackTransition(H){H?(this.skipTransition=!0,this.pop(1)):this.activeView&&Us(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(H){const I=this.getStack(H);return I.length>0?I[I.length-1]:void 0}getRootUrl(H){const I=this.getStack(H);return I.length>0?I[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Is),this.activeView=void 0,this.views=[]}getStack(H){return this.views.filter(I=>I.stackId===H)}insertView(H,I){return this.activeView=H,this.views=((E,H,I)=>"root"===I?tn(E,H):"forward"===I?((E,H)=>(E.indexOf(H)>=0?E=E.filter(j=>j.stackId!==H.stackId||j.id<=H.id):E.push(H),E))(E,H):((E,H)=>E.indexOf(H)>=0?E.filter(j=>j.stackId!==H.stackId||j.id<=H.id):tn(E,H))(E,H))(this.views,H,I),this.views.slice()}transition(H,I,j,ie,xt,cn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(I===H)return Promise.resolve(!1);const Mn=H?H.element:void 0,fr=I?I.element:void 0,Mr=this.containerEl;return Mn&&Mn!==fr&&(Mn.classList.add("ion-page"),Mn.classList.add("ion-page-invisible"),Mn.parentElement!==Mr&&Mr.appendChild(Mn),Mr.commit)?Mr.commit(Mn,fr,{deepWait:!0,duration:void 0===j?0:void 0,direction:j,showGoBack:ie,progressAnimation:xt,animationBuilder:cn}):Promise.resolve(!1)}wait(H){return(0,Z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const I=this.runningTask=H();return I.finally(()=>this.runningTask=void 0),I})}}const Ys=(E,H,I,j,ie)=>"function"==typeof requestAnimationFrame?new Promise(xt=>{requestAnimationFrame(()=>{Us(E,H,I,j,ie),xt()})}):Promise.resolve(),Us=(E,H,I,j,ie)=>{ie.run(()=>I.filter(xt=>!H.includes(xt)).forEach(Is)),H.forEach(xt=>{const Mn=j.path().split("?")[0].split("#")[0];if(xt!==E&&xt.url!==Mn){const fr=xt.element;fr.setAttribute("aria-hidden","true"),fr.classList.add("ion-page-hidden"),xt.ref.changeDetectorRef.detach()}})};let Ks=(()=>{class E{get(I,j){const ie=xo();return ie?ie.get(I,j):null}getBoolean(I,j){const ie=xo();return!!ie&&ie.getBoolean(I,j)}getNumber(I,j){const ie=xo();return ie?ie.getNumber(I,j):0}}return E.\u0275fac=function(I){return new(I||E)},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Ms=new d.OlP("USERCONFIG"),xo=()=>{if(typeof window<"u"){const E=window.Ionic;if(E?.config)return E.config}return null};let Ui=(()=>{class E{constructor(I,j){this.doc=I,this.backButton=new De.x,this.keyboardDidShow=new De.x,this.keyboardDidHide=new De.x,this.pause=new De.x,this.resume=new De.x,this.resize=new De.x,j.run(()=>{var ie;let xt;this.win=I.defaultView,this.backButton.subscribeWithPriority=function(cn,Mn){return this.subscribe(fr=>fr.register(cn,Mr=>j.run(()=>Mn(Mr))))},rs(this.pause,I,"pause"),rs(this.resume,I,"resume"),rs(this.backButton,I,"ionBackButton"),rs(this.resize,this.win,"resize"),rs(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),rs(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(cn=>{xt=cn}),null!==(ie=this.win)&&void 0!==ie&&ie.cordova?I.addEventListener("deviceready",()=>{xt("cordova")},{once:!0}):xt("dom")})}is(I){return(0,me.a)(this.win,I)}platforms(){return(0,me.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(I){return ps(this.win.location.href,I)}isLandscape(){return!this.isPortrait()}isPortrait(){var I,j;return null===(j=(I=this.win).matchMedia)||void 0===j?void 0:j.call(I,"(orientation: portrait)").matches}testUserAgent(I){const j=this.win.navigator;return!!(j?.userAgent&&j.userAgent.indexOf(I)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return E.\u0275fac=function(I){return new(I||E)(d.LFG(ee.K0),d.LFG(d.R0b))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const ps=(E,H)=>{H=H.replace(/[[\]\\]/g,"\\$&");const j=new RegExp("[\\?&]"+H+"=([^&#]*)").exec(E);return j?decodeURIComponent(j[1].replace(/\+/g," ")):null},rs=(E,H,I)=>{H&&H.addEventListener(I,j=>{E.next(j?.detail)})};let js=(()=>{class E{constructor(I,j,ie,xt){this.location=j,this.serializer=ie,this.router=xt,this.direction=Qs,this.animated=Go,this.guessDirection="forward",this.lastNavId=-1,xt&&xt.events.subscribe(cn=>{if(cn instanceof ve.OD){const Mn=cn.restoredState?cn.restoredState.navigationId:cn.id;this.guessDirection=Mn<this.lastNavId?"back":"forward",this.guessAnimation=cn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?cn.id:Mn}}),I.backButton.subscribeWithPriority(0,cn=>{this.pop(),cn()})}navigateForward(I,j={}){return this.setDirection("forward",j.animated,j.animationDirection,j.animation),this.navigate(I,j)}navigateBack(I,j={}){return this.setDirection("back",j.animated,j.animationDirection,j.animation),this.navigate(I,j)}navigateRoot(I,j={}){return this.setDirection("root",j.animated,j.animationDirection,j.animation),this.navigate(I,j)}back(I={animated:!0,animationDirection:"back"}){return this.setDirection("back",I.animated,I.animationDirection,I.animation),this.location.back()}pop(){return(0,Z.mG)(this,void 0,void 0,function*(){let I=this.topOutlet;for(;I&&!(yield I.pop());)I=I.parentOutlet})}setDirection(I,j,ie,xt){this.direction=I,this.animated=Zs(I,j,ie),this.animationBuilder=xt}setTopOutlet(I){this.topOutlet=I}consumeTransition(){let j,I="root";const ie=this.animationBuilder;return"auto"===this.direction?(I=this.guessDirection,j=this.guessAnimation):(j=this.animated,I=this.direction),this.direction=Qs,this.animated=Go,this.animationBuilder=void 0,{direction:I,animation:j,animationBuilder:ie}}navigate(I,j){if(Array.isArray(I))return this.router.navigate(I,j);{const ie=this.serializer.parse(I.toString());return void 0!==j.queryParams&&(ie.queryParams=Object.assign({},j.queryParams)),void 0!==j.fragment&&(ie.fragment=j.fragment),this.router.navigateByUrl(ie,j)}}}return E.\u0275fac=function(I){return new(I||E)(d.LFG(Ui),d.LFG(ee.Ye),d.LFG(ve.Hx),d.LFG(ve.F0,8))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Zs=(E,H,I)=>{if(!1!==H){if(void 0!==I)return I;if("forward"===E||"back"===E)return E;if("root"===E&&!0===H)return"forward"}},Qs="auto",Go=void 0;class ls{}let qi=(()=>{class E{constructor(I,j,ie,xt,cn,Mn,fr,Mr,bi,fi,$i,z,V,F){this.parentContexts=I,this.location=j,this.config=cn,this.navCtrl=Mn,this.environmentInjector=fr,this.componentFactoryResolver=Mr,this.parentOutlet=F,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new _e.X(null),this.stackEvents=new d.vpe,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.nativeEl=fi.nativeElement,this.name=ie||ve.eC,this.tabsPrefix="true"===xt?Vi($i,V):void 0,this.stackCtrl=new ns(this.tabsPrefix,this.nativeEl,$i,Mn,z,bi),I.onChildOutletCreated(this.name,this)}set animation(I){this.nativeEl.animation=I}set animated(I){this.nativeEl.animated=I}set swipeGesture(I){this._swipeGesture=I,this.nativeEl.swipeHandler=I?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:j=>this.stackCtrl.endBackTransition(j)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const I=this.getContext();I?.route&&this.activateWith(I.route,I.resolver||null)}new Promise(I=>(0,Te.c)(this.nativeEl,I)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(I,j){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const j=this.getContext();this.activatedView.savedData=new Map(j.children.contexts);const ie=this.activatedView.savedData.get("primary");if(ie&&j.route&&(ie.route=Object.assign({},j.route)),this.activatedView.savedExtras={},j.route){const xt=j.route.snapshot;this.activatedView.savedExtras.queryParams=xt.queryParams,this.activatedView.savedExtras.fragment=xt.fragment}}const I=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,j){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;let ie,xt=this.stackCtrl.getExistingView(I);if(xt){ie=this.activated=xt.ref;const cn=xt.savedData;cn&&(this.getContext().children.contexts=cn),this.updateActivatedRouteProxy(ie.instance,I)}else{const cn=I._futureSnapshot,Mn=cn.routeConfig.component;if(null==Mn&&cn.component)return void console.warn("[Ionic Warning]: Standalone components are not currently supported with ion-router-outlet. You can track this feature request at https://github.com/ionic-team/ionic-framework/issues/25404");const fr=this.parentContexts.getOrCreateContext(this.name).children,Mr=new _e.X(null),bi=this.createActivatedRouteProxy(Mr,I),fi=new jr(bi,fr,this.location.injector);if((j=j||this.componentFactoryResolver)&&be(j)){const $i=j.resolveComponentFactory(Mn);ie=this.activated=this.location.createComponent($i,this.location.length,fi)}else ie=this.activated=this.location.createComponent(Mn,{index:this.location.length,injector:fi,environmentInjector:j??this.environmentInjector});Mr.next(ie.instance),xt=this.stackCtrl.createView(this.activated,I),this.proxyMap.set(ie.instance,bi),this.currentActivatedRoute$.next({component:ie.instance,activatedRoute:I})}this.activatedView=xt,this.stackCtrl.setActive(xt).then(cn=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(ie.instance),this.stackEvents.emit(cn)})}canGoBack(I=1,j){return this.stackCtrl.canGoBack(I,j)}pop(I=1,j){return this.stackCtrl.pop(I,j)}getLastUrl(I){const j=this.stackCtrl.getLastUrl(I);return j?j.url:void 0}getLastRouteView(I){return this.stackCtrl.getLastUrl(I)}getRootView(I){return this.stackCtrl.getRootUrl(I)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(I,j){const ie=new ve.gz;return ie._futureSnapshot=j._futureSnapshot,ie._routerState=j._routerState,ie.snapshot=j.snapshot,ie.outlet=j.outlet,ie.component=j.component,ie._paramMap=this.proxyObservable(I,"paramMap"),ie._queryParamMap=this.proxyObservable(I,"queryParamMap"),ie.url=this.proxyObservable(I,"url"),ie.params=this.proxyObservable(I,"params"),ie.queryParams=this.proxyObservable(I,"queryParams"),ie.fragment=this.proxyObservable(I,"fragment"),ie.data=this.proxyObservable(I,"data"),ie}proxyObservable(I,j){return I.pipe((0,Ge.h)(ie=>!!ie),(0,Je.w)(ie=>this.currentActivatedRoute$.pipe((0,Ge.h)(xt=>null!==xt&&xt.component===ie),(0,Je.w)(xt=>xt&&xt.activatedRoute[j]),(0,et.x)())))}updateActivatedRouteProxy(I,j){const ie=this.proxyMap.get(I);if(!ie)throw new Error("Could not find activated route proxy for view");ie._futureSnapshot=j._futureSnapshot,ie._routerState=j._routerState,ie.snapshot=j.snapshot,ie.outlet=j.outlet,ie.component=j.component,this.currentActivatedRoute$.next({component:I,activatedRoute:j})}}return E.\u0275fac=function(I){return new(I||E)(d.Y36(ve.y6),d.Y36(d.s_b),d.$8M("name"),d.$8M("tabs"),d.Y36(Ks),d.Y36(js),d.Y36(ls,8),d.Y36(d._Vd,8),d.Y36(ee.Ye),d.Y36(d.SBq),d.Y36(ve.F0),d.Y36(d.R0b),d.Y36(ve.gz),d.Y36(E,12))},E.\u0275dir=d.lG2({type:E,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),E})();class jr{constructor(H,I,j){this.route=H,this.childContexts=I,this.parent=j}get(H,I){return H===ve.gz?this.route:H===ve.y6?this.childContexts:this.parent.get(H,I)}}let gs=(()=>{class E{constructor(I,j,ie,xt,cn){this.locationStrategy=I,this.navCtrl=j,this.elementRef=ie,this.router=xt,this.routerLink=cn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var I;if(null!==(I=this.routerLink)&&void 0!==I&&I.urlTree){const j=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=j}}onClick(I){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),I.preventDefault()}}return E.\u0275fac=function(I){return new(I||E)(d.Y36(ee.S$),d.Y36(js),d.Y36(d.SBq),d.Y36(ve.F0),d.Y36(ve.rH,8))},E.\u0275dir=d.lG2({type:E,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,j){1&I&&d.NdJ("click",function(xt){return j.onClick(xt)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[d.TTD]}),E})(),Ro=(()=>{class E{constructor(I,j,ie,xt,cn){this.locationStrategy=I,this.navCtrl=j,this.elementRef=ie,this.router=xt,this.routerLink=cn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var I;if(null!==(I=this.routerLink)&&void 0!==I&&I.urlTree){const j=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=j}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return E.\u0275fac=function(I){return new(I||E)(d.Y36(ee.S$),d.Y36(js),d.Y36(d.SBq),d.Y36(ve.F0),d.Y36(ve.rH,8))},E.\u0275dir=d.lG2({type:E,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(I,j){1&I&&d.NdJ("click",function(){return j.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[d.TTD]}),E})();class Os{constructor(H){this.ctrl=H}create(H){return this.ctrl.create(H||{})}dismiss(H,I,j){return this.ctrl.dismiss(H,I,j)}getTop(){return this.ctrl.getTop()}}let lt=(()=>{class E extends Os{constructor(I,j,ie,xt){super($e.m),this.angularDelegate=I,this.resolver=j,this.injector=ie,this.environmentInjector=xt}create(I){var j;return super.create(Object.assign(Object.assign({},I),{delegate:this.angularDelegate.create(null!==(j=this.resolver)&&void 0!==j?j:this.environmentInjector,this.injector)}))}}return E.\u0275fac=function(I){return new(I||E)(d.LFG(yn),d.LFG(d._Vd),d.LFG(d.zs3),d.LFG(ls,8))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac}),E})(),Ft=(()=>{class E extends Os{constructor(I,j,ie,xt){super($e.c),this.angularDelegate=I,this.resolver=j,this.injector=ie,this.environmentInjector=xt}create(I){var j;return super.create(Object.assign(Object.assign({},I),{delegate:this.angularDelegate.create(null!==(j=this.resolver)&&void 0!==j?j:this.environmentInjector,this.injector)}))}}return E.\u0275fac=function(I){return new(I||E)(d.LFG(yn),d.LFG(d._Vd),d.LFG(d.zs3),d.LFG(ls,8))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac}),E})();class br{shouldDetach(H){return!1}shouldAttach(H){return!1}store(H,I){}retrieve(H){return null}shouldReuseRoute(H,I){if(H.routeConfig!==I.routeConfig)return!1;const j=H.params,ie=I.params,xt=Object.keys(j),cn=Object.keys(ie);if(xt.length!==cn.length)return!1;for(const Mn of xt)if(ie[Mn]!==j[Mn])return!1;return!0}}const vi=(E,H,I)=>()=>{if(H.defaultView&&typeof window<"u"){(E=>{const H=window,I=H.Ionic;I&&I.config&&"Object"!==I.config.constructor.name||(H.Ionic=H.Ionic||{},H.Ionic.config=Object.assign(Object.assign({},H.Ionic.config),E))})(Object.assign(Object.assign({},E),{_zoneGate:xt=>I.run(xt)}));const ie="__zone_symbol__addEventListener"in H.body?"__zone_symbol__addEventListener":"addEventListener";return function qe(){var E=[];if(typeof window<"u"){var H=window;(!H.customElements||H.Element&&(!H.Element.prototype.closest||!H.Element.prototype.matches||!H.Element.prototype.remove||!H.Element.prototype.getRootNode))&&E.push(B.e(6748).then(B.t.bind(B,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||H.NodeList&&!H.NodeList.prototype.forEach||!H.fetch||!function(){try{var j=new URL("b","http://a");return j.pathname="c%20d","http://a/c%20d"===j.href&&j.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&E.push(B.e(2214).then(B.t.bind(B,4144,23)))}return Promise.all(E)}().then(()=>((E,H)=>typeof window>"u"?Promise.resolve():(0,Ce.p)().then(()=>(he(),(0,Ce.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),H))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Be,jmp:xt=>I.runOutsideAngular(xt),ael(xt,cn,Mn,fr){xt[ie](cn,Mn,fr)},rel(xt,cn,Mn,fr){xt.removeEventListener(cn,Mn,fr)}}))}};let Ri=(()=>{class E{static forRoot(I){return{ngModule:E,providers:[{provide:Ms,useValue:I},{provide:d.ip1,useFactory:vi,multi:!0,deps:[Ms,ee.K0,d.R0b]}]}}}return E.\u0275fac=function(I){return new(I||E)},E.\u0275mod=d.oAB({type:E}),E.\u0275inj=d.cJS({providers:[yn,lt,Ft],imports:[[ee.ez]]}),E})()},9442:(sn,mt,B)=>{"use strict";B.d(mt,{c:()=>$e});var d=B(3756);let O;const He=Ve=>Ve.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),De=Ve=>{if(void 0===O){const Re=void 0!==Ve.style.webkitAnimationName;O=void 0===Ve.style.animationName&&Re?"-webkit-":""}return O},_e=(Ve,Ce,Re)=>{const Ae=Ce.startsWith("animation")?De(Ve):"";Ve.style.setProperty(Ae+Ce,Re)},ve=(Ve,Ce)=>{const Re=Ce.startsWith("animation")?De(Ve):"";Ve.style.removeProperty(Re+Ce)},ge=[],je=(Ve=[],Ce)=>{if(void 0!==Ce){const Re=Array.isArray(Ce)?Ce:[Ce];return[...Ve,...Re]}return Ve},$e=Ve=>{let Ce,Re,Ae,bt,W,Xe,qe,Et,yt,Be,be,Rt,vt,Ge=[],Je=[],et=[],ee=!1,he={},pe=[],fe=[],le={},Qe=0,Tt=!1,Gt=!1,Ye=!0,Ie=!1,st=!0,Vt=!1;const fn=Ve,hn=[],Dn=[],Zt=[],In=[],En=[],Qt=[],kn=[],Dt=[],Sr=[],Zn=[],rr="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,yr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&rr,dr=()=>Zn,en=(we,Pe)=>((Pe?.oneTimeCallback?Dn:hn).push({c:we,o:Pe}),vt),Tn=()=>{if(yr)Zn.forEach(we=>{we.cancel()}),Zn.length=0;else{const we=Zt.slice();(0,d.r)(()=>{we.forEach(Pe=>{ve(Pe,"animation-name"),ve(Pe,"animation-duration"),ve(Pe,"animation-timing-function"),ve(Pe,"animation-iteration-count"),ve(Pe,"animation-delay"),ve(Pe,"animation-play-state"),ve(Pe,"animation-fill-mode"),ve(Pe,"animation-direction")})})}},Yr=()=>{En.forEach(we=>{we?.parentNode&&we.parentNode.removeChild(we)}),En.length=0},Yt=()=>void 0!==W?W:qe?qe.getFill():"both",un=()=>void 0!==yt?yt:void 0!==Xe?Xe:qe?qe.getDirection():"normal",ar=()=>Tt?"linear":void 0!==Ae?Ae:qe?qe.getEasing():"linear",On=()=>Gt?0:void 0!==Be?Be:void 0!==Re?Re:qe?qe.getDuration():0,ir=()=>void 0!==bt?bt:qe?qe.getIterations():1,Un=()=>void 0!==be?be:void 0!==Ce?Ce:qe?qe.getDelay():0,hr=()=>{0!==Qe&&(Qe--,0===Qe&&((()=>{es(),Dt.forEach(Ot=>Ot()),Sr.forEach(Ot=>Ot());const we=Ye?1:0,Pe=pe,gt=fe,Lt=le;Zt.forEach(Ot=>{const Wt=Ot.classList;Pe.forEach(yn=>Wt.add(yn)),gt.forEach(yn=>Wt.remove(yn));for(const yn in Lt)Lt.hasOwnProperty(yn)&&_e(Ot,yn,Lt[yn])}),hn.forEach(Ot=>Ot.c(we,vt)),Dn.forEach(Ot=>Ot.c(we,vt)),Dn.length=0,st=!0,Ye&&(Ie=!0),Ye=!0})(),qe&&qe.animationFinish()))},gn=(we=!0)=>{Yr();const Pe=(Ve=>(Ve.forEach(Ce=>{for(const Re in Ce)if(Ce.hasOwnProperty(Re)){const Ae=Ce[Re];if("easing"===Re)Ce["animation-timing-function"]=Ae,delete Ce[Re];else{const bt=He(Re);bt!==Re&&(Ce[bt]=Ae,delete Ce[Re])}}}),Ve))(Ge);Zt.forEach(gt=>{if(Pe.length>0){const Lt=((Ve=[])=>Ve.map(Ce=>{const Re=Ce.offset,Ae=[];for(const bt in Ce)Ce.hasOwnProperty(bt)&&"offset"!==bt&&Ae.push(`${bt}: ${Ce[bt]};`);return`${100*Re}% { ${Ae.join(" ")} }`}).join(" "))(Pe);Rt=void 0!==Ve?Ve:(Ve=>{let Ce=ge.indexOf(Ve);return Ce<0&&(Ce=ge.push(Ve)-1),`ion-animation-${Ce}`})(Lt);const Ot=((Ve,Ce,Re)=>{const Ae=(Ve=>{const Ce=Ve.getRootNode();return Ce.head||Ce})(Re),bt=De(Re),W=Ae.querySelector("#"+Ve);if(W)return W;const Xe=(Re.ownerDocument||document).createElement("style");return Xe.id=Ve,Xe.textContent=`@${bt}keyframes ${Ve} { ${Ce} } @${bt}keyframes ${Ve}-alt { ${Ce} }`,Ae.appendChild(Xe),Xe})(Rt,Lt,gt);En.push(Ot),_e(gt,"animation-duration",`${On()}ms`),_e(gt,"animation-timing-function",ar()),_e(gt,"animation-delay",`${Un()}ms`),_e(gt,"animation-fill-mode",Yt()),_e(gt,"animation-direction",un());const Wt=ir()===1/0?"infinite":ir().toString();_e(gt,"animation-iteration-count",Wt),_e(gt,"animation-play-state","paused"),we&&_e(gt,"animation-name",`${Ot.id}-alt`),(0,d.r)(()=>{_e(gt,"animation-name",Ot.id||null)})}})},tr=(we=!0)=>{(()=>{Qt.forEach(Lt=>Lt()),kn.forEach(Lt=>Lt());const we=Je,Pe=et,gt=he;Zt.forEach(Lt=>{const Ot=Lt.classList;we.forEach(Wt=>Ot.add(Wt)),Pe.forEach(Wt=>Ot.remove(Wt));for(const Wt in gt)gt.hasOwnProperty(Wt)&&_e(Lt,Wt,gt[Wt])})})(),Ge.length>0&&(yr?(Zt.forEach(we=>{const Pe=we.animate(Ge,{id:fn,delay:Un(),duration:On(),easing:ar(),iterations:ir(),fill:Yt(),direction:un()});Pe.pause(),Zn.push(Pe)}),Zn.length>0&&(Zn[0].onfinish=()=>{hr()})):gn(we)),ee=!0},ri=we=>{if(we=Math.min(Math.max(we,0),.9999),yr)Zn.forEach(Pe=>{Pe.currentTime=Pe.effect.getComputedTiming().delay+On()*we,Pe.pause()});else{const Pe=`-${On()*we}ms`;Zt.forEach(gt=>{Ge.length>0&&(_e(gt,"animation-delay",Pe),_e(gt,"animation-play-state","paused"))})}},Fi=we=>{Zn.forEach(Pe=>{Pe.effect.updateTiming({delay:Un(),duration:On(),easing:ar(),iterations:ir(),fill:Yt(),direction:un()})}),void 0!==we&&ri(we)},Vr=(we=!0,Pe)=>{(0,d.r)(()=>{Zt.forEach(gt=>{_e(gt,"animation-name",Rt||null),_e(gt,"animation-duration",`${On()}ms`),_e(gt,"animation-timing-function",ar()),_e(gt,"animation-delay",void 0!==Pe?`-${Pe*On()}ms`:`${Un()}ms`),_e(gt,"animation-fill-mode",Yt()||null),_e(gt,"animation-direction",un()||null);const Lt=ir()===1/0?"infinite":ir().toString();_e(gt,"animation-iteration-count",Lt),we&&_e(gt,"animation-name",`${Rt}-alt`),(0,d.r)(()=>{_e(gt,"animation-name",Rt||null)})})})},kr=(we=!1,Pe=!0,gt)=>(we&&In.forEach(Lt=>{Lt.update(we,Pe,gt)}),yr?Fi(gt):Vr(Pe,gt),vt),si=()=>{ee&&(yr?Zn.forEach(we=>{we.pause()}):Zt.forEach(we=>{_e(we,"animation-play-state","paused")}),Vt=!0)},xs=()=>{Et=void 0,hr()},es=()=>{Et&&clearTimeout(Et)},Ei=we=>new Promise(Pe=>{we?.sync&&(Gt=!0,en(()=>Gt=!1,{oneTimeCallback:!0})),ee||tr(),Ie&&(yr?(ri(0),Fi()):Vr(),Ie=!1),st&&(Qe=In.length+1,st=!1),en(()=>Pe(),{oneTimeCallback:!0}),In.forEach(gt=>{gt.play()}),yr?(Zn.forEach(we=>{we.play()}),(0===Ge.length||0===Zt.length)&&hr()):(()=>{if(es(),(0,d.r)(()=>{Zt.forEach(we=>{Ge.length>0&&_e(we,"animation-play-state","running")})}),0===Ge.length||0===Zt.length)hr();else{const we=Un()||0,Pe=On()||0,gt=ir()||1;isFinite(gt)&&(Et=setTimeout(xs,we+Pe*gt+100)),((Ve,Ce)=>{let Re;const Ae={passive:!0},W=Xe=>{Ve===Xe.target&&(Re&&Re(),es(),(0,d.r)(()=>{Zt.forEach(we=>{ve(we,"animation-duration"),ve(we,"animation-delay"),ve(we,"animation-play-state")}),(0,d.r)(hr)}))};Ve&&(Ve.addEventListener("webkitAnimationEnd",W,Ae),Ve.addEventListener("animationend",W,Ae),Re=()=>{Ve.removeEventListener("webkitAnimationEnd",W,Ae),Ve.removeEventListener("animationend",W,Ae)})})(Zt[0])}})(),Vt=!1}),Ee=(we,Pe)=>{const gt=Ge[0];return void 0===gt||void 0!==gt.offset&&0!==gt.offset?Ge=[{offset:0,[we]:Pe},...Ge]:gt[we]=Pe,vt};return vt={parentAnimation:qe,elements:Zt,childAnimations:In,id:fn,animationFinish:hr,from:Ee,to:(we,Pe)=>{const gt=Ge[Ge.length-1];return void 0===gt||void 0!==gt.offset&&1!==gt.offset?Ge=[...Ge,{offset:1,[we]:Pe}]:gt[we]=Pe,vt},fromTo:(we,Pe,gt)=>Ee(we,Pe).to(we,gt),parent:we=>(qe=we,vt),play:Ei,pause:()=>(In.forEach(we=>{we.pause()}),si(),vt),stop:()=>{In.forEach(we=>{we.stop()}),ee&&(Tn(),ee=!1),Tt=!1,Gt=!1,st=!0,yt=void 0,Be=void 0,be=void 0,Qe=0,Ie=!1,Ye=!0,Vt=!1},destroy:we=>(In.forEach(Pe=>{Pe.destroy(we)}),(we=>{Tn(),we&&Yr()})(we),Zt.length=0,In.length=0,Ge.length=0,hn.length=0,Dn.length=0,ee=!1,st=!0,vt),keyframes:we=>{const Pe=Ge!==we;return Ge=we,Pe&&(we=>{yr?dr().forEach(Pe=>{if(Pe.effect.setKeyframes)Pe.effect.setKeyframes(we);else{const gt=new KeyframeEffect(Pe.effect.target,we,Pe.effect.getTiming());Pe.effect=gt}}):gn()})(Ge),vt},addAnimation:we=>{if(null!=we)if(Array.isArray(we))for(const Pe of we)Pe.parent(vt),In.push(Pe);else we.parent(vt),In.push(we);return vt},addElement:we=>{if(null!=we)if(1===we.nodeType)Zt.push(we);else if(we.length>=0)for(let Pe=0;Pe<we.length;Pe++)Zt.push(we[Pe]);else console.error("Invalid addElement value");return vt},update:kr,fill:we=>(W=we,kr(!0),vt),direction:we=>(Xe=we,kr(!0),vt),iterations:we=>(bt=we,kr(!0),vt),duration:we=>(!yr&&0===we&&(we=1),Re=we,kr(!0),vt),easing:we=>(Ae=we,kr(!0),vt),delay:we=>(Ce=we,kr(!0),vt),getWebAnimations:dr,getKeyframes:()=>Ge,getFill:Yt,getDirection:un,getDelay:Un,getIterations:ir,getEasing:ar,getDuration:On,afterAddRead:we=>(Dt.push(we),vt),afterAddWrite:we=>(Sr.push(we),vt),afterClearStyles:(we=[])=>{for(const Pe of we)le[Pe]="";return vt},afterStyles:(we={})=>(le=we,vt),afterRemoveClass:we=>(fe=je(fe,we),vt),afterAddClass:we=>(pe=je(pe,we),vt),beforeAddRead:we=>(Qt.push(we),vt),beforeAddWrite:we=>(kn.push(we),vt),beforeClearStyles:(we=[])=>{for(const Pe of we)he[Pe]="";return vt},beforeStyles:(we={})=>(he=we,vt),beforeRemoveClass:we=>(et=je(et,we),vt),beforeAddClass:we=>(Je=je(Je,we),vt),onFinish:en,isRunning:()=>0!==Qe&&!Vt,progressStart:(we=!1,Pe)=>(In.forEach(gt=>{gt.progressStart(we,Pe)}),si(),Tt=we,ee||tr(),kr(!1,!0,Pe),vt),progressStep:we=>(In.forEach(Pe=>{Pe.progressStep(we)}),ri(we),vt),progressEnd:(we,Pe,gt)=>(Tt=!1,In.forEach(Lt=>{Lt.progressEnd(we,Pe,gt)}),void 0!==gt&&(Be=gt),Ie=!1,Ye=!0,0===we?(yt="reverse"===un()?"normal":"reverse","reverse"===yt&&(Ye=!1),yr?(kr(),ri(1-Pe)):(be=(1-Pe)*On()*-1,kr(!1,!1))):1===we&&(yr?(kr(),ri(Pe)):(be=Pe*On()*-1,kr(!1,!1))),void 0!==we&&(en(()=>{Be=void 0,yt=void 0,be=void 0},{oneTimeCallback:!0}),qe||Ei()),vt)}}},3509:(sn,mt,B)=>{"use strict";B.d(mt,{G:()=>De});class O{constructor(ve,ze,Le,ge,me){this.id=ze,this.name=Le,this.disableScroll=me,this.priority=1e6*ge+ze,this.ctrl=ve}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ve=this.ctrl.capture(this.name,this.id,this.priority);return ve&&this.disableScroll&&this.ctrl.disableScroll(this.id),ve}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Z{constructor(ve,ze,Le,ge){this.id=ze,this.disable=Le,this.disableScroll=ge,this.ctrl=ve}block(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.disableGesture(ve,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.enableGesture(ve,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const He="backdrop-no-scroll",De=new class d{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ve){return new O(this,this.newID(),ve.name,ve.priority||0,!!ve.disableScroll)}createBlocker(ve={}){return new Z(this,this.newID(),ve.disable,!!ve.disableScroll)}start(ve,ze,Le){return this.canStart(ve)?(this.requestedStart.set(ze,Le),!0):(this.requestedStart.delete(ze),!1)}capture(ve,ze,Le){if(!this.start(ve,ze,Le))return!1;const ge=this.requestedStart;let me=-1e4;if(ge.forEach(Te=>{me=Math.max(me,Te)}),me===Le){this.capturedId=ze,ge.clear();const Te=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ve}});return document.dispatchEvent(Te),!0}return ge.delete(ze),!1}release(ve){this.requestedStart.delete(ve),this.capturedId===ve&&(this.capturedId=void 0)}disableGesture(ve,ze){let Le=this.disabledGestures.get(ve);void 0===Le&&(Le=new Set,this.disabledGestures.set(ve,Le)),Le.add(ze)}enableGesture(ve,ze){const Le=this.disabledGestures.get(ve);void 0!==Le&&Le.delete(ze)}disableScroll(ve){this.disabledScroll.add(ve),1===this.disabledScroll.size&&document.body.classList.add(He)}enableScroll(ve){this.disabledScroll.delete(ve),0===this.disabledScroll.size&&document.body.classList.remove(He)}canStart(ve){return!(void 0!==this.capturedId||this.isDisabled(ve))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ve){const ze=this.disabledGestures.get(ve);return!!(ze&&ze.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(sn,mt,B)=>{"use strict";B.r(mt),B.d(mt,{MENU_BACK_BUTTON_PRIORITY:()=>De,OVERLAY_BACK_BUTTON_PRIORITY:()=>He,blockHardwareBackButton:()=>O,startHardwareBackButton:()=>Z});var d=B(5861);const O=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const _e=document;let ve=!1;_e.addEventListener("backbutton",()=>{if(ve)return;let ze=0,Le=[];const ge=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Fe,je){Le.push({priority:Fe,handler:je,id:ze++})}}});_e.dispatchEvent(ge);const me=function(){var Fe=(0,d.Z)(function*(je){try{if(je?.handler){const $e=je.handler(Te);null!=$e&&(yield $e)}}catch($e){console.error($e)}});return function($e){return Fe.apply(this,arguments)}}(),Te=()=>{if(Le.length>0){let Fe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Le.forEach(je=>{je.priority>=Fe.priority&&(Fe=je)}),ve=!0,Le=Le.filter(je=>je.id!==Fe.id),me(Fe).then(()=>ve=!1)}};Te()})},He=100,De=99},3756:(sn,mt,B)=>{"use strict";B.d(mt,{a:()=>ve,b:()=>ze,c:()=>Z,d:()=>je,e:()=>$e,f:()=>Fe,g:()=>Le,h:()=>W,i:()=>_e,j:()=>He,k:()=>Te,l:()=>Ve,m:()=>me,n:()=>Ce,o:()=>bt,p:()=>Ae,q:()=>Xe,r:()=>ge,s:()=>Ge,t:()=>d,u:()=>Re});const d=(Je,et=0)=>new Promise(ee=>{O(Je,et,ee)}),O=(Je,et=0,ee)=>{let qe,he;const pe={passive:!0},le=()=>{qe&&qe()},Qe=Tt=>{(void 0===Tt||Je===Tt.target)&&(le(),ee(Tt))};return Je&&(Je.addEventListener("webkitTransitionEnd",Qe,pe),Je.addEventListener("transitionend",Qe,pe),he=setTimeout(Qe,et+500),qe=()=>{he&&(clearTimeout(he),he=void 0),Je.removeEventListener("webkitTransitionEnd",Qe,pe),Je.removeEventListener("transitionend",Qe,pe)}),le},Z=(Je,et)=>{Je.componentOnReady?Je.componentOnReady().then(ee=>et(ee)):ge(()=>et(Je))},He=(Je,et=[])=>{const ee={};return et.forEach(qe=>{Je.hasAttribute(qe)&&(null!==Je.getAttribute(qe)&&(ee[qe]=Je.getAttribute(qe)),Je.removeAttribute(qe))}),ee},De=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],_e=Je=>He(Je,De),ve=(Je,et,ee,qe)=>{var he;if(typeof window<"u"){const fe=null===(he=window?.Ionic)||void 0===he?void 0:he.config;if(fe){const le=fe.get("_ael");if(le)return le(Je,et,ee,qe);if(fe._ael)return fe._ael(Je,et,ee,qe)}}return Je.addEventListener(et,ee,qe)},ze=(Je,et,ee,qe)=>{var he;if(typeof window<"u"){const fe=null===(he=window?.Ionic)||void 0===he?void 0:he.config;if(fe){const le=fe.get("_rel");if(le)return le(Je,et,ee,qe);if(fe._rel)return fe._rel(Je,et,ee,qe)}}return Je.removeEventListener(et,ee,qe)},Le=(Je,et=Je)=>Je.shadowRoot||et,ge=Je=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Je):"function"==typeof requestAnimationFrame?requestAnimationFrame(Je):setTimeout(Je),me=Je=>!!Je.shadowRoot&&!!Je.attachShadow,Te=Je=>{const et=Je.closest("ion-item");return et?et.querySelector("ion-label"):null},Fe=Je=>{if(Je.focus(),Je.classList.contains("ion-focusable")){const et=Je.closest("ion-app");et&&et.setFocus([Je])}},je=(Je,et)=>{let ee;const qe=Je.getAttribute("aria-labelledby"),he=Je.id;let pe=null!==qe&&""!==qe.trim()?qe:et+"-lbl",fe=null!==qe&&""!==qe.trim()?document.getElementById(qe):Te(Je);return fe?(null===qe&&(fe.id=pe),ee=fe.textContent,fe.setAttribute("aria-hidden","true")):""!==he.trim()&&(fe=document.querySelector(`label[for="${he}"]`),fe&&(""!==fe.id?pe=fe.id:fe.id=pe=`${he}-lbl`,ee=fe.textContent)),{label:fe,labelId:pe,labelText:ee}},$e=(Je,et,ee,qe,he)=>{if(Je||me(et)){let pe=et.querySelector("input.aux-input");pe||(pe=et.ownerDocument.createElement("input"),pe.type="hidden",pe.classList.add("aux-input"),et.appendChild(pe)),pe.disabled=he,pe.name=ee,pe.value=qe||""}},Ve=(Je,et,ee)=>Math.max(Je,Math.min(et,ee)),Ce=(Je,et)=>{if(!Je){const ee="ASSERT: "+et;throw console.error(ee),new Error(ee)}},Re=Je=>Je.timeStamp||Date.now(),Ae=Je=>{if(Je){const et=Je.changedTouches;if(et&&et.length>0){const ee=et[0];return{x:ee.clientX,y:ee.clientY}}if(void 0!==Je.pageX)return{x:Je.pageX,y:Je.pageY}}return{x:0,y:0}},bt=Je=>{const et="rtl"===document.dir;switch(Je){case"start":return et;case"end":return!et;default:throw new Error(`"${Je}" is not a valid value for [side]. Use "start" or "end" instead.`)}},W=(Je,et)=>{const ee=Je._original||Je;return{_original:Je,emit:Xe(ee.emit.bind(ee),et)}},Xe=(Je,et=0)=>{let ee;return(...qe)=>{clearTimeout(ee),ee=setTimeout(Je,et,...qe)}},Ge=(Je,et)=>{if(Je??(Je={}),et??(et={}),Je===et)return!0;const ee=Object.keys(Je);if(ee.length!==Object.keys(et).length)return!1;for(const qe of ee)if(!(qe in et)||Je[qe]!==et[qe])return!1;return!0}},3139:(sn,mt,B)=>{"use strict";B.r(mt),B.d(mt,{GESTURE_CONTROLLER:()=>d.G,createGesture:()=>Le});var d=B(3509);const O=(Fe,je,$e,Ve)=>{const Ce=Z(Fe)?{capture:!!Ve.capture,passive:!!Ve.passive}:!!Ve.capture;let Re,Ae;return Fe.__zone_symbol__addEventListener?(Re="__zone_symbol__addEventListener",Ae="__zone_symbol__removeEventListener"):(Re="addEventListener",Ae="removeEventListener"),Fe[Re](je,$e,Ce),()=>{Fe[Ae](je,$e,Ce)}},Z=Fe=>{if(void 0===He)try{const je=Object.defineProperty({},"passive",{get:()=>{He=!0}});Fe.addEventListener("optsTest",()=>{},je)}catch{He=!1}return!!He};let He;const ve=Fe=>Fe instanceof Document?Fe:Fe.ownerDocument,Le=Fe=>{let je=!1,$e=!1,Ve=!0,Ce=!1;const Re=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Fe),Ae=Re.canStart,bt=Re.onWillStart,W=Re.onStart,Xe=Re.onEnd,Ge=Re.notCaptured,Je=Re.onMove,et=Re.threshold,ee=Re.passive,qe=Re.blurOnStart,he={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},pe=((Fe,je,$e)=>{const Ve=$e*(Math.PI/180),Ce="x"===Fe,Re=Math.cos(Ve),Ae=je*je;let bt=0,W=0,Xe=!1,Ge=0;return{start(Je,et){bt=Je,W=et,Ge=0,Xe=!0},detect(Je,et){if(!Xe)return!1;const ee=Je-bt,qe=et-W,he=ee*ee+qe*qe;if(he<Ae)return!1;const pe=Math.sqrt(he),fe=(Ce?ee:qe)/pe;return Ge=fe>Re?1:fe<-Re?-1:0,Xe=!1,!0},isGesture:()=>0!==Ge,getDirection:()=>Ge}})(Re.direction,Re.threshold,Re.maxAngle),fe=d.G.createGesture({name:Fe.gestureName,priority:Fe.gesturePriority,disableScroll:Fe.disableScroll}),Tt=()=>{!je||(Ce=!1,Je&&Je(he))},Gt=()=>!(fe&&!fe.capture()||(je=!0,Ve=!1,he.startX=he.currentX,he.startY=he.currentY,he.startTime=he.currentTime,bt?bt(he).then(yt):yt(),0)),yt=()=>{qe&&(()=>{if(typeof document<"u"){const st=document.activeElement;st?.blur&&st.blur()}})(),W&&W(he),Ve=!0},Be=()=>{je=!1,$e=!1,Ce=!1,Ve=!0,fe.release()},be=st=>{const Rt=je,vt=Ve;if(Be(),vt){if(ge(he,st),Rt)return void(Xe&&Xe(he));Ge&&Ge(he)}},Ye=((Fe,je,$e,Ve,Ce)=>{let Re,Ae,bt,W,Xe,Ge,Je,et=0;const ee=Et=>{et=Date.now()+2e3,je(Et)&&(!Ae&&$e&&(Ae=O(Fe,"touchmove",$e,Ce)),bt||(bt=O(Et.target,"touchend",he,Ce)),W||(W=O(Et.target,"touchcancel",he,Ce)))},qe=Et=>{et>Date.now()||!je(Et)||(!Ge&&$e&&(Ge=O(ve(Fe),"mousemove",$e,Ce)),Je||(Je=O(ve(Fe),"mouseup",pe,Ce)))},he=Et=>{fe(),Ve&&Ve(Et)},pe=Et=>{le(),Ve&&Ve(Et)},fe=()=>{Ae&&Ae(),bt&&bt(),W&&W(),Ae=bt=W=void 0},le=()=>{Ge&&Ge(),Je&&Je(),Ge=Je=void 0},Qe=()=>{fe(),le()},Tt=(Et=!0)=>{Et?(Re||(Re=O(Fe,"touchstart",ee,Ce)),Xe||(Xe=O(Fe,"mousedown",qe,Ce))):(Re&&Re(),Xe&&Xe(),Re=Xe=void 0,Qe())};return{enable:Tt,stop:Qe,destroy:()=>{Tt(!1),Ve=$e=je=void 0}}})(Re.el,st=>{const Rt=Te(st);return!($e||!Ve||(me(st,he),he.startX=he.currentX,he.startY=he.currentY,he.startTime=he.currentTime=Rt,he.velocityX=he.velocityY=he.deltaX=he.deltaY=0,he.event=st,Ae&&!1===Ae(he))||(fe.release(),!fe.start()))&&($e=!0,0===et?Gt():(pe.start(he.startX,he.startY),!0))},st=>{je?!Ce&&Ve&&(Ce=!0,ge(he,st),requestAnimationFrame(Tt)):(ge(he,st),pe.detect(he.currentX,he.currentY)&&(!pe.isGesture()||!Gt())&&Ie())},be,{capture:!1,passive:ee}),Ie=()=>{Be(),Ye.stop(),Ge&&Ge(he)};return{enable(st=!0){st||(je&&be(void 0),Be()),Ye.enable(st)},destroy(){fe.destroy(),Ye.destroy()}}},ge=(Fe,je)=>{if(!je)return;const $e=Fe.currentX,Ve=Fe.currentY,Ce=Fe.currentTime;me(je,Fe);const Re=Fe.currentX,Ae=Fe.currentY,W=(Fe.currentTime=Te(je))-Ce;if(W>0&&W<100){const Ge=(Ae-Ve)/W;Fe.velocityX=(Re-$e)/W*.7+.3*Fe.velocityX,Fe.velocityY=.7*Ge+.3*Fe.velocityY}Fe.deltaX=Re-Fe.startX,Fe.deltaY=Ae-Fe.startY,Fe.event=je},me=(Fe,je)=>{let $e=0,Ve=0;if(Fe){const Ce=Fe.changedTouches;if(Ce&&Ce.length>0){const Re=Ce[0];$e=Re.clientX,Ve=Re.clientY}else void 0!==Fe.pageX&&($e=Fe.pageX,Ve=Fe.pageY)}je.currentX=$e,je.currentY=Ve},Te=Fe=>Fe.timeStamp||Date.now()},9753:(sn,mt,B)=>{"use strict";B.d(mt,{L:()=>He,a:()=>De,b:()=>_e,c:()=>ve,d:()=>ze,e:()=>et,g:()=>he,l:()=>Ge,s:()=>ee,t:()=>me});var d=B(5861),O=B(7205),Z=B(3756);const He="ionViewWillEnter",De="ionViewDidEnter",_e="ionViewWillLeave",ve="ionViewDidLeave",ze="ionViewWillUnload",me=pe=>new Promise((fe,le)=>{(0,O.c)(()=>{Te(pe),Fe(pe).then(Qe=>{Qe.animation&&Qe.animation.destroy(),je(pe),fe(Qe)},Qe=>{je(pe),le(Qe)})})}),Te=pe=>{const fe=pe.enteringEl,le=pe.leavingEl;qe(fe,le,pe.direction),pe.showGoBack?fe.classList.add("can-go-back"):fe.classList.remove("can-go-back"),ee(fe,!1),fe.style.setProperty("pointer-events","none"),le&&(ee(le,!1),le.style.setProperty("pointer-events","none"))},Fe=function(){var pe=(0,d.Z)(function*(fe){const le=yield $e(fe);return le&&O.B.isBrowser?Ve(le,fe):Ce(fe)});return function(le){return pe.apply(this,arguments)}}(),je=pe=>{const fe=pe.enteringEl,le=pe.leavingEl;fe.classList.remove("ion-page-invisible"),fe.style.removeProperty("pointer-events"),void 0!==le&&(le.classList.remove("ion-page-invisible"),le.style.removeProperty("pointer-events"))},$e=function(){var pe=(0,d.Z)(function*(fe){return fe.leavingEl&&fe.animated&&0!==fe.duration?fe.animationBuilder?fe.animationBuilder:"ios"===fe.mode?(yield Promise.resolve().then(B.bind(B,4181))).iosTransitionAnimation:(yield Promise.resolve().then(B.bind(B,5980))).mdTransitionAnimation:void 0});return function(le){return pe.apply(this,arguments)}}(),Ve=function(){var pe=(0,d.Z)(function*(fe,le){yield Re(le,!0);const Qe=fe(le.baseEl,le);W(le.enteringEl,le.leavingEl);const Tt=yield bt(Qe,le);return le.progressCallback&&le.progressCallback(void 0),Tt&&Xe(le.enteringEl,le.leavingEl),{hasCompleted:Tt,animation:Qe}});return function(le,Qe){return pe.apply(this,arguments)}}(),Ce=function(){var pe=(0,d.Z)(function*(fe){const le=fe.enteringEl,Qe=fe.leavingEl;return yield Re(fe,!1),W(le,Qe),Xe(le,Qe),{hasCompleted:!0}});return function(le){return pe.apply(this,arguments)}}(),Re=function(){var pe=(0,d.Z)(function*(fe,le){const Tt=(void 0!==fe.deepWait?fe.deepWait:le)?[et(fe.enteringEl),et(fe.leavingEl)]:[Je(fe.enteringEl),Je(fe.leavingEl)];yield Promise.all(Tt),yield Ae(fe.viewIsReady,fe.enteringEl)});return function(le,Qe){return pe.apply(this,arguments)}}(),Ae=function(){var pe=(0,d.Z)(function*(fe,le){fe&&(yield fe(le))});return function(le,Qe){return pe.apply(this,arguments)}}(),bt=(pe,fe)=>{const le=fe.progressCallback,Qe=new Promise(Tt=>{pe.onFinish(Gt=>Tt(1===Gt))});return le?(pe.progressStart(!0),le(pe)):pe.play(),Qe},W=(pe,fe)=>{Ge(fe,_e),Ge(pe,He)},Xe=(pe,fe)=>{Ge(pe,De),Ge(fe,ve)},Ge=(pe,fe)=>{if(pe){const le=new CustomEvent(fe,{bubbles:!1,cancelable:!1});pe.dispatchEvent(le)}},Je=pe=>pe?new Promise(fe=>(0,Z.c)(pe,fe)):Promise.resolve(),et=function(){var pe=(0,d.Z)(function*(fe){const le=fe;if(le){if(null!=le.componentOnReady){if(null!=(yield le.componentOnReady()))return}else if(null!=le.__registerHost)return void(yield new Promise(Tt=>(0,Z.r)(Tt)));yield Promise.all(Array.from(le.children).map(et))}});return function(le){return pe.apply(this,arguments)}}(),ee=(pe,fe)=>{fe?(pe.setAttribute("aria-hidden","true"),pe.classList.add("ion-page-hidden")):(pe.hidden=!1,pe.removeAttribute("aria-hidden"),pe.classList.remove("ion-page-hidden"))},qe=(pe,fe,le)=>{void 0!==pe&&(pe.style.zIndex="back"===le?"99":"101"),void 0!==fe&&(fe.style.zIndex="100")},he=pe=>pe.classList.contains("ion-page")?pe:pe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||pe},7205:(sn,mt,B)=>{"use strict";B.d(mt,{B:()=>Ei,H:()=>In,a:()=>Ie,b:()=>qn,c:()=>xi,e:()=>Ke,f:()=>Bi,g:()=>st,h:()=>Dn,i:()=>Pr,j:()=>ar,k:()=>hr,p:()=>Ve,r:()=>tr,s:()=>je});var d=B(5861);let Z,He,De,_e=!1,ve=!1,ze=!1,Le=!1,ge=!1;const me=typeof window<"u"?window:{},Te=me.document||{head:{}},Fe={$flags$:0,$resourcesUrl$:"",jmp:te=>te(),raf:te=>requestAnimationFrame(te),ael:(te,Ee,nt,dt)=>te.addEventListener(Ee,nt,dt),rel:(te,Ee,nt,dt)=>te.removeEventListener(Ee,nt,dt),ce:(te,Ee)=>new CustomEvent(te,Ee)},je=te=>{Object.assign(Fe,te)},Ve=te=>Promise.resolve(te),Ce=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch{}return!1})(),Re=(te,Ee,nt,dt)=>{nt&&nt.map(([we,Pe,gt])=>{const Lt=bt(te,we),Ot=Ae(Ee,gt),Wt=W(we);Fe.ael(Lt,Pe,Ot,Wt),(Ee.$rmListeners$=Ee.$rmListeners$||[]).push(()=>Fe.rel(Lt,Pe,Ot,Wt))})},Ae=(te,Ee)=>nt=>{try{256&te.$flags$?te.$lazyInstance$[Ee](nt):(te.$queuedListeners$=te.$queuedListeners$||[]).push([Ee,nt])}catch(dt){Vr(dt)}},bt=(te,Ee)=>4&Ee?Te:8&Ee?me:16&Ee?Te.body:te,W=te=>0!=(2&te),ee="s-id",qe="sty-id",fe="http://www.w3.org/1999/xlink",Tt=new WeakMap,Gt=(te,Ee,nt)=>{let dt=ii.get(te);Ce&&nt?(dt=dt||new CSSStyleSheet,dt.replace(Ee)):dt=Ee,ii.set(te,dt)},Et=(te,Ee,nt,dt)=>{let we=Be(Ee,nt);const Pe=ii.get(we);if(te=11===te.nodeType?te:Te,Pe)if("string"==typeof Pe){let Lt,gt=Tt.get(te=te.head||te);gt||Tt.set(te,gt=new Set),gt.has(we)||(te.host&&(Lt=te.querySelector(`[${qe}="${we}"]`))?Lt.innerHTML=Pe:(Lt=Te.createElement("style"),Lt.innerHTML=Pe,te.insertBefore(Lt,te.querySelector("link"))),gt&&gt.add(we))}else te.adoptedStyleSheets.includes(Pe)||(te.adoptedStyleSheets=[...te.adoptedStyleSheets,Pe]);return we},Be=(te,Ee)=>"sc-"+(Ee&&32&te.$flags$?te.$tagName$+"-"+Ee:te.$tagName$),be=te=>te.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ie=te=>Ai.push(te),st=te=>er(te).$modeName$,Rt={},hn=te=>"object"==(te=typeof te)||"function"===te,Dn=(te,Ee,...nt)=>{let dt=null,we=null,Pe=null,gt=!1,Lt=!1;const Ot=[],Wt=Fn=>{for(let Wn=0;Wn<Fn.length;Wn++)dt=Fn[Wn],Array.isArray(dt)?Wt(dt):null!=dt&&"boolean"!=typeof dt&&((gt="function"!=typeof te&&!hn(dt))&&(dt=String(dt)),gt&&Lt?Ot[Ot.length-1].$text$+=dt:Ot.push(gt?Zt(null,dt):dt),Lt=gt)};if(Wt(nt),Ee){Ee.key&&(we=Ee.key),Ee.name&&(Pe=Ee.name);{const Fn=Ee.className||Ee.class;Fn&&(Ee.class="object"!=typeof Fn?Fn:Object.keys(Fn).filter(Wn=>Fn[Wn]).join(" "))}}if("function"==typeof te)return te(null===Ee?{}:Ee,Ot,Qt);const yn=Zt(te,null);return yn.$attrs$=Ee,Ot.length>0&&(yn.$children$=Ot),yn.$key$=we,yn.$name$=Pe,yn},Zt=(te,Ee)=>({$flags$:0,$tag$:te,$text$:Ee,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),In={},Qt={forEach:(te,Ee)=>te.map(kn).forEach(Ee),map:(te,Ee)=>te.map(kn).map(Ee).map(Dt)},kn=te=>({vattrs:te.$attrs$,vchildren:te.$children$,vkey:te.$key$,vname:te.$name$,vtag:te.$tag$,vtext:te.$text$}),Dt=te=>{if("function"==typeof te.vtag){const nt=Object.assign({},te.vattrs);return te.vkey&&(nt.key=te.vkey),te.vname&&(nt.name=te.vname),Dn(te.vtag,nt,...te.vchildren||[])}const Ee=Zt(te.vtag,te.vtext);return Ee.$attrs$=te.vattrs,Ee.$children$=te.vchildren,Ee.$key$=te.vkey,Ee.$name$=te.vname,Ee},Sr=(te,Ee,nt,dt,we,Pe)=>{if(nt!==dt){let gt=Fi(te,Ee),Lt=Ee.toLowerCase();if("class"===Ee){const Ot=te.classList,Wt=rr(nt),yn=rr(dt);Ot.remove(...Wt.filter(Fn=>Fn&&!yn.includes(Fn))),Ot.add(...yn.filter(Fn=>Fn&&!Wt.includes(Fn)))}else if("style"===Ee){for(const Ot in nt)(!dt||null==dt[Ot])&&(Ot.includes("-")?te.style.removeProperty(Ot):te.style[Ot]="");for(const Ot in dt)(!nt||dt[Ot]!==nt[Ot])&&(Ot.includes("-")?te.style.setProperty(Ot,dt[Ot]):te.style[Ot]=dt[Ot])}else if("key"!==Ee)if("ref"===Ee)dt&&dt(te);else if(gt||"o"!==Ee[0]||"n"!==Ee[1]){const Ot=hn(dt);if((gt||Ot&&null!==dt)&&!we)try{if(te.tagName.includes("-"))te[Ee]=dt;else{const yn=dt??"";"list"===Ee?gt=!1:(null==nt||te[Ee]!=yn)&&(te[Ee]=yn)}}catch{}let Wt=!1;Lt!==(Lt=Lt.replace(/^xlink\:?/,""))&&(Ee=Lt,Wt=!0),null==dt||!1===dt?(!1!==dt||""===te.getAttribute(Ee))&&(Wt?te.removeAttributeNS(fe,Ee):te.removeAttribute(Ee)):(!gt||4&Pe||we)&&!Ot&&(dt=!0===dt?"":dt,Wt?te.setAttributeNS(fe,Ee,dt):te.setAttribute(Ee,dt))}else Ee="-"===Ee[2]?Ee.slice(3):Fi(me,Lt)?Lt.slice(2):Lt[2]+Ee.slice(3),nt&&Fe.rel(te,Ee,nt,!1),dt&&Fe.ael(te,Ee,dt,!1)}},Zn=/\s/,rr=te=>te?te.split(Zn):[],yr=(te,Ee,nt,dt)=>{const we=11===Ee.$elm$.nodeType&&Ee.$elm$.host?Ee.$elm$.host:Ee.$elm$,Pe=te&&te.$attrs$||Rt,gt=Ee.$attrs$||Rt;for(dt in Pe)dt in gt||Sr(we,dt,Pe[dt],void 0,nt,Ee.$flags$);for(dt in gt)Sr(we,dt,Pe[dt],gt[dt],nt,Ee.$flags$)},gi=(te,Ee,nt,dt)=>{const we=Ee.$children$[nt];let gt,Lt,Ot,Pe=0;if(_e||(ze=!0,"slot"===we.$tag$&&(Z&&dt.classList.add(Z+"-s"),we.$flags$|=we.$children$?2:1)),null!==we.$text$)gt=we.$elm$=Te.createTextNode(we.$text$);else if(1&we.$flags$)gt=we.$elm$=Te.createTextNode("");else{if(Le||(Le="svg"===we.$tag$),gt=we.$elm$=Te.createElementNS(Le?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&we.$flags$?"slot-fb":we.$tag$),Le&&"foreignObject"===we.$tag$&&(Le=!1),yr(null,we,Le),(te=>null!=te)(Z)&&gt["s-si"]!==Z&&gt.classList.add(gt["s-si"]=Z),we.$children$)for(Pe=0;Pe<we.$children$.length;++Pe)Lt=gi(te,we,Pe,gt),Lt&&gt.appendChild(Lt);"svg"===we.$tag$?Le=!1:"foreignObject"===gt.tagName&&(Le=!0)}return gt["s-hn"]=De,3&we.$flags$&&(gt["s-sr"]=!0,gt["s-cr"]=He,gt["s-sn"]=we.$name$||"",Ot=te&&te.$children$&&te.$children$[nt],Ot&&Ot.$tag$===we.$tag$&&te.$elm$&&dr(te.$elm$,!1)),gt},dr=(te,Ee)=>{Fe.$flags$|=1;const nt=te.childNodes;for(let dt=nt.length-1;dt>=0;dt--){const we=nt[dt];we["s-hn"]!==De&&we["s-ol"]&&(zn(we).insertBefore(we,en(we)),we["s-ol"].remove(),we["s-ol"]=void 0,ze=!0),Ee&&dr(we,Ee)}Fe.$flags$&=-2},ei=(te,Ee,nt,dt,we,Pe)=>{let Lt,gt=te["s-cr"]&&te["s-cr"].parentNode||te;for(gt.shadowRoot&&gt.tagName===De&&(gt=gt.shadowRoot);we<=Pe;++we)dt[we]&&(Lt=gi(null,nt,we,te),Lt&&(dt[we].$elm$=Lt,gt.insertBefore(Lt,en(Ee))))},qr=(te,Ee,nt,dt,we)=>{for(;Ee<=nt;++Ee)(dt=te[Ee])&&(we=dt.$elm$,ti(dt),ve=!0,we["s-ol"]?we["s-ol"].remove():dr(we,!0),we.remove())},Yn=(te,Ee)=>te.$tag$===Ee.$tag$&&("slot"===te.$tag$?te.$name$===Ee.$name$:te.$key$===Ee.$key$),en=te=>te&&te["s-ol"]||te,zn=te=>(te["s-ol"]?te["s-ol"]:te).parentNode,Tn=(te,Ee)=>{const nt=Ee.$elm$=te.$elm$,dt=te.$children$,we=Ee.$children$,Pe=Ee.$tag$,gt=Ee.$text$;let Lt;null===gt?(Le="svg"===Pe||"foreignObject"!==Pe&&Le,"slot"===Pe||yr(te,Ee,Le),null!==dt&&null!==we?((te,Ee,nt,dt)=>{let wi,rt,we=0,Pe=0,gt=0,Lt=0,Ot=Ee.length-1,Wt=Ee[0],yn=Ee[Ot],Fn=dt.length-1,Wn=dt[0],Nr=dt[Fn];for(;we<=Ot&&Pe<=Fn;)if(null==Wt)Wt=Ee[++we];else if(null==yn)yn=Ee[--Ot];else if(null==Wn)Wn=dt[++Pe];else if(null==Nr)Nr=dt[--Fn];else if(Yn(Wt,Wn))Tn(Wt,Wn),Wt=Ee[++we],Wn=dt[++Pe];else if(Yn(yn,Nr))Tn(yn,Nr),yn=Ee[--Ot],Nr=dt[--Fn];else if(Yn(Wt,Nr))("slot"===Wt.$tag$||"slot"===Nr.$tag$)&&dr(Wt.$elm$.parentNode,!1),Tn(Wt,Nr),te.insertBefore(Wt.$elm$,yn.$elm$.nextSibling),Wt=Ee[++we],Nr=dt[--Fn];else if(Yn(yn,Wn))("slot"===Wt.$tag$||"slot"===Nr.$tag$)&&dr(yn.$elm$.parentNode,!1),Tn(yn,Wn),te.insertBefore(yn.$elm$,Wt.$elm$),yn=Ee[--Ot],Wn=dt[++Pe];else{for(gt=-1,Lt=we;Lt<=Ot;++Lt)if(Ee[Lt]&&null!==Ee[Lt].$key$&&Ee[Lt].$key$===Wn.$key$){gt=Lt;break}gt>=0?(rt=Ee[gt],rt.$tag$!==Wn.$tag$?wi=gi(Ee&&Ee[Pe],nt,gt,te):(Tn(rt,Wn),Ee[gt]=void 0,wi=rt.$elm$),Wn=dt[++Pe]):(wi=gi(Ee&&Ee[Pe],nt,Pe,te),Wn=dt[++Pe]),wi&&zn(Wt.$elm$).insertBefore(wi,en(Wt.$elm$))}we>Ot?ei(te,null==dt[Fn+1]?null:dt[Fn+1].$elm$,nt,dt,Pe,Fn):Pe>Fn&&qr(Ee,we,Ot)})(nt,dt,Ee,we):null!==we?(null!==te.$text$&&(nt.textContent=""),ei(nt,null,Ee,we,0,we.length-1)):null!==dt&&qr(dt,0,dt.length-1),Le&&"svg"===Pe&&(Le=!1)):(Lt=nt["s-cr"])?Lt.parentNode.textContent=gt:te.$text$!==gt&&(nt.data=gt)},Yr=te=>{const Ee=te.childNodes;let nt,dt,we,Pe,gt,Lt;for(dt=0,we=Ee.length;dt<we;dt++)if(nt=Ee[dt],1===nt.nodeType){if(nt["s-sr"])for(gt=nt["s-sn"],nt.hidden=!1,Pe=0;Pe<we;Pe++)if(Lt=Ee[Pe].nodeType,Ee[Pe]["s-hn"]!==nt["s-hn"]||""!==gt){if(1===Lt&&gt===Ee[Pe].getAttribute("slot")){nt.hidden=!0;break}}else if(1===Lt||3===Lt&&""!==Ee[Pe].textContent.trim()){nt.hidden=!0;break}Yr(nt)}},vn=[],hi=te=>{let Ee,nt,dt,we,Pe,gt,Lt=0;const Ot=te.childNodes,Wt=Ot.length;for(;Lt<Wt;Lt++){if(Ee=Ot[Lt],Ee["s-sr"]&&(nt=Ee["s-cr"])&&nt.parentNode)for(dt=nt.parentNode.childNodes,we=Ee["s-sn"],gt=dt.length-1;gt>=0;gt--)nt=dt[gt],!nt["s-cn"]&&!nt["s-nr"]&&nt["s-hn"]!==Ee["s-hn"]&&(Zr(nt,we)?(Pe=vn.find(yn=>yn.$nodeToRelocate$===nt),ve=!0,nt["s-sn"]=nt["s-sn"]||we,Pe?Pe.$slotRefNode$=Ee:vn.push({$slotRefNode$:Ee,$nodeToRelocate$:nt}),nt["s-sr"]&&vn.map(yn=>{Zr(yn.$nodeToRelocate$,nt["s-sn"])&&(Pe=vn.find(Fn=>Fn.$nodeToRelocate$===nt),Pe&&!yn.$slotRefNode$&&(yn.$slotRefNode$=Pe.$slotRefNode$))})):vn.some(yn=>yn.$nodeToRelocate$===nt)||vn.push({$nodeToRelocate$:nt}));1===Ee.nodeType&&hi(Ee)}},Zr=(te,Ee)=>1===te.nodeType?null===te.getAttribute("slot")&&""===Ee||te.getAttribute("slot")===Ee:te["s-sn"]===Ee||""===Ee,ti=te=>{te.$attrs$&&te.$attrs$.ref&&te.$attrs$.ref(null),te.$children$&&te.$children$.map(ti)},Pr=te=>er(te).$hostElement$,Ke=(te,Ee,nt)=>{const dt=Pr(te);return{emit:we=>Ze(dt,Ee,{bubbles:!!(4&nt),composed:!!(2&nt),cancelable:!!(1&nt),detail:we})}},Ze=(te,Ee,nt)=>{const dt=Fe.ce(Ee,nt);return te.dispatchEvent(dt),dt},Ue=(te,Ee)=>{Ee&&!te.$onRenderResolve$&&Ee["s-p"]&&Ee["s-p"].push(new Promise(nt=>te.$onRenderResolve$=nt))},tt=(te,Ee)=>{if(te.$flags$|=16,!(4&te.$flags$))return Ue(te,te.$ancestorComponent$),xi(()=>We(te,Ee));te.$flags$|=512},We=(te,Ee)=>{const dt=te.$lazyInstance$;let we;return Ee&&(te.$flags$|=256,te.$queuedListeners$&&(te.$queuedListeners$.map(([Pe,gt])=>ir(dt,Pe,gt)),te.$queuedListeners$=null),we=ir(dt,"componentWillLoad")),we=Un(we,()=>ir(dt,"componentWillRender")),Un(we,()=>zt(te,dt,Ee))},zt=function(){var te=(0,d.Z)(function*(Ee,nt,dt){const we=Ee.$hostElement$,gt=we["s-rc"];dt&&(te=>{const Ee=te.$cmpMeta$,nt=te.$hostElement$,dt=Ee.$flags$,Pe=Et(nt.shadowRoot?nt.shadowRoot:nt.getRootNode(),Ee,te.$modeName$);10&dt&&(nt["s-sc"]=Pe,nt.classList.add(Pe+"-h"),2&dt&&nt.classList.add(Pe+"-s"))})(Ee);Yt(Ee,nt),gt&&(gt.map(Ot=>Ot()),we["s-rc"]=void 0);{const Ot=we["s-p"],Wt=()=>un(Ee);0===Ot.length?Wt():(Promise.all(Ot).then(Wt),Ee.$flags$|=4,Ot.length=0)}});return function(nt,dt,we){return te.apply(this,arguments)}}(),Yt=(te,Ee,nt)=>{try{Ee=Ee.render&&Ee.render(),te.$flags$&=-17,te.$flags$|=2,((te,Ee)=>{const nt=te.$hostElement$,dt=te.$cmpMeta$,we=te.$vnode$||Zt(null,null),Pe=(te=>te&&te.$tag$===In)(Ee)?Ee:Dn(null,null,Ee);if(De=nt.tagName,dt.$attrsToReflect$&&(Pe.$attrs$=Pe.$attrs$||{},dt.$attrsToReflect$.map(([gt,Lt])=>Pe.$attrs$[Lt]=nt[gt])),Pe.$tag$=null,Pe.$flags$|=4,te.$vnode$=Pe,Pe.$elm$=we.$elm$=nt.shadowRoot||nt,Z=nt["s-sc"],He=nt["s-cr"],_e=0!=(1&dt.$flags$),ve=!1,Tn(we,Pe),Fe.$flags$|=1,ze){hi(Pe.$elm$);let gt,Lt,Ot,Wt,yn,Fn,Wn=0;for(;Wn<vn.length;Wn++)gt=vn[Wn],Lt=gt.$nodeToRelocate$,Lt["s-ol"]||(Ot=Te.createTextNode(""),Ot["s-nr"]=Lt,Lt.parentNode.insertBefore(Lt["s-ol"]=Ot,Lt));for(Wn=0;Wn<vn.length;Wn++)if(gt=vn[Wn],Lt=gt.$nodeToRelocate$,gt.$slotRefNode$){for(Wt=gt.$slotRefNode$.parentNode,yn=gt.$slotRefNode$.nextSibling,Ot=Lt["s-ol"];Ot=Ot.previousSibling;)if(Fn=Ot["s-nr"],Fn&&Fn["s-sn"]===Lt["s-sn"]&&Wt===Fn.parentNode&&(Fn=Fn.nextSibling,!Fn||!Fn["s-nr"])){yn=Fn;break}(!yn&&Wt!==Lt.parentNode||Lt.nextSibling!==yn)&&Lt!==yn&&(!Lt["s-hn"]&&Lt["s-ol"]&&(Lt["s-hn"]=Lt["s-ol"].parentNode.nodeName),Wt.insertBefore(Lt,yn))}else 1===Lt.nodeType&&(Lt.hidden=!0)}ve&&Yr(Pe.$elm$),Fe.$flags$&=-2,vn.length=0})(te,Ee)}catch(dt){Vr(dt,te.$hostElement$)}return null},un=te=>{const nt=te.$hostElement$,we=te.$lazyInstance$,Pe=te.$ancestorComponent$;ir(we,"componentDidRender"),64&te.$flags$?ir(we,"componentDidUpdate"):(te.$flags$|=64,Jn(nt),ir(we,"componentDidLoad"),te.$onReadyResolve$(nt),Pe||On()),te.$onInstanceResolve$(nt),te.$onRenderResolve$&&(te.$onRenderResolve$(),te.$onRenderResolve$=void 0),512&te.$flags$&&Li(()=>tt(te,!1)),te.$flags$&=-517},ar=te=>{{const Ee=er(te),nt=Ee.$hostElement$.isConnected;return nt&&2==(18&Ee.$flags$)&&tt(Ee,!1),nt}},On=te=>{Jn(Te.documentElement),Li(()=>Ze(me,"appload",{detail:{namespace:"ionic"}}))},ir=(te,Ee,nt)=>{if(te&&te[Ee])try{return te[Ee](nt)}catch(dt){Vr(dt)}},Un=(te,Ee)=>te&&te.then?te.then(Ee):Ee(),Jn=te=>te.classList.add("hydrated"),Ur=(te,Ee,nt,dt,we,Pe,gt)=>{let Lt,Ot,Wt,yn;if(1===Pe.nodeType){for(Lt=Pe.getAttribute("c-id"),Lt&&(Ot=Lt.split("."),(Ot[0]===gt||"0"===Ot[0])&&(Wt={$flags$:0,$hostId$:Ot[0],$nodeId$:Ot[1],$depth$:Ot[2],$index$:Ot[3],$tag$:Pe.tagName.toLowerCase(),$elm$:Pe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Ee.push(Wt),Pe.removeAttribute("c-id"),te.$children$||(te.$children$=[]),te.$children$[Wt.$index$]=Wt,te=Wt,dt&&"0"===Wt.$depth$&&(dt[Wt.$index$]=Wt.$elm$))),yn=Pe.childNodes.length-1;yn>=0;yn--)Ur(te,Ee,nt,dt,we,Pe.childNodes[yn],gt);if(Pe.shadowRoot)for(yn=Pe.shadowRoot.childNodes.length-1;yn>=0;yn--)Ur(te,Ee,nt,dt,we,Pe.shadowRoot.childNodes[yn],gt)}else if(8===Pe.nodeType)Ot=Pe.nodeValue.split("."),(Ot[1]===gt||"0"===Ot[1])&&(Lt=Ot[0],Wt={$flags$:0,$hostId$:Ot[1],$nodeId$:Ot[2],$depth$:Ot[3],$index$:Ot[4],$elm$:Pe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Lt?(Wt.$elm$=Pe.nextSibling,Wt.$elm$&&3===Wt.$elm$.nodeType&&(Wt.$text$=Wt.$elm$.textContent,Ee.push(Wt),Pe.remove(),te.$children$||(te.$children$=[]),te.$children$[Wt.$index$]=Wt,dt&&"0"===Wt.$depth$&&(dt[Wt.$index$]=Wt.$elm$))):Wt.$hostId$===gt&&("s"===Lt?(Wt.$tag$="slot",Pe["s-sn"]=Ot[5]?Wt.$name$=Ot[5]:"",Pe["s-sr"]=!0,dt&&(Wt.$elm$=Te.createElement(Wt.$tag$),Wt.$name$&&Wt.$elm$.setAttribute("name",Wt.$name$),Pe.parentNode.insertBefore(Wt.$elm$,Pe),Pe.remove(),"0"===Wt.$depth$&&(dt[Wt.$index$]=Wt.$elm$)),nt.push(Wt),te.$children$||(te.$children$=[]),te.$children$[Wt.$index$]=Wt):"r"===Lt&&(dt?Pe.remove():(we["s-cr"]=Pe,Pe["s-cn"]=!0))));else if(te&&"style"===te.$tag$){const Fn=Zt(null,Pe.textContent);Fn.$elm$=Pe,Fn.$index$="0",te.$children$=[Fn]}},or=(te,Ee)=>{if(1===te.nodeType){let nt=0;for(;nt<te.childNodes.length;nt++)or(te.childNodes[nt],Ee);if(te.shadowRoot)for(nt=0;nt<te.shadowRoot.childNodes.length;nt++)or(te.shadowRoot.childNodes[nt],Ee)}else if(8===te.nodeType){const nt=te.nodeValue.split(".");"o"===nt[0]&&(Ee.set(nt[1]+"."+nt[2],te),te.nodeValue="",te["s-en"]=nt[3])}},ut=(te,Ee,nt)=>{if(Ee.$members$){te.watchers&&(Ee.$watchers$=te.watchers);const dt=Object.entries(Ee.$members$),we=te.prototype;if(dt.map(([Pe,[gt]])=>{31&gt||2&nt&&32&gt?Object.defineProperty(we,Pe,{get(){return((te,Ee)=>er(this).$instanceValues$.get(Ee))(0,Pe)},set(Lt){((te,Ee,nt,dt)=>{const we=er(te),Pe=we.$hostElement$,gt=we.$instanceValues$.get(Ee),Lt=we.$flags$,Ot=we.$lazyInstance$;nt=((te,Ee)=>null==te||hn(te)?te:4&Ee?"false"!==te&&(""===te||!!te):2&Ee?parseFloat(te):1&Ee?String(te):te)(nt,dt.$members$[Ee][0]);const Wt=Number.isNaN(gt)&&Number.isNaN(nt);if((!(8&Lt)||void 0===gt)&&nt!==gt&&!Wt&&(we.$instanceValues$.set(Ee,nt),Ot)){if(dt.$watchers$&&128&Lt){const Fn=dt.$watchers$[Ee];Fn&&Fn.map(Wn=>{try{Ot[Wn](nt,gt,Ee)}catch(Nr){Vr(Nr,Pe)}})}2==(18&Lt)&&tt(we,!1)}})(this,Pe,Lt,Ee)},configurable:!0,enumerable:!0}):1&nt&&64&gt&&Object.defineProperty(we,Pe,{value(...Lt){const Ot=er(this);return Ot.$onInstancePromise$.then(()=>Ot.$lazyInstance$[Pe](...Lt))}})}),1&nt){const Pe=new Map;we.attributeChangedCallback=function(gt,Lt,Ot){Fe.jmp(()=>{const Wt=Pe.get(gt);if(this.hasOwnProperty(Wt))Ot=this[Wt],delete this[Wt];else if(we.hasOwnProperty(Wt)&&"number"==typeof this[Wt]&&this[Wt]==Ot)return;this[Wt]=(null!==Ot||"boolean"!=typeof this[Wt])&&Ot})},te.observedAttributes=dt.filter(([gt,Lt])=>15&Lt[0]).map(([gt,Lt])=>{const Ot=Lt[1]||gt;return Pe.set(Ot,gt),512&Lt[0]&&Ee.$attrsToReflect$.push([gt,Ot]),Ot})}}return te},ke=function(){var te=(0,d.Z)(function*(Ee,nt,dt,we,Pe){if(0==(32&nt.$flags$)){{if(nt.$flags$|=32,(Pe=Si(dt)).then){const Wt=()=>{};Pe=yield Pe,Wt()}Pe.isProxied||(dt.$watchers$=Pe.watchers,ut(Pe,dt,2),Pe.isProxied=!0);const Ot=()=>{};nt.$flags$|=8;try{new Pe(nt)}catch(Wt){Vr(Wt)}nt.$flags$&=-9,nt.$flags$|=128,Ot(),Me(nt.$lazyInstance$)}if(Pe.style){let Ot=Pe.style;"string"!=typeof Ot&&(Ot=Ot[nt.$modeName$=(te=>Ai.map(Ee=>Ee(te)).find(Ee=>!!Ee))(Ee)]);const Wt=Be(dt,nt.$modeName$);if(!ii.has(Wt)){const yn=()=>{};Gt(Wt,Ot,!!(1&dt.$flags$)),yn()}}}const gt=nt.$ancestorComponent$,Lt=()=>tt(nt,!0);gt&&gt["s-rc"]?gt["s-rc"].push(Lt):Lt()});return function(nt,dt,we,Pe,gt){return te.apply(this,arguments)}}(),Me=te=>{ir(te,"connectedCallback")},Ut=te=>{const Ee=te["s-cr"]=Te.createComment("");Ee["s-cn"]=!0,te.insertBefore(Ee,te.firstChild)},qn=(te,Ee={})=>{const dt=[],we=Ee.exclude||[],Pe=me.customElements,gt=Te.head,Lt=gt.querySelector("meta[charset]"),Ot=Te.createElement("style"),Wt=[],yn=Te.querySelectorAll(`[${qe}]`);let Fn,Wn=!0,Nr=0;for(Object.assign(Fe,Ee),Fe.$resourcesUrl$=new URL(Ee.resourcesUrl||"./",Te.baseURI).href,Fe.$flags$|=2;Nr<yn.length;Nr++)Gt(yn[Nr].getAttribute(qe),be(yn[Nr].innerHTML),!0);te.map(wi=>{wi[1].map(rt=>{const ct={$flags$:rt[0],$tagName$:rt[1],$members$:rt[2],$listeners$:rt[3]};ct.$members$=rt[2],ct.$listeners$=rt[3],ct.$attrsToReflect$=[],ct.$watchers$={};const _t=ct.$tagName$,jt=class extends HTMLElement{constructor(tn){super(tn),ri(tn=this,ct),1&ct.$flags$&&tn.attachShadow({mode:"open",delegatesFocus:!!(16&ct.$flags$)})}connectedCallback(){Fn&&(clearTimeout(Fn),Fn=null),Wn?Wt.push(this):Fe.jmp(()=>(te=>{if(0==(1&Fe.$flags$)){const Ee=er(te),nt=Ee.$cmpMeta$,dt=()=>{};if(1&Ee.$flags$)Re(te,Ee,nt.$listeners$),Me(Ee.$lazyInstance$);else{let we;if(Ee.$flags$|=1,we=te.getAttribute(ee),we){if(1&nt.$flags$){const Pe=Et(te.shadowRoot,nt,te.getAttribute("s-mode"));te.classList.remove(Pe+"-h",Pe+"-s")}((te,Ee,nt,dt)=>{const Pe=te.shadowRoot,gt=[],Ot=Pe?[]:null,Wt=dt.$vnode$=Zt(Ee,null);Fe.$orgLocNodes$||or(Te.body,Fe.$orgLocNodes$=new Map),te[ee]=nt,te.removeAttribute(ee),Ur(Wt,gt,[],Ot,te,te,nt),gt.map(yn=>{const Fn=yn.$hostId$+"."+yn.$nodeId$,Wn=Fe.$orgLocNodes$.get(Fn),Nr=yn.$elm$;Wn&&""===Wn["s-en"]&&Wn.parentNode.insertBefore(Nr,Wn.nextSibling),Pe||(Nr["s-hn"]=Ee,Wn&&(Nr["s-ol"]=Wn,Nr["s-ol"]["s-nr"]=Nr)),Fe.$orgLocNodes$.delete(Fn)}),Pe&&Ot.map(yn=>{yn&&Pe.appendChild(yn)})})(te,nt.$tagName$,we,Ee)}we||12&nt.$flags$&&Ut(te);{let Pe=te;for(;Pe=Pe.parentNode||Pe.host;)if(1===Pe.nodeType&&Pe.hasAttribute("s-id")&&Pe["s-p"]||Pe["s-p"]){Ue(Ee,Ee.$ancestorComponent$=Pe);break}}nt.$members$&&Object.entries(nt.$members$).map(([Pe,[gt]])=>{if(31&gt&&te.hasOwnProperty(Pe)){const Lt=te[Pe];delete te[Pe],te[Pe]=Lt}}),Li(()=>ke(te,Ee,nt))}dt()}})(this))}disconnectedCallback(){Fe.jmp(()=>(te=>{if(0==(1&Fe.$flags$)){const Ee=er(this),nt=Ee.$lazyInstance$;Ee.$rmListeners$&&(Ee.$rmListeners$.map(dt=>dt()),Ee.$rmListeners$=void 0),ir(nt,"disconnectedCallback")}})())}componentOnReady(){return er(this).$onReadyPromise$}};ct.$lazyBundleId$=wi[0],!we.includes(_t)&&!Pe.get(_t)&&(dt.push(_t),Pe.define(_t,ut(jt,ct,1)))})}),Ot.innerHTML=dt+"{visibility:hidden}.hydrated{visibility:inherit}",Ot.setAttribute("data-styles",""),gt.insertBefore(Ot,Lt?Lt.nextSibling:gt.firstChild),Wn=!1,Wt.length?Wt.map(wi=>wi.connectedCallback()):Fe.jmp(()=>Fn=setTimeout(On,30))},hr=te=>{const Ee=new URL(te,Fe.$resourcesUrl$);return Ee.origin!==me.location.origin?Ee.href:Ee.pathname},gn=new WeakMap,er=te=>gn.get(te),tr=(te,Ee)=>gn.set(Ee.$lazyInstance$=te,Ee),ri=(te,Ee)=>{const nt={$flags$:0,$hostElement$:te,$cmpMeta$:Ee,$instanceValues$:new Map};return nt.$onInstancePromise$=new Promise(dt=>nt.$onInstanceResolve$=dt),nt.$onReadyPromise$=new Promise(dt=>nt.$onReadyResolve$=dt),te["s-p"]=[],te["s-rc"]=[],Re(te,nt,Ee.$listeners$),gn.set(te,nt)},Fi=(te,Ee)=>Ee in te,Vr=(te,Ee)=>(0,console.error)(te,Ee),kr=new Map,Si=(te,Ee,nt)=>{const dt=te.$tagName$.replace(/-/g,"_"),we=te.$lazyBundleId$,Pe=kr.get(we);return Pe?Pe[dt]:B(863)(`./${we}.entry.js`).then(gt=>(kr.set(we,gt),gt[dt]),Vr)},ii=new Map,Ai=[],si=[],Cr=[],xs=(te,Ee)=>nt=>{te.push(nt),ge||(ge=!0,Ee&&4&Fe.$flags$?Li(ts):Fe.raf(ts))},es=te=>{for(let Ee=0;Ee<te.length;Ee++)try{te[Ee](performance.now())}catch(nt){Vr(nt)}te.length=0},ts=()=>{es(si),es(Cr),(ge=si.length>0)&&Fe.raf(ts)},Li=te=>Ve().then(te),Bi=xs(si,!1),xi=xs(Cr,!0),Ei={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},97:(sn,mt,B)=>{"use strict";B.d(mt,{m:()=>me});var d=B(5861),O=B(7593),Z=B(3756),He=B(5729),De=B(9442);const _e=Te=>(0,De.c)().duration(Te?400:300),ve=Te=>{let Fe,je;const $e=Te.width+8,Ve=(0,De.c)(),Ce=(0,De.c)();Te.isEndSide?(Fe=$e+"px",je="0px"):(Fe=-$e+"px",je="0px"),Ve.addElement(Te.menuInnerEl).fromTo("transform",`translateX(${Fe})`,`translateX(${je})`);const Ae="ios"===(0,He.b)(Te),bt=Ae?.2:.25;return Ce.addElement(Te.backdropEl).fromTo("opacity",.01,bt),_e(Ae).addAnimation([Ve,Ce])},ze=Te=>{let Fe,je;const $e=(0,He.b)(Te),Ve=Te.width;Te.isEndSide?(Fe=-Ve+"px",je=Ve+"px"):(Fe=Ve+"px",je=-Ve+"px");const Ce=(0,De.c)().addElement(Te.menuInnerEl).fromTo("transform",`translateX(${je})`,"translateX(0px)"),Re=(0,De.c)().addElement(Te.contentEl).fromTo("transform","translateX(0px)",`translateX(${Fe})`),Ae=(0,De.c)().addElement(Te.backdropEl).fromTo("opacity",.01,.32);return _e("ios"===$e).addAnimation([Ce,Re,Ae])},Le=Te=>{const Fe=(0,He.b)(Te),je=Te.width*(Te.isEndSide?-1:1)+"px",$e=(0,De.c)().addElement(Te.contentEl).fromTo("transform","translateX(0px)",`translateX(${je})`);return _e("ios"===Fe).addAnimation($e)},me=(()=>{const Te=new Map,Fe=[],je=function(){var yt=(0,d.Z)(function*(Be){const be=yield W(Be);return!!be&&be.open()});return function(be){return yt.apply(this,arguments)}}(),$e=function(){var yt=(0,d.Z)(function*(Be){const be=yield void 0!==Be?W(Be):Xe();return void 0!==be&&be.close()});return function(be){return yt.apply(this,arguments)}}(),Ve=function(){var yt=(0,d.Z)(function*(Be){const be=yield W(Be);return!!be&&be.toggle()});return function(be){return yt.apply(this,arguments)}}(),Ce=function(){var yt=(0,d.Z)(function*(Be,be){const Ye=yield W(be);return Ye&&(Ye.disabled=!Be),Ye});return function(be,Ye){return yt.apply(this,arguments)}}(),Re=function(){var yt=(0,d.Z)(function*(Be,be){const Ye=yield W(be);return Ye&&(Ye.swipeGesture=Be),Ye});return function(be,Ye){return yt.apply(this,arguments)}}(),Ae=function(){var yt=(0,d.Z)(function*(Be){if(null!=Be){const be=yield W(Be);return void 0!==be&&be.isOpen()}return void 0!==(yield Xe())});return function(be){return yt.apply(this,arguments)}}(),bt=function(){var yt=(0,d.Z)(function*(Be){const be=yield W(Be);return!!be&&!be.disabled});return function(be){return yt.apply(this,arguments)}}(),W=function(){var yt=(0,d.Z)(function*(Be){return yield Et(),"start"===Be||"end"===Be?Gt(Ie=>Ie.side===Be&&!Ie.disabled)||Gt(Ie=>Ie.side===Be):null!=Be?Gt(Ye=>Ye.menuId===Be):Gt(Ye=>!Ye.disabled)||(Fe.length>0?Fe[0].el:void 0)});return function(be){return yt.apply(this,arguments)}}(),Xe=function(){var yt=(0,d.Z)(function*(){return yield Et(),le()});return function(){return yt.apply(this,arguments)}}(),Ge=function(){var yt=(0,d.Z)(function*(){return yield Et(),Qe()});return function(){return yt.apply(this,arguments)}}(),Je=function(){var yt=(0,d.Z)(function*(){return yield Et(),Tt()});return function(){return yt.apply(this,arguments)}}(),et=(yt,Be)=>{Te.set(yt,Be)},he=yt=>{const Be=yt.side;Fe.filter(be=>be.side===Be&&be!==yt).forEach(be=>be.disabled=!0)},pe=function(){var yt=(0,d.Z)(function*(Be,be,Ye){if(Tt())return!1;if(be){const Ie=yield Xe();Ie&&Be.el!==Ie&&(yield Ie.setOpen(!1,!1))}return Be._setOpen(be,Ye)});return function(be,Ye,Ie){return yt.apply(this,arguments)}}(),le=()=>Gt(yt=>yt._isOpen),Qe=()=>Fe.map(yt=>yt.el),Tt=()=>Fe.some(yt=>yt.isAnimating),Gt=yt=>{const Be=Fe.find(yt);if(void 0!==Be)return Be.el},Et=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(yt=>new Promise(Be=>(0,Z.c)(yt,Be))));return et("reveal",Le),et("push",ze),et("overlay",ve),typeof document<"u"&&document.addEventListener("ionBackButton",yt=>{const Be=le();Be&&yt.detail.register(O.MENU_BACK_BUTTON_PRIORITY,()=>Be.close())}),{registerAnimation:et,get:W,getMenus:Ge,getOpen:Xe,isEnabled:bt,swipeGesture:Re,isAnimating:Je,isOpen:Ae,enable:Ce,toggle:Ve,close:$e,open:je,_getOpenSync:le,_createAnimation:(yt,Be)=>{const be=Te.get(yt);if(!be)throw new Error("animation not registered");return be(Be)},_register:yt=>{Fe.indexOf(yt)<0&&(yt.disabled||he(yt),Fe.push(yt))},_unregister:yt=>{const Be=Fe.indexOf(yt);Be>-1&&Fe.splice(Be,1)},_setOpen:pe,_setActiveMenu:he}})()},5729:(sn,mt,B)=>{"use strict";B.d(mt,{a:()=>me,b:()=>Tt,c:()=>Z,g:()=>ge,i:()=>Gt});var d=B(7205);class O{constructor(){this.m=new Map}reset(yt){this.m=new Map(Object.entries(yt))}get(yt,Be){const be=this.m.get(yt);return void 0!==be?be:Be}getBoolean(yt,Be=!1){const be=this.m.get(yt);return void 0===be?Be:"string"==typeof be?"true"===be:!!be}getNumber(yt,Be){const be=parseFloat(this.m.get(yt));return isNaN(be)?void 0!==Be?Be:NaN:be}set(yt,Be){this.m.set(yt,Be)}}const Z=new O,Le="ionic-persist-config",ge=Et=>Te(Et),me=(Et,yt)=>("string"==typeof Et&&(yt=Et,Et=void 0),ge(Et).includes(yt)),Te=(Et=window)=>{if(typeof Et>"u")return[];Et.Ionic=Et.Ionic||{};let yt=Et.Ionic.platforms;return null==yt&&(yt=Et.Ionic.platforms=Fe(Et),yt.forEach(Be=>Et.document.documentElement.classList.add(`plt-${Be}`))),yt},Fe=Et=>{const yt=Z.get("platform");return Object.keys(le).filter(Be=>{const be=yt?.[Be];return"function"==typeof be?be(Et):le[Be](Et)})},$e=Et=>!!(pe(Et,/iPad/i)||pe(Et,/Macintosh/i)&&Xe(Et)),Re=Et=>pe(Et,/android|sink/i),Xe=Et=>fe(Et,"(any-pointer:coarse)"),Je=Et=>et(Et)||ee(Et),et=Et=>!!(Et.cordova||Et.phonegap||Et.PhoneGap),ee=Et=>!!Et.Capacitor?.isNative,pe=(Et,yt)=>yt.test(Et.navigator.userAgent),fe=(Et,yt)=>{var Be;return null===(Be=Et.matchMedia)||void 0===Be?void 0:Be.call(Et,yt).matches},le={ipad:$e,iphone:Et=>pe(Et,/iPhone/i),ios:Et=>pe(Et,/iPhone|iPod/i)||$e(Et),android:Re,phablet:Et=>{const yt=Et.innerWidth,Be=Et.innerHeight,be=Math.min(yt,Be),Ye=Math.max(yt,Be);return be>390&&be<520&&Ye>620&&Ye<800},tablet:Et=>{const yt=Et.innerWidth,Be=Et.innerHeight,be=Math.min(yt,Be),Ye=Math.max(yt,Be);return $e(Et)||(Et=>Re(Et)&&!pe(Et,/mobile/i))(Et)||be>460&&be<820&&Ye>780&&Ye<1400},cordova:et,capacitor:ee,electron:Et=>pe(Et,/electron/i),pwa:Et=>{var yt;return!(!(null===(yt=Et.matchMedia)||void 0===yt?void 0:yt.call(Et,"(display-mode: standalone)").matches)&&!Et.navigator.standalone)},mobile:Xe,mobileweb:Et=>Xe(Et)&&!Je(Et),desktop:Et=>!Xe(Et),hybrid:Je};let Qe;const Tt=Et=>Et&&(0,d.g)(Et)||Qe,Gt=(Et={})=>{if(typeof window>"u")return;const yt=window.document,Be=window,be=Be.Ionic=Be.Ionic||{},Ye={};Et._ael&&(Ye.ael=Et._ael),Et._rel&&(Ye.rel=Et._rel),Et._ce&&(Ye.ce=Et._ce),(0,d.s)(Ye);const Ie=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Et=>{try{const yt=Et.sessionStorage.getItem(Le);return null!==yt?JSON.parse(yt):{}}catch{return{}}})(Be)),{persistConfig:!1}),be.config),(Et=>{const yt={};return Et.location.search.slice(1).split("&").map(Be=>Be.split("=")).map(([Be,be])=>[decodeURIComponent(Be),decodeURIComponent(be)]).filter(([Be])=>((Et,yt)=>Et.substr(0,yt.length)===yt)(Be,"ionic:")).map(([Be,be])=>[Be.slice("ionic:".length),be]).forEach(([Be,be])=>{yt[Be]=be}),yt})(Be)),Et);Z.reset(Ie),Z.getBoolean("persistConfig")&&((Et,yt)=>{try{Et.sessionStorage.setItem(Le,JSON.stringify(yt))}catch{return}})(Be,Ie),Te(Be),be.config=Z,be.mode=Qe=Z.get("mode",yt.documentElement.getAttribute("mode")||(me(Be,"ios")?"ios":"md")),Z.set("mode",Qe),yt.documentElement.setAttribute("mode",Qe),yt.documentElement.classList.add(Qe),Z.getBoolean("_testing")&&Z.set("animated",!1);const st=vt=>{var Vt;return null===(Vt=vt.tagName)||void 0===Vt?void 0:Vt.startsWith("ION-")},Rt=vt=>["ios","md"].includes(vt);(0,d.a)(vt=>{for(;vt;){const Vt=vt.mode||vt.getAttribute("mode");if(Vt){if(Rt(Vt))return Vt;st(vt)&&console.warn('Invalid ionic mode: "'+Vt+'", expected: "ios" or "md"')}vt=vt.parentElement}return Qe})}},4181:(sn,mt,B)=>{"use strict";B.r(mt),B.d(mt,{iosTransitionAnimation:()=>Te,shadow:()=>_e});var d=B(9442),O=B(9753);B(7205);const De=Fe=>document.querySelector(`${Fe}.ion-cloned-element`),_e=Fe=>Fe.shadowRoot||Fe,ve=Fe=>{const je="ION-TABS"===Fe.tagName?Fe:Fe.querySelector("ion-tabs"),$e="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=je){const Ve=je.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ve?Ve.querySelector($e):null}return Fe.querySelector($e)},ze=(Fe,je)=>{const $e="ION-TABS"===Fe.tagName?Fe:Fe.querySelector("ion-tabs");let Ve=[];if(null!=$e){const Ce=$e.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ce&&(Ve=Ce.querySelectorAll("ion-buttons"))}else Ve=Fe.querySelectorAll("ion-buttons");for(const Ce of Ve){const Re=Ce.closest("ion-header"),Ae=Re&&!Re.classList.contains("header-collapse-condense-inactive"),bt=Ce.querySelector("ion-back-button"),W=Ce.classList.contains("buttons-collapse"),Xe="start"===Ce.slot||""===Ce.slot;if(null!==bt&&Xe&&(W&&Ae&&je||!W))return bt}return null},ge=(Fe,je,$e,Ve,Ce,Re)=>{const Ae=je?`calc(100% - ${Re.right+4}px)`:Re.left-4+"px",bt=je?"7px":"-7px",W=je?"-4px":"4px",Xe=je?"-4px":"4px",Ge=je?"right":"left",Je=je?"left":"right",qe=$e?[{offset:0,opacity:1,transform:`translate3d(${W}, ${Re.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${bt}, ${Ce.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${bt}, ${Ce.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${W}, ${Re.top-46}px, 0) scale(1)`}],fe=$e?[{offset:0,opacity:1,transform:`translate3d(${Xe}, ${Re.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Xe}, ${Re.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Xe}, ${Re.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Xe}, ${Re.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Xe}, ${Re.top-46}px, 0) scale(1)`}],le=(0,d.c)(),Qe=(0,d.c)(),Tt=De("ion-back-button"),Gt=_e(Tt).querySelector(".button-text"),Et=_e(Tt).querySelector("ion-icon");Tt.text=Ve.text,Tt.mode=Ve.mode,Tt.icon=Ve.icon,Tt.color=Ve.color,Tt.disabled=Ve.disabled,Tt.style.setProperty("display","block"),Tt.style.setProperty("position","fixed"),Qe.addElement(Et),le.addElement(Gt),le.beforeStyles({"transform-origin":`${Ge} center`}).beforeAddWrite(()=>{Ve.style.setProperty("display","none"),Tt.style.setProperty(Ge,Ae)}).afterAddWrite(()=>{Ve.style.setProperty("display",""),Tt.style.setProperty("display","none"),Tt.style.removeProperty(Ge)}).keyframes(qe),Qe.beforeStyles({"transform-origin":`${Je} center`}).keyframes(fe),Fe.addAnimation([le,Qe])},me=(Fe,je,$e,Ve,Ce,Re)=>{const Ae=je?`calc(100% - ${Ce.right}px)`:`${Ce.left}px`,bt=je?"-18px":"18px",W=je?"right":"left",Je=$e?[{offset:0,opacity:0,transform:`translate3d(${bt}, ${Re.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ce.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ce.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${bt}, ${Re.top-4}px, 0) scale(0.5)`}],et=De("ion-title"),ee=(0,d.c)();et.innerText=Ve.innerText,et.size=Ve.size,et.color=Ve.color,ee.addElement(et),ee.beforeStyles({"transform-origin":`${W} center`,height:"46px",display:"",position:"relative",[W]:Ae}).beforeAddWrite(()=>{Ve.style.setProperty("display","none")}).afterAddWrite(()=>{Ve.style.setProperty("display",""),et.style.setProperty("display","none")}).keyframes(Je),Fe.addAnimation(ee)},Te=(Fe,je)=>{try{const $e="cubic-bezier(0.32,0.72,0,1)",Ve="opacity",Ce="transform",Re="0%",bt="rtl"===Fe.ownerDocument.dir,W=bt?"-99.5%":"99.5%",Xe=bt?"33%":"-33%",Ge=je.enteringEl,Je=je.leavingEl,et="back"===je.direction,ee=Ge.querySelector(":scope > ion-content"),qe=Ge.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),he=Ge.querySelectorAll(":scope > ion-header > ion-toolbar"),pe=(0,d.c)(),fe=(0,d.c)();if(pe.addElement(Ge).duration(je.duration||540).easing(je.easing||$e).fill("both").beforeRemoveClass("ion-page-invisible"),Je&&Fe){const Gt=(0,d.c)();Gt.addElement(Fe),pe.addAnimation(Gt)}if(ee||0!==he.length||0!==qe.length?(fe.addElement(ee),fe.addElement(qe)):fe.addElement(Ge.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),pe.addAnimation(fe),et?fe.beforeClearStyles([Ve]).fromTo("transform",`translateX(${Xe})`,`translateX(${Re})`).fromTo(Ve,.8,1):fe.beforeClearStyles([Ve]).fromTo("transform",`translateX(${W})`,`translateX(${Re})`),ee){const Gt=_e(ee).querySelector(".transition-effect");if(Gt){const Et=Gt.querySelector(".transition-cover"),yt=Gt.querySelector(".transition-shadow"),Be=(0,d.c)(),be=(0,d.c)(),Ye=(0,d.c)();Be.addElement(Gt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),be.addElement(Et).beforeClearStyles([Ve]).fromTo(Ve,0,.1),Ye.addElement(yt).beforeClearStyles([Ve]).fromTo(Ve,.03,.7),Be.addAnimation([be,Ye]),fe.addAnimation([Be])}}const le=Ge.querySelector("ion-header.header-collapse-condense"),{forward:Qe,backward:Tt}=((Fe,je,$e,Ve,Ce)=>{const Re=ze(Ve,$e),Ae=ve(Ce),bt=ve(Ve),W=ze(Ce,$e),Xe=null!==Re&&null!==Ae&&!$e,Ge=null!==bt&&null!==W&&$e;if(Xe){const Je=Ae.getBoundingClientRect(),et=Re.getBoundingClientRect();me(Fe,je,$e,Ae,Je,et),ge(Fe,je,$e,Re,Je,et)}else if(Ge){const Je=bt.getBoundingClientRect(),et=W.getBoundingClientRect();me(Fe,je,$e,bt,Je,et),ge(Fe,je,$e,W,Je,et)}return{forward:Xe,backward:Ge}})(pe,bt,et,Ge,Je);if(he.forEach(Gt=>{const Et=(0,d.c)();Et.addElement(Gt),pe.addAnimation(Et);const yt=(0,d.c)();yt.addElement(Gt.querySelector("ion-title"));const Be=(0,d.c)(),be=Array.from(Gt.querySelectorAll("ion-buttons,[menuToggle]")),Ye=Gt.closest("ion-header"),Ie=Ye?.classList.contains("header-collapse-condense-inactive");let st;st=be.filter(et?hn=>{const Dn=hn.classList.contains("buttons-collapse");return Dn&&!Ie||!Dn}:hn=>!hn.classList.contains("buttons-collapse")),Be.addElement(st);const Rt=(0,d.c)();Rt.addElement(Gt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const vt=(0,d.c)();vt.addElement(_e(Gt).querySelector(".toolbar-background"));const Vt=(0,d.c)(),fn=Gt.querySelector("ion-back-button");if(fn&&Vt.addElement(fn),Et.addAnimation([yt,Be,Rt,vt,Vt]),Be.fromTo(Ve,.01,1),Rt.fromTo(Ve,.01,1),et)Ie||yt.fromTo("transform",`translateX(${Xe})`,`translateX(${Re})`).fromTo(Ve,.01,1),Rt.fromTo("transform",`translateX(${Xe})`,`translateX(${Re})`),Vt.fromTo(Ve,.01,1);else if(le||yt.fromTo("transform",`translateX(${W})`,`translateX(${Re})`).fromTo(Ve,.01,1),Rt.fromTo("transform",`translateX(${W})`,`translateX(${Re})`),vt.beforeClearStyles([Ve,"transform"]),Ye?.translucent?vt.fromTo("transform",bt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):vt.fromTo(Ve,.01,"var(--opacity)"),Qe||Vt.fromTo(Ve,.01,1),fn&&!Qe){const Dn=(0,d.c)();Dn.addElement(_e(fn).querySelector(".button-text")).fromTo("transform",bt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Et.addAnimation(Dn)}}),Je){const Gt=(0,d.c)(),Et=Je.querySelector(":scope > ion-content"),yt=Je.querySelectorAll(":scope > ion-header > ion-toolbar"),Be=Je.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Et||0!==yt.length||0!==Be.length?(Gt.addElement(Et),Gt.addElement(Be)):Gt.addElement(Je.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),pe.addAnimation(Gt),et){Gt.beforeClearStyles([Ve]).fromTo("transform",`translateX(${Re})`,bt?"translateX(-100%)":"translateX(100%)");const be=(0,O.g)(Je);pe.afterAddWrite(()=>{"normal"===pe.getDirection()&&be.style.setProperty("display","none")})}else Gt.fromTo("transform",`translateX(${Re})`,`translateX(${Xe})`).fromTo(Ve,1,.8);if(Et){const be=_e(Et).querySelector(".transition-effect");if(be){const Ye=be.querySelector(".transition-cover"),Ie=be.querySelector(".transition-shadow"),st=(0,d.c)(),Rt=(0,d.c)(),vt=(0,d.c)();st.addElement(be).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Rt.addElement(Ye).beforeClearStyles([Ve]).fromTo(Ve,.1,0),vt.addElement(Ie).beforeClearStyles([Ve]).fromTo(Ve,.7,.03),st.addAnimation([Rt,vt]),Gt.addAnimation([st])}}yt.forEach(be=>{const Ye=(0,d.c)();Ye.addElement(be);const Ie=(0,d.c)();Ie.addElement(be.querySelector("ion-title"));const st=(0,d.c)(),Rt=be.querySelectorAll("ion-buttons,[menuToggle]"),vt=be.closest("ion-header"),Vt=vt?.classList.contains("header-collapse-condense-inactive"),fn=Array.from(Rt).filter(Qt=>{const kn=Qt.classList.contains("buttons-collapse");return kn&&!Vt||!kn});st.addElement(fn);const hn=(0,d.c)(),Dn=be.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Dn.length>0&&hn.addElement(Dn);const Zt=(0,d.c)();Zt.addElement(_e(be).querySelector(".toolbar-background"));const In=(0,d.c)(),En=be.querySelector("ion-back-button");if(En&&In.addElement(En),Ye.addAnimation([Ie,st,hn,In,Zt]),pe.addAnimation(Ye),In.fromTo(Ve,.99,0),st.fromTo(Ve,.99,0),hn.fromTo(Ve,.99,0),et){if(Vt||Ie.fromTo("transform",`translateX(${Re})`,bt?"translateX(-100%)":"translateX(100%)").fromTo(Ve,.99,0),hn.fromTo("transform",`translateX(${Re})`,bt?"translateX(-100%)":"translateX(100%)"),Zt.beforeClearStyles([Ve,"transform"]),vt?.translucent?Zt.fromTo("transform","translateX(0px)",bt?"translateX(-100%)":"translateX(100%)"):Zt.fromTo(Ve,"var(--opacity)",0),En&&!Tt){const kn=(0,d.c)();kn.addElement(_e(En).querySelector(".button-text")).fromTo("transform",`translateX(${Re})`,`translateX(${(bt?-124:124)+"px"})`),Ye.addAnimation(kn)}}else Vt||Ie.fromTo("transform",`translateX(${Re})`,`translateX(${Xe})`).fromTo(Ve,.99,0).afterClearStyles([Ce,Ve]),hn.fromTo("transform",`translateX(${Re})`,`translateX(${Xe})`).afterClearStyles([Ce,Ve]),In.afterClearStyles([Ve]),Ie.afterClearStyles([Ve]),st.afterClearStyles([Ve])})}return pe}catch($e){throw $e}}},5980:(sn,mt,B)=>{"use strict";B.r(mt),B.d(mt,{mdTransitionAnimation:()=>He});var d=B(9442),O=B(9753);B(7205);const He=(De,_e)=>{const Le="back"===_e.direction,me=_e.leavingEl,Te=(0,O.g)(_e.enteringEl),Fe=Te.querySelector("ion-toolbar"),je=(0,d.c)();if(je.addElement(Te).fill("both").beforeRemoveClass("ion-page-invisible"),Le?je.duration(_e.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):je.duration(_e.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Fe){const $e=(0,d.c)();$e.addElement(Fe),je.addAnimation($e)}if(me&&Le){je.duration(_e.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const $e=(0,d.c)();$e.addElement((0,O.g)(me)).onFinish(Ve=>{1===Ve&&$e.elements.length>0&&$e.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),je.addAnimation($e)}return je}},3280:(sn,mt,B)=>{"use strict";B.d(mt,{B:()=>Be,a:()=>ze,b:()=>Le,c:()=>Fe,d:()=>qe,e:()=>$e,f:()=>pe,g:()=>Qe,h:()=>_e,i:()=>Gt,j:()=>Re,k:()=>et,m:()=>me,s:()=>yt});var d=B(5861),O=B(5729),Z=B(7593),He=B(3756);let De=0;const _e=new WeakMap,ve=be=>({create:Ye=>Ve(be,Ye),dismiss:(Ye,Ie,st)=>Ge(document,Ye,Ie,be,st),getTop:()=>(0,d.Z)(function*(){return et(document,be)})()}),ze=ve("ion-alert"),Le=ve("ion-action-sheet"),me=ve("ion-modal"),Fe=ve("ion-popover"),$e=be=>{typeof document<"u"&&Xe(document);const Ye=De++;be.overlayIndex=Ye,be.hasAttribute("id")||(be.id=`ion-overlay-${Ye}`)},Ve=(be,Ye)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(be).then(()=>{const Ie=document.createElement(be);return Ie.classList.add("overlay-hidden"),Object.assign(Ie,Object.assign(Object.assign({},Ye),{hasController:!0})),fe(document).appendChild(Ie),new Promise(st=>(0,He.c)(Ie,st))}):Promise.resolve(),Ce='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Re=(be,Ye)=>{let Ie=be.querySelector(Ce);const st=Ie?.shadowRoot;st&&(Ie=st.querySelector(Ce)||Ie),Ie?(0,He.f)(Ie):Ye.focus()},bt=(be,Ye)=>{const Ie=Array.from(be.querySelectorAll(Ce));let st=Ie.length>0?Ie[Ie.length-1]:null;const Rt=st?.shadowRoot;Rt&&(st=Rt.querySelector(Ce)||st),st?st.focus():Ye.focus()},Xe=be=>{0===De&&(De=1,be.addEventListener("focus",Ye=>{((be,Ye)=>{const Ie=et(Ye,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),st=be.target;Ie&&st&&!Ie.classList.contains("ion-disable-focus-trap")&&(Ie.shadowRoot?(()=>{if(Ie.contains(st))Ie.lastFocus=st;else{const Vt=Ie.lastFocus;Re(Ie,Ie),Vt===Ye.activeElement&&bt(Ie,Ie),Ie.lastFocus=Ye.activeElement}})():(()=>{if(Ie===st)Ie.lastFocus=void 0;else{const Vt=(0,He.g)(Ie);if(!Vt.contains(st))return;const fn=Vt.querySelector(".ion-overlay-wrapper");if(!fn)return;if(fn.contains(st))Ie.lastFocus=st;else{const hn=Ie.lastFocus;Re(fn,Ie),hn===Ye.activeElement&&bt(fn,Ie),Ie.lastFocus=Ye.activeElement}}})())})(Ye,be)},!0),be.addEventListener("ionBackButton",Ye=>{const Ie=et(be);Ie?.backdropDismiss&&Ye.detail.register(Z.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ie.dismiss(void 0,Be))}),be.addEventListener("keyup",Ye=>{if("Escape"===Ye.key){const Ie=et(be);Ie?.backdropDismiss&&Ie.dismiss(void 0,Be)}}))},Ge=(be,Ye,Ie,st,Rt)=>{const vt=et(be,st,Rt);return vt?vt.dismiss(Ye,Ie):Promise.reject("overlay does not exist")},et=(be,Ye,Ie)=>{const st=((be,Ye)=>(void 0===Ye&&(Ye="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(be.querySelectorAll(Ye)).filter(Ie=>Ie.overlayIndex>0)))(be,Ye).filter(Rt=>!(be=>be.classList.contains("overlay-hidden"))(Rt));return void 0===Ie?st[st.length-1]:st.find(Rt=>Rt.id===Ie)},ee=(be=!1)=>{const Ie=fe(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Ie||(be?Ie.setAttribute("aria-hidden","true"):Ie.removeAttribute("aria-hidden"))},qe=function(){var be=(0,d.Z)(function*(Ye,Ie,st,Rt,vt){var Vt,fn;if(Ye.presented)return;ee(!0),Ye.presented=!0,Ye.willPresent.emit(),null===(Vt=Ye.willPresentShorthand)||void 0===Vt||Vt.emit();const hn=(0,O.b)(Ye),Dn=Ye.enterAnimation?Ye.enterAnimation:O.c.get(Ie,"ios"===hn?st:Rt);(yield le(Ye,Dn,Ye.el,vt))&&(Ye.didPresent.emit(),null===(fn=Ye.didPresentShorthand)||void 0===fn||fn.emit()),"ION-TOAST"!==Ye.el.tagName&&he(Ye.el),Ye.keyboardClose&&(null===document.activeElement||!Ye.el.contains(document.activeElement))&&Ye.el.focus()});return function(Ie,st,Rt,vt,Vt){return be.apply(this,arguments)}}(),he=function(){var be=(0,d.Z)(function*(Ye){let Ie=document.activeElement;if(!Ie)return;const st=Ie?.shadowRoot;st&&(Ie=st.querySelector(Ce)||Ie),yield Ye.onDidDismiss(),Ie.focus()});return function(Ie){return be.apply(this,arguments)}}(),pe=function(){var be=(0,d.Z)(function*(Ye,Ie,st,Rt,vt,Vt,fn){var hn,Dn;if(!Ye.presented)return!1;ee(!1),Ye.presented=!1;try{Ye.el.style.setProperty("pointer-events","none"),Ye.willDismiss.emit({data:Ie,role:st}),null===(hn=Ye.willDismissShorthand)||void 0===hn||hn.emit({data:Ie,role:st});const Zt=(0,O.b)(Ye),In=Ye.leaveAnimation?Ye.leaveAnimation:O.c.get(Rt,"ios"===Zt?vt:Vt);"gesture"!==st&&(yield le(Ye,In,Ye.el,fn)),Ye.didDismiss.emit({data:Ie,role:st}),null===(Dn=Ye.didDismissShorthand)||void 0===Dn||Dn.emit({data:Ie,role:st}),_e.delete(Ye),Ye.el.classList.add("overlay-hidden"),Ye.el.style.removeProperty("pointer-events")}catch(Zt){console.error(Zt)}return Ye.el.remove(),!0});return function(Ie,st,Rt,vt,Vt,fn,hn){return be.apply(this,arguments)}}(),fe=be=>be.querySelector("ion-app")||be.body,le=function(){var be=(0,d.Z)(function*(Ye,Ie,st,Rt){st.classList.remove("overlay-hidden");const Vt=Ie(Ye.el,Rt);(!Ye.animated||!O.c.getBoolean("animated",!0))&&Vt.duration(0),Ye.keyboardClose&&Vt.beforeAddWrite(()=>{const hn=st.ownerDocument.activeElement;hn?.matches("input,ion-input, ion-textarea")&&hn.blur()});const fn=_e.get(Ye)||[];return _e.set(Ye,[...fn,Vt]),yield Vt.play(),!0});return function(Ie,st,Rt,vt){return be.apply(this,arguments)}}(),Qe=(be,Ye)=>{let Ie;const st=new Promise(Rt=>Ie=Rt);return Tt(be,Ye,Rt=>{Ie(Rt.detail)}),st},Tt=(be,Ye,Ie)=>{const st=Rt=>{(0,He.b)(be,Ye,st),Ie(Rt)};(0,He.a)(be,Ye,st)},Gt=be=>"cancel"===be||be===Be,Et=be=>be(),yt=(be,Ye)=>{if("function"==typeof be)return O.c.get("_zoneGate",Et)(()=>{try{return be(Ye)}catch(st){throw st}})},Be="backdrop"},9019:(sn,mt,B)=>{"use strict";B.d(mt,{Dq:()=>He,NC:()=>Z,qY:()=>O,qe:()=>De});const O=[{title:"Presentazione dell'iniziativa e creazione dei team",icon:"../../../assets/imgs/rocket.svg",date:"Novembre",position:"left"},{title:"Introduzione all'uso delle tecnologie ICT per la sostenibilit\xe0",icon:"../../../assets/imgs/smartphone.svg",date:"Novembre",position:"right"},{title:"Introduzione a Design Thinking ",icon:"../../../assets/imgs/light-bulb.svg",date:"Dicembre",position:"left"},{title:"Introduzione al coding con MIT Appinventor(3 lezioni)",icon:"../../../assets/imgs/coding.svg",date:"Gennaio - Febbraio",position:"right"},{title:"Introduzione al public speaking e social networking",icon:"../../../assets/imgs/presentation.svg",date:"Marzo",position:"left"},{title:"Selezione dei 10 migliori progetti",icon:"../../../assets/imgs/pitch.svg",date:"Aprile",position:"right"},{title:"Premiazione e party",icon:"../../../assets/imgs/podium.svg",date:"Maggio",position:"left"}],Z=[{link:"",title:"Matierale 1",description:"addiction information about the selected material"},{link:"",title:"Matierale 1",description:"addiction information about the selected material"},{link:"",title:"Matierale 1",description:"addiction information about the selected material"},{link:"",title:"Matierale 1",description:"addiction information about the selected material"},{link:"",title:"Matierale 1",description:"addiction information about the selected material"},{link:"",title:"Matierale 1",description:"addiction information about the selected material"}],He=[{title:"titolo 1",subtitle:"testo di prova da sistemare",id:"w",img:"../../../assets/imgs/coding.jpg"},{title:"titolo 1",subtitle:"testo di prova da sistemare",id:"w",img:"../../../assets/imgs/coding.jpg"},{title:"titolo 1",subtitle:"testo di prova da sistemare",id:"w",img:"../../../assets/imgs/coding.jpg"}],De={apiKey:"AIzaSyCXTejBwKeI8nk_Eq9Bz4P03HDVTcs0rqU",authDomain:"g4greta-41bec.firebaseapp.com",projectId:"g4greta-41bec",storageBucket:"g4greta-41bec.appspot.com",messagingSenderId:"790488105135",appId:"1:790488105135:web:0f3fb3c7f553f771d1545a",measurementId:"G-VPHHLKY640"}},4223:(sn,mt,B)=>{"use strict";var d=B(1481),O=B(4650),Z=B(2485),He=B(9928);let De=(()=>{class u{constructor(){}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275cmp=O.Xpm({type:u,selectors:[["app-root"]],decls:2,vars:0,template:function(l,p){1&l&&(O.TgZ(0,"ion-app"),O._UZ(1,"ion-router-outlet"),O.qZA())},dependencies:[He.dr,He.jP]}),u})();const _e=[{path:"home",loadChildren:()=>Promise.all([B.e(2378),B.e(627)]).then(B.bind(B,627)).then(u=>u.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"news-page",loadChildren:()=>Promise.all([B.e(2378),B.e(1467)]).then(B.bind(B,1467)).then(u=>u.NewsPagePageModule)},{path:"add-news",loadChildren:()=>Promise.all([B.e(2378),B.e(369)]).then(B.bind(B,369)).then(u=>u.AddNewsPageModule)}];let ve=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=O.oAB({type:u}),u.\u0275inj=O.cJS({imports:[Z.Bz.forRoot(_e,{preloadingStrategy:Z.wm,anchorScrolling:"enabled",scrollPositionRestoration:"enabled",useHash:!1}),Z.Bz]}),u})();var ze=B(8635),Le=B(2011),ge=B(3385),me=B(8306),Te=B(9646),Fe=B(8996),je=B(8372),$e=B(4004),Ve=B(3900),Ce=B(5813),Re=B(3942),Ae=B(5861),bt=B(9681),W=B(2090),Xe=B(4859);const Ge="firebasestorage.googleapis.com",Je="storageBucket";class qe extends W.ZR{constructor(a,l){super(he(a),`Firebase Storage: ${l} (${he(a)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}_codeEquals(a){return he(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function he(u){return"storage/"+u}function pe(){return new qe("unknown","An unknown error occurred, please check the error payload for server response.")}function yt(){return new qe("canceled","User canceled the upload/download.")}function Ie(){return new qe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function vt(u){return new qe("invalid-argument",u)}function Vt(){return new qe("app-deleted","The Firebase app was deleted.")}function fn(u){return new qe("invalid-root-operation","The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hn(u,a){return new qe("invalid-format","String does not match format '"+u+"': "+a)}function Dn(u){throw new qe("internal-error","Internal error: "+u)}class Zt{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let p;try{p=Zt.makeFromUrl(a,l)}catch{return new Zt(a,"")}if(""===p.path)return p;throw function be(u){return new qe("invalid-default-bucket","Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let p=null;const _="([A-Za-z0-9.\\-_]+)",X=new RegExp("^gs://"+_+"(/(.*))?$","i");function Se(as){as.path_=decodeURIComponent(as.path)}const St=l.replace(/[.]/g,"\\."),Ds=[{regex:X,indices:{bucket:1,path:3},postModify:function S(as){"/"===as.path.charAt(as.path.length-1)&&(as.path_=as.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${St}/v[A-Za-z0-9_]+/b/${_}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Se},{regex:new RegExp(`^https?://${l===Ge?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${_}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Se}];for(let as=0;as<Ds.length;as++){const $u=Ds[as],sd=$u.regex.exec(a);if(sd){let Tc=sd[$u.indices.path];Tc||(Tc=""),p=new Zt(sd[$u.indices.bucket],Tc),$u.postModify(p);break}}if(null==p)throw function Be(u){return new qe("invalid-url","Invalid URL '"+u+"'.")}(a);return p}}class In{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Zn(u){return"string"==typeof u||u instanceof String}function rr(u){return yr()&&u instanceof Blob}function yr(){return typeof Blob<"u"}function gi(u,a,l,p){if(p<a)throw vt(`Invalid value for '${u}'. Expected ${a} or greater.`);if(p>l)throw vt(`Invalid value for '${u}'. Expected ${l} or less.`)}function dr(u,a,l){let p=a;return null==l&&(p=`https://${a}`),`${l}://${p}/v0${u}`}function ei(u){const a=encodeURIComponent;let l="?";for(const p in u)u.hasOwnProperty(p)&&(l=l+(a(p)+"=")+a(u[p])+"&");return l=l.slice(0,-1),l}var qr=(()=>{return(u=qr||(qr={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",qr;var u})();class mi{constructor(a,l,p,_,S,k,X,ae,Se,wt,St){this.url_=a,this.method_=l,this.headers_=p,this.body_=_,this.successCodes_=S,this.additionalRetryCodes_=k,this.callback_=X,this.errorCallback_=ae,this.timeout_=Se,this.progressCallback_=wt,this.connectionFactory_=St,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($t,Sn)=>{this.resolve_=$t,this.reject_=Sn,this.start_()})}start_(){const l=(p,_)=>{const S=this.resolve_,k=this.reject_,X=_.connection;if(_.wasSuccessCode)try{const ae=this.callback_(X,X.getResponse());!function kn(u){return void 0!==u}(ae)?S():S(ae)}catch(ae){k(ae)}else if(null!==X){const ae=pe();ae.serverResponse=X.getErrorText(),k(this.errorCallback_?this.errorCallback_(X,ae):ae)}else k(_.canceled?this.appDelete_?Vt():yt():function Et(){return new qe("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?l(0,new Yn(!1,null,!0)):this.backoffId_=function En(u,a,l){let p=1,_=null,S=null,k=!1,X=0;function ae(){return 2===X}let Se=!1;function wt(...Kr){Se||(Se=!0,a.apply(null,Kr))}function St(Kr){_=setTimeout(()=>{_=null,u(Sn,ae())},Kr)}function $t(){S&&clearTimeout(S)}function Sn(Kr,...uo){if(Se)return void $t();if(Kr)return $t(),void wt.call(null,Kr,...uo);if(ae()||k)return $t(),void wt.call(null,Kr,...uo);let Ds;p<64&&(p*=2),1===X?(X=2,Ds=0):Ds=1e3*(p+Math.random()),St(Ds)}let $n=!1;function Br(Kr){$n||($n=!0,$t(),!Se&&(null!==_?(Kr||(X=2),clearTimeout(_),St(0)):Kr||(X=1)))}return St(0),S=setTimeout(()=>{k=!0,Br(!0)},l),Br}((p,_)=>{if(_)return void p(!1,new Yn(!1,null,!0));const S=this.connectionFactory_();this.pendingConnection_=S;const k=X=>{null!==this.progressCallback_&&this.progressCallback_(X.loaded,X.lengthComputable?X.total:-1)};null!==this.progressCallback_&&S.addUploadProgressListener(k),S.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&S.removeUploadProgressListener(k),this.pendingConnection_=null;const X=S.getErrorCode()===qr.NO_ERROR,ae=S.getStatus();if(!X||this.isRetryStatusCode_(ae)){const wt=S.getErrorCode()===qr.ABORT;return void p(!1,new Yn(!1,null,wt))}const Se=-1!==this.successCodes_.indexOf(ae);p(!0,new Yn(Se,S))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function Qt(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(a){const l=a>=500&&a<600,_=-1!==[408,429].indexOf(a),S=-1!==this.additionalRetryCodes_.indexOf(a);return l||_||S}}class Yn{constructor(a,l,p){this.wasSuccessCode=a,this.connection=l,this.canceled=!!p}}function Zr(...u){const a=function hi(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let p=0;p<u.length;p++)l.append(u[p]);return l.getBlob()}if(yr())return new Blob(u);throw new qe("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ke{constructor(a,l){this.data=a,this.contentType=l||null}}function Ze(u,a){switch(u){case Pr.RAW:return new Ke(Ue(a));case Pr.BASE64:case Pr.BASE64URL:return new Ke(We(u,a));case Pr.DATA_URL:return new Ke(function Yt(u){const a=new zt(u);return a.base64?We(Pr.BASE64,a.rest):function tt(u){let a;try{a=decodeURIComponent(u)}catch{throw hn(Pr.DATA_URL,"Malformed data URL.")}return Ue(a)}(a.rest)}(a),function un(u){return new zt(u).contentType}(a))}throw pe()}function Ue(u){const a=[];for(let l=0;l<u.length;l++){let p=u.charCodeAt(l);p<=127?a.push(p):p<=2047?a.push(192|p>>6,128|63&p):55296==(64512&p)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(p=65536|(1023&p)<<10|1023&u.charCodeAt(++l),a.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|63&p)):a.push(239,191,189):56320==(64512&p)?a.push(239,191,189):a.push(224|p>>12,128|p>>6&63,128|63&p)}return new Uint8Array(a)}function We(u,a){switch(u){case Pr.BASE64:{const _=-1!==a.indexOf("-"),S=-1!==a.indexOf("_");if(_||S)throw hn(u,"Invalid character '"+(_?"-":"_")+"' found: is it base64url encoded?");break}case Pr.BASE64URL:{const _=-1!==a.indexOf("+"),S=-1!==a.indexOf("/");if(_||S)throw hn(u,"Invalid character '"+(_?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Er(u){return atob(u)}(a)}catch{throw hn(u,"Invalid character found")}const p=new Uint8Array(l.length);for(let _=0;_<l.length;_++)p[_]=l.charCodeAt(_);return p}class zt{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw hn(Pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const p=l[1]||null;null!=p&&(this.base64=function ar(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(p,";base64"),this.contentType=this.base64?p.substring(0,p.length-7):p),this.rest=a.substring(a.indexOf(",")+1)}}class On{constructor(a,l){let p=0,_="";rr(a)?(this.data_=a,p=a.size,_=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),p=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),p=a.length),this.size_=p,this.type_=_}size(){return this.size_}type(){return this.type_}slice(a,l){if(rr(this.data_)){const _=function ti(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===_?null:new On(_)}{const p=new Uint8Array(this.data_.buffer,a,l-a);return new On(p,!0)}}static getBlob(...a){if(yr()){const l=a.map(p=>p instanceof On?p.data_:p);return new On(Zr.apply(null,l))}{const l=a.map(k=>Zn(k)?Ze(Pr.RAW,k).data:k.data_);let p=0;l.forEach(k=>{p+=k.byteLength});const _=new Uint8Array(p);let S=0;return l.forEach(k=>{for(let X=0;X<k.length;X++)_[S++]=k[X]}),new On(_,!0)}}uploadData(){return this.data_}}function ir(u){let a;try{a=JSON.parse(u)}catch{return null}return function Sr(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function Ar(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function Ur(u,a){return a}class or{constructor(a,l,p,_){this.server=a,this.local=l||a,this.writable=!!p,this.xform=_||Ur}}let Xr=null;function jn(){if(Xr)return Xr;const u=[];u.push(new or("bucket")),u.push(new or("generation")),u.push(new or("metageneration")),u.push(new or("name","fullPath",!0));const l=new or("name");l.xform=function a(S,k){return function on(u){return!Zn(u)||u.length<2?u:Ar(u)}(k)},u.push(l);const _=new or("size");return _.xform=function p(S,k){return void 0!==k?Number(k):k},u.push(_),u.push(new or("timeCreated")),u.push(new or("updated")),u.push(new or("md5Hash",null,!0)),u.push(new or("cacheControl",null,!0)),u.push(new or("contentDisposition",null,!0)),u.push(new or("contentEncoding",null,!0)),u.push(new or("contentLanguage",null,!0)),u.push(new or("contentType",null,!0)),u.push(new or("metadata","customMetadata",!0)),Xr=u,Xr}function Me(u,a,l){const p=ir(a);return null===p?null:function ke(u,a,l){const p={type:"file"},_=l.length;for(let S=0;S<_;S++){const k=l[S];p[k.local]=k.xform(p,a[k.server])}return function ut(u,a){Object.defineProperty(u,"ref",{get:function l(){const S=new Zt(u.bucket,u.fullPath);return a._makeStorageReference(S)}})}(p,u),p}(u,p,l)}function Ut(u,a){const l={},p=a.length;for(let _=0;_<p;_++){const S=a[_];S.writable&&(l[S.server]=u[S.local])}return JSON.stringify(l)}const pn="prefixes";class er{constructor(a,l,p,_){this.url=a,this.method=l,this.handler=p,this.timeout=_,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function tr(u){if(!u)throw pe()}function ri(u,a){return function l(p,_){const S=Me(u,_,a);return tr(null!==S),S}}function kr(u){return function a(l,p){let _;return _=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Tt(){return new qe("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Qe(){return new qe("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function le(u){return new qe("quota-exceeded","Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function Gt(u){return new qe("unauthorized","User does not have permission to access '"+u+"'.")}(u.path):p,_.serverResponse=p.serverResponse,_}}function Si(u){const a=kr(u);return function l(p,_){let S=a(p,_);return 404===p.getStatus()&&(S=function fe(u){return new qe("object-not-found","Object '"+u+"' does not exist.")}(u.path)),S.serverResponse=_.serverResponse,S}}function ii(u,a,l){const _=dr(a.fullServerUrl(),u.host,u._protocol),k=u.maxOperationRetryTime,X=new er(_,"GET",ri(u,l),k);return X.errorHandler=Si(a),X}function Ai(u,a,l,p,_){const S={};S.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(S.delimiter=l),p&&(S.pageToken=p),_&&(S.maxResults=_);const X=dr(a.bucketOnlyServerUrl(),u.host,u._protocol),Se=u.maxOperationRetryTime,wt=new er(X,"GET",function Fi(u,a){return function l(p,_){const S=function gn(u,a,l){const p=ir(l);return null===p?null:function hr(u,a,l){const p={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[pn])for(const _ of l[pn]){const S=_.replace(/\/$/,""),k=u._makeStorageReference(new Zt(a,S));p.prefixes.push(k)}if(l.items)for(const _ of l.items){const S=u._makeStorageReference(new Zt(a,_.name));p.items.push(S)}return p}(u,a,p)}(u,a,_);return tr(null!==S),S}}(u,a.bucket),Se);return wt.urlParams=S,wt.errorHandler=kr(a),wt}function Li(u,a,l){const p=Object.assign({},l);return p.fullPath=u.path,p.size=a.size(),p.contentType||(p.contentType=function ts(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),p}class xi{constructor(a,l,p,_){this.current=a,this.total=l,this.finalized=!!p,this.metadata=_||null}}function Ei(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch{tr(!1)}return tr(!!l&&-1!==(a||["active"]).indexOf(l)),l}const we={STATE_CHANGED:"state_changed"},Pe={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gt(u){switch(u){case"running":case"pausing":case"canceling":return Pe.RUNNING;case"paused":return Pe.PAUSED;case"success":return Pe.SUCCESS;case"canceled":return Pe.CANCELED;default:return Pe.ERROR}}class Lt{constructor(a,l,p){if(function Dt(u){return"function"==typeof u}(a)||null!=l||null!=p)this.next=a,this.error=l??void 0,this.complete=p??void 0;else{const S=a;this.next=S.next,this.error=S.error,this.complete=S.complete}}}function Ot(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}class Fn extends class yn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qr.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qr.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qr.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,p,_){if(this.sent_)throw Dn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==_)for(const S in _)_.hasOwnProperty(S)&&this.xhr_.setRequestHeader(S,_[S].toString());return void 0!==p?this.xhr_.send(p):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}{initXhr(){this.xhr_.responseType="text"}}function Wn(){return new Fn}class _t{constructor(a,l,p=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=p,this._mappings=jn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=_=>{this._request=void 0,this._chunkMultiplier=1,_._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=_,this._transition("error"))},this._metadataErrorHandler=_=>{this._request=void 0,_._codeEquals("canceled")?this.completeTransitions_():(this._error=_,this._transition("error"))},this._promise=new Promise((_,S)=>{this._resolve=_,this._reject=S,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,p])=>{switch(this._state){case"running":a(l,p);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const p=function te(u,a,l,p,_){const S=a.bucketOnlyServerUrl(),k=Li(a,p,_),X={name:k.fullPath},ae=dr(S,u.host,u._protocol),wt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${p.size()}`,"X-Goog-Upload-Header-Content-Type":k.contentType,"Content-Type":"application/json; charset=utf-8"},St=Ut(k,l),$n=new er(ae,"POST",function Sn(Br){let Kr;Ei(Br);try{Kr=Br.getResponseHeader("X-Goog-Upload-URL")}catch{tr(!1)}return tr(Zn(Kr)),Kr},u.maxUploadRetryTime);return $n.urlParams=X,$n.headers=wt,$n.body=St,$n.errorHandler=kr(a),$n}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(p,Wn,a,l);this._request=_,_.getPromise().then(S=>{this._request=void 0,this._uploadUrl=S,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,p)=>{const _=function Ee(u,a,l,p){const ae=new er(l,"POST",function S(Se){const wt=Ei(Se,["active","final"]);let St=null;try{St=Se.getResponseHeader("X-Goog-Upload-Size-Received")}catch{tr(!1)}St||tr(!1);const $t=Number(St);return tr(!isNaN($t)),new xi($t,p.size(),"final"===wt)},u.maxUploadRetryTime);return ae.headers={"X-Goog-Upload-Command":"query"},ae.errorHandler=kr(a),ae}(this._ref.storage,this._ref._location,a,this._blob),S=this._ref.storage._makeRequest(_,Wn,l,p);this._request=S,S.getPromise().then(k=>{this._request=void 0,this._updateProgress(k.current),this._needToFetchStatus=!1,k.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new xi(this._transferred,this._blob.size()),p=this._uploadUrl;this._resolveToken((_,S)=>{let k;try{k=function dt(u,a,l,p,_,S,k,X){const ae=new xi(0,0);if(k?(ae.current=k.current,ae.total=k.total):(ae.current=0,ae.total=p.size()),p.size()!==ae.total)throw function st(){return new qe("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Se=ae.total-ae.current;let wt=Se;_>0&&(wt=Math.min(wt,_));const St=ae.current,$n={"X-Goog-Upload-Command":wt===Se?"upload, finalize":"upload","X-Goog-Upload-Offset":`${ae.current}`},Br=p.slice(St,St+wt);if(null===Br)throw Ie();const Ds=new er(l,"POST",function Kr(as,$u){const sd=Ei(as,["active","final"]),Yf=ae.current+wt,Tc=p.size();let Jp;return Jp="final"===sd?ri(a,S)(as,$u):null,new xi(Yf,Tc,"final"===sd,Jp)},a.maxUploadRetryTime);return Ds.headers=$n,Ds.body=Br.uploadData(),Ds.progressCallback=X||null,Ds.errorHandler=kr(u),Ds}(this._ref._location,this._ref.storage,p,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(ae){return this._error=ae,void this._transition("error")}const X=this._ref.storage._makeRequest(k,Wn,_,S);this._request=X,X.getPromise().then(ae=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(ae.current),ae.finalized?(this._metadata=ae.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const p=ii(this._ref.storage,this._ref._location,this._mappings),_=this._ref.storage._makeRequest(p,Wn,a,l);this._request=_,_.getPromise().then(S=>{this._request=void 0,this._metadata=S,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const p=function Bi(u,a,l,p,_){const S=a.bucketOnlyServerUrl(),k={"X-Goog-Upload-Protocol":"multipart"},ae=function X(){let Ds="";for(let as=0;as<2;as++)Ds+=Math.random().toString().slice(2);return Ds}();k["Content-Type"]="multipart/related; boundary="+ae;const Se=Li(a,p,_),wt=Ut(Se,l),Sn=On.getBlob("--"+ae+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wt+"\r\n--"+ae+"\r\nContent-Type: "+Se.contentType+"\r\n\r\n",p,"\r\n--"+ae+"--");if(null===Sn)throw Ie();const $n={name:Se.fullPath},Br=dr(S,u.host,u._protocol),uo=u.maxUploadRetryTime,co=new er(Br,"POST",ri(u,l),uo);return co.urlParams=$n,co.headers=k,co.body=Sn.uploadData(),co.errorHandler=kr(a),co}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(p,Wn,a,l);this._request=_,_.getPromise().then(S=>{this._request=void 0,this._metadata=S,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request&&this._request.cancel();break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=yt(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=gt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,p,_){const S=new Lt(l||void 0,p||void 0,_||void 0);return this._addObserver(S),()=>{this._removeObserver(S)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(gt(this._state)){case Pe.SUCCESS:Ot(this._resolve.bind(null,this.snapshot))();break;case Pe.CANCELED:case Pe.ERROR:Ot(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(gt(this._state)){case Pe.RUNNING:case Pe.PAUSED:a.next&&Ot(a.next.bind(a,this.snapshot))();break;case Pe.SUCCESS:a.complete&&Ot(a.complete.bind(a))();break;default:a.error&&Ot(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class jt{constructor(a,l){this._service=a,this._location=l instanceof Zt?l:Zt.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new jt(a,l)}get root(){const a=new Zt(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ar(this._location.path)}get storage(){return this._service}get parent(){const a=function Un(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new Zt(this._location.bucket,a);return new jt(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw fn(a)}}function ws(u,a,l){return Is.apply(this,arguments)}function Is(){return(Is=(0,Ae.Z)(function*(u,a,l){const _=yield ns(u,{pageToken:l});a.prefixes.push(..._.prefixes),a.items.push(..._.items),null!=_.nextPageToken&&(yield ws(u,a,_.nextPageToken))})).apply(this,arguments)}function ns(u,a){null!=a&&"number"==typeof a.maxResults&&gi("options.maxResults",1,1e3,a.maxResults);const l=a||{},p=Ai(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(p,Wn)}function Ks(u){u._throwIfRoot("getDownloadURL");const a=function Cr(u,a,l){const _=dr(a.fullServerUrl(),u.host,u._protocol),k=u.maxOperationRetryTime,X=new er(_,"GET",function Vr(u,a){return function l(p,_){const S=Me(u,_,a);return tr(null!==S),function pt(u,a,l,p){const _=ir(a);if(null===_||!Zn(_.downloadTokens))return null;const S=_.downloadTokens;if(0===S.length)return null;const k=encodeURIComponent;return S.split(",").map(Se=>{const St=u.fullPath;return dr("/b/"+k(u.bucket)+"/o/"+k(St),l,p)+ei({alt:"media",token:Se})})[0]}(S,_,u.host,u._protocol)}}(u,l),k);return X.errorHandler=Si(a),X}(u.storage,u._location,jn());return u.storage.makeRequestWithTokens(a,Wn).then(l=>{if(null===l)throw function Rt(){return new qe("no-download-url","The given file does not have any download URLs.")}();return l})}function xo(u,a){const l=function Jn(u,a){const l=a.split("/").filter(p=>p.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),p=new Zt(u._location.bucket,l);return new jt(u.storage,p)}function rs(u,a){if(u instanceof Go){const l=u;if(null==l._bucket)throw function Ye(){return new qe("no-default-bucket","No default bucket found. Did you set the '"+Je+"' property when initializing the app?")}();const p=new jt(l,l._bucket);return null!=a?rs(p,a):p}return void 0!==a?xo(u,a):u}function js(u,a){if(a&&function Ui(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof Go)return function ps(u,a){return new jt(u,a)}(u,a);throw vt("To use ref(service, url), the first argument must be a Storage instance.")}return rs(u,a)}function Zs(u,a){const l=a?.[Je];return null==l?null:Zt.makeFromBucketSpec(l,u)}class Go{constructor(a,l,p,_,S){this.app=a,this._authProvider=l,this._appCheckProvider=p,this._url=_,this._firebaseVersion=S,this._bucket=null,this._host=Ge,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=_?Zt.makeFromBucketSpec(_,this._host):Zs(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?Zt.makeFromBucketSpec(this._url,a):Zs(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){gi("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){gi("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,Ae.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const p=yield l.getToken();if(null!==p)return p.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,Ae.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new jt(this,a)}_makeRequest(a,l,p,_){if(this._deleted)return new In(Vt());{const S=function vn(u,a,l,p,_,S){const k=ei(u.urlParams),X=u.url+k,ae=Object.assign({},u.headers);return function Tn(u,a){a&&(u["X-Firebase-GMPID"]=a)}(ae,a),function en(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(ae,l),function zn(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(a??"AppManager")}(ae,S),function Yr(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(ae,p),new mi(X,u.method,ae,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,_)}(a,this._appId,p,_,l,this._firebaseVersion);return this._requests.add(S),S.getPromise().then(()=>this._requests.delete(S),()=>this._requests.delete(S)),S}}makeRequestWithTokens(a,l){var p=this;return(0,Ae.Z)(function*(){const[_,S]=yield Promise.all([p._getAuthToken(),p._getAppCheckToken()]);return p._makeRequest(a,l,_,S).getPromise()})()}}const ls="@firebase/storage";function Ts(u,a){return js(u=(0,W.m9)(u),a)}function U(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),p=u.getProvider("auth-internal"),_=u.getProvider("app-check-internal");return new Go(l,p,_,a,bt.SDK_VERSION)}!function ue(){(0,bt._registerComponent)(new Xe.wA("storage",U,"PUBLIC").setMultipleInstances(!0)),(0,bt.registerVersion)(ls,"0.9.9",""),(0,bt.registerVersion)(ls,"0.9.9","esm2017")}();class lt{constructor(a,l,p){this._delegate=a,this.task=l,this.ref=p}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ft{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new lt(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(p=>{if(a)return a(new lt(p,this,this._ref))},l)}on(a,l,p,_){let S;return l&&(S="function"==typeof l?k=>l(new lt(k,this,this._ref)):{next:l.next?k=>l.next(new lt(k,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,S,p||void 0,_||void 0)}}class Ct{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new _n(a,this._service))}get items(){return this._delegate.items.map(a=>new _n(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _n{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function Mi(u,a){return xo(u,a)}(this._delegate,a);return new _n(l,this.storage)}get root(){return new _n(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new _n(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new Ft(function gs(u,a,l){return function Vi(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new _t(u,new On(a),l)}(u=(0,W.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=Pr.RAW,p){this._throwIfRoot("putString");const _=Ze(l,a),S=Object.assign({},p);return null==S.contentType&&null!=_.contentType&&(S.contentType=_.contentType),new Ft(new _t(this._delegate,new On(_.data,!0),S),this)}listAll(){return function Hs(u){return function Wi(u){const a={prefixes:[],items:[]};return ws(u,a).then(()=>a)}(u=(0,W.m9)(u))}(this._delegate).then(a=>new Ct(a,this.storage))}list(a){return function na(u,a){return ns(u=(0,W.m9)(u),a)}(this._delegate,a||void 0).then(l=>new Ct(l,this.storage))}getMetadata(){return function Ro(u){return function Ys(u){u._throwIfRoot("getMetadata");const a=ii(u.storage,u._location,jn());return u.storage.makeRequestWithTokens(a,Wn)}(u=(0,W.m9)(u))}(this._delegate)}updateMetadata(a){return function oi(u,a){return function Us(u,a){u._throwIfRoot("updateMetadata");const l=function xs(u,a,l,p){const S=dr(a.fullServerUrl(),u.host,u._protocol),X=Ut(l,p),Se=u.maxOperationRetryTime,wt=new er(S,"PATCH",ri(u,p),Se);return wt.headers={"Content-Type":"application/json; charset=utf-8"},wt.body=X,wt.errorHandler=Si(a),wt}(u.storage,u._location,a,jn());return u.storage.makeRequestWithTokens(l,Wn)}(u=(0,W.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function zo(u){return Ks(u=(0,W.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ii(u){return function Ms(u){u._throwIfRoot("deleteObject");const a=function es(u,a){const p=dr(a.fullServerUrl(),u.host,u._protocol),X=new er(p,"DELETE",function k(ae,Se){},u.maxOperationRetryTime);return X.successCodes=[200,204],X.errorHandler=Si(a),X}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,Wn)}(u=(0,W.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw fn(a)}}class ai{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(Jr(a))throw vt("ref() expected a child path but got a URL, use refFromURL instead.");return new _n(Ts(this._delegate,a),this)}refFromURL(a){if(!Jr(a))throw vt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zt.makeFromUrl(a,this._delegate.host)}catch{throw vt("refFromUrl() expected a valid full URL but got an invalid one.")}return new _n(Ts(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,p={}){!function Ci(u,a,l,p={}){!function Qs(u,a,l,p={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:_}=p;_&&(u._overrideAuthToken="string"==typeof _?_:(0,W.Sg)(_,u.app.options.projectId))}(u,a,l,p)}(this._delegate,a,l,p)}}function Jr(u){return/^[A-Za-z]+:\/\//.test(u)}function Gr(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),p=u.getProvider("storage").getImmediate({identifier:a});return new ai(l,p)}!function Ri(u){const a={TaskState:Pe,TaskEvent:we,StringFormat:Pr,Storage:ai,Reference:_n};u.INTERNAL.registerComponent(new Xe.wA("storage-compat",Gr,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.1.17")}(Re.Z);var E=B(440),H=B(127);function j(u){const a=function I(u){return new me.y(a=>{const l=k=>a.next(k);l(u.snapshot);const S=u.on("state_changed",l);return u.then(k=>{l(k),a.complete()},k=>{l(u.snapshot),(k=>{a.error(k)})(k)}),function(){S()}}).pipe((0,je.b)(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,$e.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function ie(u){return{getDownloadURL:()=>(0,Te.of)(void 0).pipe(Ce.fc,(0,Ve.w)(()=>u.getDownloadURL()),Ce.iC),getMetadata:()=>(0,Te.of)(void 0).pipe(Ce.fc,(0,Ve.w)(()=>u.getMetadata()),Ce.iC),delete:()=>(0,Fe.D)(u.delete()),child:a=>ie(u.child(a)),updateMetadata:a=>(0,Fe.D)(u.updateMetadata(a)),put:(a,l)=>j(u.put(a,l)),putString:(a,l,p)=>j(u.putString(a,l,p)),list:a=>(0,Fe.D)(u.list(a)),listAll:()=>(0,Fe.D)(u.listAll())}}const xt=new O.OlP("angularfire2.storageBucket"),cn=new O.OlP("angularfire2.storage.maxUploadRetryTime"),Mn=new O.OlP("angularfire2.storage.maxOperationRetryTime"),fr=new O.OlP("angularfire2.storage.use-emulator");let Mr=(()=>{class u{constructor(l,p,_,S,k,X,ae,Se,wt,St){const $t=(0,Le.on)(l,k,p);this.storage=(0,Le.cc)(`${$t.name}.storage.${_}`,"AngularFireStorage",$t.name,()=>{const Sn=k.runOutsideAngular(()=>$t.storage(_||void 0)),$n=wt;return $n&&Sn.useEmulator(...$n),ae&&Sn.setMaxUploadRetryTime(ae),Se&&Sn.setMaxOperationRetryTime(Se),Sn},[ae,Se])}ref(l){return ie(this.storage.ref(l))}refFromURL(l){return ie(this.storage.refFromURL(l))}upload(l,p,_){return ie(this.storage.ref(l)).put(p,_)}}return u.\u0275fac=function(l){return new(l||u)(O.LFG(Le.Dh),O.LFG(Le.xv,8),O.LFG(xt,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(Ce.HU),O.LFG(cn,8),O.LFG(Mn,8),O.LFG(fr,8),O.LFG(E.nm,8))},u.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),fi=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=O.oAB({type:u}),u.\u0275inj=O.cJS({}),u})(),$i=(()=>{class u{constructor(){H.Z.registerVersion("angularfire",Ce.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=O.oAB({type:u}),u.\u0275inj=O.cJS({providers:[Mr],imports:[fi]}),u})();var z=B(7407),V=B(4986),F=B(6451),ce=B(3099),Bt=B(5026),Pn=B(1884),ui=B(4482),us=B(5403),Ps=B(8421),fo=B(4671),Oo=B(5032),po=B(7669);B(1451);var $a=B(1877);const Wo="@firebase/database";let ol="";function Pl(u){ol=u}class kl{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,W.Pz)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,W.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class Zl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,W.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const Nl=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new kl(a)}}catch{}return new Zl},Po=Nl("localStorage"),ds=Nl("sessionStorage"),Yi=new $a.Yd("@firebase/database"),_i=function(){let u=1;return function(){return u++}}(),Ql=function(u){const a=(0,W.dS)(u),l=new W.gQ;l.update(a);const p=l.digest();return W.US.encodeByteArray(p)},ya=function(...u){let a="";for(let l=0;l<u.length;l++){const p=u[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?a+=ya.apply(null,p):a+="object"==typeof p?(0,W.Pz)(p):p,a+=" "}return a};let mo=null,fu=!0;const al=function(u,a){(0,W.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Yi.logLevel=$a.in.VERBOSE,mo=Yi.log.bind(Yi),a&&ds.set("logging_enabled",!0)):"function"==typeof u?mo=u:(mo=null,ds.remove("logging_enabled"))},hs=function(...u){if(!0===fu&&(fu=!1,null===mo&&!0===ds.get("logging_enabled")&&al(!0)),mo){const a=ya.apply(null,u);mo(a)}},va=function(u){return function(...a){hs(u,...a)}},Fl=function(...u){const a="FIREBASE INTERNAL ERROR: "+ya(...u);Yi.error(a)},Ss=function(...u){const a=`FIREBASE FATAL ERROR: ${ya(...u)}`;throw Yi.error(a),new Error(a)},ks=function(...u){const a="FIREBASE WARNING: "+ya(...u);Yi.warn(a)},qo=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},yo="[MIN_NAME]",Gs="[MAX_NAME]",Xs=function(u,a){if(u===a)return 0;if(u===yo||a===Gs)return-1;if(a===yo||u===Gs)return 1;{const l=Jo(u),p=Jo(a);return null!==l?null!==p?l-p==0?u.length-a.length:l-p:-1:null!==p?1:u<a?-1:1}},sa=function(u,a){return u===a?0:u<a?-1:1},Pi=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,W.Pz)(a))},Ll=function(u){if("object"!=typeof u||null===u)return(0,W.Pz)(u);const a=[];for(const p in u)a.push(p);a.sort();let l="{";for(let p=0;p<a.length;p++)0!==p&&(l+=","),l+=(0,W.Pz)(a[p]),l+=":",l+=Ll(u[a[p]]);return l+="}",l},pu=function(u,a){const l=u.length;if(l<=a)return[u];const p=[];for(let _=0;_<l;_+=a)p.push(u.substring(_,_+a>l?l:_+a));return p};function ji(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const ll=function(u){(0,W.hu)(!qo(u),"Invalid JSON number");const p=1023;let _,S,k,X,ae;0===u?(S=0,k=0,_=1/u==-1/0?1:0):(_=u<0,(u=Math.abs(u))>=Math.pow(2,1-p)?(X=Math.min(Math.floor(Math.log(u)/Math.LN2),p),S=X+p,k=Math.round(u*Math.pow(2,52-X)-Math.pow(2,52))):(S=0,k=Math.round(u/Math.pow(2,-1074))));const Se=[];for(ae=52;ae;ae-=1)Se.push(k%2?1:0),k=Math.floor(k/2);for(ae=11;ae;ae-=1)Se.push(S%2?1:0),S=Math.floor(S/2);Se.push(_?1:0),Se.reverse();const wt=Se.join("");let St="";for(ae=0;ae<64;ae+=8){let $t=parseInt(wt.substr(ae,8),2).toString(16);1===$t.length&&($t="0"+$t),St+=$t}return St.toLowerCase()},oa=new RegExp("^-?(0*)\\d{1,10}$"),Ns=-2147483648,Ua=2147483647,Jo=function(u){if(oa.test(u)){const a=Number(u);if(a>=Ns&&a<=Ua)return a}return null},is=function(u){try{u()}catch(a){setTimeout(()=>{throw ks("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},ul=function(u,a){const l=setTimeout(u,a);return"object"==typeof l&&l.unref&&l.unref(),l};class vo{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(p=>this.appCheck=p)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(a))}notifyForInvalidToken(){ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Rc{constructor(a,l,p){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(_=>this.auth_=_)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(hs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ks(a)}}let cl=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ki=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dl="websocket",rn="long_polling";class Oi{constructor(a,l,p,_,S=!1,k="",X=!1){this.secure=l,this.namespace=p,this.webSocketOnly=_,this.nodeAdmin=S,this.persistenceKey=k,this.includeNamespaceInQueryParams=X,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Po.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&Po.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ko(u,a,l){let p;if((0,W.hu)("string"==typeof a,"typeof type must == string"),(0,W.hu)("object"==typeof l,"typeof params must == object"),a===dl)p=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==rn)throw new Error("Unknown connection type: "+a);p=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function wa(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const _=[];return ji(l,(S,k)=>{_.push(S+"="+k)}),p+_.join("&")}class Ln{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,W.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,W.p$)(this.counters_)}}const Hn={},Ia={};function wn(u){const a=u.toString();return Hn[a]||(Hn[a]=new Ln),Hn[a]}class Jt{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<p.length;++_)p[_]&&is(()=>{this.onMessage_(p[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wo{constructor(a,l,p,_,S,k,X){this.connId=a,this.repoInfo=l,this.applicationId=p,this.appCheckToken=_,this.authToken=S,this.transportSessionId=k,this.lastSessionId=X,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=va(a),this.stats_=wn(l),this.urlFn=ae=>(this.appCheckToken&&(ae.ac=this.appCheckToken),ko(l,rn,ae))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Jt(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,W.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qr((...S)=>{const[k,X,ae,Se,wt]=S;if(this.incrementIncomingBytes_(S),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===k)this.id=X,this.password=ae;else{if("close"!==k)throw new Error("Unrecognized command received: "+k);X?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(X,()=>{this.onClosed_()})):this.onClosed_()}},(...S)=>{const[k,X]=S;this.incrementIncomingBytes_(S),this.myPacketOrderer.handleResponse(k,X)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ki.test(location.hostname)&&(p.r="f");const _=this.urlFn(p);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wo.forceAllow_=!0}static forceDisallow(){wo.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!wo.forceAllow_&&(wo.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,W.Pz)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,W.h$)(l),_=pu(p,1840);for(let S=0;S<_.length;S++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[S]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=a,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,W.Pz)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Qr{constructor(a,l,p,_){if(this.onDisconnect=p,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=_i(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Qr.createIFrame_();let S="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(S='<script>document.domain="'+document.domain+'";<\/script>');const k="<html><body>"+S+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(k),this.myIFrame.doc.close()}catch(X){hs("frame writing exception"),X.stack&&hs(X.stack),hs(X)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||hs("No IE domain setting required")}catch{const p=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),p="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const k=this.pendingSegs.shift();p=p+"&seg"+_+"="+k.seg+"&ts"+_+"="+k.ts+"&d"+_+"="+k.d,_++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,p){this.pendingSegs.push({seg:a,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},_=setTimeout(p,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(_),p()})}addTag(a,l){(0,W.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=a,p.onload=p.onreadystatechange=function(){const _=p.readyState;(!_||"loaded"===_||"complete"===_)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{hs("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch{}},Math.floor(1))}}let Cn=null;typeof MozWebSocket<"u"?Cn=MozWebSocket:typeof WebSocket<"u"&&(Cn=WebSocket);let x=(()=>{class u{constructor(l,p,_,S,k,X,ae){this.connId=l,this.applicationId=_,this.appCheckToken=S,this.authToken=k,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=va(this.connId),this.stats_=wn(p),this.connURL=u.connectionURL_(p,X,ae,S,_),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,_,S,k){const X={v:"5"};return!(0,W.Yr)()&&typeof location<"u"&&location.hostname&&Ki.test(location.hostname)&&(X.r="f"),p&&(X.s=p),_&&(X.ls=_),S&&(X.ac=S),k&&(X.p=k),ko(l,dl,X)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Po.set("previous_websocket_failure",!0);try{let _;if((0,W.Yr)()){_={headers:{"User-Agent":`Firebase/5/${ol}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(_.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(_.headers["X-Firebase-AppCheck"]=this.appCheckToken);const k=process.env,X=0===this.connURL.indexOf("wss://")?k.HTTPS_PROXY||k.https_proxy:k.HTTP_PROXY||k.http_proxy;X&&(_.proxy={origin:X})}this.mySock=new Cn(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const S=_.message||_.data;return S&&this.log_(S),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const S=_.message||_.data;S&&this.log_(S),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(l=!0)}return!l&&null!==Cn&&!u.forceDisallow_}static previouslyFailed(){return Po.isInMemoryStorage||!0===Po.get("previous_websocket_failure")}markConnectionHealthy(){Po.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const _=(0,W.cI)(p);this.onMessage(_)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const _=this.extractFrameCount_(p);null!==_&&this.appendFrame_(_)}}send(l){this.resetKeepAlive();const p=(0,W.Pz)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const _=pu(p,16384);_.length>1&&this.sendString_(String(_.length));for(let S=0;S<_.length;S++)this.sendString_(_[S])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),A=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[wo,x]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=x&&x.isAvailable();let _=p&&!x.previouslyFailed();if(l.webSocketOnly&&(p||ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[x];else{const S=this.transports_=[];for(const k of u.ALL_TRANSPORTS)k&&k.isAvailable()&&S.push(k);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Eu{constructor(a,l,p,_,S,k,X,ae,Se,wt){this.id=a,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=_,this.authToken_=S,this.onMessage_=k,this.onReady_=X,this.onDisconnect_=ae,this.onKill_=Se,this.lastSessionId=wt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=va("c:"+this.id+":"),this.transportManager_=new A(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const _=a.healthyTimeout||0;_>0&&(this.healthyTimeout_=ul(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=Pi("t",a),p=Pi("d",a);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=Pi("t",a),p=Pi("d",a);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=Pi("t",a);if("d"in a){const p=a.d;if("h"===l)this.onHandshake_(p);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?Fl("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fl("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,p=a.v,_=a.h;this.sessionId=a.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),ul(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ul(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Po.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Sa{put(a,l,p,_){}merge(a,l,p,_){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,p){}onDisconnectMerge(a,l,p){}onDisconnectCancel(a,l){}reportStats(a){}}class zs{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,W.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const p=[...this.listeners_[a]];for(let _=0;_<p.length;_++)p[_].callback.apply(p[_].context,l)}}on(a,l,p){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:p});const _=this.getInitialEvent(a);_&&l.apply(p,_)}off(a,l,p){this.validateEventType_(a);const _=this.listeners_[a]||[];for(let S=0;S<_.length;S++)if(_[S].callback===l&&(!p||p===_[S].context))return void _.splice(S,1)}validateEventType_(a){(0,W.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class No extends zs{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new No}getInitialEvent(a){return(0,W.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}class zr{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let p=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[p]=this.pieces_[_],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function pi(){return new zr("")}function Dr(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function ss(u){return u.pieces_.length-u.pieceNum_}function Ti(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new zr(u.pieces_,a)}function aa(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function Zi(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function tu(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new zr(a,0)}function $r(u,a){const l=[];for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);if(a instanceof zr)for(let p=a.pieceNum_;p<a.pieces_.length;p++)l.push(a.pieces_[p]);else{const p=a.split("/");for(let _=0;_<p.length;_++)p[_].length>0&&l.push(p[_])}return new zr(l,0)}function Nn(u){return u.pieceNum_>=u.pieces_.length}function Js(u,a){const l=Dr(u),p=Dr(a);if(null===l)return a;if(l===p)return Js(Ti(u),Ti(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function Io(u,a){const l=Zi(u,0),p=Zi(a,0);for(let _=0;_<l.length&&_<p.length;_++){const S=Xs(l[_],p[_]);if(0!==S)return S}return l.length===p.length?0:l.length<p.length?-1:1}function vs(u,a){if(ss(u)!==ss(a))return!1;for(let l=u.pieceNum_,p=a.pieceNum_;l<=u.pieces_.length;l++,p++)if(u.pieces_[l]!==a.pieces_[p])return!1;return!0}function Co(u,a){let l=u.pieceNum_,p=a.pieceNum_;if(ss(u)>ss(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[p])return!1;++l,++p}return!0}class Ls{constructor(a,l){this.errorPrefix_=l,this.parts_=Zi(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,W.ug)(this.parts_[p]);yi(this)}}function yi(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+eo(u))}function eo(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class za extends zs{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[a];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new za}getInitialEvent(a){return(0,W.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const fl=1e3;let qt,Ne=(()=>{class u extends Sa{constructor(l,p,_,S,k,X,ae,Se){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=_,this.onConnectStatus_=S,this.onServerInfoUpdate_=k,this.authTokenProvider_=X,this.appCheckTokenProvider_=ae,this.authOverride_=Se,this.id=u.nextPersistentConnectionId_++,this.log_=va("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Se&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");za.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&No.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,_){const S=++this.requestNumber_,k={r:S,a:l,b:p};this.log_((0,W.Pz)(k)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(k),_&&(this.requestCBHash_[S]=_)}get(l){this.initConnection_();const p=new W.BH,_={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:_,onComplete:X=>{const ae=X.d;"ok"===X.s?p.resolve(ae):p.reject(ae)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,_,S){this.initConnection_();const k=l._queryIdentifier,X=l._path.toString();this.log_("Listen called for "+X+" "+k),this.listens.has(X)||this.listens.set(X,new Map),(0,W.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(X).has(k),"listen() called twice for same path/queryId.");const ae={onComplete:S,hashFn:p,query:l,tag:_};this.listens.get(X).set(k,ae),this.connected_&&this.sendListen_(ae)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,_=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(_)})}sendListen_(l){const p=l.query,_=p._path.toString(),S=p._queryIdentifier;this.log_("Listen on "+_+" for "+S);const k={p:_};l.tag&&(k.q=p._queryObject,k.t=l.tag),k.h=l.hashFn(),this.sendRequest("q",k,ae=>{const Se=ae.d,wt=ae.s;u.warnOnListenWarnings_(Se,p),(this.listens.get(_)&&this.listens.get(_).get(S))===l&&(this.log_("listen response",ae),"ok"!==wt&&this.removeListen_(_,S),l.onComplete&&l.onComplete(wt,Se))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,W.r3)(l,"w")){const _=(0,W.DV)(l,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const S='".indexOn": "'+p._queryParams.getIndex().toString()+'"',k=p._path.toString();ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${S} at ${k} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,W.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,W.w9)(l)?"auth":"gauth",_={cred:l};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(p,_,S=>{const k=S.s,X=S.d||"error";this.authToken_===l&&("ok"===k?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(k,X))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,_=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,_)})}unlisten(l,p){const _=l._path.toString(),S=l._queryIdentifier;this.log_("Unlisten called for "+_+" "+S),(0,W.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,S)&&this.connected_&&this.sendUnlisten_(_,S,l._queryObject,p)}sendUnlisten_(l,p,_,S){this.log_("Unlisten on "+l+" for "+p);const k={p:l};S&&(k.q=_,k.t=S),this.sendRequest("n",k)}onDisconnectPut(l,p,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,_):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:_})}onDisconnectMerge(l,p,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,_):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:_})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,_,S){const k={p,d:_};this.log_("onDisconnect "+l,k),this.sendRequest(l,k,X=>{S&&setTimeout(()=>{S(X.s,X.d)},Math.floor(0))})}put(l,p,_,S){this.putInternal("p",l,p,_,S)}merge(l,p,_,S){this.putInternal("m",l,p,_,S)}putInternal(l,p,_,S,k){this.initConnection_();const X={p,d:_};void 0!==k&&(X.h=k),this.outstandingPuts_.push({action:l,request:X,onComplete:S}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,_=this.outstandingPuts_[l].request,S=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,_,k=>{this.log_(p+" response",k),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),S&&S(k.s,k.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,W.Pz)(l));const p=l.r,_=this.requestCBHash_[p];_&&(delete this.requestCBHash_[p],_(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):Fl("Unrecognized action received from server: "+(0,W.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=fl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Ae.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),_=l.onReady_.bind(l),S=l.onRealtimeDisconnect_.bind(l),k=l.id+":"+u.nextConnectionId_++,X=l.lastSessionId;let ae=!1,Se=null;const wt=function(){Se?Se.close():(ae=!0,S())};l.realtime_={close:wt,sendRequest:function(Sn){(0,W.hu)(Se,"sendRequest call when we're not connected not allowed."),Se.sendRequest(Sn)}};const $t=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Sn,$n]=yield Promise.all([l.authTokenProvider_.getToken($t),l.appCheckTokenProvider_.getToken($t)]);ae?hs("getToken() completed but was canceled"):(hs("getToken() completed. Creating connection."),l.authToken_=Sn&&Sn.accessToken,l.appCheckToken_=$n&&$n.token,Se=new Eu(k,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,_,S,Br=>{ks(Br+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},X))}catch(Sn){l.log_("Failed to get token: "+Sn),ae||(l.repoInfo_.nodeAdmin&&ks(Sn),wt())}}})()}interrupt(l){hs("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){hs("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let _;_=p?p.map(k=>Ll(k)).join("$"):"default";const S=this.removeListen_(l,_);S&&S.onComplete&&S.onComplete("permission_denied")}removeListen_(l,p){const _=new zr(l).toString();let S;if(this.listens.has(_)){const k=this.listens.get(_);S=k.get(p),k.delete(p),0===k.size&&this.listens.delete(_)}else S=void 0;return S}onAuthRevoked_(l,p){hs("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){hs("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,W.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+ol.replace(/\./g,"-")]=1,(0,W.uI)()?l["framework.cordova"]=1:(0,W.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=No.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class ot{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new ot(a,l)}}class Mt{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const p=new ot(yo,a),_=new ot(yo,l);return 0!==this.compare(p,_)}minPost(){return ot.MIN}}class bn extends Mt{static get __EMPTY_NODE(){return qt}static set __EMPTY_NODE(a){qt=a}compare(a,l){return Xs(a.name,l.name)}isDefinedOn(a){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return ot.MIN}maxPost(){return new ot(Gs,qt)}makePost(a,l){return(0,W.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new ot(a,qt)}toString(){return".key"}}const Rn=new bn;class mr{constructor(a,l,p,_,S=null){this.isReverse_=_,this.resultGenerator_=S,this.nodeStack_=[];let k=1;for(;!a.isEmpty();)if(k=l?p(a.key,l):1,_&&(k*=-1),k<0)a=this.isReverse_?a.left:a.right;else{if(0===k){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let qa,nr=(()=>{class u{constructor(l,p,_,S,k){this.key=l,this.value=p,this.color=_??u.RED,this.left=S??Hr.EMPTY_NODE,this.right=k??Hr.EMPTY_NODE}copy(l,p,_,S,k){return new u(l??this.key,p??this.value,_??this.color,S??this.left,k??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,_){let S=this;const k=_(l,S.key);return S=k<0?S.copy(null,null,null,S.left.insert(l,p,_),null):0===k?S.copy(null,p,null,null,null):S.copy(null,null,null,null,S.right.insert(l,p,_)),S.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hr.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let _,S;if(_=this,p(l,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(l,p),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===p(l,_.key)){if(_.right.isEmpty())return Hr.EMPTY_NODE;S=_.right.min_(),_=_.copy(S.key,S.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(l,p))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Hr{constructor(a,l=Hr.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Hr(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,nr.BLACK,null,null))}remove(a){return new Hr(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,nr.BLACK,null,null))}get(a){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(a){let l,p=this.root_,_=null;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l){if(p.left.isEmpty())return _?_.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(_=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new mr(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new mr(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new mr(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new mr(this.root_,null,this.comparator_,!0,a)}}function ao(u,a){return Xs(u.name,a.name)}function la(u,a){return Xs(u,a)}Hr.EMPTY_NODE=new class Xn{copy(a,l,p,_,S){return this}insert(a,l,p){return new nr(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ya=function(u){return"number"==typeof u?"number:"+ll(u):"string:"+u},Ka=function(u){if(u.isLeafNode()){const a=u.val();(0,W.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,W.r3)(a,".sv"),"Priority must be a string or number.")}else(0,W.hu)(u===qa||u.isEmpty(),"priority of unexpected type.");(0,W.hu)(u===qa||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pl,Bl,kc,Zo=(()=>{class u{constructor(l,p=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ka(this.priorityNode_)}static set __childrenNodeConstructor(l){pl=l}static get __childrenNodeConstructor(){return pl}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Nn(l)?this:".priority"===Dr(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const _=Dr(l);return null===_?p:p.isEmpty()&&".priority"!==_?this:((0,W.hu)(".priority"!==_||1===ss(l),".priority must be the last token in a path"),this.updateImmediateChild(_,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ti(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Ya(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?ll(this.value_):this.value_,this.lazyHash_=Ql(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,W.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,_=typeof this.value_,S=u.VALUE_TYPE_ORDER.indexOf(p),k=u.VALUE_TYPE_ORDER.indexOf(_);return(0,W.hu)(S>=0,"Unknown leaf type: "+p),(0,W.hu)(k>=0,"Unknown leaf type: "+_),S===k?"object"===_?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:k-S}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const p=l;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const ur=new class rf extends Mt{compare(a,l){const p=a.node.getPriority(),_=l.node.getPriority(),S=p.compareTo(_);return 0===S?Xs(a.name,l.name):S}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return ot.MIN}maxPost(){return new ot(Gs,new Zo("[PRIORITY-POST]",kc))}makePost(a,l){const p=Bl(a);return new ot(l,new Zo("[PRIORITY-POST]",p))}toString(){return".priority"}},sf=Math.log(2);class Nc{constructor(a){this.count=parseInt(Math.log(a+1)/sf,10),this.current_=this.count-1;const _=(S=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&_}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const Za=function(u,a,l,p){u.sort(a);const _=function(ae,Se){const wt=Se-ae;let St,$t;if(0===wt)return null;if(1===wt)return St=u[ae],$t=l?l(St):St,new nr($t,St.node,nr.BLACK,null,null);{const Sn=parseInt(wt/2,10)+ae,$n=_(ae,Sn),Br=_(Sn+1,Se);return St=u[Sn],$t=l?l(St):St,new nr($t,St.node,nr.BLACK,$n,Br)}},X=function(ae){let Se=null,wt=null,St=u.length;const $t=function($n,Br){const Kr=St-$n,uo=St;St-=$n;const co=_(Kr+1,uo),Ds=u[Kr],as=l?l(Ds):Ds;Sn(new nr(as,Ds.node,Br,null,co))},Sn=function($n){Se?(Se.left=$n,Se=$n):(wt=$n,Se=$n)};for(let $n=0;$n<ae.count;++$n){const Br=ae.nextBitIsOne(),Kr=Math.pow(2,ae.count-($n+1));Br?$t(Kr,nr.BLACK):($t(Kr,nr.BLACK),$t(Kr,nr.RED))}return wt}(new Nc(u.length));return new Hr(p||a,X)};let af;const Qa={};class Xa{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,W.hu)(Qa&&ur,"ChildrenNode.ts has not been loaded"),af=af||new Xa({".priority":Qa},{".priority":ur}),af}get(a){const l=(0,W.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Hr?l:null}hasIndex(a){return(0,W.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,W.hu)(a!==Rn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let _=!1;const S=l.getIterator(ot.Wrap);let X,k=S.getNext();for(;k;)_=_||a.isDefinedOn(k.node),p.push(k),k=S.getNext();X=_?Za(p,a.getCompare()):Qa;const ae=a.toString(),Se=Object.assign({},this.indexSet_);Se[ae]=a;const wt=Object.assign({},this.indexes_);return wt[ae]=X,new Xa(wt,Se)}addToIndexes(a,l){const p=(0,W.UI)(this.indexes_,(_,S)=>{const k=(0,W.DV)(this.indexSet_,S);if((0,W.hu)(k,"Missing index implementation for "+S),_===Qa){if(k.isDefinedOn(a.node)){const X=[],ae=l.getIterator(ot.Wrap);let Se=ae.getNext();for(;Se;)Se.name!==a.name&&X.push(Se),Se=ae.getNext();return X.push(a),Za(X,k.getCompare())}return Qa}{const X=l.get(a.name);let ae=_;return X&&(ae=ae.remove(new ot(a.name,X))),ae.insert(a,a.node)}});return new Xa(p,this.indexSet_)}removeFromIndexes(a,l){const p=(0,W.UI)(this.indexes_,_=>{if(_===Qa)return _;{const S=l.get(a.name);return S?_.remove(new ot(a.name,S)):_}});return new Xa(p,this.indexSet_)}}let gl,Fr=(()=>{class u{constructor(l,p,_){this.children_=l,this.priorityNode_=p,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&Ka(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gl||(gl=new u(new Hr(la),null,Xa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gl}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?gl:p}}getChild(l){const p=Dr(l);return null===p?this:this.getImmediateChild(p).getChild(Ti(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,W.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const _=new ot(l,p);let S,k;p.isEmpty()?(S=this.children_.remove(l),k=this.indexMap_.removeFromIndexes(_,this.children_)):(S=this.children_.insert(l,p),k=this.indexMap_.addToIndexes(_,this.children_));const X=S.isEmpty()?gl:this.priorityNode_;return new u(S,X,k)}}updateChild(l,p){const _=Dr(l);if(null===_)return p;{(0,W.hu)(".priority"!==Dr(l)||1===ss(l),".priority must be the last token in a path");const S=this.getImmediateChild(_).updateChild(Ti(l),p);return this.updateImmediateChild(_,S)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let _=0,S=0,k=!0;if(this.forEachChild(ur,(X,ae)=>{p[X]=ae.val(l),_++,k&&u.INTEGER_REGEXP_.test(X)?S=Math.max(S,Number(X)):k=!1}),!l&&k&&S<2*_){const X=[];for(const ae in p)X[ae]=p[ae];return X}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Ya(this.getPriority().val())+":"),this.forEachChild(ur,(p,_)=>{const S=_.hash();""!==S&&(l+=":"+p+":"+S)}),this.lazyHash_=""===l?"":Ql(l)}return this.lazyHash_}getPredecessorChildName(l,p,_){const S=this.resolveIndex_(_);if(S){const k=S.getPredecessorKey(new ot(l,p));return k?k.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const _=p.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new ot(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const _=p.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new ot(p,this.children_.get(p)):null}forEachChild(l,p){const _=this.resolveIndex_(l);return _?_.inorderTraversal(S=>p(S.name,S.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const _=this.resolveIndex_(p);if(_)return _.getIteratorFrom(l,S=>S);{const S=this.children_.getIteratorFrom(l.name,ot.Wrap);let k=S.peek();for(;null!=k&&p.compare(k,l)<0;)S.getNext(),k=S.peek();return S}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const _=this.resolveIndex_(p);if(_)return _.getReverseIteratorFrom(l,S=>S);{const S=this.children_.getReverseIteratorFrom(l.name,ot.Wrap);let k=S.peek();for(;null!=k&&p.compare(k,l)>0;)S.getNext(),k=S.peek();return S}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===_s?-1:0}withIndex(l){if(l===Rn||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===Rn||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const _=this.getIterator(ur),S=p.getIterator(ur);let k=_.getNext(),X=S.getNext();for(;k&&X;){if(k.name!==X.name||!k.node.equals(X.node))return!1;k=_.getNext(),X=S.getNext()}return null===k&&null===X}return!1}return!1}}resolveIndex_(l){return l===Rn?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const _s=new class ih extends Fr{constructor(){super(new Hr(la),Fr.EMPTY_NODE,Xa.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return Fr.EMPTY_NODE}isEmpty(){return!1}};function Hi(u,a=null){if(null===u)return Fr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,W.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Zo(u,Hi(a));if(u instanceof Array){let l=Fr.EMPTY_NODE;return ji(u,(p,_)=>{if((0,W.r3)(u,p)&&"."!==p.substring(0,1)){const S=Hi(_);(S.isLeafNode()||!S.isEmpty())&&(l=l.updateImmediateChild(p,S))}}),l.updatePriority(Hi(a))}{const l=[];let p=!1;if(ji(u,(k,X)=>{if("."!==k.substring(0,1)){const ae=Hi(X);ae.isEmpty()||(p=p||!ae.getPriority().isEmpty(),l.push(new ot(k,ae)))}}),0===l.length)return Fr.EMPTY_NODE;const S=Za(l,ao,k=>k.name,la);if(p){const k=Za(l,ur.getCompare());return new Fr(S,Hi(a),new Xa({".priority":k},{".priority":ur}))}return new Fr(S,Hi(a),Xa.Default)}}Object.defineProperties(ot,{MIN:{value:new ot(yo,Fr.EMPTY_NODE)},MAX:{value:new ot(Gs,_s)}}),bn.__EMPTY_NODE=Fr.EMPTY_NODE,Zo.__childrenNodeConstructor=Fr,function Ko(u){qa=u}(_s),function bo(u){kc=u}(_s),function ud(u){Bl=u}(Hi);class sh extends Mt{constructor(a){super(),this.indexPath_=a,(0,W.hu)(!Nn(a)&&".priority"!==Dr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const p=this.extractChild(a.node),_=this.extractChild(l.node),S=p.compareTo(_);return 0===S?Xs(a.name,l.name):S}makePost(a,l){const p=Hi(a),_=Fr.EMPTY_NODE.updateChild(this.indexPath_,p);return new ot(l,_)}maxPost(){const a=Fr.EMPTY_NODE.updateChild(this.indexPath_,_s);return new ot(Gs,a)}toString(){return Zi(this.indexPath_,0).join("/")}}const uf=new class lf extends Mt{compare(a,l){const p=a.node.compareTo(l.node);return 0===p?Xs(a.name,l.name):p}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return ot.MIN}maxPost(){return ot.MAX}makePost(a,l){const p=Hi(a);return new ot(l,p)}toString(){return".value"}},Vl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Iu=function(){let u=0;const a=[];return function(l){const p=l===u;let _;u=l;const S=new Array(8);for(_=7;_>=0;_--)S[_]=Vl.charAt(l%64),l=Math.floor(l/64);(0,W.hu)(0===l,"Cannot push at time == 0");let k=S.join("");if(p){for(_=11;_>=0&&63===a[_];_--)a[_]=0;a[_]++}else for(_=0;_<12;_++)a[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)k+=Vl.charAt(a[_]);return(0,W.hu)(20===k.length,"nextPushId: Length should be 20."),k}}(),nu=function(u){if(u===""+Ua)return"-";const a=Jo(u);if(null!=a)return""+(a+1);const l=new Array(u.length);for(let k=0;k<l.length;k++)l[k]=u.charAt(k);if(l.length<786)return l.push("-"),l.join("");let p=l.length-1;for(;p>=0&&"z"===l[p];)p--;if(-1===p)return Gs;const S=Vl.charAt(Vl.indexOf(l[p])+1);return l[p]=S,l.slice(0,p+1).join("")},Lc=function(u){if(u===""+Ns)return yo;const a=Jo(u);if(null!=a)return""+(a-1);const l=new Array(u.length);for(let p=0;p<l.length;p++)l[p]=u.charAt(p);return"-"===l[l.length-1]?1===l.length?""+Ua:(delete l[l.length-1],l.join("")):(l[l.length-1]=Vl.charAt(Vl.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function ah(u){return{type:"value",snapshotNode:u}}function Fo(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function Zu(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function Ja(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class xa{constructor(a){this.index_=a}updateChild(a,l,p,_,S,k){(0,W.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const X=a.getImmediateChild(l);return X.getChild(_).equals(p.getChild(_))&&X.isEmpty()===p.isEmpty()||(null!=k&&(p.isEmpty()?a.hasChild(l)?k.trackChildChange(Zu(l,X)):(0,W.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):X.isEmpty()?k.trackChildChange(Fo(l,p)):k.trackChildChange(Ja(l,p,X))),a.isLeafNode()&&p.isEmpty())?a:a.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(a,l,p){return null!=p&&(a.isLeafNode()||a.forEachChild(ur,(_,S)=>{l.hasChild(_)||p.trackChildChange(Zu(_,S))}),l.isLeafNode()||l.forEachChild(ur,(_,S)=>{if(a.hasChild(_)){const k=a.getImmediateChild(_);k.equals(S)||p.trackChildChange(Ja(_,S,k))}else p.trackChildChange(Fo(_,S))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?Fr.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Cu{constructor(a){this.indexedFilter_=new xa(a.getIndex()),this.index_=a.getIndex(),this.startPost_=Cu.getStartPost_(a),this.endPost_=Cu.getEndPost_(a)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){return this.index_.compare(this.getStartPost(),a)<=0&&this.index_.compare(a,this.getEndPost())<=0}updateChild(a,l,p,_,S,k){return this.matches(new ot(l,p))||(p=Fr.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,p,_,S,k)}updateFullNode(a,l,p){l.isLeafNode()&&(l=Fr.EMPTY_NODE);let _=l.withIndex(this.index_);_=_.updatePriority(Fr.EMPTY_NODE);const S=this;return l.forEachChild(ur,(k,X)=>{S.matches(new ot(k,X))||(_=_.updateImmediateChild(k,Fr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,_,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class cd{constructor(a){this.rangedFilter_=new Cu(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft()}updateChild(a,l,p,_,S,k){return this.rangedFilter_.matches(new ot(l,p))||(p=Fr.EMPTY_NODE),a.getImmediateChild(l).equals(p)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,p,_,S,k):this.fullLimitUpdateChild_(a,l,p,S,k)}updateFullNode(a,l,p){let _;if(l.isLeafNode()||l.isEmpty())_=Fr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let S;_=Fr.EMPTY_NODE.withIndex(this.index_),S=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let k=0;for(;S.hasNext()&&k<this.limit_;){const X=S.getNext();let ae;if(ae=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),X)<=0:this.index_.compare(X,this.rangedFilter_.getEndPost())<=0,!ae)break;_=_.updateImmediateChild(X.name,X.node),k++}}else{let S,k,X,ae;if(_=l.withIndex(this.index_),_=_.updatePriority(Fr.EMPTY_NODE),this.reverse_){ae=_.getReverseIterator(this.index_),S=this.rangedFilter_.getEndPost(),k=this.rangedFilter_.getStartPost();const St=this.index_.getCompare();X=($t,Sn)=>St(Sn,$t)}else ae=_.getIterator(this.index_),S=this.rangedFilter_.getStartPost(),k=this.rangedFilter_.getEndPost(),X=this.index_.getCompare();let Se=0,wt=!1;for(;ae.hasNext();){const St=ae.getNext();!wt&&X(S,St)<=0&&(wt=!0),wt&&Se<this.limit_&&X(St,k)<=0?Se++:_=_.updateImmediateChild(St.name,Fr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,_,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,p,_,S){let k;if(this.reverse_){const St=this.index_.getCompare();k=($t,Sn)=>St(Sn,$t)}else k=this.index_.getCompare();const X=a;(0,W.hu)(X.numChildren()===this.limit_,"");const ae=new ot(l,p),Se=this.reverse_?X.getFirstChild(this.index_):X.getLastChild(this.index_),wt=this.rangedFilter_.matches(ae);if(X.hasChild(l)){const St=X.getImmediateChild(l);let $t=_.getChildAfterChild(this.index_,Se,this.reverse_);for(;null!=$t&&($t.name===l||X.hasChild($t.name));)$t=_.getChildAfterChild(this.index_,$t,this.reverse_);const Sn=null==$t?1:k($t,ae);if(wt&&!p.isEmpty()&&Sn>=0)return S?.trackChildChange(Ja(l,p,St)),X.updateImmediateChild(l,p);{S?.trackChildChange(Zu(l,St));const Br=X.updateImmediateChild(l,Fr.EMPTY_NODE);return null!=$t&&this.rangedFilter_.matches($t)?(S?.trackChildChange(Fo($t.name,$t.node)),Br.updateImmediateChild($t.name,$t.node)):Br}}return p.isEmpty()?a:wt&&k(Se,ae)>=0?(null!=S&&(S.trackChildChange(Zu(Se.name,Se.node)),S.trackChildChange(Fo(l,p))),X.updateImmediateChild(l,p).updateImmediateChild(Se.name,Fr.EMPTY_NODE)):a}}class yl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const a=new yl;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function dd(u,a,l){const p=u.copy();return p.startSet_=!0,void 0===a&&(a=null),p.indexStartValue_=a,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function Vc(u,a,l){const p=u.copy();return p.endSet_=!0,void 0===a&&(a=null),p.indexEndValue_=a,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function bu(u,a){const l=u.copy();return l.index_=a,l}function cp(u){const a={};if(u.isDefault())return a;let l;return u.index_===ur?l="$priority":u.index_===uf?l="$value":u.index_===Rn?l="$key":((0,W.hu)(u.index_ instanceof sh,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,W.Pz)(l),u.startSet_&&(a.startAt=(0,W.Pz)(u.indexStartValue_),u.startNameSet_&&(a.startAt+=","+(0,W.Pz)(u.indexStartName_))),u.endSet_&&(a.endAt=(0,W.Pz)(u.indexEndValue_),u.endNameSet_&&(a.endAt+=","+(0,W.Pz)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function $c(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_)),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_)),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==ur&&(a.i=u.index_.toString()),a}class jl extends Sa{constructor(a,l,p,_){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.log_=va("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,W.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,p,_){const S=a._path.toString();this.log_("Listen called for "+S+" "+a._queryIdentifier);const k=jl.getListenId_(a,p),X={};this.listens_[k]=X;const ae=cp(a._queryParams);this.restRequest_(S+".json",ae,(Se,wt)=>{let St=wt;if(404===Se&&(St=null,Se=null),null===Se&&this.onDataUpdate_(S,St,!1,p),(0,W.DV)(this.listens_,k)===X){let $t;$t=Se?401===Se?"permission_denied":"rest_error:"+Se:"ok",_($t,null)}})}unlisten(a,l){const p=jl.getListenId_(a,l);delete this.listens_[p]}get(a){const l=cp(a._queryParams),p=a._path.toString(),_=new W.BH;return this.restRequest_(p+".json",l,(S,k)=>{let X=k;404===S&&(X=null,S=null),null===S?(this.onDataUpdate_(p,X,!1,null),_.resolve(X)):_.reject(new Error(X))}),_.promise}refreshAuthToken(a){}restRequest_(a,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,S])=>{_&&_.accessToken&&(l.auth=_.accessToken),S&&S.token&&(l.ac=S.token);const k=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,W.xO)(l);this.log_("Sending REST request for "+k);const X=new XMLHttpRequest;X.onreadystatechange=()=>{if(p&&4===X.readyState){this.log_("REST Response for "+k+" received. status:",X.status,"response:",X.responseText);let ae=null;if(X.status>=200&&X.status<300){try{ae=(0,W.cI)(X.responseText)}catch{ks("Failed to parse JSON response for "+k+": "+X.responseText)}p(null,ae)}else 401!==X.status&&404!==X.status&&ks("Got unsuccessful REST response for "+k+" Status: "+X.status),p(X.status);p=null}},X.open("GET",k,!0),X.send()})}}class lh{constructor(){this.rootNode_=Fr.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function lo(){return{value:null,children:new Map}}function vl(u,a,l){if(Nn(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const p=Dr(a);u.children.has(p)||u.children.set(p,lo()),vl(u.children.get(p),a=Ti(a),l)}}function hd(u,a){if(Nn(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(ur,(p,_)=>{vl(u,new zr(p),_)}),hd(u,a)}}if(u.children.size>0){const l=Dr(a);return a=Ti(a),u.children.has(l)&&hd(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function Du(u,a,l){null!==u.value?l(a,u.value):function Tu(u,a){u.children.forEach((l,p)=>{a(p,l)})}(u,(p,_)=>{Du(_,new zr(a.toString()+"/"+p),l)})}class Qu{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&ji(this.last_,(p,_)=>{l[p]=l[p]-_}),this.last_=a,l}}class Hl{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Qu(a);const p=1e4+2e4*Math.random();ul(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const a=this.statsListener_.get(),l={};let p=!1;ji(a,(_,S)=>{S>0&&(0,W.r3)(this.statsToReport_,_)&&(l[_]=S,p=!0)}),p&&this.server_.reportStats(l),ul(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Do=(()=>{return(u=Do||(Do={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Do;var u})();function ec(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class tc{constructor(a,l,p){this.path=a,this.affectedTree=l,this.revert=p,this.type=Do.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(Nn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new zr(a));return new tc(pi(),l,this.revert)}}return(0,W.hu)(Dr(this.path)===a,"operationForChild called for unrelated child."),new tc(Ti(this.path),this.affectedTree,this.revert)}}class Xi{constructor(a,l){this.source=a,this.path=l,this.type=Do.LISTEN_COMPLETE}operationForChild(a){return Nn(this.path)?new Xi(this.source,pi()):new Xi(this.source,Ti(this.path))}}class _l{constructor(a,l,p){this.source=a,this.path=l,this.snap=p,this.type=Do.OVERWRITE}operationForChild(a){return Nn(this.path)?new _l(this.source,pi(),this.snap.getImmediateChild(a)):new _l(this.source,Ti(this.path),this.snap)}}class Ra{constructor(a,l,p){this.source=a,this.path=l,this.children=p,this.type=Do.MERGE}operationForChild(a){if(Nn(this.path)){const l=this.children.subtree(new zr(a));return l.isEmpty()?null:l.value?new _l(this.source,pi(),l.value):new Ra(this.source,pi(),l)}return(0,W.hu)(Dr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new Ra(this.source,Ti(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class El{constructor(a,l,p){this.node_=a,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(Nn(a))return this.isFullyInitialized()&&!this.filtered_;const l=Dr(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class pd{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function ru(u,a,l,p,_,S){const k=p.filter(X=>X.type===l);k.sort((X,ae)=>function os(u,a,l){if(null==a.childName||null==l.childName)throw(0,W.g5)("Should only compare child_ events.");const p=new ot(a.childName,a.snapshotNode),_=new ot(l.childName,l.snapshotNode);return u.index_.compare(p,_)}(u,X,ae)),k.forEach(X=>{const ae=function ff(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,X,S);_.forEach(Se=>{Se.respondsTo(X.type)&&a.push(Se.createEvent(ae,u.query_))})})}function ua(u,a){return{eventCache:u,serverCache:a}}function rc(u,a,l,p){return ua(new El(a,l,p),u.serverCache)}function Gl(u,a,l,p){return ua(u.eventCache,new El(a,l,p))}function ic(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function ca(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Uc;class Rr{constructor(a,l=(()=>(Uc||(Uc=new Hr(sa)),Uc))()){this.value=a,this.children=l}static fromObject(a){let l=new Rr(null);return ji(a,(p,_)=>{l=l.set(new zr(p),_)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:pi(),value:this.value};if(Nn(a))return null;{const p=Dr(a),_=this.children.get(p);if(null!==_){const S=_.findRootMostMatchingPathAndValue(Ti(a),l);return null!=S?{path:$r(new zr(p),S.path),value:S.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(Nn(a))return this;{const l=Dr(a),p=this.children.get(l);return null!==p?p.subtree(Ti(a)):new Rr(null)}}set(a,l){if(Nn(a))return new Rr(l,this.children);{const p=Dr(a),S=(this.children.get(p)||new Rr(null)).set(Ti(a),l),k=this.children.insert(p,S);return new Rr(this.value,k)}}remove(a){if(Nn(a))return this.children.isEmpty()?new Rr(null):new Rr(null,this.children);{const l=Dr(a),p=this.children.get(l);if(p){const _=p.remove(Ti(a));let S;return S=_.isEmpty()?this.children.remove(l):this.children.insert(l,_),null===this.value&&S.isEmpty()?new Rr(null):new Rr(this.value,S)}return this}}get(a){if(Nn(a))return this.value;{const l=Dr(a),p=this.children.get(l);return p?p.get(Ti(a)):null}}setTree(a,l){if(Nn(a))return l;{const p=Dr(a),S=(this.children.get(p)||new Rr(null)).setTree(Ti(a),l);let k;return k=S.isEmpty()?this.children.remove(p):this.children.insert(p,S),new Rr(this.value,k)}}fold(a){return this.fold_(pi(),a)}fold_(a,l){const p={};return this.children.inorderTraversal((_,S)=>{p[_]=S.fold_($r(a,_),l)}),l(a,this.value,p)}findOnPath(a,l){return this.findOnPath_(a,pi(),l)}findOnPath_(a,l,p){const _=!!this.value&&p(l,this.value);if(_)return _;if(Nn(a))return null;{const S=Dr(a),k=this.children.get(S);return k?k.findOnPath_(Ti(a),$r(l,S),p):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,pi(),l)}foreachOnPath_(a,l,p){if(Nn(a))return this;{this.value&&p(l,this.value);const _=Dr(a),S=this.children.get(_);return S?S.foreachOnPath_(Ti(a),$r(l,_),p):new Rr(null)}}foreach(a){this.foreach_(pi(),a)}foreach_(a,l){this.children.inorderTraversal((p,_)=>{_.foreach_($r(a,p),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,p)=>{p.value&&a(l,p.value)})}}class Lr{constructor(a){this.writeTree_=a}static empty(){return new Lr(new Rr(null))}}function sc(u,a,l){if(Nn(a))return new Lr(new Rr(l));{const p=u.writeTree_.findRootMostValueAndPath(a);if(null!=p){const _=p.path;let S=p.value;const k=Js(_,a);return S=S.updateChild(k,l),new Lr(u.writeTree_.set(_,S))}{const _=new Rr(l),S=u.writeTree_.setTree(a,_);return new Lr(S)}}}function jc(u,a,l){let p=u;return ji(l,(_,S)=>{p=sc(p,$r(a,_),S)}),p}function Qo(u,a){if(Nn(a))return Lr.empty();{const l=u.writeTree_.setTree(a,new Rr(null));return new Lr(l)}}function oc(u,a){return null!=Ws(u,a)}function Ws(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(Js(l.path,a)):null}function Su(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ur,(p,_)=>{a.push(new ot(p,_))}):u.writeTree_.children.inorderTraversal((p,_)=>{null!=_.value&&a.push(new ot(p,_.value))}),a}function Lo(u,a){if(Nn(a))return u;{const l=Ws(u,a);return new Lr(null!=l?new Rr(l):u.writeTree_.subtree(a))}}function Bo(u){return u.writeTree_.isEmpty()}function to(u,a){return gd(pi(),u.writeTree_,a)}function gd(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let p=null;return a.children.inorderTraversal((_,S)=>{".priority"===_?((0,W.hu)(null!==S.value,"Priority writes must always be leaf nodes"),p=S.value):l=gd($r(u,_),S,l)}),!l.getChild(u).isEmpty()&&null!==p&&(l=l.updateChild($r(u,".priority"),p)),l}}function zl(u,a){return vd(a,u)}function ac(u,a){if(u.snap)return Co(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&Co($r(u.path,l),a))return!0;return!1}function lc(u){return u.visible}function Hc(u,a,l){let p=Lr.empty();for(let _=0;_<u.length;++_){const S=u[_];if(a(S)){const k=S.path;let X;if(S.snap)Co(l,k)?(X=Js(l,k),p=sc(p,X,S.snap)):Co(k,l)&&(X=Js(k,l),p=sc(p,pi(),S.snap.getChild(X)));else{if(!S.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if(Co(l,k))X=Js(l,k),p=jc(p,X,S.children);else if(Co(k,l))if(X=Js(k,l),Nn(X))p=jc(p,pi(),S.children);else{const ae=(0,W.DV)(S.children,Dr(X));if(ae){const Se=ae.getChild(Ti(X));p=sc(p,pi(),Se)}}}}}return p}function md(u,a,l,p,_){if(p||_){const S=Lo(u.visibleWrites,a);return!_&&Bo(S)?l:_||null!=l||oc(S,pi())?to(Hc(u.allWrites,function(Se){return(Se.visible||_)&&(!p||!~p.indexOf(Se.writeId))&&(Co(Se.path,a)||Co(a,Se.path))},a),l||Fr.EMPTY_NODE):null}{const S=Ws(u.visibleWrites,a);if(null!=S)return S;{const k=Lo(u.visibleWrites,a);return Bo(k)?l:null!=l||oc(k,pi())?to(k,l||Fr.EMPTY_NODE):null}}}function Ji(u,a,l,p){return md(u.writeTree,u.treePath,a,l,p)}function el(u,a){return function gf(u,a,l){let p=Fr.EMPTY_NODE;const _=Ws(u.visibleWrites,a);if(_)return _.isLeafNode()||_.forEachChild(ur,(S,k)=>{p=p.updateImmediateChild(S,k)}),p;if(l){const S=Lo(u.visibleWrites,a);return l.forEachChild(ur,(k,X)=>{const ae=to(Lo(S,new zr(k)),X);p=p.updateImmediateChild(k,ae)}),Su(S).forEach(k=>{p=p.updateImmediateChild(k.name,k.node)}),p}return Su(Lo(u.visibleWrites,a)).forEach(k=>{p=p.updateImmediateChild(k.name,k.node)}),p}(u.writeTree,u.treePath,a)}function Wl(u,a,l,p){return function hh(u,a,l,p,_){(0,W.hu)(p||_,"Either existingEventSnap or existingServerSnap must exist");const S=$r(a,l);if(oc(u.visibleWrites,S))return null;{const k=Lo(u.visibleWrites,S);return Bo(k)?_.getChild(l):to(k,_.getChild(l))}}(u.writeTree,u.treePath,a,l,p)}function cc(u,a){return function uc(u,a){return Ws(u.visibleWrites,a)}(u.writeTree,$r(u.treePath,a))}function bs(u,a,l){return function Gi(u,a,l,p){const _=$r(a,l),S=Ws(u.visibleWrites,_);return null!=S?S:p.isCompleteForChild(l)?to(Lo(u.visibleWrites,_),p.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function yd(u,a){return vd($r(u.treePath,a),u.writeTree)}function vd(u,a){return{treePath:u,writeTree:a}}class zc{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,p=a.childName;(0,W.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(p);if(_){const S=_.type;if("child_added"===l&&"child_removed"===S)this.changeMap.set(p,Ja(p,a.snapshotNode,_.snapshotNode));else if("child_removed"===l&&"child_added"===S)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===S)this.changeMap.set(p,Zu(p,_.oldSnap));else if("child_changed"===l&&"child_added"===S)this.changeMap.set(p,Fo(p,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==S)throw(0,W.g5)("Illegal combination of changes: "+a+" occurred after "+_);this.changeMap.set(p,Ja(p,a.snapshotNode,_.oldSnap))}}else this.changeMap.set(p,a)}getChanges(){return Array.from(this.changeMap.values())}}const C=new class tl{getCompleteChild(a){return null}getChildAfterChild(a,l,p){return null}};class g{constructor(a,l,p=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const p=null!=this.optCompleteServerCache_?new El(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bs(this.writes_,a,p)}}getChildAfterChild(a,l,p){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ca(this.viewCache_),S=function hp(u,a,l,p,_,S){return function Gc(u,a,l,p,_,S,k){let X;const ae=Lo(u.visibleWrites,a),Se=Ws(ae,pi());if(null!=Se)X=Se;else{if(null==l)return[];X=to(ae,l)}if(X=X.withIndex(k),X.isEmpty()||X.isLeafNode())return[];{const wt=[],St=k.getCompare(),$t=S?X.getReverseIteratorFrom(p,k):X.getIteratorFrom(p,k);let Sn=$t.getNext();for(;Sn&&wt.length<_;)0!==St(Sn,p)&&wt.push(Sn),Sn=$t.getNext();return wt}}(u.writeTree,u.treePath,a,l,p,_,S)}(this.writes_,_,l,1,p,a);return 0===S.length?null:S[0]}}function ht(u,a,l,p,_,S){const k=a.eventCache;if(null!=cc(p,l))return a;{let X,ae;if(Nn(l))if((0,W.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Se=ca(a),St=el(p,Se instanceof Fr?Se:Fr.EMPTY_NODE);X=u.filter.updateFullNode(a.eventCache.getNode(),St,S)}else{const Se=Ji(p,ca(a));X=u.filter.updateFullNode(a.eventCache.getNode(),Se,S)}else{const Se=Dr(l);if(".priority"===Se){(0,W.hu)(1===ss(l),"Can't have a priority with additional path components");const wt=k.getNode();ae=a.serverCache.getNode();const St=Wl(p,l,wt,ae);X=null!=St?u.filter.updatePriority(wt,St):k.getNode()}else{const wt=Ti(l);let St;if(k.isCompleteForChild(Se)){ae=a.serverCache.getNode();const $t=Wl(p,l,k.getNode(),ae);St=null!=$t?k.getNode().getImmediateChild(Se).updateChild(wt,$t):k.getNode().getImmediateChild(Se)}else St=bs(p,Se,a.serverCache);X=null!=St?u.filter.updateChild(k.getNode(),Se,St,wt,_,S):k.getNode()}}return rc(a,X,k.isFullyInitialized()||Nn(l),u.filter.filtersNodes())}}function Pt(u,a,l,p,_,S,k,X){const ae=a.serverCache;let Se;const wt=k?u.filter:u.filter.getIndexedFilter();if(Nn(l))Se=wt.updateFullNode(ae.getNode(),p,null);else if(wt.filtersNodes()&&!ae.isFiltered()){const Sn=ae.getNode().updateChild(l,p);Se=wt.updateFullNode(ae.getNode(),Sn,null)}else{const Sn=Dr(l);if(!ae.isCompleteForPath(l)&&ss(l)>1)return a;const $n=Ti(l),Kr=ae.getNode().getImmediateChild(Sn).updateChild($n,p);Se=".priority"===Sn?wt.updatePriority(ae.getNode(),Kr):wt.updateChild(ae.getNode(),Sn,Kr,$n,C,null)}const St=Gl(a,Se,ae.isFullyInitialized()||Nn(l),wt.filtersNodes());return ht(u,St,l,_,new g(_,St,S),X)}function dn(u,a,l,p,_,S,k){const X=a.eventCache;let ae,Se;const wt=new g(_,a,S);if(Nn(l))Se=u.filter.updateFullNode(a.eventCache.getNode(),p,k),ae=rc(a,Se,!0,u.filter.filtersNodes());else{const St=Dr(l);if(".priority"===St)Se=u.filter.updatePriority(a.eventCache.getNode(),p),ae=rc(a,Se,X.isFullyInitialized(),X.isFiltered());else{const $t=Ti(l),Sn=X.getNode().getImmediateChild(St);let $n;if(Nn($t))$n=p;else{const Br=wt.getCompleteChild(St);$n=null!=Br?".priority"===aa($t)&&Br.getChild(tu($t)).isEmpty()?Br:Br.updateChild($t,p):Fr.EMPTY_NODE}ae=Sn.equals($n)?a:rc(a,u.filter.updateChild(X.getNode(),St,$n,$t,wt,k),X.isFullyInitialized(),u.filter.filtersNodes())}}return ae}function Vn(u,a){return u.eventCache.isCompleteForChild(a)}function sr(u,a,l){return l.foreach((p,_)=>{a=a.updateChild(p,_)}),a}function Bs(u,a,l,p,_,S,k,X){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Se,ae=a;Se=Nn(l)?p:new Rr(null).setTree(l,p);const wt=a.serverCache.getNode();return Se.children.inorderTraversal((St,$t)=>{if(wt.hasChild(St)){const $n=sr(0,a.serverCache.getNode().getImmediateChild(St),$t);ae=Pt(u,ae,new zr(St),$n,_,S,k,X)}}),Se.children.inorderTraversal((St,$t)=>{const Sn=!a.serverCache.isCompleteForChild(St)&&void 0===$t.value;if(!wt.hasChild(St)&&!Sn){const Br=sr(0,a.serverCache.getNode().getImmediateChild(St),$t);ae=Pt(u,ae,new zr(St),Br,_,S,k,X)}}),ae}class ph{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const p=this.query_._queryParams,_=new xa(p.getIndex()),S=function Ma(u){return u.loadsAllData()?new xa(u.getIndex()):u.hasLimit()?new cd(u):new Cu(u)}(p);this.processor_=function v(u){return{filter:u}}(S);const k=l.serverCache,X=l.eventCache,ae=_.updateFullNode(Fr.EMPTY_NODE,k.getNode(),null),Se=S.updateFullNode(Fr.EMPTY_NODE,X.getNode(),null),wt=new El(ae,k.isFullyInitialized(),_.filtersNodes()),St=new El(Se,X.isFullyInitialized(),S.filtersNodes());this.viewCache_=ua(St,wt),this.eventGenerator_=new pd(this.query_)}get query(){return this.query_}}function Pa(u,a){const l=ca(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!Nn(a)&&!l.getImmediateChild(Dr(a)).isEmpty())?l.getChild(a):null}function mh(u){return 0===u.eventRegistrations_.length}function hc(u,a,l){const p=[];if(l){(0,W.hu)(null==a,"A cancel should cancel all event registrations.");const _=u.query._path;u.eventRegistrations_.forEach(S=>{const k=S.createCancelEvent(l,_);k&&p.push(k)})}if(a){let _=[];for(let S=0;S<u.eventRegistrations_.length;++S){const k=u.eventRegistrations_[S];if(k.matches(a)){if(a.hasAnyCallback()){_=_.concat(u.eventRegistrations_.slice(S+1));break}}else _.push(k)}u.eventRegistrations_=_}else u.eventRegistrations_=[];return p}function fc(u,a,l,p){a.type===Do.MERGE&&null!==a.source.queryId&&((0,W.hu)(ca(u.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(ic(u.viewCache_),"Missing event cache, even though we have a server cache"));const _=u.viewCache_,S=function Q(u,a,l,p,_){const S=new zc;let k,X;if(l.type===Do.OVERWRITE){const Se=l;Se.source.fromUser?k=dn(u,a,Se.path,Se.snap,p,_,S):((0,W.hu)(Se.source.fromServer,"Unknown source."),X=Se.source.tagged||a.serverCache.isFiltered()&&!Nn(Se.path),k=Pt(u,a,Se.path,Se.snap,p,_,X,S))}else if(l.type===Do.MERGE){const Se=l;Se.source.fromUser?k=function vr(u,a,l,p,_,S,k){let X=a;return p.foreach((ae,Se)=>{const wt=$r(l,ae);Vn(a,Dr(wt))&&(X=dn(u,X,wt,Se,_,S,k))}),p.foreach((ae,Se)=>{const wt=$r(l,ae);Vn(a,Dr(wt))||(X=dn(u,X,wt,Se,_,S,k))}),X}(u,a,Se.path,Se.children,p,_,S):((0,W.hu)(Se.source.fromServer,"Unknown source."),X=Se.source.tagged||a.serverCache.isFiltered(),k=Bs(u,a,Se.path,Se.children,p,_,X,S))}else if(l.type===Do.ACK_USER_WRITE){const Se=l;k=Se.revert?function Wc(u,a,l,p,_,S){let k;if(null!=cc(p,l))return a;{const X=new g(p,a,_),ae=a.eventCache.getNode();let Se;if(Nn(l)||".priority"===Dr(l)){let wt;if(a.serverCache.isFullyInitialized())wt=Ji(p,ca(a));else{const St=a.serverCache.getNode();(0,W.hu)(St instanceof Fr,"serverChildren would be complete if leaf node"),wt=el(p,St)}Se=u.filter.updateFullNode(ae,wt,S)}else{const wt=Dr(l);let St=bs(p,wt,a.serverCache);null==St&&a.serverCache.isCompleteForChild(wt)&&(St=ae.getImmediateChild(wt)),Se=null!=St?u.filter.updateChild(ae,wt,St,Ti(l),X,S):a.eventCache.getNode().hasChild(wt)?u.filter.updateChild(ae,wt,Fr.EMPTY_NODE,Ti(l),X,S):ae,Se.isEmpty()&&a.serverCache.isFullyInitialized()&&(k=Ji(p,ca(a)),k.isLeafNode()&&(Se=u.filter.updateFullNode(Se,k,S)))}return k=a.serverCache.isFullyInitialized()||null!=cc(p,pi()),rc(a,Se,k,u.filter.filtersNodes())}}(u,a,Se.path,p,_,S):function Vs(u,a,l,p,_,S,k){if(null!=cc(_,l))return a;const X=a.serverCache.isFiltered(),ae=a.serverCache;if(null!=p.value){if(Nn(l)&&ae.isFullyInitialized()||ae.isCompleteForPath(l))return Pt(u,a,l,ae.getNode().getChild(l),_,S,X,k);if(Nn(l)){let Se=new Rr(null);return ae.getNode().forEachChild(Rn,(wt,St)=>{Se=Se.set(new zr(wt),St)}),Bs(u,a,l,Se,_,S,X,k)}return a}{let Se=new Rr(null);return p.foreach((wt,St)=>{const $t=$r(l,wt);ae.isCompleteForPath($t)&&(Se=Se.set(wt,ae.getNode().getChild($t)))}),Bs(u,a,l,Se,_,S,X,k)}}(u,a,Se.path,Se.affectedTree,p,_,S)}else{if(l.type!==Do.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+l.type);k=function dc(u,a,l,p,_){const S=a.serverCache;return ht(u,Gl(a,S.getNode(),S.isFullyInitialized()||Nn(l),S.isFiltered()),l,p,C,_)}(u,a,l.path,p,S)}const ae=S.getChanges();return function de(u,a,l){const p=a.eventCache;if(p.isFullyInitialized()){const _=p.getNode().isLeafNode()||p.getNode().isEmpty(),S=ic(u);(l.length>0||!u.eventCache.isFullyInitialized()||_&&!p.getNode().equals(S)||!p.getNode().getPriority().equals(S.getPriority()))&&l.push(ah(ic(a)))}}(a,k,ae),{viewCache:k,changes:ae}}(u.processor_,_,a,l,p);return function T(u,a){(0,W.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,S.viewCache),(0,W.hu)(S.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=S.viewCache,vh(u,S.changes,S.viewCache.eventCache.getNode(),null)}function vh(u,a,l,p){return function nc(u,a,l,p){const _=[],S=[];return a.forEach(k=>{"child_changed"===k.type&&u.index_.indexedValueChanged(k.oldSnap,k.snapshotNode)&&S.push(function $l(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(k.childName,k.snapshotNode))}),ru(u,_,"child_removed",a,p,l),ru(u,_,"child_added",a,p,l),ru(u,_,"child_moved",S,p,l),ru(u,_,"child_changed",a,p,l),ru(u,_,"value",a,p,l),_}(u.eventGenerator_,a,l,p?[p]:u.eventRegistrations_)}let wl,_f;class nl{constructor(){this.views=new Map}}function pp(u,a,l,p){const _=a.source.queryId;if(null!==_){const S=u.views.get(_);return(0,W.hu)(null!=S,"SyncTree gave us an op for an invalid query."),fc(S,a,l,p)}{let S=[];for(const k of u.views.values())S=S.concat(fc(k,a,l,p));return S}}function gp(u,a,l,p,_){const k=u.views.get(a._queryIdentifier);if(!k){let X=Ji(l,_?p:null),ae=!1;X?ae=!0:p instanceof Fr?(X=el(l,p),ae=!1):(X=Fr.EMPTY_NODE,ae=!1);const Se=ua(new El(X,ae,!1),new El(p,_,!1));return new ph(a,Se)}return k}function gg(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function pc(u,a){let l=null;for(const p of u.views.values())l=l||Pa(p,a);return l}function mp(u,a){return a._queryParams.loadsAllData()?_d(u):u.views.get(a._queryIdentifier)}function vf(u,a){return null!=mp(u,a)}function xu(u){return null!=_d(u)}function _d(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let yg=1;class gc{constructor(a){this.listenProvider_=a,this.syncPointTree_=new Rr(null),this.pendingWriteTree_=function fh(){return{visibleWrites:Lr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _h(u,a,l,p,_){return function ch(u,a,l,p,_){(0,W.hu)(p>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),u.allWrites.push({path:a,snap:l,writeId:p,visible:_}),_&&(u.visibleWrites=sc(u.visibleWrites,a,l)),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p,_),_?rl(u,new _l({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Mu(u,a,l=!1){const p=function Wr(u,a){for(let l=0;l<u.allWrites.length;l++){const p=u.allWrites[l];if(p.writeId===a)return p}return null}(u.pendingWriteTree_,a);if(function pf(u,a){const l=u.allWrites.findIndex(X=>X.writeId===a);(0,W.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=u.allWrites[l];u.allWrites.splice(l,1);let _=p.visible,S=!1,k=u.allWrites.length-1;for(;_&&k>=0;){const X=u.allWrites[k];X.visible&&(k>=l&&ac(X,p.path)?_=!1:Co(p.path,X.path)&&(S=!0)),k--}return!!_&&(S?(function Oa(u){u.visibleWrites=Hc(u.allWrites,lc,pi()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(p.snap?u.visibleWrites=Qo(u.visibleWrites,p.path):ji(p.children,ae=>{u.visibleWrites=Qo(u.visibleWrites,$r(p.path,ae))}),!0))}(u.pendingWriteTree_,a)){let S=new Rr(null);return null!=p.snap?S=S.set(pi(),!0):ji(p.children,k=>{S=S.set(new zr(k),!0)}),rl(u,new tc(p.path,S,l))}return[]}function Eh(u,a,l){return rl(u,new _l({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function qc(u,a,l,p){const _=a._path,S=u.syncPointTree_.get(_);let k=[];if(S&&("default"===a._queryIdentifier||vf(S,a))){const X=function Am(u,a,l,p){const _=a._queryIdentifier,S=[];let k=[];const X=xu(u);if("default"===_)for(const[ae,Se]of u.views.entries())k=k.concat(hc(Se,l,p)),mh(Se)&&(u.views.delete(ae),Se.query._queryParams.loadsAllData()||S.push(Se.query));else{const ae=u.views.get(_);ae&&(k=k.concat(hc(ae,l,p)),mh(ae)&&(u.views.delete(_),ae.query._queryParams.loadsAllData()||S.push(ae.query)))}return X&&!xu(u)&&S.push(new(function mf(){return(0,W.hu)(wl,"Reference.ts has not been loaded"),wl}())(a._repo,a._path)),{removed:S,events:k}}(S,a,l,p);(function yf(u){return 0===u.views.size})(S)&&(u.syncPointTree_=u.syncPointTree_.remove(_));const ae=X.removed;k=X.events;const Se=-1!==ae.findIndex(St=>St._queryParams.loadsAllData()),wt=u.syncPointTree_.findOnPath(_,(St,$t)=>xu($t));if(Se&&!wt){const St=u.syncPointTree_.subtree(_);if(!St.isEmpty()){const $t=function _g(u){return u.fold((a,l,p)=>{if(l&&xu(l))return[_d(l)];{let _=[];return l&&(_=gg(l)),ji(p,(S,k)=>{_=_.concat(k)}),_}})}(St);for(let Sn=0;Sn<$t.length;++Sn){const $n=$t[Sn],Br=$n.query,Kr=bd(u,$n);u.listenProvider_.startListening(bh(Br),Yc(u,Br),Kr.hashFn,Kr.onComplete)}}}!wt&&ae.length>0&&!p&&(Se?u.listenProvider_.stopListening(bh(a),null):ae.forEach(St=>{const $t=u.queryToTagMap.get(Dd(St));u.listenProvider_.stopListening(bh(St),$t)})),function vp(u,a){for(let l=0;l<a.length;++l){const p=a[l];if(!p._queryParams.loadsAllData()){const _=Dd(p),S=u.queryToTagMap.get(_);u.queryToTagMap.delete(_),u.tagToQueryMap.delete(S)}}}(u,ae)}return k}function Ed(u,a,l,p){const _=Ih(u,p);if(null!=_){const S=Ch(_),k=S.path,X=S.queryId,ae=Js(k,a);return Td(u,k,new _l(ec(X),ae,l))}return[]}function wd(u,a){const l=u._path;let p=null,_=!1;a.syncPointTree_.foreachOnPath(l,(Se,wt)=>{const St=Js(Se,l);p=p||pc(wt,St),_=_||xu(wt)});let k,S=a.syncPointTree_.get(l);S?(_=_||xu(S),p=p||pc(S,pi())):(S=new nl,a.syncPointTree_=a.syncPointTree_.set(l,S)),null!=p?k=!0:(k=!1,p=Fr.EMPTY_NODE,a.syncPointTree_.subtree(l).foreachChild((wt,St)=>{const $t=pc(St,pi());$t&&(p=p.updateImmediateChild(wt,$t))}));const X=vf(S,u);if(!X&&!u._queryParams.loadsAllData()){const Se=Dd(u);(0,W.hu)(!a.queryToTagMap.has(Se),"View does not exist, but we have a tag");const wt=function If(){return yg++}();a.queryToTagMap.set(Se,wt),a.tagToQueryMap.set(wt,Se)}return{syncPoint:S,writesCache:zl(a.pendingWriteTree_,l),serverCache:p,serverCacheComplete:k,foundAncestorDefaultView:_,viewAlreadyExists:X}}function wh(u,a,l){const{syncPoint:p,serverCache:_,writesCache:S,serverCacheComplete:k,viewAlreadyExists:X,foundAncestorDefaultView:ae}=wd(a,u);let Se=function Sm(u,a,l,p,_,S){const k=gp(u,a,p,_,S);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,k),function yh(u,a){u.eventRegistrations_.push(a)}(k,l),function Vo(u,a){const l=u.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(ur,(S,k)=>{p.push(Fo(S,k))}),l.isFullyInitialized()&&p.push(ah(l.getNode())),vh(u,p,l.getNode(),a)}(k,l)}(p,a,l,S,_,k);if(!X&&!ae){const wt=mp(p,a);Se=Se.concat(function Sd(u,a,l){const p=a._path,_=Yc(u,a),S=bd(u,l),k=u.listenProvider_.startListening(bh(a),_,S.hashFn,S.onComplete),X=u.syncPointTree_.subtree(p);if(_)(0,W.hu)(!xu(X.value),"If we're adding a query, it shouldn't be shadowed");else{const ae=X.fold((Se,wt,St)=>{if(!Nn(Se)&&wt&&xu(wt))return[_d(wt).query];{let $t=[];return wt&&($t=$t.concat(gg(wt).map(Sn=>Sn.query))),ji(St,(Sn,$n)=>{$t=$t.concat($n)}),$t}});for(let Se=0;Se<ae.length;++Se){const wt=ae[Se];u.listenProvider_.stopListening(bh(wt),Yc(u,wt))}}return k}(u,a,wt))}return Se}function Id(u,a,l){const _=u.pendingWriteTree_,S=u.syncPointTree_.findOnPath(a,(k,X)=>{const Se=pc(X,Js(k,a));if(Se)return Se});return md(_,a,S,l,!0)}function rl(u,a){return iu(a,u.syncPointTree_,null,zl(u.pendingWriteTree_,pi()))}function iu(u,a,l,p){if(Nn(u.path))return Il(u,a,l,p);{const _=a.get(pi());null==l&&null!=_&&(l=pc(_,pi()));let S=[];const k=Dr(u.path),X=u.operationForChild(k),ae=a.children.get(k);if(ae&&X){const Se=l?l.getImmediateChild(k):null,wt=yd(p,k);S=S.concat(iu(X,ae,Se,wt))}return _&&(S=S.concat(pp(_,u,p,l))),S}}function Il(u,a,l,p){const _=a.get(pi());null==l&&null!=_&&(l=pc(_,pi()));let S=[];return a.children.inorderTraversal((k,X)=>{const ae=l?l.getImmediateChild(k):null,Se=yd(p,k),wt=u.operationForChild(k);wt&&(S=S.concat(Il(wt,X,ae,Se)))}),_&&(S=S.concat(pp(_,u,p,l))),S}function bd(u,a){const l=a.query,p=Yc(u,l);return{hashFn:()=>(function gh(u){return u.viewCache_.serverCache.getNode()}(a)||Fr.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return p?function To(u,a,l){const p=Ih(u,l);if(p){const _=Ch(p),S=_.path,k=_.queryId,X=Js(S,a);return Td(u,S,new Xi(ec(k),X))}return[]}(u,l._path,p):function yp(u,a){return rl(u,new Xi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const S=function _a(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const p=new Error(u+" at "+a._path.toString()+": "+l);return p.code=u.toUpperCase(),p}(_,l);return qc(u,l,null,S)}}}}function Yc(u,a){const l=Dd(a);return u.queryToTagMap.get(l)}function Dd(u){return u._path.toString()+"$"+u._queryIdentifier}function Ih(u,a){return u.tagToQueryMap.get(a)}function Ch(u){const a=u.indexOf("$");return(0,W.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new zr(u.substr(0,a))}}function Td(u,a,l){const p=u.syncPointTree_.get(a);return(0,W.hu)(p,"Missing sync point for query tag that we're tracking"),pp(p,l,zl(u.pendingWriteTree_,a),null)}function bh(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function mg(){return(0,W.hu)(_f,"Reference.ts has not been loaded"),_f}())(u._repo,u._path):u}class Ou{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new Ou(l)}node(){return this.node_}}class _p{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=$r(this.path_,a);return new _p(this.syncTree_,l)}node(){return Id(this.syncTree_,this.path_)}}const Eg=function(u,a,l){return u&&"object"==typeof u?((0,W.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?wg(u[".sv"],a,l):"object"==typeof u[".sv"]?Mm(u[".sv"],a):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},wg=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,W.hu)(!1,"Unexpected server value: "+u)},Mm=function(u,a,l){u.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const p=u.increment;"number"!=typeof p&&(0,W.hu)(!1,"Unexpected increment value: "+p);const _=a.node();if((0,W.hu)(null!==_&&typeof _<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return p;const k=_.getValue();return"number"!=typeof k?p:k+p},Ad=function(u,a,l,p){return ku(a,new _p(l,u),p)},Pu=function(u,a,l){return ku(u,new Ou(a),l)};function ku(u,a,l){const p=u.getPriority().val(),_=Eg(p,a.getImmediateChild(".priority"),l);let S;if(u.isLeafNode()){const k=u,X=Eg(k.getValue(),a,l);return X!==k.getValue()||_!==k.getPriority().val()?new Zo(X,Hi(_)):u}{const k=u;return S=k,_!==k.getPriority().val()&&(S=S.updatePriority(new Zo(_))),k.forEachChild(ur,(X,ae)=>{const Se=ku(ae,a.getImmediateChild(X),l);Se!==ae&&(S=S.updateImmediateChild(X,Se))}),S}}class Dh{constructor(a="",l=null,p={children:{},childCount:0}){this.name=a,this.parent=l,this.node=p}}function Cf(u,a){let l=a instanceof zr?a:new zr(a),p=u,_=Dr(l);for(;null!==_;){const S=(0,W.DV)(p.node.children,_)||{children:{},childCount:0};p=new Dh(_,p,S),l=Ti(l),_=Dr(l)}return p}function Kc(u){return u.node.value}function Th(u,a){u.node.value=a,Sh(u)}function Tr(u){return u.node.childCount>0}function xd(u,a){ji(u.node.children,(l,p)=>{a(new Dh(l,u,p))})}function Zc(u,a,l,p){l&&!p&&a(u),xd(u,_=>{Zc(_,a,!0,p)}),l&&p&&a(u)}function Nu(u){return new zr(null===u.parent?u.name:Nu(u.parent)+"/"+u.name)}function Sh(u){null!==u.parent&&function Cg(u,a,l){const p=function Ig(u){return void 0===Kc(u)&&!Tr(u)}(l),_=(0,W.r3)(u.node.children,a);p&&_?(delete u.node.children[a],u.node.childCount--,Sh(u)):!p&&!_&&(u.node.children[a]=l.node,u.node.childCount++,Sh(u))}(u.parent,u.name,u)}const da=/[\[\].#$\/\u0000-\u001F\u007F]/,bg=/[\[\].#$\u0000-\u001F\u007F]/,Md=10485760,Rd=function(u){return"string"==typeof u&&0!==u.length&&!da.test(u)},Ah=function(u){return"string"==typeof u&&0!==u.length&&!bg.test(u)},su=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!qo(u)||u&&"object"==typeof u&&(0,W.r3)(u,".sv")},bl=function(u,a,l,p){p&&void 0===a||Dl((0,W.gK)(u,"value"),a,l)},Dl=function(u,a,l){const p=l instanceof zr?new Ls(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+eo(p));if("function"==typeof a)throw new Error(u+"contains a function "+eo(p)+" with contents = "+a.toString());if(qo(a))throw new Error(u+"contains "+a.toString()+" "+eo(p));if("string"==typeof a&&a.length>Md/3&&(0,W.ug)(a)>Md)throw new Error(u+"contains a string greater than "+Md+" utf8 bytes "+eo(p)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let _=!1,S=!1;if(ji(a,(k,X)=>{if(".value"===k)_=!0;else if(".priority"!==k&&".sv"!==k&&(S=!0,!Rd(k)))throw new Error(u+" contains an invalid key ("+k+") "+eo(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ga(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,W.ug)(a),yi(u)})(p,k),Dl(u,X,p),function Aa(u){const a=u.parts_.pop();u.byteLength_-=(0,W.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(p)}),_&&S)throw new Error(u+' contains ".value" child '+eo(p)+" in addition to actual children.")}},Od=function(u,a,l,p){if(p&&void 0===a)return;const _=(0,W.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(_+" must be an object containing the children to replace.");const S=[];ji(a,(k,X)=>{const ae=new zr(k);if(Dl(_,X,$r(l,ae)),".priority"===aa(ae)&&!su(X))throw new Error(_+"contains an invalid value for '"+ae.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");S.push(ae)}),function(u,a){let l,p;for(l=0;l<a.length;l++){p=a[l];const S=Zi(p);for(let k=0;k<S.length;k++)if((".priority"!==S[k]||k!==S.length-1)&&!Rd(S[k]))throw new Error(u+"contains an invalid key ("+S[k]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(Io);let _=null;for(l=0;l<a.length;l++){if(p=a[l],null!==_&&Co(_,p))throw new Error(u+"contains a path "+_.toString()+" that is ancestor of another path "+p.toString());_=p}}(_,S)},Df=function(u,a,l){if(!l||void 0!==a){if(qo(a))throw new Error((0,W.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!su(a))throw new Error((0,W.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ka=function(u,a,l,p){if(!(p&&void 0===l||Rd(l)))throw new Error((0,W.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Qc=function(u,a,l,p){if(!(p&&void 0===l||Ah(l)))throw new Error((0,W.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},$o=function(u,a){if(".info"===Dr(a))throw new Error(u+" failed = Can't modify data under /.info/")},Tg=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!Rd(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Ah(u)}(l))throw new Error((0,W.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mc(u,a){let l=null;for(let p=0;p<a.length;p++){const _=a[p],S=_.getPath();null!==l&&!vs(S,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:S}),l.events.push(_)}l&&u.eventLists_.push(l)}function xh(u,a,l){mc(u,l),Ip(u,p=>vs(p,a))}function ha(u,a,l){mc(u,l),Ip(u,p=>Co(p,a)||Co(a,p))}function Ip(u,a){u.recursionDepth_++;let l=!0;for(let p=0;p<u.eventLists_.length;p++){const _=u.eventLists_[p];_&&(a(_.path)?(Cp(u.eventLists_[p]),u.eventLists_[p]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function Cp(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const p=l.getEventRunner();mo&&hs("event: "+l.toString()),is(p)}}}const Mh="repo_interrupt";class Pd{constructor(a,l,p,_){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lo(),this.transactionQueueTree_=new Dh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bp(u){const l=u.infoData_.getNode(new zr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Rh(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:bp(u)})}function Sf(u,a,l,p,_){u.dataUpdateCount++;const S=new zr(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let k=[];if(_)if(p){const ae=(0,W.UI)(l,Se=>Hi(Se));k=function Ru(u,a,l,p){const _=Ih(u,p);if(_){const S=Ch(_),k=S.path,X=S.queryId,ae=Js(k,a),Se=Rr.fromObject(l);return Td(u,k,new Ra(ec(X),ae,Se))}return[]}(u.serverSyncTree_,S,ae,_)}else{const ae=Hi(l);k=Ed(u.serverSyncTree_,S,ae,_)}else if(p){const ae=(0,W.UI)(l,Se=>Hi(Se));k=function Ef(u,a,l){const p=Rr.fromObject(l);return rl(u,new Ra({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,p))}(u.serverSyncTree_,S,ae)}else{const ae=Hi(l);k=Eh(u.serverSyncTree_,S,ae)}let X=S;k.length>0&&(X=yc(u,S)),ha(u.eventQueue_,X,k)}function Xc(u,a){Oh(u,"connected",a),!1===a&&function Ag(u){ou(u,"onDisconnectEvents");const a=Rh(u),l=lo();Du(u.onDisconnect_,pi(),(_,S)=>{const k=Ad(_,S,u.serverSyncTree_,a);vl(l,_,k)});let p=[];Du(l,pi(),(_,S)=>{p=p.concat(Eh(u.serverSyncTree_,_,S));const k=Sp(u,_);yc(u,k)}),u.onDisconnect_=lo(),ha(u.eventQueue_,pi(),p)}(u)}function Oh(u,a,l){const p=new zr("/.info/"+a),_=Hi(l);u.infoData_.updateSnapshot(p,_);const S=Eh(u.infoSyncTree_,p,_);ha(u.eventQueue_,p,S)}function no(u){return u.nextWriteId_++}function Om(u,a){const l=function Cd(u,a){const l=a._path;let p=null;u.syncPointTree_.foreachOnPath(l,(Se,wt)=>{const St=Js(Se,l);p=p||pc(wt,St)});let _=u.syncPointTree_.get(l);_?p=p||pc(_,pi()):(_=new nl,u.syncPointTree_=u.syncPointTree_.set(l,_));const S=null!=p,k=S?new El(p,!0,!1):null;return function Au(u){return ic(u.viewCache_)}(gp(_,a,zl(u.pendingWriteTree_,a._path),S?k.getNode():Fr.EMPTY_NODE,S))}(u.serverSyncTree_,a);return null!=l?Promise.resolve(l):u.server_.get(a).then(p=>{const _=Hi(p).withIndex(a._queryParams.getIndex());if(a._queryParams.loadsAllData())Eh(u.serverSyncTree_,a._path,_);else{const k=function wf(u,a){const{syncPoint:l,serverCache:p,writesCache:_,serverCacheComplete:S}=wd(a,u),k=gp(l,a,_,p,S);return l.views.has(a._queryIdentifier)||l.views.set(a._queryIdentifier,k),a._queryParams.loadsAllData()?null:Yc(u,a)}(u.serverSyncTree_,a);Ed(u.serverSyncTree_,a._path,_,k)}return qc(u.serverSyncTree_,a,null).length>0&&ou(u,"unexpected cancel events in repoGetValue"),_},p=>(ou(u,"get for query "+(0,W.Pz)(a)+" failed: "+p),Promise.reject(new Error(p))))}function Ph(u,a,l,p,_){ou(u,"set",{path:a.toString(),value:l,priority:p});const S=Rh(u),k=Hi(l,p),X=Id(u.serverSyncTree_,a),ae=Pu(k,X,S),Se=no(u),wt=_h(u.serverSyncTree_,a,ae,Se,!0);mc(u.eventQueue_,wt),u.server_.put(a.toString(),k.val(!0),($t,Sn)=>{const $n="ok"===$t;$n||ks("set at "+a+" failed: "+$t);const Br=Mu(u.serverSyncTree_,Se,!$n);ha(u.eventQueue_,a,Br),Yl(0,_,$t,Sn)});const St=Sp(u,a);yc(u,St),ha(u.eventQueue_,St,[])}function ql(u,a,l){u.server_.onDisconnectCancel(a.toString(),(p,_)=>{"ok"===p&&hd(u.onDisconnect_,a),Yl(0,l,p,_)})}function xg(u,a,l,p){const _=Hi(l);u.server_.onDisconnectPut(a.toString(),_.val(!0),(S,k)=>{"ok"===S&&vl(u.onDisconnect_,a,_),Yl(0,p,S,k)})}function Af(u,a,l){let p;p=".info"===Dr(a._path)?qc(u.infoSyncTree_,a,l):qc(u.serverSyncTree_,a,l),xh(u.eventQueue_,a._path,p)}function Tp(u){u.persistentConnection_&&u.persistentConnection_.interrupt(Mh)}function ou(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),hs(l,...a)}function Yl(u,a,l,p){a&&is(()=>{if("ok"===l)a(null);else{const _=(l||"error").toUpperCase();let S=_;p&&(S+=": "+p);const k=new Error(S);k.code=_,a(k)}})}function Mf(u,a,l){return Id(u.serverSyncTree_,a,l)||Fr.EMPTY_NODE}function Lu(u,a=u.transactionQueueTree_){if(a||kh(u,a),Kc(a)){const l=Rf(u,a);(0,W.hu)(l.length>0,"Sending zero length transaction queue"),l.every(_=>0===_.status)&&function Og(u,a,l){const p=l.map(Se=>Se.currentWriteId),_=Mf(u,a,p);let S=_;const k=_.hash();for(let Se=0;Se<l.length;Se++){const wt=l[Se];(0,W.hu)(0===wt.status,"tryToSendTransactionQueue_: items in queue should all be run."),wt.status=1,wt.retryCount++;const St=Js(a,wt.path);S=S.updateChild(St,wt.currentOutputSnapshotRaw)}const X=S.val(!0),ae=a;u.server_.put(ae.toString(),X,Se=>{ou(u,"transaction put response",{path:ae.toString(),status:Se});let wt=[];if("ok"===Se){const St=[];for(let $t=0;$t<l.length;$t++)l[$t].status=2,wt=wt.concat(Mu(u.serverSyncTree_,l[$t].currentWriteId)),l[$t].onComplete&&St.push(()=>l[$t].onComplete(null,!0,l[$t].currentOutputSnapshotResolved)),l[$t].unwatcher();kh(u,Cf(u.transactionQueueTree_,a)),Lu(u,u.transactionQueueTree_),ha(u.eventQueue_,a,wt);for(let $t=0;$t<St.length;$t++)is(St[$t])}else{if("datastale"===Se)for(let St=0;St<l.length;St++)l[St].status=3===l[St].status?4:0;else{ks("transaction at "+ae.toString()+" failed: "+Se);for(let St=0;St<l.length;St++)l[St].status=4,l[St].abortReason=Se}yc(u,a)}},k)}(u,Nu(a),l)}else Tr(a)&&xd(a,l=>{Lu(u,l)})}function yc(u,a){const l=Pg(u,a),p=Nu(l);return function Nd(u,a,l){if(0===a.length)return;const p=[];let _=[];const k=a.filter(X=>0===X.status).map(X=>X.currentWriteId);for(let X=0;X<a.length;X++){const ae=a[X],Se=Js(l,ae.path);let St,wt=!1;if((0,W.hu)(null!==Se,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ae.status)wt=!0,St=ae.abortReason,_=_.concat(Mu(u.serverSyncTree_,ae.currentWriteId,!0));else if(0===ae.status)if(ae.retryCount>=25)wt=!0,St="maxretry",_=_.concat(Mu(u.serverSyncTree_,ae.currentWriteId,!0));else{const $t=Mf(u,ae.path,k);ae.currentInputSnapshot=$t;const Sn=a[X].update($t.val());if(void 0!==Sn){Dl("transaction failed: Data returned ",Sn,ae.path);let $n=Hi(Sn);"object"==typeof Sn&&null!=Sn&&(0,W.r3)(Sn,".priority")||($n=$n.updatePriority($t.getPriority()));const Kr=ae.currentWriteId,uo=Rh(u),co=Pu($n,$t,uo);ae.currentOutputSnapshotRaw=$n,ae.currentOutputSnapshotResolved=co,ae.currentWriteId=no(u),k.splice(k.indexOf(Kr),1),_=_.concat(_h(u.serverSyncTree_,ae.path,co,ae.currentWriteId,ae.applyLocally)),_=_.concat(Mu(u.serverSyncTree_,Kr,!0))}else wt=!0,St="nodata",_=_.concat(Mu(u.serverSyncTree_,ae.currentWriteId,!0))}ha(u.eventQueue_,l,_),_=[],wt&&(a[X].status=2,setTimeout(a[X].unwatcher,Math.floor(0)),a[X].onComplete&&p.push("nodata"===St?()=>a[X].onComplete(null,!1,a[X].currentInputSnapshot):()=>a[X].onComplete(new Error(St),!1,null)))}kh(u,u.transactionQueueTree_);for(let X=0;X<p.length;X++)is(p[X]);Lu(u,u.transactionQueueTree_)}(u,Rf(u,l),p),p}function Pg(u,a){let l,p=u.transactionQueueTree_;for(l=Dr(a);null!==l&&void 0===Kc(p);)p=Cf(p,l),l=Dr(a=Ti(a));return p}function Rf(u,a){const l=[];return kg(u,a,l),l.sort((p,_)=>p.order-_.order),l}function kg(u,a,l){const p=Kc(a);if(p)for(let _=0;_<p.length;_++)l.push(p[_]);xd(a,_=>{kg(u,_,l)})}function kh(u,a){const l=Kc(a);if(l){let p=0;for(let _=0;_<l.length;_++)2!==l[_].status&&(l[p]=l[_],p++);l.length=p,Th(a,l.length>0?l:void 0)}xd(a,p=>{kh(u,p)})}function Sp(u,a){const l=Nu(Pg(u,a)),p=Cf(u.transactionQueueTree_,a);return function bf(u,a,l){let p=l?u:u.parent;for(;null!==p;){if(a(p))return!0;p=p.parent}}(p,_=>{vc(u,_)}),vc(u,p),Zc(p,_=>{vc(u,_)}),l}function vc(u,a){const l=Kc(a);if(l){const p=[];let _=[],S=-1;for(let k=0;k<l.length;k++)3===l[k].status||(1===l[k].status?((0,W.hu)(S===k-1,"All SENT items should be at beginning of queue."),S=k,l[k].status=3,l[k].abortReason="set"):((0,W.hu)(0===l[k].status,"Unexpected transaction status in abort"),l[k].unwatcher(),_=_.concat(Mu(u.serverSyncTree_,l[k].currentWriteId,!0)),l[k].onComplete&&p.push(l[k].onComplete.bind(null,new Error("set"),!1,null))));-1===S?Th(a,void 0):l.length=S+1,ha(u.eventQueue_,Nu(a),_);for(let k=0;k<p.length;k++)is(p[k])}}const Ld=function(u,a){const l=Ap(u),p=l.namespace;return"firebase.com"===l.domain&&Ss(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&Ss("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Oi(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,a,"",p!==l.subdomain),path:new zr(l.pathString)}},Ap=function(u){let a="",l="",p="",_="",S="",k=!0,X="https",ae=443;if("string"==typeof u){let Se=u.indexOf("//");Se>=0&&(X=u.substring(0,Se-1),u=u.substring(Se+2));let wt=u.indexOf("/");-1===wt&&(wt=u.length);let St=u.indexOf("?");-1===St&&(St=u.length),a=u.substring(0,Math.min(wt,St)),wt<St&&(_=function Fd(u){let a="";const l=u.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let _=l[p];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch{}a+="/"+_}return a}(u.substring(wt,St)));const $t=function Of(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?a[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):ks(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,St)));Se=a.indexOf(":"),Se>=0?(k="https"===X||"wss"===X,ae=parseInt(a.substring(Se+1),10)):Se=a.length;const Sn=a.slice(0,Se);if("localhost"===Sn.toLowerCase())l="localhost";else if(Sn.split(".").length<=2)l=Sn;else{const $n=a.indexOf(".");p=a.substring(0,$n).toLowerCase(),l=a.substring($n+1),S=p}"ns"in $t&&(S=$t.ns)}return{host:a,port:ae,domain:l,subdomain:p,secure:k,scheme:X,pathString:_,namespace:S}};class Pf{constructor(a,l,p,_){this.eventType=a,this.eventRegistration=l,this.snapshot=p,this.prevName=_}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Pz)(this.snapshot.exportVal())}}class Nh{constructor(a,l,p){this.eventRegistration=a,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Pm{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class Bd{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new W.BH;return ql(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){$o("OnDisconnect.remove",this._path);const a=new W.BH;return xg(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){$o("OnDisconnect.set",this._path),bl("OnDisconnect.set",a,this._path,!1);const l=new W.BH;return xg(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){$o("OnDisconnect.setWithPriority",this._path),bl("OnDisconnect.setWithPriority",a,this._path,!1),Df("OnDisconnect.setWithPriority",l,!1);const p=new W.BH;return function kd(u,a,l,p,_){const S=Hi(l,p);u.server_.onDisconnectPut(a.toString(),S.val(!0),(k,X)=>{"ok"===k&&vl(u.onDisconnect_,a,S),Yl(0,_,k,X)})}(this._repo,this._path,a,l,p.wrapCallback(()=>{})),p.promise}update(a){$o("OnDisconnect.update",this._path),Od("OnDisconnect.update",a,this._path,!1);const l=new W.BH;return function Dp(u,a,l,p){if((0,W.xb)(l))return hs("onDisconnect().update() called with empty data.  Don't do anything."),void Yl(0,p,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(_,S)=>{"ok"===_&&ji(l,(k,X)=>{const ae=Hi(X);vl(u.onDisconnect_,$r(a,k),ae)}),Yl(0,p,_,S)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class Na{constructor(a,l,p,_){this._repo=a,this._path=l,this._queryParams=p,this._orderByCalled=_}get key(){return Nn(this._path)?null:aa(this._path)}get ref(){return new La(this._repo,this._path)}get _queryIdentifier(){const a=$c(this._queryParams),l=Ll(a);return"{}"===l?"default":l}get _queryObject(){return $c(this._queryParams)}isEqual(a){if(!((a=(0,W.m9)(a))instanceof Na))return!1;const l=this._repo===a._repo,p=vs(this._path,a._path);return l&&p&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function eu(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function Fh(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function Fa(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Rn){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==yo)throw new Error(p);if("string"!=typeof a)throw new Error(_)}if(u.hasEnd()){if(u.getIndexEndName()!==Gs)throw new Error(p);if("string"!=typeof l)throw new Error(_)}}else if(u.getIndex()===ur){if(null!=a&&!su(a)||null!=l&&!su(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(u.getIndex()instanceof sh||u.getIndex()===uf,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Vd(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class La extends Na{constructor(a,l){super(a,l,new yl,!1)}get parent(){const a=tu(this._path);return null===a?null:new La(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class au{constructor(a,l,p){this._node=a,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new zr(a),p=Ec(this.ref,a);return new au(this._node.getChild(l),p,ur)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,_)=>a(new au(_,Ec(this.ref,p),ur)))}hasChild(a){const l=new zr(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _c(u,a){return(u=(0,W.m9)(u))._checkNotDeleted("ref"),void 0!==a?Ec(u._root,a):u._root}function kf(u,a){(u=(0,W.m9)(u))._checkNotDeleted("refFromURL");const l=Ld(a,u._repo.repoInfo_.nodeAdmin);Tg("refFromURL",l);const p=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&p.host!==u._repo.repoInfo_.host&&Ss("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+u._repo.repoInfo_.host+")"),_c(u,l.path.toString())}function Ec(u,a){return null===Dr((u=(0,W.m9)(u))._path)?(l=a,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Qc("child","path",l,!1)):Qc("child","path",a,!1),new La(u._repo,$r(u._path,a));var l}function Fg(u,a){u=(0,W.m9)(u),$o("set",u._path),bl("set",a,u._path,!1);const l=new W.BH;return Ph(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function Lg(u,a){Od("update",a,u._path,!1);const l=new W.BH;return function Sg(u,a,l,p){ou(u,"update",{path:a.toString(),value:l});let _=!0;const S=Rh(u),k={};if(ji(l,(X,ae)=>{_=!1,k[X]=Ad($r(a,X),Hi(ae),u.serverSyncTree_,S)}),_)hs("update() called with empty data.  Don't do anything."),Yl(0,p,"ok",void 0);else{const X=no(u),ae=function vg(u,a,l,p){!function dh(u,a,l,p){(0,W.hu)(p>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:p,visible:!0}),u.visibleWrites=jc(u.visibleWrites,a,l),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p);const _=Rr.fromObject(l);return rl(u,new Ra({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,_))}(u.serverSyncTree_,a,k,X);mc(u.eventQueue_,ae),u.server_.merge(a.toString(),l,(Se,wt)=>{const St="ok"===Se;St||ks("update at "+a+" failed: "+Se);const $t=Mu(u.serverSyncTree_,X,!St),Sn=$t.length>0?yc(u,a):a;ha(u.eventQueue_,Sn,$t),Yl(0,p,Se,wt)}),ji(l,Se=>{const wt=Sp(u,$r(a,Se));yc(u,wt)}),ha(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}class $d{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const p=l._queryParams.getIndex();return new Pf("value",this,new au(a.snapshotNode,new La(l._repo,l._path),p))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Nh(this,a,l):null}matches(a){return a instanceof $d&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Jc{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Nh(this,a,l):null}createEvent(a,l){(0,W.hu)(null!=a.childName,"Child events should have a childName.");const p=Ec(new La(l._repo,l._path),a.childName),_=l._queryParams.getIndex();return new Pf(a.type,this,new au(a.snapshotNode,p,_),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Jc&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lu(u,a,l,p,_){let S;if("object"==typeof p&&(S=void 0,_=p),"function"==typeof p&&(S=p),_&&_.onlyOnce){const ae=l,Se=(wt,St)=>{Af(u._repo,u,X),ae(wt,St)};Se.userCallback=l.userCallback,Se.context=l.context,l=Se}const k=new Pm(l,S||void 0),X="value"===a?new $d(k):new Jc(a,k);return function Mg(u,a,l){let p;p=".info"===Dr(a._path)?wh(u.infoSyncTree_,a,l):wh(u.serverSyncTree_,a,l),xh(u.eventQueue_,a._path,p)}(u._repo,u,X),()=>Af(u._repo,u,X)}function Ud(u,a,l,p){return lu(u,"value",a,l,p)}function jd(u,a,l,p){return lu(u,"child_added",a,l,p)}function Sl(u,a,l,p){return lu(u,"child_changed",a,l,p)}function Mp(u,a,l,p){return lu(u,"child_moved",a,l,p)}function Bg(u,a,l,p){return lu(u,"child_removed",a,l,p)}function Ff(u,a,l){let p=null;const _=l?new Pm(l):null;"value"===a?p=new $d(_):a&&(p=new Jc(a,_)),Af(u._repo,u,p)}class So{}class wc extends So{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bl("endAt",this._value,a._path,!0);const l=Vc(a._queryParams,this._value,this._key);if(Vd(l),Fa(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Na(a._repo,a._path,l,a._orderByCalled)}}class Ic extends So{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bl("endBefore",this._value,a._path,!1);const l=function df(u,a,l){let p,_;return u.index_===Rn?("string"==typeof a&&(a=Lc(a)),_=Vc(u,a,l)):(p=null==l?yo:Lc(l),_=Vc(u,a,p)),_.endBeforeSet_=!0,_}(a._queryParams,this._value,this._key);if(Vd(l),Fa(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Na(a._repo,a._path,l,a._orderByCalled)}}class Hd extends So{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bl("startAt",this._value,a._path,!0);const l=dd(a._queryParams,this._value,this._key);if(Vd(l),Fa(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Na(a._repo,a._path,l,a._orderByCalled)}}class Gd extends So{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){bl("startAfter",this._value,a._path,!1);const l=function Ul(u,a,l){let p;if(u.index_===Rn)"string"==typeof a&&(a=nu(a)),p=dd(u,a,l);else{let _;_=null==l?Gs:nu(l),p=dd(u,a,_)}return p.startAfterSet_=!0,p}(a._queryParams,this._value,this._key);if(Vd(l),Fa(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Na(a._repo,a._path,l,a._orderByCalled)}}class Bh extends So{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Na(a._repo,a._path,function cf(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class uu extends So{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Na(a._repo,a._path,function Bc(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class Lm extends So{constructor(a){super(),this._path=a}_apply(a){Fh(a,"orderByChild");const l=new zr(this._path);if(Nn(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new sh(l),_=bu(a._queryParams,p);return Fa(_),new Na(a._repo,a._path,_,!0)}}class Bm extends So{_apply(a){Fh(a,"orderByKey");const l=bu(a._queryParams,Rn);return Fa(l),new Na(a._repo,a._path,l,!0)}}class $g extends So{_apply(a){Fh(a,"orderByPriority");const l=bu(a._queryParams,ur);return Fa(l),new Na(a._repo,a._path,l,!0)}}class Vf extends So{_apply(a){Fh(a,"orderByValue");const l=bu(a._queryParams,uf);return Fa(l),new Na(a._repo,a._path,l,!0)}}class Pp extends So{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(bl("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new wc(this._value,this._key)._apply(new Hd(this._value,this._key)._apply(a))}}function il(u,...a){let l=(0,W.m9)(u);for(const p of a)l=p._apply(l);return l}(function fp(u){(0,W.hu)(!wl,"__referenceConstructor has already been defined"),wl=u})(La),function xm(u){(0,W.hu)(!_f,"__referenceConstructor has already been defined"),_f=u}(La);const Hg={};function $m(u,a,l,p,_){let S=p||u.options.databaseURL;void 0===S&&(u.options.projectId||Ss("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hs("Using default host for project ",u.options.projectId),S=`${u.options.projectId}-default-rtdb.firebaseio.com`);let ae,Se,k=Ld(S,_),X=k.repoInfo;typeof process<"u"&&process.env&&(Se=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Se?(ae=!0,S=`http://${Se}?ns=${X.namespace}`,k=Ld(S,_),X=k.repoInfo):ae=!k.repoInfo.secure;const wt=_&&ae?new cl(cl.OWNER):new Rc(u.name,u.options,a);Tg("Invalid Firebase Database URL",k),Nn(k.path)||Ss("Database URL must point to the root of a Firebase Database (not including a child path).");const St=function By(u,a,l,p){let _=Hg[a.name];_||(_={},Hg[a.name]=_);let S=_[u.toURLString()];return S&&Ss("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),S=new Pd(u,false,l,p),_[u.toURLString()]=S,S}(X,u,wt,new vo(u.name,l));return new Vy(St,u)}class Vy{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Tf(u,a,l){if(u.stats_=wn(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new jl(u.repoInfo_,(p,_,S,k)=>{Sf(u,p,_,S,k)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Xc(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Pz)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}u.persistentConnection_=new Ne(u.repoInfo_,a,(p,_,S,k)=>{Sf(u,p,_,S,k)},p=>{Xc(u,p)},p=>{!function Rm(u,a){ji(a,(l,p)=>{Oh(u,l,p)})}(u,p)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(p=>{u.server_.refreshAuthToken(p)}),u.appCheckProvider_.addTokenChangeListener(p=>{u.server_.refreshAppCheckToken(p.token)}),u.statsReporter_=function Nt(u,a){const l=u.toString();return Ia[l]||(Ia[l]=a()),Ia[l]}(u.repoInfo_,()=>new Hl(u.stats_,u.server_)),u.infoData_=new lh,u.infoSyncTree_=new gc({startListening:(p,_,S,k)=>{let X=[];const ae=u.infoData_.getNode(p._path);return ae.isEmpty()||(X=Eh(u.infoSyncTree_,p._path,ae),setTimeout(()=>{k("ok")},0)),X},stopListening:()=>{}}),Oh(u,"connected",!1),u.serverSyncTree_=new gc({startListening:(p,_,S,k)=>(u.server_.listen(p,S,_,(X,ae)=>{const Se=k(X,ae);ha(u.eventQueue_,p._path,Se)}),[]),stopListening:(p,_)=>{u.server_.unlisten(p,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new La(this._repo,pi())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zg(u,a){const l=Hg[a];(!l||l[u.key]!==u)&&Ss(`Database ${a}(${u.repoInfo_}) has already been deleted.`),Tp(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&Ss("Cannot call "+a+" on a deleted database.")}}function Np(){A.IS_TRANSPORT_INITIALIZED&&ks("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function $y(){Np(),wo.forceDisallow()}function cu(){Np(),x.forceDisallow(),wo.forceAllow()}function td(u,a){al(u,a)}const Bp={".sv":"timestamp"};class qg{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ne.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},Ne.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function du(u){Pl(bt.SDK_VERSION),(0,bt._registerComponent)(new Xe.wA("database",(a,{instanceIdentifier:l})=>$m(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,bt.registerVersion)(Wo,"0.13.3",u),(0,bt.registerVersion)(Wo,"0.13.3","esm2017")}();const zd=new $a.Yd("@firebase/database-compat"),Bu=function(u){zd.warn("FIREBASE WARNING: "+u)};class qd{constructor(a){this._delegate=a}cancel(a){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),p=>a(p)),l}remove(a){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),p=>a(p)),l}set(a,l){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(a);return l&&p.then(()=>l(null),_=>l(_)),p}setWithPriority(a,l,p){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const _=this._delegate.setWithPriority(a,l);return p&&_.then(()=>p(null),S=>p(S)),_}update(a,l){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const _={};for(let S=0;S<a.length;++S)_[""+S]=a[S];a=_,Bu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(a);return l&&p.then(()=>l(null),_=>l(_)),p}}class rd{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bc{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),Qc("DataSnapshot.child","path",a,!1),new bc(this._database,this._delegate.child(a))}hasChild(a){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Qc("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new bc(this._database,l)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ba(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ao{constructor(a,l){this.database=a,this._delegate=l}on(a,l,p,_){var S;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",l,!1);const k=Ao.getCancelAndContextArgs_("Query.on",p,_),X=(Se,wt)=>{l.call(k.context,new bc(this.database,Se),wt)};X.userCallback=l,X.context=k.context;const ae=null===(S=k.cancel)||void 0===S?void 0:S.bind(k.context);switch(a){case"value":return Ud(this._delegate,X,ae),l;case"child_added":return jd(this._delegate,X,ae),l;case"child_removed":return Bg(this._delegate,X,ae),l;case"child_changed":return Sl(this._delegate,X,ae),l;case"child_moved":return Mp(this._delegate,X,ae),l;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,p){if((0,W.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,W.Wj)("Query.off","callback",l,!0),(0,W.lb)("Query.off","context",p,!0),l){const _=()=>{};_.userCallback=l,_.context=p,Ff(this._delegate,a,_)}else Ff(this._delegate,a)}get(){return function xp(u){return Om((u=(0,W.m9)(u))._repo,u).then(a=>new au(a,new La(u._repo,u._path),u._queryParams.getIndex()))}(this._delegate).then(a=>new bc(this.database,a))}once(a,l,p,_){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",l,!0);const S=Ao.getCancelAndContextArgs_("Query.once",p,_),k=new W.BH,X=(Se,wt)=>{const St=new bc(this.database,Se);l&&l.call(S.context,St,wt),k.resolve(St)};X.userCallback=l,X.context=S.context;const ae=Se=>{S.cancel&&S.cancel.call(S.context,Se),k.reject(Se)};switch(a){case"value":Ud(this._delegate,X,ae,{onlyOnce:!0});break;case"child_added":jd(this._delegate,X,ae,{onlyOnce:!0});break;case"child_removed":Bg(this._delegate,X,ae,{onlyOnce:!0});break;case"child_changed":Sl(this._delegate,X,ae,{onlyOnce:!0});break;case"child_moved":Mp(this._delegate,X,ae,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return k.promise}limitToFirst(a){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new Ao(this.database,il(this._delegate,function Vh(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bh(u)}(a)))}limitToLast(a){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new Ao(this.database,il(this._delegate,function Fm(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uu(u)}(a)))}orderByChild(a){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new Ao(this.database,il(this._delegate,function Rp(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Qc("orderByChild","path",u,!1),new Lm(u)}(a)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new Ao(this.database,il(this._delegate,function Op(){return new Bm}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new Ao(this.database,il(this._delegate,function Ug(){return new $g}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new Ao(this.database,il(this._delegate,function jg(){return new Vf}()))}startAt(a=null,l){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new Ao(this.database,il(this._delegate,function Bf(u=null,a){return ka("startAt","key",a,!0),new Hd(u,a)}(a,l)))}startAfter(a=null,l){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new Ao(this.database,il(this._delegate,function Lh(u,a){return ka("startAfter","key",a,!0),new Gd(u,a)}(a,l)))}endAt(a=null,l){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new Ao(this.database,il(this._delegate,function Lf(u,a){return ka("endAt","key",a,!0),new wc(u,a)}(a,l)))}endBefore(a=null,l){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new Ao(this.database,il(this._delegate,function Vg(u,a){return ka("endBefore","key",a,!0),new Ic(u,a)}(a,l)))}equalTo(a,l){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new Ao(this.database,il(this._delegate,function ed(u,a){return ka("equalTo","key",a,!0),new Pp(u,a)}(a,l)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof Ao))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,p){const _={cancel:void 0,context:void 0};if(l&&p)_.cancel=l,(0,W.Wj)(a,"cancel",_.cancel,!0),_.context=p,(0,W.lb)(a,"context",_.context,!0);else if(l)if("object"==typeof l&&null!==l)_.context=l;else{if("function"!=typeof l)throw new Error((0,W.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=l}return _}get ref(){return new Ba(this.database,new La(this._delegate._repo,this._delegate._path))}}class Ba extends Ao{constructor(a,l){super(a,new Na(l._repo,l._path,new yl,!1)),this.database=a,this._delegate=l}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new Ba(this.database,Ec(this._delegate,a))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new Ba(this.database,a):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new Ba(this.database,this._delegate.root)}set(a,l){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",l,!0);const p=Fg(this._delegate,a);return l&&p.then(()=>l(null),_=>l(_)),p}update(a,l){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const _={};for(let S=0;S<a.length;++S)_[""+S]=a[S];a=_,Bu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$o("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",l,!0);const p=Lg(this._delegate,a);return l&&p.then(()=>l(null),_=>l(_)),p}setWithPriority(a,l,p){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",p,!0);const _=function Ly(u,a,l){if($o("setWithPriority",u._path),bl("setWithPriority",a,u._path,!1),Df("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const p=new W.BH;return Ph(u._repo,u._path,a,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,a,l);return p&&_.then(()=>p(null),S=>p(S)),_}remove(a){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",a,!0);const l=function km(u){return $o("remove",u._path),Fg(u,null)}(this._delegate);return a&&l.then(()=>a(null),p=>a(p)),l}transaction(a,l,p){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,W.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const _=function Cc(u,a,l){var p;if(u=(0,W.m9)(u),$o("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const _=null===(p=l?.applyLocally)||void 0===p||p,S=new W.BH,X=Ud(u,()=>{});return function Rg(u,a,l,p,_,S){ou(u,"transaction on "+a);const k={path:a,update:l,onComplete:p,status:null,order:_i(),applyLocally:S,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},X=Mf(u,a,void 0);k.currentInputSnapshot=X;const ae=k.update(X.val());if(void 0===ae)k.unwatcher(),k.currentOutputSnapshotRaw=null,k.currentOutputSnapshotResolved=null,k.onComplete&&k.onComplete(null,!1,k.currentInputSnapshot);else{Dl("transaction failed: Data returned ",ae,k.path),k.status=0;const Se=Cf(u.transactionQueueTree_,a),wt=Kc(Se)||[];let St;wt.push(k),Th(Se,wt),"object"==typeof ae&&null!==ae&&(0,W.r3)(ae,".priority")?(St=(0,W.DV)(ae,".priority"),(0,W.hu)(su(St),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):St=(Id(u.serverSyncTree_,a)||Fr.EMPTY_NODE).getPriority().val();const $t=Rh(u),Sn=Hi(ae,St),$n=Pu(Sn,X,$t);k.currentOutputSnapshotRaw=Sn,k.currentOutputSnapshotResolved=$n,k.currentWriteId=no(u);const Br=_h(u.serverSyncTree_,a,$n,k.currentWriteId,k.applyLocally);ha(u.eventQueue_,a,Br),Lu(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(ae,Se,wt)=>{let St=null;ae?S.reject(ae):(St=new au(wt,new La(u._repo,u._path),ur),S.resolve(new qg(Se,St)))},X,_),S.promise}(this._delegate,a,{applyLocally:p}).then(S=>new rd(S.committed,new bc(this.database,S.snapshot)));return l&&_.then(S=>l(null,S.committed,S.snapshot),S=>l(S,!1,null)),_}setPriority(a,l){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",l,!0);const p=function Nm(u,a){u=(0,W.m9)(u),$o("setPriority",u._path),Df("setPriority",a,!1);const l=new W.BH;return Ph(u._repo,$r(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&p.then(()=>l(null),_=>l(_)),p}push(a,l){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",l,!0);const p=function Ng(u,a){u=(0,W.m9)(u),$o("push",u._path),bl("push",a,u._path,!0);const l=bp(u._repo),p=Iu(l),_=Ec(u,p),S=Ec(u,p);let k;return k=null!=a?Fg(S,a).then(()=>S):Promise.resolve(S),_.then=k.then.bind(k),_.catch=k.then.bind(k,void 0),_}(this._delegate,a),_=p.then(k=>new Ba(this.database,k));l&&_.then(()=>l(null),k=>l(k));const S=new Ba(this.database,p);return S.then=_.then.bind(_),S.catch=_.catch.bind(_,void 0),S}onDisconnect(){return $o("Reference.onDisconnect",this._delegate._path),new qd(new Bd(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Dc{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:$y,forceLongPolling:cu}}useEmulator(a,l,p={}){!function Lp(u,a,l,p={}){(u=(0,W.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Ss("Cannot call useEmulator() after instance has already been initialized.");const _=u._repoInternal;let S;if(_.repoInfo_.nodeAdmin)p.mockUserToken&&Ss('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),S=new cl(cl.OWNER);else if(p.mockUserToken){const k="string"==typeof p.mockUserToken?p.mockUserToken:(0,W.Sg)(p.mockUserToken,u.app.options.projectId);S=new cl(k)}!function Vm(u,a,l,p){u.repoInfo_=new Oi(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),p&&(u.authTokenProvider_=p)}(_,a,l,S)}(this._delegate,a,l,p)}ref(a){if((0,W.Dv)("database.ref",0,1,arguments.length),a instanceof Ba){const l=kf(this._delegate,a.toString());return new Ba(this,l)}{const l=_c(this._delegate,a);return new Ba(this,l)}}refFromURL(a){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const p=kf(this._delegate,a);return new Ba(this,p)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function $f(u){(u=(0,W.m9)(u))._checkNotDeleted("goOffline"),Tp(u._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function $h(u){(u=(0,W.m9)(u))._checkNotDeleted("goOnline"),function xf(u){u.persistentConnection_&&u.persistentConnection_.resume(Mh)}(u._repo)}(this._delegate)}}Dc.ServerValue={TIMESTAMP:function sl(){return Bp}(),increment:u=>function nd(u){return{".sv":{increment:u}}}(u)};var jp=Object.freeze({__proto__:null,initStandalone:function Uf({app:u,url:a,version:l,customAuthImpl:p,namespace:_,nodeAdmin:S=!1}){Pl(l);const k=new Xe.zt("auth-internal",new Xe.H0("database-standalone"));return k.setComponent(new Xe.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Dc($m(u,k,void 0,a,S),u),namespace:_}}});const jf=Dc.ServerValue;function Hp(u){return null==u}function Hf(u){return"function"==typeof u.set}function Uh(u,a){return Hf(a)?a:u.ref(a)}function Gf(u,a){if(function jy(u){return"string"==typeof u}(u))return a.stringCase();if(Hf(u))return a.firebaseCase();if(function Hm(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function jh(u,a,l="on",p=V.z){return new me.y(_=>{let S=null;return S=u[l](a,(k,X)=>{p.schedule(()=>{_.next({snapshot:k,prevKey:X})}),"once"===l&&p.schedule(()=>_.complete())},k=>{p.schedule(()=>_.error(k))}),"on"===l?{unsubscribe(){null!=S&&u.off(a,S)}}:{unsubscribe(){}}}).pipe((0,$e.U)(_=>{const{snapshot:S,prevKey:k}=_;let X=null;return S.exists()&&(X=S.key),{type:a,payload:S,prevKey:k,key:X}}),(0,ce.B)())}function Yg(u,a){const l=u.length;for(let p=0;p<l;p++)if(u[p].payload.key===a)return p;return-1}function Gm(u,a){const{payload:l,prevKey:p,key:_}=a,S=Yg(u,_),k=function Gp(u,a){if(Hp(a))return 0;{const l=Yg(u,a);return-1===l?u.length:l+1}}(u,p);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let X=null;a.payload.forEach(ae=>{const Se={payload:ae,type:"value",prevKey:X,key:ae.key};return X=ae.key,u=[...u,Se],!1})}return u;case"child_added":if(S>-1){const X=u[S-1];(X&&X.key||null)!==p&&(u=u.filter(ae=>ae.payload.key!==l.key)).splice(k,0,a)}else{if(null==p)return[a,...u];(u=u.slice()).splice(k,0,a)}return u;case"child_removed":return u.filter(X=>X.payload.key!==l.key);case"child_changed":return u.map(X=>X.payload.key===_?a:X);case"child_moved":if(S>-1){const X=u.splice(S,1)[0];return(u=u.slice()).splice(k,0,X),u}return u;default:return u}}function zf(u){return(Hp(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function Hh(u,a,l){return function fa(u,a,l){return jh(u,"value","once",l).pipe((0,Ve.w)(p=>{const _=[(0,Te.of)(p)];return a.forEach(S=>_.push(jh(u,S,"on",l))),(0,F.T)(..._).pipe((0,Bt.R)(Gm,[]))}),(0,Pn.x)())}(u,a=zf(a),l)}function zp(u,a,l){const p=(a=zf(a)).map(_=>jh(u,_,"on",l));return(0,F.T)(...p)}function Yp(u,a){return function(p,_){return Gf(p,{stringCase:()=>u.child(p)[a](_),firebaseCase:()=>p[a](_),snapshotCase:()=>p.ref[a](_)})}}function Kp(u){return function(l){return l?Gf(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function Wf(u,a){return function(){return jh(u,"value","on",a)}}!function jm(u){u.INTERNAL.registerComponent(new Xe.wA("database-compat",(a,{instanceIdentifier:l})=>{const p=a.getProvider("app-compat").getImmediate(),_=a.getProvider("database").getImmediate({identifier:l});return new Dc(_,p)},"PUBLIC").setServiceProps({Reference:Ba,Query:Ao,Database:Dc,DataSnapshot:bc,enableLogging:td,INTERNAL:jp,ServerValue:jf}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.2.3")}(Re.Z);const qf=new O.OlP("angularfire2.realtimeDatabaseURL"),id=new O.OlP("angularfire2.database.use-emulator");let Zg=(()=>{class u{constructor(l,p,_,S,k,X,ae,Se,wt,St,$t,Sn,$n,Br,Kr){this.schedulers=X;const uo=ae,co=(0,Le.on)(l,k,p);Se&&(0,ge.nw)(co,k,wt,$t,Sn,$n,St,Br),this.database=(0,Le.cc)(`${co.name}.database.${_}`,"AngularFireDatabase",co.name,()=>{const Ds=k.runOutsideAngular(()=>co.database(_||void 0));return uo&&Ds.useEmulator(...uo),Ds},[uo])}list(l,p){const _=this.schedulers.ngZone.runOutsideAngular(()=>Uh(this.database,l));let S=_;return p&&(S=p(_)),function Kg(u,a){const l=a.schedulers.outsideAngular,p=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Yp(p,"update"),set:Yp(p,"set"),push:_=>p.push(_),remove:Kp(p),snapshotChanges:_=>Hh(u,_,l).pipe(Ce.iC),stateChanges:_=>zp(u,_,l).pipe(Ce.iC),auditTrail:_=>function Wp(u,a,l){return function qp(u,a,l){return function zm(u,a){return jh(u,"value","on",a).pipe((0,$e.U)(l=>{let p;return l.payload.forEach(_=>(p=_.key,!1)),{data:l,lastKeyToLoad:p}}))}(u,l).pipe(function go(...u){const a=(0,po.jO)(u);return(0,ui.e)((l,p)=>{const _=u.length,S=new Array(_);let k=u.map(()=>!1),X=!1;for(let ae=0;ae<_;ae++)(0,Ps.Xf)(u[ae]).subscribe((0,us.x)(p,Se=>{S[ae]=Se,!X&&!k[ae]&&(k[ae]=!0,(X=k.every(fo.y))&&(k=null))},Oo.Z));l.subscribe((0,us.x)(p,ae=>{if(X){const Se=[ae,...S];p.next(a?a(...Se):Se)}}))})}(a),(0,$e.U)(([_,S])=>{const k=_.lastKeyToLoad,X=S.map(ae=>ae.key);return{actions:S,lastKeyToLoad:k,loadedKeys:X}}),function ra(u){return(0,ui.e)((a,l)=>{let p=!1,_=0;a.subscribe((0,us.x)(l,S=>(p||(p=!u(S,_++)))&&l.next(S)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,$e.U)(_=>_.actions))}(u,zp(u,a).pipe((0,Bt.R)((_,S)=>[..._,S],[])),l)}(u,_,l).pipe(Ce.iC),valueChanges:(_,S)=>Hh(u,_,l).pipe((0,$e.U)(X=>X.map(ae=>S&&S.idField?Object.assign(Object.assign({},ae.payload.val()),{[S.idField]:ae.key}):ae.payload.val())),Ce.iC)}}(S,this)}object(l){return function Zp(u,a){return{query:u,snapshotChanges:()=>Wf(u,a.schedulers.outsideAngular)().pipe(Ce.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>Wf(u,a.schedulers.outsideAngular)().pipe(Ce.iC,(0,$e.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Uh(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(O.LFG(Le.Dh),O.LFG(Le.xv,8),O.LFG(qf,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(Ce.HU),O.LFG(id,8),O.LFG(ge.zQ,8),O.LFG(ge.Qv,8),O.LFG(ge.L6,8),O.LFG(ge._Q,8),O.LFG(ge.rT,8),O.LFG(ge.lh,8),O.LFG(ge.f7,8),O.LFG(E.nm,8))},u.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Al=(()=>{class u{constructor(){H.Z.registerVersion("angularfire",Ce.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=O.oAB({type:u}),u.\u0275inj=O.cJS({providers:[Zg]}),u})();var Qp=B(9019);let Xp=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=O.oAB({type:u,bootstrap:[De]}),u.\u0275inj=O.cJS({providers:[{provide:Z.wN,useClass:He.r4}],imports:[d.b2,He.Pc.forRoot(),ve,ze.fi.forRoot(),Le.hO.initializeApp(Qp.qe),ge.ww,z.yb,$i,Al]}),u})();(0,O.G48)(),d.q6().bootstrapModule(Xp).catch(u=>console.log(u))},5867:(sn,mt,B)=>{"use strict";B.d(mt,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=B(9681);(0,d.registerVersion)("firebase","9.9.0","app")},127:(sn,mt,B)=>{"use strict";B.d(mt,{Z:()=>d.Z});var d=B(3942);d.Z.registerVersion("firebase","9.9.0","app-compat")},1451:(sn,mt,B)=>{"use strict";B.r(mt);var d=B(5861),O=B(3942),Z=B(2090),He=B(9681),De=B(655),_e=B(1877),ve=B(4859);const $e=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new _e.Yd("@firebase/auth");function bt(C,...g){Ae.logLevel<=_e.in.ERROR&&Ae.error(`Auth (${He.SDK_VERSION}): ${C}`,...g)}function W(C,...g){throw et(C,...g)}function Xe(C,...g){return et(C,...g)}function Ge(C,g,v){const T=Object.assign(Object.assign({},Ve()),{[g]:v});return new Z.LL("auth","Firebase",T).create(g,{appName:C.name})}function Je(C,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&W(C,"argument-error"),Ge(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(C,...g){if("string"!=typeof C){const v=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=C.name),C._errorFactory.create(v,...T)}return Ce.create(C,...g)}function ee(C,g,...v){if(!C)throw et(g,...v)}function qe(C){const g="INTERNAL ASSERTION FAILED: "+C;throw bt(g),new Error(g)}function he(C,g){C||qe(g)}const pe=new Map;function fe(C){he(C instanceof Function,"Expected a class definition");let g=pe.get(C);return g?(he(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,pe.set(C,g),g)}function Tt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Gt(){return"http:"===Et()||"https:"===Et()}function Et(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class be{constructor(g,v){this.shortDelay=g,this.longDelay=v,he(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function yt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ye(C,g){he(C.emulator,"Emulator should always be set here");const{url:v}=C.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Ie{static initialize(g,v,T){this.fetchImpl=g,v&&(this.headersImpl=v),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const st={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rt=new be(3e4,6e4);function vt(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function Vt(C,g,v,T){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(C,g,v,T,Q={}){return hn(C,Q,(0,d.Z)(function*(){let de={},ht={};T&&("GET"===g?ht=T:de={body:JSON.stringify(T)});const Pt=(0,Z.xO)(Object.assign({key:C.config.apiKey},ht)).slice(1),dn=yield C._getAdditionalHeaders();return dn["Content-Type"]="application/json",C.languageCode&&(dn["X-Firebase-Locale"]=C.languageCode),Ie.fetch()(En(C,C.config.apiHost,v,Pt),Object.assign({method:g,headers:dn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function hn(C,g,v){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(C,g,v){C._canInitEmulator=!1;const T=Object.assign(Object.assign({},st),g);try{const Q=new Qt(C),de=yield Promise.race([v(),Q.promise]);Q.clearNetworkTimeout();const ht=yield de.json();if("needConfirmation"in ht)throw kn(C,"account-exists-with-different-credential",ht);if(de.ok&&!("errorMessage"in ht))return ht;{const Pt=de.ok?ht.errorMessage:ht.error.message,[dn,Vn]=Pt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dn)throw kn(C,"credential-already-in-use",ht);if("EMAIL_EXISTS"===dn)throw kn(C,"email-already-in-use",ht);if("USER_DISABLED"===dn)throw kn(C,"user-disabled",ht);const vr=T[dn]||dn.toLowerCase().replace(/[_\s]+/g,"-");if(Vn)throw Ge(C,vr,Vn);W(C,vr)}}catch(Q){if(Q instanceof Z.ZR)throw Q;W(C,"network-request-failed")}})).apply(this,arguments)}function Zt(C,g,v,T){return In.apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(C,g,v,T,Q={}){const de=yield Vt(C,g,v,T,Q);return"mfaPendingCredential"in de&&W(C,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function En(C,g,v,T){const Q=`${g}${v}?${T}`;return C.config.emulator?Ye(C.config,Q):`${C.config.apiScheme}://${Q}`}class Qt{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,T)=>{this.timer=setTimeout(()=>T(Xe(this.auth,"network-request-failed")),Rt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(C,g,v){const T={appName:C.name};v.email&&(T.email=v.email),v.phoneNumber&&(T.phoneNumber=v.phoneNumber);const Q=Xe(C,g,T);return Q.customData._tokenResponse=v,Q}function Sr(){return(Sr=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Zn(C,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yr(C,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function dr(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function mi(){return(mi=(0,d.Z)(function*(C,g=!1){const v=(0,Z.m9)(C),T=yield v.getIdToken(g),Q=en(T);ee(Q&&Q.exp&&Q.auth_time&&Q.iat,v.auth,"internal-error");const de="object"==typeof Q.firebase?Q.firebase:void 0,ht=de?.sign_in_provider;return{claims:Q,token:T,authTime:dr(Yn(Q.auth_time)),issuedAtTime:dr(Yn(Q.iat)),expirationTime:dr(Yn(Q.exp)),signInProvider:ht||null,signInSecondFactor:de?.sign_in_second_factor||null}})).apply(this,arguments)}function Yn(C){return 1e3*Number(C)}function en(C){var g;const[v,T,Q]=C.split(".");if(void 0===v||void 0===T||void 0===Q)return bt("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,Z.tV)(T);return de?JSON.parse(de):(bt("Failed to decode base64 JWT payload"),null)}catch(de){return bt("Caught error parsing JWT payload as JSON",null===(g=de)||void 0===g?void 0:g.toString()),null}}function Tn(C,g){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*(C,g,v=!1){if(v)return g;try{return yield g}catch(T){throw T instanceof Z.ZR&&vn(T)&&C.auth.currentUser===C&&(yield C.auth.signOut()),T}})).apply(this,arguments)}function vn({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class hi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const Q=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,Q)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield v.iteration()}),T)}iteration(){var g=this;return(0,d.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===(null===(v=T)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class Zr{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=dr(this.lastLoginAt),this.creationTime=dr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ti(C){return Er.apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(C){var g;const v=C.auth,T=yield C.getIdToken(),Q=yield Tn(C,yr(v,{idToken:T}));ee(Q?.users.length,v,"internal-error");const de=Q.users[0];C._notifyReloadListener(de);const ht=null!==(g=de.providerUserInfo)&&void 0!==g&&g.length?Ue(de.providerUserInfo):[],Pt=Ze(C.providerData,ht),vr=!!C.isAnonymous&&!(C.email&&de.passwordHash||Pt?.length),sr={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Pt,metadata:new Zr(de.createdAt,de.lastLoginAt),isAnonymous:vr};Object.assign(C,sr)})).apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(C){const g=(0,Z.m9)(C);yield ti(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ze(C,g){return[...C.filter(T=>!g.some(Q=>Q.providerId===T.providerId)),...g]}function Ue(C){return C.map(g=>{var{providerId:v}=g,T=(0,De._T)(g,["providerId"]);return{providerId:v,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function We(){return(We=(0,d.Z)(function*(C,g){const v=yield hn(C,{},(0,d.Z)(function*(){const T=(0,Z.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:Q,apiKey:de}=C.config,ht=En(C,Q,"/v1/token",`key=${de}`),Pt=yield C._getAdditionalHeaders();return Pt["Content-Type"]="application/x-www-form-urlencoded",Ie.fetch()(ht,{method:"POST",headers:Pt,body:T})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ee(g.idToken,"internal-error"),ee(typeof g.idToken<"u","internal-error"),ee(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function zn(C){const g=en(C);return ee(g,"internal-error"),ee(typeof g.exp<"u","internal-error"),ee(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var T=this;return(0,d.Z)(function*(){return ee(!T.accessToken||T.refreshToken,g,"user-token-expired"),v||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var T=this;return(0,d.Z)(function*(){const{accessToken:Q,refreshToken:de,expiresIn:ht}=yield function tt(C,g){return We.apply(this,arguments)}(g,v);T.updateTokensAndExpiration(Q,de,Number(ht))})()}updateTokensAndExpiration(g,v,T){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,v){const{refreshToken:T,accessToken:Q,expirationTime:de}=v,ht=new zt;return T&&(ee("string"==typeof T,"internal-error",{appName:g}),ht.refreshToken=T),Q&&(ee("string"==typeof Q,"internal-error",{appName:g}),ht.accessToken=Q),de&&(ee("number"==typeof de,"internal-error",{appName:g}),ht.expirationTime=de),ht}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return qe("not implemented")}}function Yt(C,g){ee("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class un{constructor(g){var{uid:v,auth:T,stsTokenManager:Q}=g,de=(0,De._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=T,this.stsTokenManager=Q,this.accessToken=Q.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new Zr(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,d.Z)(function*(){const T=yield Tn(v,v.stsTokenManager.getToken(v.auth,g));return ee(T,v.auth,"internal-error"),v.accessToken!==T&&(v.accessToken=T,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),T})()}getIdTokenResult(g){return function qr(C){return mi.apply(this,arguments)}(this,g)}reload(){return function Pr(C){return Ke.apply(this,arguments)}(this)}_assign(g){this!==g&&(ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new un(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var T=this;return(0,d.Z)(function*(){let Q=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),Q=!0),v&&(yield ti(T)),yield T.auth._persistUserIfCurrent(T),Q&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,d.Z)(function*(){const v=yield g.getIdToken();return yield Tn(g,function Dt(C,g){return Sr.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var T,Q,de,ht,Pt,dn,Vn,vr;const sr=null!==(T=v.displayName)&&void 0!==T?T:void 0,Bs=null!==(Q=v.email)&&void 0!==Q?Q:void 0,Vs=null!==(de=v.phoneNumber)&&void 0!==de?de:void 0,dc=null!==(ht=v.photoURL)&&void 0!==ht?ht:void 0,Wc=null!==(Pt=v.tenantId)&&void 0!==Pt?Pt:void 0,ph=null!==(dn=v._redirectEventId)&&void 0!==dn?dn:void 0,gh=null!==(Vn=v.createdAt)&&void 0!==Vn?Vn:void 0,Au=null!==(vr=v.lastLoginAt)&&void 0!==vr?vr:void 0,{uid:Pa,emailVerified:mh,isAnonymous:yh,providerData:hc,stsTokenManager:fc}=v;ee(Pa&&fc,g,"internal-error");const Vo=zt.fromJSON(this.name,fc);ee("string"==typeof Pa,g,"internal-error"),Yt(sr,g.name),Yt(Bs,g.name),ee("boolean"==typeof mh,g,"internal-error"),ee("boolean"==typeof yh,g,"internal-error"),Yt(Vs,g.name),Yt(dc,g.name),Yt(Wc,g.name),Yt(ph,g.name),Yt(gh,g.name),Yt(Au,g.name);const vh=new un({uid:Pa,auth:g,email:Bs,emailVerified:mh,displayName:sr,isAnonymous:yh,photoURL:dc,phoneNumber:Vs,tenantId:Wc,stsTokenManager:Vo,createdAt:gh,lastLoginAt:Au});return hc&&Array.isArray(hc)&&(vh.providerData=hc.map(wl=>Object.assign({},wl))),ph&&(vh._redirectEventId=ph),vh}static _fromIdTokenResponse(g,v,T=!1){return(0,d.Z)(function*(){const Q=new zt;Q.updateFromServerResponse(v);const de=new un({uid:v.localId,auth:g,stsTokenManager:Q,isAnonymous:T});return yield ti(de),de})()}}const On=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(v,T){var Q=this;return(0,d.Z)(function*(){Q.storage[v]=T})()}_get(v){var T=this;return(0,d.Z)(function*(){const Q=T.storage[v];return void 0===Q?null:Q})()}_remove(v){var T=this;return(0,d.Z)(function*(){delete T.storage[v]})()}_addListener(v,T){}_removeListener(v,T){}}return C.type="NONE",C})();function ir(C,g,v){return`firebase:${C}:${g}:${v}`}class Un{constructor(g,v,T){this.persistence=g,this.auth=v,this.userKey=T;const{config:Q,name:de}=this.auth;this.fullUserKey=ir(this.userKey,Q.apiKey,de),this.fullPersistenceKey=ir("persistence",Q.apiKey,de),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?un._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,d.Z)(function*(){if(v.persistence===g)return;const T=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,T?v.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,T="authUser"){return(0,d.Z)(function*(){if(!v.length)return new Un(fe(On),g,T);const Q=(yield Promise.all(v.map(function(){var Vn=(0,d.Z)(function*(vr){if(yield vr._isAvailable())return vr});return function(vr){return Vn.apply(this,arguments)}}()))).filter(Vn=>Vn);let de=Q[0]||fe(On);const ht=ir(T,g.config.apiKey,g.name);let Pt=null;for(const Vn of v)try{const vr=yield Vn._get(ht);if(vr){const sr=un._fromJSON(g,vr);Vn!==de&&(Pt=sr),de=Vn;break}}catch{}const dn=Q.filter(Vn=>Vn._shouldAllowMigration);return de._shouldAllowMigration&&dn.length?(de=dn[0],Pt&&(yield de._set(ht,Pt.toJSON())),yield Promise.all(v.map(function(){var Vn=(0,d.Z)(function*(vr){if(vr!==de)try{yield vr._remove(ht)}catch{}});return function(vr){return Vn.apply(this,arguments)}}())),new Un(de,g,T)):new Un(de,g,T)})()}}function Jn(C){const g=C.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Xr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ar(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(jn(g))return"Blackberry";if(ut(g))return"Webos";if(Ur(g))return"Safari";if((g.includes("chrome/")||or(g))&&!g.includes("edge/"))return"Chrome";if(on(g))return"Android";{const T=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function Ar(C=(0,Z.z$)()){return/firefox\//i.test(C)}function Ur(C=(0,Z.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function or(C=(0,Z.z$)()){return/crios\//i.test(C)}function Xr(C=(0,Z.z$)()){return/iemobile/i.test(C)}function on(C=(0,Z.z$)()){return/android/i.test(C)}function jn(C=(0,Z.z$)()){return/blackberry/i.test(C)}function ut(C=(0,Z.z$)()){return/webos/i.test(C)}function ke(C=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function pn(C=(0,Z.z$)()){return ke(C)||on(C)||ut(C)||jn(C)||/windows phone/i.test(C)||Xr(C)}function hr(C,g=[]){let v;switch(C){case"Browser":v=Jn((0,Z.z$)());break;case"Worker":v=`${Jn((0,Z.z$)())}-${C}`;break;default:v=C}const T=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${He.SDK_VERSION}/${T}`}class gn{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const T=de=>new Promise((ht,Pt)=>{try{ht(g(de))}catch(dn){Pt(dn)}});T.onAbort=v,this.queue.push(T);const Q=this.queue.length-1;return()=>{this.queue[Q]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,d.Z)(function*(){var T;if(v.auth.currentUser===g)return;const Q=[];try{for(const de of v.queue)yield de(g),de.onAbort&&Q.push(de.onAbort)}catch(de){Q.reverse();for(const ht of Q)try{ht()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(T=de)||void 0===T?void 0:T.message})}})()}}class er{constructor(g,v,T){this.app=g,this.heartbeatServiceProvider=v,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ri(this),this.idTokenSubscription=new ri(this),this.beforeStateQueue=new gn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(g,v){var T=this;return v&&(this._popupRedirectResolver=fe(v)),this._initializationPromise=this.queue((0,d.Z)(function*(){var Q,de;if(!T._deleted&&(T.persistenceManager=yield Un.create(T,g),!T._deleted)){if(null!==(Q=T._popupRedirectResolver)&&void 0!==Q&&Q._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(v),T.lastNotifiedUid=(null===(de=T.currentUser)||void 0===de?void 0:de.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,d.Z)(function*(){var T;const Q=yield v.assertedPersistence.getCurrentUser();let de=Q,ht=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Pt=null===(T=v.redirectUser)||void 0===T?void 0:T._redirectEventId,dn=de?._redirectEventId,Vn=yield v.tryRedirectSignIn(g);(!Pt||Pt===dn)&&Vn?.user&&(de=Vn.user,ht=!0)}if(!de)return v.directlySetCurrentUser(null);if(!de._redirectEventId){if(ht)try{yield v.beforeStateQueue.runMiddleware(de)}catch(Pt){de=Q,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Pt))}return de?v.reloadAndSetCurrentUserOrClear(de):v.directlySetCurrentUser(null)}return ee(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===de._redirectEventId?v.directlySetCurrentUser(de):v.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(g){var v=this;return(0,d.Z)(function*(){let T=null;try{T=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,d.Z)(function*(){var T;try{yield ti(g)}catch(Q){if("auth/network-request-failed"!==(null===(T=Q)||void 0===T?void 0:T.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Be(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,d.Z)(function*(){const T=g?(0,Z.m9)(g):null;return T&&ee(T.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(T&&T._clone(v))})()}_updateCurrentUser(g,v=!1){var T=this;return(0,d.Z)(function*(){if(!T._deleted)return g&&ee(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),v||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,d.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,d.Z)(function*(){yield v.assertedPersistence.setPersistence(fe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new Z.LL("auth","Firebase",g())}onAuthStateChanged(g,v,T){return this.registerStateListener(this.authStateSubscription,g,v,T)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,T){return this.registerStateListener(this.idTokenSubscription,g,v,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var T=this;return(0,d.Z)(function*(){const Q=yield T.getOrInitRedirectPersistenceManager(v);return null===g?Q.removeCurrentUser():Q.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,d.Z)(function*(){if(!v.redirectPersistenceManager){const T=g&&fe(g)||v._popupRedirectResolver;ee(T,v,"argument-error"),v.redirectPersistenceManager=yield Un.create(v,[fe(T._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,d.Z)(function*(){var T,Q;return v._isInitialized&&(yield v.queue((0,d.Z)(function*(){}))),(null===(T=v._currentUser)||void 0===T?void 0:T._redirectEventId)===g?v._currentUser:(null===(Q=v.redirectUser)||void 0===Q?void 0:Q._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,d.Z)(function*(){if(g===v.currentUser)return v.queue((0,d.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,T,Q){if(this._deleted)return()=>{};const de="function"==typeof v?v:v.next.bind(v),ht=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(ht,this,"internal-error"),ht.then(()=>de(this.currentUser)),"function"==typeof v?g.addObserver(v,T,Q):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,d.Z)(function*(){v.currentUser&&v.currentUser!==g&&(v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh()),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var v;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const Q=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return Q&&(T["X-Firebase-Client"]=Q),T})()}}function tr(C){return(0,Z.m9)(C)}class ri{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,Z.ne)(v=>this.observer=v)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vr(C){const g=C.indexOf(":");return g<0?"":C.substr(0,g+1)}function Si(C){if(!C)return null;const g=Number(C);return isNaN(g)?null:g}class Ai{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return qe("not implemented")}_getIdTokenResponse(g){return qe("not implemented")}_linkToIdToken(g,v){return qe("not implemented")}_getReauthenticationResolver(g){return qe("not implemented")}}function si(C,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:resetPassword",vt(C,g))})).apply(this,arguments)}function xs(C,g){return es.apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ts(C,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:update",vt(C,g))})).apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithPassword",vt(C,g))})).apply(this,arguments)}function Ei(C,g){return te.apply(this,arguments)}function te(){return(te=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:sendOobCode",vt(C,g))})).apply(this,arguments)}function Ee(C,g){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(C,g){return Ei(C,g)})).apply(this,arguments)}function dt(C,g){return we.apply(this,arguments)}function we(){return(we=(0,d.Z)(function*(C,g){return Ei(C,g)})).apply(this,arguments)}function Pe(C,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(C,g){return Ei(C,g)})).apply(this,arguments)}function Lt(C,g){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(C,g){return Ei(C,g)})).apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithEmailLink",vt(C,g))})).apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithEmailLink",vt(C,g))})).apply(this,arguments)}class Nr extends Ai{constructor(g,v,T,Q=null){super("password",T),this._email=g,this._password=v,this._tenantId=Q}static _fromEmailAndPassword(g,v){return new Nr(g,v,"password")}static _fromEmailAndCode(g,v,T=null){return new Nr(g,v,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return function Bi(C,g){return xi.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Wt(C,g){return yn.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:W(g,"internal-error")}})()}_linkToIdToken(g,v){var T=this;return(0,d.Z)(function*(){switch(T.signInMethod){case"password":return xs(g,{idToken:v,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Fn(C,g){return Wn.apply(this,arguments)}(g,{idToken:v,email:T._email,oobCode:T._password});default:W(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function wi(C,g){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithIdp",vt(C,g))})).apply(this,arguments)}class _t extends Ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new _t(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):W("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:Q}=v,de=(0,De._T)(v,["providerId","signInMethod"]);if(!T||!Q)return null;const ht=new _t(T,Q);return ht.idToken=de.idToken||void 0,ht.accessToken=de.accessToken||void 0,ht.secret=de.secret,ht.nonce=de.nonce,ht.pendingToken=de.pendingToken||null,ht}_getIdTokenResponse(g){return wi(g,this.buildRequest())}_linkToIdToken(g,v){const T=this.buildRequest();return T.idToken=v,wi(g,T)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,wi(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,Z.xO)(v)}return g}}function jt(C,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:sendVerificationCode",vt(C,g))})).apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithPhoneNumber",vt(C,g))})).apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(C,g){const v=yield Zt(C,"POST","/v1/accounts:signInWithPhoneNumber",vt(C,g));if(v.temporaryProof)throw kn(C,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Wi={USER_NOT_FOUND:"user-not-found"};function Is(){return(Is=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithPhoneNumber",vt(C,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Wi)})).apply(this,arguments)}class ns extends Ai{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new ns({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new ns({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function An(C,g){return Ir.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function Vi(C,g){return xr.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ws(C,g){return Is.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:T,verificationCode:Q}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:T,code:Q}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:T,phoneNumber:Q,temporaryProof:de}=g;return T||v||Q||de?new ns({verificationId:v,verificationCode:T,phoneNumber:Q,temporaryProof:de}):null}}class Ks{constructor(g){var v,T,Q,de,ht,Pt;const dn=(0,Z.zd)((0,Z.pd)(g)),Vn=null!==(v=dn.apiKey)&&void 0!==v?v:null,vr=null!==(T=dn.oobCode)&&void 0!==T?T:null,sr=function Ys(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Q=dn.mode)&&void 0!==Q?Q:null);ee(Vn&&vr&&sr,"argument-error"),this.apiKey=Vn,this.operation=sr,this.code=vr,this.continueUrl=null!==(de=dn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(ht=dn.languageCode)&&void 0!==ht?ht:null,this.tenantId=null!==(Pt=dn.tenantId)&&void 0!==Pt?Pt:null}static parseLink(g){const v=function Us(C){const g=(0,Z.zd)((0,Z.pd)(C)).link,v=g?(0,Z.zd)((0,Z.pd)(g)).deep_link_id:null,T=(0,Z.zd)((0,Z.pd)(C)).deep_link_id;return(T?(0,Z.zd)((0,Z.pd)(T)).link:null)||T||v||g||C}(g);try{return new Ks(v)}catch{return null}}}let xo=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(v,T){return Nr._fromEmailAndPassword(v,T)}static credentialWithLink(v,T){const Q=Ks.parseLink(T);return ee(Q,"argument-error"),Nr._fromEmailAndCode(v,Q.code,Q.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Ui{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ps extends Ui{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class rs extends ps{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return ee("providerId"in v&&"signInMethod"in v,"argument-error"),_t._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ee(g.idToken||g.accessToken,"argument-error"),_t._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return rs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return rs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T,oauthTokenSecret:Q,pendingToken:de,nonce:ht,providerId:Pt}=g;if(!T&&!Q&&!v&&!de||!Pt)return null;try{return new rs(Pt)._credential({idToken:v,accessToken:T,nonce:ht,pendingToken:de})}catch{return null}}}let js=(()=>{class C extends ps{constructor(){super("facebook.com")}static credential(v){return _t._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return C.credentialFromTaggedObject(v)}static credentialFromError(v){return C.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return C.credential(v.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Zs=(()=>{class C extends ps{constructor(){super("google.com"),this.addScope("profile")}static credential(v,T){return _t._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:T})}static credentialFromResult(v){return C.credentialFromTaggedObject(v)}static credentialFromError(v){return C.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:T,oauthAccessToken:Q}=v;if(!T&&!Q)return null;try{return C.credential(T,Q)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Qs=(()=>{class C extends ps{constructor(){super("github.com")}static credential(v){return _t._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return C.credentialFromTaggedObject(v)}static credentialFromError(v){return C.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return C.credential(v.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class ls extends Ai{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return wi(g,this.buildRequest())}_linkToIdToken(g,v){const T=this.buildRequest();return T.idToken=v,wi(g,T)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,wi(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:Q,pendingToken:de}=v;return T&&Q&&de&&T===Q?new ls(T,de):null}static _create(g,v){return new ls(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class jr extends Ui{constructor(g){ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return jr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return jr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=ls.fromJSON(g);return ee(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:T}=g;if(!v||!T)return null;try{return ls._create(T,v)}catch{return null}}}let so=(()=>{class C extends ps{constructor(){super("twitter.com")}static credential(v,T){return _t._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:T})}static credentialFromResult(v){return C.credentialFromTaggedObject(v)}static credentialFromError(v){return C.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:T,oauthTokenSecret:Q}=v;if(!T||!Q)return null;try{return C.credential(T,Q)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Rs(C,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signUp",vt(C,g))})).apply(this,arguments)}class gs{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,T,Q=!1){return(0,d.Z)(function*(){const de=yield un._fromIdTokenResponse(g,T,Q),ht=Ro(T);return new gs({user:de,providerId:ht,_tokenResponse:T,operationType:v})})()}static _forOperation(g,v,T){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const Q=Ro(T);return new gs({user:g,providerId:Q,_tokenResponse:T,operationType:v})})()}}function Ro(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function na(){return(na=(0,d.Z)(function*(C){var g;const v=tr(C);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new gs({user:v.currentUser,providerId:null,operationType:"signIn"});const T=yield Rs(v,{returnSecureToken:!0}),Q=yield gs._fromIdTokenResponse(v,"signIn",T,!0);return yield v._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class Hs extends Z.ZR{constructor(g,v,T,Q){var de;super(v.code,v.message),this.operationType=T,this.user=Q,Object.setPrototypeOf(this,Hs.prototype),this.customData={appName:g.name,tenantId:null!==(de=g.tenantId)&&void 0!==de?de:void 0,_serverResponse:v.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,v,T,Q){return new Hs(g,v,T,Q)}}function zo(C,g,v,T){return("reauthenticate"===g?v._getReauthenticationResolver(C):v._getIdTokenResponse(C)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?Hs._fromErrorAndOperation(C,de,g,T):de})}function Ii(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function Mi(){return(Mi=(0,d.Z)(function*(C,g){const v=(0,Z.m9)(C);yield $(!0,v,g);const{providerUserInfo:T}=yield Zn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),Q=Ii(T||[]);return v.providerData=v.providerData.filter(de=>Q.has(de.providerId)),Q.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Os(C,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(C,g,v=!1){const T=yield Tn(C,g._linkToIdToken(C.auth,yield C.getIdToken()),v);return gs._forOperation(C,"link",T)})).apply(this,arguments)}function $(C,g,v){return re.apply(this,arguments)}function re(){return(re=(0,d.Z)(function*(C,g,v){yield ti(g);const Q=!1===C?"provider-already-linked":"no-such-provider";ee(Ii(g.providerData).has(v)===C,g.auth,Q)})).apply(this,arguments)}function U(C,g){return ue.apply(this,arguments)}function ue(){return(ue=(0,d.Z)(function*(C,g,v=!1){var T;const{auth:Q}=C,de="reauthenticate";try{const ht=yield Tn(C,zo(Q,de,g,C),v);ee(ht.idToken,Q,"internal-error");const Pt=en(ht.idToken);ee(Pt,Q,"internal-error");const{sub:dn}=Pt;return ee(C.uid===dn,Q,"user-mismatch"),gs._forOperation(C,de,ht)}catch(ht){throw"auth/user-not-found"===(null===(T=ht)||void 0===T?void 0:T.code)&&W(Q,"user-mismatch"),ht}})).apply(this,arguments)}function lt(C,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(C,g,v=!1){const T="signIn",Q=yield zo(C,T,g),de=yield gs._fromIdTokenResponse(C,T,Q);return v||(yield C._updateCurrentUser(de.user)),de})).apply(this,arguments)}function Ct(C,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(C,g){return lt(tr(C),g)})).apply(this,arguments)}function ai(C,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(C,g){const v=(0,Z.m9)(C);return yield $(!1,v,g.providerId),Os(v,g)})).apply(this,arguments)}function li(C,g){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(C,g){return U((0,Z.m9)(C),g)})).apply(this,arguments)}function vi(C,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,d.Z)(function*(C,g){return Zt(C,"POST","/v1/accounts:signInWithCustomToken",vt(C,g))})).apply(this,arguments)}function E(){return(E=(0,d.Z)(function*(C,g){const v=tr(C),T=yield vi(v,{token:g,returnSecureToken:!0}),Q=yield gs._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class H{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?I._fromServerResponse(g,v):W(g,"internal-error")}}class I extends H{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new I(v)}}function j(C,g,v){var T;ee((null===(T=v.url)||void 0===T?void 0:T.length)>0,C,"invalid-continue-uri"),ee(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ee(v.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(ee(v.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function xt(){return(xt=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C),Q={requestType:"PASSWORD_RESET",email:g};v&&j(T,Q,v),yield dt(T,Q)})).apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(C,g,v){yield si((0,Z.m9)(C),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(C,g){yield ts((0,Z.m9)(C),{oobCode:g})})).apply(this,arguments)}function bi(C,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(C,g){const v=(0,Z.m9)(C),T=yield si(v,{oobCode:g}),Q=T.requestType;switch(ee(Q,v,"internal-error"),Q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(T.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(T.mfaInfo,v,"internal-error");default:ee(T.email,v,"internal-error")}let de=null;return T.mfaInfo&&(de=H._fromServerResponse(tr(v),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:de},operation:Q}})).apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(C,g){const{data:v}=yield bi((0,Z.m9)(C),g);return v.email})).apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(C,g,v){const T=tr(C),Q=yield Rs(T,{returnSecureToken:!0,email:g,password:v}),de=yield gs._fromIdTokenResponse(T,"signIn",Q);return yield T._updateCurrentUser(de.user),de})).apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C),Q={requestType:"EMAIL_SIGNIN",email:g};ee(v.handleCodeInApp,T,"argument-error"),v&&j(T,Q,v),yield Pe(T,Q)})).apply(this,arguments)}function Ps(){return(Ps=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C),Q=xo.credentialWithLink(g,v||Tt());return ee(Q._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Ct(T,Q)})).apply(this,arguments)}function fo(C,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:createAuthUri",vt(C,g))})).apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(C,g){const T={identifier:g,continueUri:Gt()?Tt():"http://localhost"},{signinMethods:Q}=yield fo((0,Z.m9)(C),T);return Q||[]})).apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(C,g){const v=(0,Z.m9)(C),Q={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};g&&j(v.auth,Q,g);const{email:de}=yield Ee(v.auth,Q);de!==C.email&&(yield C.reload())})).apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:g};v&&j(T.auth,de,v);const{email:ht}=yield Lt(T.auth,de);ht!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ol(C,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(C,g){return Vt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function kl(){return(kl=(0,d.Z)(function*(C,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const T=(0,Z.m9)(C),de={idToken:yield T.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},ht=yield Tn(T,Ol(T.auth,de));T.displayName=ht.displayName||null,T.photoURL=ht.photoUrl||null;const Pt=T.providerData.find(({providerId:dn})=>"password"===dn);Pt&&(Pt.displayName=T.displayName,Pt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(ht)})).apply(this,arguments)}function Po(C,g,v){return ds.apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(C,g,v){const{auth:T}=C,de={idToken:yield C.getIdToken(),returnSecureToken:!0};g&&(de.email=g),v&&(de.password=v);const ht=yield Tn(C,xs(T,de));yield C._updateTokensIfNecessary(ht,!0)})).apply(this,arguments)}class _i{constructor(g,v,T={}){this.isNewUser=g,this.providerId=v,this.profile=T}}class Ql extends _i{constructor(g,v,T,Q){super(g,v,T),this.username=Q}}class ya extends _i{constructor(g,v){super(g,"facebook.com",v)}}class mo extends Ql{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class fu extends _i{constructor(g,v){super(g,"google.com",v)}}class al extends Ql{constructor(g,v,T){super(g,"twitter.com",v,T)}}function hs(C){const{user:g,_tokenResponse:v}=C;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Yi(C){var g,v;if(!C)return null;const{providerId:T}=C,Q=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},de=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!T&&C?.idToken){const ht=null===(v=null===(g=en(C.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(ht)return new _i(de,"anonymous"!==ht&&"custom"!==ht?ht:null)}if(!T)return null;switch(T){case"facebook.com":return new ya(de,Q);case"github.com":return new mo(de,Q);case"google.com":return new fu(de,Q);case"twitter.com":return new al(de,Q,C.screenName||null);case"custom":case"anonymous":return new _i(de,null);default:return new _i(de,T,Q)}}(v)}class Xs{constructor(g,v){this.type=g,this.credential=v}static _fromIdtoken(g){return new Xs("enroll",g)}static _fromMfaPendingCredential(g){return new Xs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,T;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Xs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(T=g.multiFactorSession)&&void 0!==T&&T.idToken)return Xs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class sa{constructor(g,v,T){this.session=g,this.hints=v,this.signInResolver=T}static _fromError(g,v){const T=tr(g),Q=v.customData._serverResponse,de=(Q.mfaInfo||[]).map(Pt=>H._fromServerResponse(T,Pt));ee(Q.mfaPendingCredential,T,"internal-error");const ht=Xs._fromMfaPendingCredential(Q.mfaPendingCredential);return new sa(ht,de,function(){var Pt=(0,d.Z)(function*(dn){const Vn=yield dn._process(T,ht);delete Q.mfaInfo,delete Q.mfaPendingCredential;const vr=Object.assign(Object.assign({},Q),{idToken:Vn.idToken,refreshToken:Vn.refreshToken});switch(v.operationType){case"signIn":const sr=yield gs._fromIdTokenResponse(T,v.operationType,vr);return yield T._updateCurrentUser(sr.user),sr;case"reauthenticate":return ee(v.user,T,"internal-error"),gs._forOperation(v.user,v.operationType,vr);default:W(T,"internal-error")}});return function(dn){return Pt.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,d.Z)(function*(){return v.signInResolver(g)})()}}function Ll(C,g){return Vt(C,"POST","/v2/accounts/mfaEnrollment:start",vt(C,g))}class ll{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(T=>H._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new ll(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Xs._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,v){var T=this;return(0,d.Z)(function*(){const Q=g,de=yield T.getSession(),ht=yield Tn(T.user,Q._process(T.user.auth,de,v));return yield T.user._updateTokensIfNecessary(ht),T.user.reload()})()}unenroll(g){var v=this;return(0,d.Z)(function*(){var T;const Q="string"==typeof g?g:g.uid,de=yield v.user.getIdToken(),ht=yield Tn(v.user,function ji(C,g){return Vt(C,"POST","/v2/accounts/mfaEnrollment:withdraw",vt(C,g))}(v.user.auth,{idToken:de,mfaEnrollmentId:Q}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Pt})=>Pt!==Q),yield v.user._updateTokensIfNecessary(ht);try{yield v.user.reload()}catch(Pt){if("auth/user-token-expired"!==(null===(T=Pt)||void 0===T?void 0:T.code))throw Pt}})()}}const Xo=new WeakMap,_a="__sak";class oa{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ea=(()=>{class C extends oa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,T)=>this.onStorageEvent(v,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ns(){const C=(0,Z.z$)();return Ur(C)||ke(C)}()&&function qn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const T of Object.keys(this.listeners)){const Q=this.storage.getItem(T),de=this.localCache[T];Q!==de&&v(T,de,Q)}}onStorageEvent(v,T=!1){if(!v.key)return void this.forAllChangedKeys((Pt,dn,Vn)=>{this.notifyListeners(Pt,Vn)});const Q=v.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pt=this.storage.getItem(Q);if(v.newValue!==Pt)null!==v.newValue?this.storage.setItem(Q,v.newValue):this.storage.removeItem(Q);else if(this.localCache[Q]===v.newValue&&!T)return}const de=()=>{const Pt=this.storage.getItem(Q);!T&&this.localCache[Q]===Pt||this.notifyListeners(Q,Pt)},ht=this.storage.getItem(Q);!function Ut(){return(0,Z.w1)()&&10===document.documentMode}()||ht===v.newValue||v.newValue===v.oldValue?de():setTimeout(de,10)}notifyListeners(v,T){this.localCache[v]=T;const Q=this.listeners[v];if(Q)for(const de of Array.from(Q))de(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,T,Q)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:T,newValue:Q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(T)}_removeListener(v,T){this.listeners[v]&&(this.listeners[v].delete(T),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,T){var Q=()=>super._set,de=this;return(0,d.Z)(function*(){yield Q().call(de,v,T),de.localCache[v]=JSON.stringify(T)})()}_get(v){var T=()=>super._get,Q=this;return(0,d.Z)(function*(){const de=yield T().call(Q,v);return Q.localCache[v]=JSON.stringify(de),de})()}_remove(v){var T=()=>super._remove,Q=this;return(0,d.Z)(function*(){yield T().call(Q,v),delete Q.localCache[v]})()}}return C.type="LOCAL",C})(),vo=(()=>{class C extends oa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,T){}_removeListener(v,T){}}return C.type="SESSION",C})();let cl=(()=>{class C{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const T=this.receivers.find(de=>de.isListeningto(v));if(T)return T;const Q=new C(v);return this.receivers.push(Q),Q}isListeningto(v){return this.eventTarget===v}handleEvent(v){var T=this;return(0,d.Z)(function*(){const Q=v,{eventId:de,eventType:ht,data:Pt}=Q.data,dn=T.handlersMap[ht];if(!dn?.size)return;Q.ports[0].postMessage({status:"ack",eventId:de,eventType:ht});const Vn=Array.from(dn).map(function(){var sr=(0,d.Z)(function*(Bs){return Bs(Q.origin,Pt)});return function(Bs){return sr.apply(this,arguments)}}()),vr=yield function Rc(C){return Promise.all(C.map(function(){var g=(0,d.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(T){return{fulfilled:!1,reason:T}}});return function(v){return g.apply(this,arguments)}}()))}(Vn);Q.ports[0].postMessage({status:"done",eventId:de,eventType:ht,response:vr})})()}_subscribe(v,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(T)}_unsubscribe(v,T){this.handlersMap[v]&&T&&this.handlersMap[v].delete(T),(!T||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function ki(C="",g=10){let v="";for(let T=0;T<g;T++)v+=Math.floor(10*Math.random());return C+v}class Xl{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,T=50){var Q=this;return(0,d.Z)(function*(){const de=typeof MessageChannel<"u"?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let ht,Pt;return new Promise((dn,Vn)=>{const vr=ki("",20);de.port1.start();const sr=setTimeout(()=>{Vn(new Error("unsupported_event"))},T);Pt={messageChannel:de,onMessage(Bs){const Vs=Bs;if(Vs.data.eventId===vr)switch(Vs.data.status){case"ack":clearTimeout(sr),ht=setTimeout(()=>{Vn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ht),dn(Vs.data.response);break;default:clearTimeout(sr),clearTimeout(ht),Vn(new Error("invalid_response"))}}},Q.handlers.add(Pt),de.port1.addEventListener("message",Pt.onMessage),Q.target.postMessage({eventType:g,eventId:vr,data:v},[de.port2])}).finally(()=>{Pt&&Q.removeMessageHandler(Pt)})})()}}function ni(){return window}function _o(){return typeof ni().WorkerGlobalScope<"u"&&"function"==typeof ni().importScripts}function Yo(){return(Yo=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const dl="firebaseLocalStorageDb",Oi="firebaseLocalStorage",wa="fbase_key";class ko{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Ln(C,g){return C.transaction([Oi],g?"readwrite":"readonly").objectStore(Oi)}function Ia(){const C=indexedDB.open(dl,1);return new Promise((g,v)=>{C.addEventListener("error",()=>{v(C.error)}),C.addEventListener("upgradeneeded",()=>{const T=C.result;try{T.createObjectStore(Oi,{keyPath:wa})}catch(Q){v(Q)}}),C.addEventListener("success",(0,d.Z)(function*(){const T=C.result;T.objectStoreNames.contains(Oi)?g(T):(T.close(),yield function Hn(){const C=indexedDB.deleteDatabase(dl);return new ko(C).toPromise()}(),g(yield Ia()))}))})}function wn(C,g,v){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(C,g,v){const T=Ln(C,!0).put({[wa]:g,value:v});return new ko(T).toPromise()})).apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(C,g){const v=Ln(C,!1).get(g),T=yield new ko(v).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Jl(C,g){const v=Ln(C,!0).delete(g);return new ko(v).toPromise()}const Ca=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,d.Z)(function*(){return v.db||(v.db=yield Ia()),v.db})()}_withRetries(v){var T=this;return(0,d.Z)(function*(){let Q=0;for(;;)try{const de=yield T._openDb();return yield v(de)}catch(de){if(Q++>3)throw de;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,d.Z)(function*(){return _o()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,d.Z)(function*(){v.receiver=cl._getInstance(function Ea(){return _o()?self:null}()),v.receiver._subscribe("keyChanged",function(){var T=(0,d.Z)(function*(Q,de){return{keyProcessed:(yield v._poll()).includes(de.key)}});return function(Q,de){return T.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var T=(0,d.Z)(function*(Q,de){return["keyChanged"]});return function(Q,de){return T.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,d.Z)(function*(){var T,Q;if(v.activeServiceWorker=yield function Ki(){return Yo.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Xl(v.activeServiceWorker);const de=yield v.sender._send("ping",{},800);!de||(null===(T=de[0])||void 0===T?void 0:T.fulfilled)&&(null===(Q=de[0])||void 0===Q?void 0:Q.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var T=this;return(0,d.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Eo(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:v},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Ia();return yield wn(v,_a,"1"),yield Jl(v,_a),!0}catch{}return!1})()}_withPendingWrite(v){var T=this;return(0,d.Z)(function*(){T.pendingWrites++;try{yield v()}finally{T.pendingWrites--}})()}_set(v,T){var Q=this;return(0,d.Z)(function*(){return Q._withPendingWrite((0,d.Z)(function*(){return yield Q._withRetries(de=>wn(de,v,T)),Q.localCache[v]=T,Q.notifyServiceWorker(v)}))})()}_get(v){var T=this;return(0,d.Z)(function*(){const Q=yield T._withRetries(de=>function Jt(C,g){return Di.apply(this,arguments)}(de,v));return T.localCache[v]=Q,Q})()}_remove(v){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(Q=>Jl(Q,v)),delete T.localCache[v],T.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,d.Z)(function*(){const T=yield v._withRetries(ht=>{const Pt=Ln(ht,!1).getAll();return new ko(Pt).toPromise()});if(!T)return[];if(0!==v.pendingWrites)return[];const Q=[],de=new Set;for(const{fbase_key:ht,value:Pt}of T)de.add(ht),JSON.stringify(v.localCache[ht])!==JSON.stringify(Pt)&&(v.notifyListeners(ht,Pt),Q.push(ht));for(const ht of Object.keys(v.localCache))v.localCache[ht]&&!de.has(ht)&&(v.notifyListeners(ht,null),Q.push(ht));return Q})()}notifyListeners(v,T){this.localCache[v]=T;const Q=this.listeners[v];if(Q)for(const de of Array.from(Q))de(T)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(T)}_removeListener(v,T){this.listeners[v]&&(this.listeners[v].delete(T),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function hl(C,g){return Vt(C,"POST","/v2/accounts/mfaSignIn:start",vt(C,g))}function Da(){return(Da=(0,d.Z)(function*(C){return(yield Vt(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ta(C){return new Promise((g,v)=>{const T=document.createElement("script");T.setAttribute("src",C),T.onload=g,T.onerror=Q=>{const de=Xe("internal-error");de.customData=Q,v(de)},T.type="text/javascript",T.charset="UTF-8",function _u(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(T)})}function lr(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Qn=1e12;class pr{constructor(g){this.auth=g,this.counter=Qn,this._widgets=new Map}render(g,v){const T=this.counter;return this._widgets.set(T,new wo(g,this.auth.name,v||{})),this.counter++,T}reset(g){var v;const T=g||Qn;null===(v=this._widgets.get(T))||void 0===v||v.delete(),this._widgets.delete(T)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Qn))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,d.Z)(function*(){var T;return null===(T=v._widgets.get(g||Qn))||void 0===T||T.execute(),""})()}}class wo{constructor(g,v,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Q="string"==typeof g?document.getElementById(g):g;ee(Q,"argument-error",{appName:v}),this.container=Q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qr(C){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<C;T++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oc=lr("rcb"),ms=new be(3e4,6e4);class x{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ni().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return ee(function A(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(v),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(ni().grecaptcha):new Promise((T,Q)=>{const de=ni().setTimeout(()=>{Q(Xe(g,"network-request-failed"))},ms.get());ni()[Oc]=()=>{ni().clearTimeout(de),delete ni()[Oc];const Pt=ni().grecaptcha;if(!Pt)return void Q(Xe(g,"internal-error"));const dn=Pt.render;Pt.render=(Vn,vr)=>{const sr=dn(Vn,vr);return this.counter++,sr},this.hostLanguage=v,T(Pt)},Ta(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Oc,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(de),Q(Xe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=ni().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D{load(g){return(0,d.Z)(function*(){return new pr(g)})()}clearedOneInstance(){}}const L="recaptcha",q={theme:"light",type:"image"};class oe{constructor(g,v=Object.assign({},q),T){this.parameters=v,this.type=L,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(T),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Q="string"==typeof g?document.getElementById(g):g;ee(Q,this.auth,"argument-error"),this.container=Q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D:new x,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(v)||new Promise(de=>{const ht=Pt=>{!Pt||(g.tokenChangeListeners.delete(ht),de(Pt))};g.tokenChangeListeners.add(ht),g.isInvisible&&T.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(T=>T(v)),"function"==typeof g)g(v);else if("string"==typeof g){const T=ni()[g];"function"==typeof T&&T(v)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const T=document.createElement("div");v.appendChild(T),v=T}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ee(Gt()&&!_o(),g.auth,"internal-error"),yield function Oe(){let C=null;return new Promise(g=>{"complete"!==document.readyState?(C=()=>g(),window.addEventListener("load",C)):g()}).catch(g=>{throw C&&window.removeEventListener("load",C),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function oo(C){return Da.apply(this,arguments)}(g.auth);ee(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class it{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=ns._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function ln(){return(ln=(0,d.Z)(function*(C,g,v){const T=tr(C),Q=yield Cs(T,g,(0,Z.m9)(v));return new it(Q,de=>Ct(T,de))})).apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C);yield $(!1,T,"phone");const Q=yield Cs(T.auth,g,(0,Z.m9)(v));return new it(Q,de=>ai(T,de))})).apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C),Q=yield Cs(T.auth,g,(0,Z.m9)(v));return new it(Q,de=>li(T,de))})).apply(this,arguments)}function Cs(C,g,v){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(C,g,v){var T;const Q=yield v.verify();try{let de;if(ee("string"==typeof Q,C,"argument-error"),ee(v.type===L,C,"argument-error"),de="string"==typeof g?{phoneNumber:g}:g,"session"in de){const ht=de.session;if("phoneNumber"in de)return ee("enroll"===ht.type,C,"internal-error"),(yield Ll(C,{idToken:ht.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:Q}})).phoneSessionInfo.sessionInfo;{ee("signin"===ht.type,C,"internal-error");const Pt=(null===(T=de.multiFactorHint)||void 0===T?void 0:T.uid)||de.multiFactorUid;return ee(Pt,C,"missing-multi-factor-info"),(yield hl(C,{mfaPendingCredential:ht.credential,mfaEnrollmentId:Pt,phoneSignInInfo:{recaptchaToken:Q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ht}=yield jt(C,{phoneNumber:de.phoneNumber,recaptchaToken:Q});return ht}}finally{v._reset()}})).apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(C,g){yield Os((0,Z.m9)(C),g)})).apply(this,arguments)}let zs=(()=>{class C{constructor(v){this.providerId=C.PROVIDER_ID,this.auth=tr(v)}verifyPhoneNumber(v,T){return Cs(this.auth,v,(0,Z.m9)(T))}static credential(v,T){return ns._fromVerification(v,T)}static credentialFromResult(v){return C.credentialFromTaggedObject(v)}static credentialFromError(v){return C.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:T,temporaryProof:Q}=v;return T&&Q?ns._fromTokenResponse(T,Q):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function No(C,g){return g?fe(g):(ee(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class ys extends Ai{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return wi(g,this._buildIdpRequest())}_linkToIdToken(g,v){return wi(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return wi(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function wu(C){return lt(C.auth,new ys(C),C.bypassAuthState)}function zr(C){const{auth:g,user:v}=C;return ee(v,g,"internal-error"),U(v,new ys(C),C.bypassAuthState)}function pi(C){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,d.Z)(function*(C){const{auth:g,user:v}=C;return ee(v,g,"internal-error"),Os(v,new ys(C),C.bypassAuthState)})).apply(this,arguments)}class ss{constructor(g,v,T,Q,de=!1){this.auth=g,this.resolver=T,this.user=Q,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,d.Z)(function*(T,Q){g.pendingPromise={resolve:T,reject:Q};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(de){g.reject(de)}});return function(T,Q){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,d.Z)(function*(){const{urlResponse:T,sessionId:Q,postBody:de,tenantId:ht,error:Pt,type:dn}=g;if(Pt)return void v.reject(Pt);const Vn={auth:v.auth,requestUri:T,sessionId:Q,tenantId:ht||void 0,postBody:de||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(dn)(Vn))}catch(vr){v.reject(vr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return wu;case"linkViaPopup":case"linkViaRedirect":return pi;case"reauthViaPopup":case"reauthViaRedirect":return zr;default:W(this.auth,"internal-error")}}resolve(g){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ti=new be(2e3,1e4);function eu(){return(eu=(0,d.Z)(function*(C,g,v){const T=tr(C);Je(C,g,Ui);const Q=No(T,v);return new Js(T,"signInViaPopup",g,Q).executeNotNull()})).apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C);Je(T.auth,g,Ui);const Q=No(T.auth,v);return new Js(T.auth,"reauthViaPopup",g,Q,T).executeNotNull()})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C);Je(T.auth,g,Ui);const Q=No(T.auth,v);return new Js(T.auth,"linkViaPopup",g,Q,T).executeNotNull()})).apply(this,arguments)}let Js=(()=>{class C extends ss{constructor(v,T,Q,de,ht){super(v,T,de,ht),this.provider=Q,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var v=this;return(0,d.Z)(function*(){const T=yield v.execute();return ee(T,v.auth,"internal-error"),T})()}onExecution(){var v=this;return(0,d.Z)(function*(){he(1===v.filter.length,"Popup operations only handle one event");const T=ki();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],T),v.authWindow.associatedEvent=T,v.resolver._originValidation(v.auth).catch(Q=>{v.reject(Q)}),v.resolver._isIframeWebStorageSupported(v.auth,Q=>{Q||v.reject(Xe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const v=()=>{var T,Q;this.pollId=null!==(Q=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==Q&&Q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Ti.get())};v()}}return C.currentPopupAction=null,C})();const vs=new Map;class Co extends ss{constructor(g,v,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,d.Z)(function*(){let T=vs.get(v.auth._key());if(!T){try{const de=(yield function Ls(C,g){return Ga.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;T=()=>Promise.resolve(de)}catch(Q){T=()=>Promise.reject(Q)}vs.set(v.auth._key(),T)}return v.bypassAuthState||vs.set(v.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,T=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(T,g);if("unknown"!==g.type){if(g.eventId){const Q=yield T.auth._redirectUserForId(g.eventId);if(Q)return T.user=Q,v().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ga(){return(Ga=(0,d.Z)(function*(C,g){const v=Qi(g),T=fl(C);if(!(yield T._isAvailable()))return!1;const Q="true"===(yield T._get(v));return yield T._remove(v),Q})).apply(this,arguments)}function Aa(C,g){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(C,g){return fl(C)._set(Qi(g),"true")})).apply(this,arguments)}function za(C,g){vs.set(C._key(),g)}function fl(C){return fe(C._redirectPersistence)}function Qi(C){return ir("pendingRedirect",C.config.apiKey,C.name)}function N(){return(N=(0,d.Z)(function*(C,g,v){const T=tr(C);Je(C,g,Ui);const Q=No(T,v);return yield Aa(Q,T),Q._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C);Je(T.auth,g,Ui);const Q=No(T.auth,v);yield Aa(Q,T.auth);const de=yield Xn(T);return Q._openRedirect(T.auth,g,"reauthViaRedirect",de)})).apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(C,g,v){const T=(0,Z.m9)(C);Je(T.auth,g,Ui);const Q=No(T.auth,v);yield $(!1,T,g.providerId),yield Aa(Q,T.auth);const de=yield Xn(T);return Q._openRedirect(T.auth,g,"linkViaRedirect",de)})).apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(C,g){return yield tr(C)._initializationPromise,mr(C,g,!1)})).apply(this,arguments)}function mr(C,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(C,g,v=!1){const T=tr(C),Q=No(T,g),ht=yield new Co(T,Q,v).execute();return ht&&!v&&(delete ht.user._redirectEventId,yield T._persistUserIfCurrent(ht.user),yield T._setRedirectUser(null,g)),ht})).apply(this,arguments)}function Xn(C){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(C){const g=ki(`${C.uid}:::`);return C._redirectEventId=g,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),g})).apply(this,arguments)}class la{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(v=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ya(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ko(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var T;if(g.error&&!Ko(g)){const Q=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";v.onError(Xe(this.auth,Q))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const T=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qa(g))}saveEventToCache(g){this.cachedEventUids.add(qa(g)),this.lastProcessedEventTime=Date.now()}}function qa(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function Ko({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===g?.code}function Ka(C){return pl.apply(this,arguments)}function pl(){return(pl=(0,d.Z)(function*(C,g={}){return Vt(C,"GET","/v1/projects",g)})).apply(this,arguments)}const Zo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bl=/^https?/;function ud(){return(ud=(0,d.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:g}=yield Ka(C);for(const v of g)try{if(bo(v))return}catch{}W(C,"unauthorized-domain")})).apply(this,arguments)}function bo(C){const g=Tt(),{protocol:v,hostname:T}=new URL(g);if(C.startsWith("chrome-extension://")){const ht=new URL(C);return""===ht.hostname&&""===T?"chrome-extension:"===v&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&ht.hostname===T}if(!Bl.test(v))return!1;if(Zo.test(C))return T===C;const Q=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Q+"|"+Q+")$","i").test(T)}const rf=new be(3e4,6e4);function ur(){const C=ni().___jsl;if(C?.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let v=0;v<C.CP.length;v++)C.CP[v]=null}let Nc=null;function Za(C){return Nc=Nc||function sf(C){return new Promise((g,v)=>{var T,Q,de;function ht(){ur(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ur(),v(Xe(C,"network-request-failed"))},timeout:rf.get()})}if(null!==(Q=null===(T=ni().gapi)||void 0===T?void 0:T.iframes)&&void 0!==Q&&Q.Iframe)g(gapi.iframes.getContext());else{if(null===(de=ni().gapi)||void 0===de||!de.load){const Pt=lr("iframefcb");return ni()[Pt]=()=>{gapi.load?ht():v(Xe(C,"network-request-failed"))},Ta(`https://apis.google.com/js/api.js?onload=${Pt}`).catch(dn=>v(dn))}ht()}}).catch(g=>{throw Nc=null,g})}(C),Nc}const af=new be(5e3,15e3),gl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ih(C){const g=C.config;ee(g.authDomain,C,"auth-domain-config-required");const v=g.emulator?Ye(g,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,T={apiKey:g.apiKey,appName:C.name,v:He.SDK_VERSION},Q=Fr.get(C.config.apiHost);Q&&(T.eid=Q);const de=C._getFrameworks();return de.length&&(T.fw=de.join(",")),`${v}?${(0,Z.xO)(T).slice(1)}`}function Fc(){return Fc=(0,d.Z)(function*(C){const g=yield Za(C),v=ni().gapi;return ee(v,C,"internal-error"),g.open({where:document.body,url:ih(C),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gl,dontclear:!0},T=>new Promise(function(){var Q=(0,d.Z)(function*(de,ht){yield T.restyle({setHideOnLeave:!1});const Pt=Xe(C,"network-request-failed"),dn=ni().setTimeout(()=>{ht(Pt)},af.get());function Vn(){ni().clearTimeout(dn),de(T)}T.ping(Vn).then(Vn,()=>{ht(Pt)})});return function(de,ht){return Q.apply(this,arguments)}}()))}),Fc.apply(this,arguments)}const Hi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ku{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lc(C,g,v,T,Q,de){ee(C.config.authDomain,C,"auth-domain-config-required"),ee(C.config.apiKey,C,"invalid-api-key");const ht={apiKey:C.config.apiKey,appName:C.name,authType:v,redirectUrl:T,v:He.SDK_VERSION,eventId:Q};if(g instanceof Ui){g.setDefaultLanguage(C.languageCode),ht.providerId=g.providerId||"",(0,Z.xb)(g.getCustomParameters())||(ht.customParameters=JSON.stringify(g.getCustomParameters()));for(const[dn,Vn]of Object.entries(de||{}))ht[dn]=Vn}if(g instanceof ps){const dn=g.getScopes().filter(Vn=>""!==Vn);dn.length>0&&(ht.scopes=dn.join(","))}C.tenantId&&(ht.tid=C.tenantId);const Pt=ht;for(const dn of Object.keys(Pt))void 0===Pt[dn]&&delete Pt[dn];return`${function ah({config:C}){return C.emulator?Ye(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,Z.xO)(Pt).slice(1)}`}const Fo="webStorageSupport";class xa extends class $l{constructor(g){this.factorId=g}_process(g,v,T){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,T);case"signin":return this._finalizeSignIn(g,v.credential);default:return qe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new xa(g)}_finalizeEnroll(g,v,T){return function pu(C,g){return Vt(C,"POST","/v2/accounts/mfaEnrollment:finalize",vt(C,g))}(g,{idToken:v,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function ba(C,g){return Vt(C,"POST","/v2/accounts/mfaSignIn:finalize",vt(C,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cu=(()=>{class C{constructor(){}static assertion(v){return xa._fromCredential(v)}}return C.FACTOR_ID="phone",C})();var cd="@firebase/auth";class Ma{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,d.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(T=>{var Q;g((null===(Q=T)||void 0===Q?void 0:Q.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ul(){return window}function bu(){return(bu=(0,d.Z)(function*(C,g,v){var T;const{BuildInfo:Q}=Ul();he(g.sessionId,"AuthEvent did not contain a session ID");const de=yield hd(g.sessionId),ht={};return ke()?ht.ibi=Q.packageName:on()?ht.apn=Q.packageName:W(C,"operation-not-supported-in-this-environment"),Q.displayName&&(ht.appDisplayName=Q.displayName),ht.sessionId=de,Lc(C,v,g.type,void 0,null!==(T=g.eventId)&&void 0!==T?T:void 0,ht)})).apply(this,arguments)}function $c(){return($c=(0,d.Z)(function*(C){const{BuildInfo:g}=Ul(),v={};ke()?v.iosBundleId=g.packageName:on()?v.androidPackageName=g.packageName:W(C,"operation-not-supported-in-this-environment"),yield Ka(C,v)})).apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(C,g,v){const{cordova:T}=Ul();let Q=()=>{};try{yield new Promise((de,ht)=>{let Pt=null;function dn(){var sr;de();const Bs=null===(sr=T.plugins.browsertab)||void 0===sr?void 0:sr.close;"function"==typeof Bs&&Bs(),"function"==typeof v?.close&&v.close()}function Vn(){Pt||(Pt=window.setTimeout(()=>{ht(Xe(C,"redirect-cancelled-by-user"))},2e3))}function vr(){"visible"===document?.visibilityState&&Vn()}g.addPassiveListener(dn),document.addEventListener("resume",Vn,!1),on()&&document.addEventListener("visibilitychange",vr,!1),Q=()=>{g.removePassiveListener(dn),document.removeEventListener("resume",Vn,!1),document.removeEventListener("visibilitychange",vr,!1),Pt&&window.clearTimeout(Pt)}})}finally{Q()}})).apply(this,arguments)}function hd(C){return Du.apply(this,arguments)}function Du(){return(Du=(0,d.Z)(function*(C){const g=Tu(C),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(Q=>Q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Tu(C){if(he(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const g=new ArrayBuffer(C.length),v=new Uint8Array(g);for(let T=0;T<C.length;T++)v[T]=C.charCodeAt(T);return v}!function Bc(C){(0,He._registerComponent)(new ve.wA("auth",(g,{options:v})=>{const T=g.getProvider("app").getImmediate(),Q=g.getProvider("heartbeat"),{apiKey:de,authDomain:ht}=T.options;return((Pt,dn)=>{ee(de&&!de.includes(":"),"invalid-api-key",{appName:Pt.name}),ee(!ht?.includes(":"),"argument-error",{appName:Pt.name});const Vn={apiKey:de,authDomain:ht,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(C)},vr=new er(Pt,dn,Vn);return function Qe(C,g){const v=g?.persistence||[],T=(Array.isArray(v)?v:[v]).map(fe);g?.errorMap&&C._updateErrorMap(g.errorMap),C._initializeWithPersistence(T,g?.popupRedirectResolver)}(vr,v),vr})(T,Q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,T)=>{g.getProvider("auth-internal").initialize()})),(0,He._registerComponent)(new ve.wA("auth-internal",g=>{const v=tr(g.getProvider("auth").getImmediate());return new Ma(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,He.registerVersion)(cd,"0.20.5",function cf(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,He.registerVersion)(cd,"0.20.5","esm2017")}("Browser");class hf extends la{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,d.Z)(function*(){yield g.initPromise})()}}function Hl(C){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(C){const g=yield ec()._get(tc(C));return g&&(yield ec()._remove(tc(C))),g})).apply(this,arguments)}function Ju(){const C=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const T=Math.floor(Math.random()*g.length);C.push(g.charAt(T))}return C.join("")}function ec(){return fe(ea)}function tc(C){return ir("authEvent",C.config.apiKey,C.name)}function Ra(C){if(!C?.includes("?"))return{};const[g,...v]=C.split("?");return(0,Z.zd)(v.join("?"))}function ru(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}function Gl(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function ca(C=(0,Z.z$)()){return!("file:"!==Gl()&&"ionic:"!==Gl()&&"capacitor:"!==Gl()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function sc(){try{const C=self.localStorage,g=ki();if(C)return C.setItem(g,"1"),C.removeItem(g),!function Lr(C=(0,Z.z$)()){return function dp(){return(0,Z.w1)()&&11===document?.documentMode}()||function Rr(C=(0,Z.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,Z.hl)()}catch{return jc()&&(0,Z.hl)()}return!1}function jc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qo(){return(function ic(){return"http:"===Gl()||"https:"===Gl()}()||(0,Z.ru)()||ca())&&!function Uc(){return(0,Z.b$)()||(0,Z.UG)()}()&&sc()&&!jc()}function oc(){return ca()&&typeof document<"u"}function Su(){return(Su=(0,d.Z)(function*(){return!!oc()&&new Promise(C=>{const g=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),C(!0)})})})).apply(this,arguments)}const Bo={LOCAL:"local",NONE:"none",SESSION:"session"},to=ee,gd="persistence";function ch(C){return dh.apply(this,arguments)}function dh(){return(dh=(0,d.Z)(function*(C){yield C._initializationPromise;const g=pf(),v=ir(gd,C.config.apiKey,C.name);g&&g.setItem(v,C._getPersistence())})).apply(this,arguments)}function pf(){var C;try{return(null===(C=function Lo(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const ac=ee;class Oa{constructor(){this.browserResolver=fe(class Zu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vo,this._completeRedirectFn=mr,this._overrideRedirectResult=za}_openPopup(g,v,T,Q){var de=this;return(0,d.Z)(function*(){var ht;he(null===(ht=de.eventManagers[g._key()])||void 0===ht?void 0:ht.manager,"_initialize() not called before _openPopup()");const Pt=Lc(g,v,T,Tt(),Q);return function oh(C,g,v,T=500,Q=600){const de=Math.max((window.screen.availHeight-Q)/2,0).toString(),ht=Math.max((window.screen.availWidth-T)/2,0).toString();let Pt="";const dn=Object.assign(Object.assign({},Hi),{width:T.toString(),height:Q.toString(),top:de,left:ht}),Vn=(0,Z.z$)().toLowerCase();v&&(Pt=or(Vn)?"_blank":v),Ar(Vn)&&(g=g||"http://localhost",dn.scrollbars="yes");const vr=Object.entries(dn).reduce((Bs,[Vs,dc])=>`${Bs}${Vs}=${dc},`,"");if(function pt(C=(0,Z.z$)()){var g;return ke(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Vn)&&"_self"!==Pt)return function ml(C,g){const v=document.createElement("a");v.href=C,v.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(T)}(g||"",Pt),new Ku(null);const sr=window.open(g||"",Pt,vr);ee(sr,C,"popup-blocked");try{sr.focus()}catch{}return new Ku(sr)}(g,Pt,ki())})()}_openRedirect(g,v,T,Q){var de=this;return(0,d.Z)(function*(){return yield de._originValidation(g),function ja(C){ni().location.href=C}(Lc(g,v,T,Tt(),Q)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:Q,promise:de}=this.eventManagers[v];return Q?Promise.resolve(Q):(he(de,"If manager is not set, promise should be"),de)}const T=this.initAndGetManager(g);return this.eventManagers[v]={promise:T},T.catch(()=>{delete this.eventManagers[v]}),T}initAndGetManager(g){var v=this;return(0,d.Z)(function*(){const T=yield function _s(C){return Fc.apply(this,arguments)}(g),Q=new la(g);return T.register("authEvent",de=>(ee(de?.authEvent,g,"invalid-auth-event"),{status:Q.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:Q},v.iframes[g._key()]=T,Q})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Fo,{type:Fo},Q=>{var de;const ht=null===(de=Q?.[0])||void 0===de?void 0:de[Fo];void 0!==ht&&v(!!ht),W(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function kc(C){return ud.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return pn()||Ur()||ke()}}),this.cordovaResolver=fe(class pd{constructor(){this._redirectPersistence=vo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mr,this._overrideRedirectResult=za}_initialize(g){var v=this;return(0,d.Z)(function*(){const T=g._key();let Q=v.eventManagers.get(T);return Q||(Q=new hf(g),v.eventManagers.set(T,Q),v.attachCallbackListeners(g,Q)),Q})()}_openPopup(g){W(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,T,Q){var de=this;return(0,d.Z)(function*(){!function vl(C){var g,v,T,Q,de,ht,Pt,dn,Vn,vr;const sr=Ul();ee("function"==typeof(null===(g=sr?.universalLinks)||void 0===g?void 0:g.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof(null===(v=sr?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(de=null===(Q=null===(T=sr?.cordova)||void 0===T?void 0:T.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===de?void 0:de.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(dn=null===(Pt=null===(ht=sr?.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Pt?void 0:Pt.browsertab)||void 0===dn?void 0:dn.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(vr=null===(Vn=sr?.cordova)||void 0===Vn?void 0:Vn.InAppBrowser)||void 0===vr?void 0:vr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ht=yield de._initialize(g);yield ht.initialized(),ht.resetRedirect(),function eo(){vs.clear()}(),yield de._originValidation(g);const Pt=function Xu(C,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:Ju(),postBody:null,tenantId:C.tenantId,error:Xe(C,"no-auth-event")}}(g,T,Q);yield function fd(C,g){return ec()._set(tc(C),g)}(g,Pt);const dn=yield function df(C,g,v){return bu.apply(this,arguments)}(g,Pt,v),Vn=yield function jl(C){const{cordova:g}=Ul();return new Promise(v=>{g.plugins.browsertab.isAvailable(T=>{let Q=null;T?g.plugins.browsertab.openUrl(C):Q=g.InAppBrowser.open(C,function Me(C=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),v(Q)})})}(dn);return function lh(C,g,v){return lo.apply(this,arguments)}(g,ht,Vn)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function cp(C){return $c.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:T,handleOpenURL:Q,BuildInfo:de}=Ul(),ht=setTimeout((0,d.Z)(function*(){yield Hl(g),v.onEvent(ru())}),500),Pt=function(){var vr=(0,d.Z)(function*(sr){clearTimeout(ht);const Bs=yield Hl(g);let Vs=null;Bs&&sr?.url&&(Vs=function uh(C,g){var v,T;const Q=function _l(C){const g=Ra(C),v=g.link?decodeURIComponent(g.link):void 0,T=Ra(v).link,Q=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Ra(Q).link||Q||T||v||C}(g);if(Q.includes("/__/auth/callback")){const de=Ra(Q),ht=de.firebaseError?function Xi(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(de.firebaseError)):null,Pt=null===(T=null===(v=ht?.code)||void 0===v?void 0:v.split("auth/"))||void 0===T?void 0:T[1],dn=Pt?Xe(Pt):null;return dn?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:dn,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:Q,postBody:null}}return null}(Bs,sr.url)),v.onEvent(Vs||ru())});return function(Bs){return vr.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,Pt);const dn=Q,Vn=`${de.packageName.toLowerCase()}://`;Ul().handleOpenURL=function(){var vr=(0,d.Z)(function*(sr){if(sr.toLowerCase().startsWith(Vn)&&Pt({url:sr}),"function"==typeof dn)try{dn(sr)}catch(Bs){console.error(Bs)}});return function(sr){return vr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vo,this._completeRedirectFn=mr,this._overrideRedirectResult=za}_initialize(g){var v=this;return(0,d.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,T,Q){var de=this;return(0,d.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openPopup(g,v,T,Q)})()}_openRedirect(g,v,T,Q){var de=this;return(0,d.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openRedirect(g,v,T,Q)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return oc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ac(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,d.Z)(function*(){if(g.underlyingResolver)return;const v=yield function Ws(){return Su.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function lc(C){return C.unwrap()}function md(C){return hh(C)}function hh(C){const{_tokenResponse:g}=C instanceof Z.ZR?C.customData:C;if(!g)return null;if(!(C instanceof Z.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return zs.credentialFromResult(C);const v=g.providerId;if(!v||"password"===v)return null;let T;switch(v){case"google.com":T=Zs;break;case"facebook.com":T=js;break;case"github.com":T=Qs;break;case"twitter.com":T=so;break;default:const{oauthIdToken:Q,oauthAccessToken:de,oauthTokenSecret:ht,pendingToken:Pt,nonce:dn}=g;return de||ht||Q||Pt?Pt?v.startsWith("saml.")?ls._create(v,Pt):_t._fromParams({providerId:v,signInMethod:v,pendingToken:Pt,idToken:Q,accessToken:de}):new rs(v).credential({idToken:Q,accessToken:de,rawNonce:dn}):null}return C instanceof Z.ZR?T.credentialFromError(C):T.credentialFromResult(C)}function Gi(C,g){return g.catch(v=>{throw v instanceof Z.ZR&&function gf(C,g){var v,T;const Q=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===(null===(T=g)||void 0===T?void 0:T.code))g.resolver=new fh(C,function Pi(C,g){var v;const T=(0,Z.m9)(C),Q=g;return ee(g.customData.operationType,T,"argument-error"),ee(null===(v=Q.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,T,"argument-error"),sa._fromError(T,Q)}(C,g));else if(Q){const de=hh(g),ht=g;de&&(ht.credential=de,ht.tenantId=Q.tenantId||void 0,ht.email=Q.email||void 0,ht.phoneNumber=Q.phoneNumber||void 0)}}(C,v),v}).then(v=>{const Q=v.user;return{operationType:v.operationType,credential:md(v),additionalUserInfo:hs(v),user:Ji.getOrCreate(Q)}})}function uc(C,g){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,d.Z)(function*(C,g){const v=yield g;return{verificationId:v.verificationId,confirm:T=>Gi(C,v.confirm(T))}})).apply(this,arguments)}class fh{constructor(g,v){this.resolver=v,this.auth=function Hc(C){return C.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Gi(lc(this.auth),this.resolver.resolveSignIn(g))}}class Ji{constructor(g){this._delegate=g,this.multiFactor=function gu(C){const g=(0,Z.m9)(C);return Xo.has(g)||Xo.set(g,ll._fromUser(g)),Xo.get(g)}(g)}static getOrCreate(g){return Ji.USER_MAP.has(g)||Ji.USER_MAP.set(g,new Ji(g)),Ji.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,d.Z)(function*(){return Gi(v.auth,ai(v._delegate,g))})()}linkWithPhoneNumber(g,v){var T=this;return(0,d.Z)(function*(){return uc(T.auth,function gr(C,g,v){return xn.apply(this,arguments)}(T._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,d.Z)(function*(){return Gi(v.auth,function $r(C,g,v){return Nn.apply(this,arguments)}(v._delegate,g,Oa))})()}linkWithRedirect(g){var v=this;return(0,d.Z)(function*(){return yield ch(tr(v.auth)),function ot(C,g,v){return function Mt(C,g,v){return qt.apply(this,arguments)}(C,g,v)}(v._delegate,g,Oa)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,d.Z)(function*(){return Gi(v.auth,li(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return uc(this.auth,function ci(C,g,v){return It.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return Gi(this.auth,function Zi(C,g,v){return tu.apply(this,arguments)}(this._delegate,g,Oa))}reauthenticateWithRedirect(g){var v=this;return(0,d.Z)(function*(){return yield ch(tr(v.auth)),function G(C,g,v){return function ne(C,g,v){return Ne.apply(this,arguments)}(C,g,v)}(v._delegate,g,Oa)})()}sendEmailVerification(g){return function ra(C,g){return cs.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,d.Z)(function*(){return yield function Ts(C,g){return Mi.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function Zl(C,g){return Po((0,Z.m9)(C),g,null)}(this._delegate,g)}updatePassword(g){return function Nl(C,g){return Po((0,Z.m9)(C),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Eu(C,g){return Sa.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Pl(C,g){return kl.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function $a(C,g,v){return Wo.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ji.USER_MAP=new WeakMap;const el=ee;let Wl=(()=>{class C{constructor(v,T){if(this.app=v,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Q}=v.options;el(Q,"invalid-api-key",{appName:v.name}),el(Q,"invalid-api-key",{appName:v.name});const de=typeof window<"u"?Oa:void 0;this._delegate=T.initialize({options:{persistence:hp(Q,v.name),popupRedirectResolver:de}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ji.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,T){!function Fi(C,g,v){const T=tr(C);ee(T._canInitEmulator,T,"emulator-config-failed"),ee(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const Q=!!v?.disableWarnings,de=Vr(g),{host:ht,port:Pt}=function kr(C){const g=Vr(C),v=/(\/\/)?([^?#/]+)/.exec(C.substr(g.length));if(!v)return{host:"",port:null};const T=v[2].split("@").pop()||"",Q=/^(\[[^\]]+\])(:|$)/.exec(T);if(Q){const de=Q[1];return{host:de,port:Si(T.substr(de.length+1))}}{const[de,ht]=T.split(":");return{host:de,port:Si(ht)}}}(g);T.config.emulator={url:`${de}//${ht}${null===Pt?"":`:${Pt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:ht,port:Pt,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:Q})}),Q||function ii(){function C(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,v,T)}applyActionCode(v){return function fr(C,g){return Mr.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return bi(this._delegate,v)}confirmPasswordReset(v,T){return function cn(C,g,v){return Mn.apply(this,arguments)}(this._delegate,v,T)}createUserWithEmailAndPassword(v,T){var Q=this;return(0,d.Z)(function*(){return Gi(Q._delegate,function V(C,g,v){return F.apply(this,arguments)}(Q._delegate,v,T))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function po(C,g){return go.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function ui(C,g){return"EMAIL_SIGNIN"===Ks.parseLink(g)?.operation}(0,v)}getRedirectResult(){var v=this;return(0,d.Z)(function*(){el(Qo(),v._delegate,"operation-not-supported-in-this-environment");const T=yield function bn(C,g){return Rn.apply(this,arguments)}(v._delegate,Oa);return T?Gi(v._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function ff(C,g){tr(C)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,T,Q){const{next:de,error:ht,complete:Pt}=cc(v,T,Q);return this._delegate.onAuthStateChanged(de,ht,Pt)}onIdTokenChanged(v,T,Q){const{next:de,error:ht,complete:Pt}=cc(v,T,Q);return this._delegate.onIdTokenChanged(de,ht,Pt)}sendSignInLinkToEmail(v,T){return function Bt(C,g,v){return Pn.apply(this,arguments)}(this._delegate,v,T)}sendPasswordResetEmail(v,T){return function ie(C,g,v){return xt.apply(this,arguments)}(this._delegate,v,T||void 0)}setPersistence(v){var T=this;return(0,d.Z)(function*(){let Q;switch(function zl(C,g){to(Object.values(Bo).includes(g),C,"invalid-persistence-type"),(0,Z.b$)()?to(g!==Bo.SESSION,C,"unsupported-persistence-type"):(0,Z.UG)()?to(g===Bo.NONE,C,"unsupported-persistence-type"):jc()?to(g===Bo.NONE||g===Bo.LOCAL&&(0,Z.hl)(),C,"unsupported-persistence-type"):to(g===Bo.NONE||sc(),C,"unsupported-persistence-type")}(T._delegate,v),v){case Bo.SESSION:Q=vo;break;case Bo.LOCAL:Q=(yield fe(Ca)._isAvailable())?Ca:ea;break;case Bo.NONE:Q=On;break;default:return W("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(Q)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Gi(this._delegate,function oi(C){return na.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Gi(this._delegate,Ct(this._delegate,v))}signInWithCustomToken(v){return Gi(this._delegate,function Ri(C,g){return E.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,T){return Gi(this._delegate,function ce(C,g,v){return Ct((0,Z.m9)(C),xo.credential(g,v))}(this._delegate,v,T))}signInWithEmailLink(v,T){return Gi(this._delegate,function us(C,g,v){return Ps.apply(this,arguments)}(this._delegate,v,T))}signInWithPhoneNumber(v,T){return uc(this._delegate,function Ht(C,g,v){return ln.apply(this,arguments)}(this._delegate,v,T))}signInWithPopup(v){var T=this;return(0,d.Z)(function*(){return el(Qo(),T._delegate,"operation-not-supported-in-this-environment"),Gi(T._delegate,function aa(C,g,v){return eu.apply(this,arguments)}(T._delegate,v,Oa))})()}signInWithRedirect(v){var T=this;return(0,d.Z)(function*(){return el(Qo(),T._delegate,"operation-not-supported-in-this-environment"),yield ch(T._delegate),function Pc(C,g,v){return function Wa(C,g,v){return N.apply(this,arguments)}(C,g,v)}(T._delegate,v,Oa)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function $i(C,g){return z.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Bo,C})();function cc(C,g,v){let T=C;"function"!=typeof C&&({next:T,error:g,complete:v}=C);const Q=T;return{next:ht=>Q(ht&&Ji.getOrCreate(ht)),error:g,complete:v}}function hp(C,g){const v=function Wr(C,g){const v=pf();if(!v)return[];const T=ir(gd,C,g);switch(v.getItem(T)){case Bo.NONE:return[On];case Bo.LOCAL:return[Ca,vo];case Bo.SESSION:return[vo];default:return[]}}(C,g);if(typeof self<"u"&&!v.includes(Ca)&&v.push(Ca),typeof window<"u")for(const T of[ea,vo])v.includes(T)||v.push(T);return v.includes(On)||v.push(On),v}class bs{constructor(){this.providerId="phone",this._delegate=new zs(lc(O.Z.auth()))}static credential(g,v){return zs.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}bs.PHONE_SIGN_IN_METHOD=zs.PHONE_SIGN_IN_METHOD,bs.PROVIDER_ID=zs.PROVIDER_ID;const yd=ee;class vd{constructor(g,v,T=O.Z.app()){var Q;yd(null===(Q=T.options)||void 0===Q?void 0:Q.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new oe(g,v,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tl(C){C.INTERNAL.registerComponent(new ve.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),T=g.getProvider("auth");return new Wl(v,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xo,FacebookAuthProvider:js,GithubAuthProvider:Qs,GoogleAuthProvider:Zs,OAuthProvider:rs,SAMLAuthProvider:jr,PhoneAuthProvider:bs,PhoneMultiFactorGenerator:Cu,RecaptchaVerifier:vd,TwitterAuthProvider:so,Auth:Wl,AuthCredential:Ai,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.18")}(O.Z)},1135:(sn,mt,B)=>{"use strict";B.d(mt,{X:()=>O});var d=B(7579);class O extends d.x{constructor(He){super(),this._value=He}get value(){return this.getValue()}_subscribe(He){const De=super._subscribe(He);return!De.closed&&He.next(this._value),De}getValue(){const{hasError:He,thrownError:De,_value:_e}=this;if(He)throw De;return this._throwIfClosed(),_e}next(He){super.next(this._value=He)}}},8306:(sn,mt,B)=>{"use strict";B.d(mt,{y:()=>ge});var d=B(930),O=B(727),Z=B(8822),He=B(4671);var ve=B(2416),ze=B(576),Le=B(2806);let ge=(()=>{class je{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const Ce=new je;return Ce.source=this,Ce.operator=Ve,Ce}subscribe(Ve,Ce,Re){const Ae=function Fe(je){return je&&je instanceof d.Lv||function Te(je){return je&&(0,ze.m)(je.next)&&(0,ze.m)(je.error)&&(0,ze.m)(je.complete)}(je)&&(0,O.Nn)(je)}(Ve)?Ve:new d.Hp(Ve,Ce,Re);return(0,Le.x)(()=>{const{operator:bt,source:W}=this;Ae.add(bt?bt.call(Ae,W):W?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(Ce){Ve.error(Ce)}}forEach(Ve,Ce){return new(Ce=me(Ce))((Re,Ae)=>{const bt=new d.Hp({next:W=>{try{Ve(W)}catch(Xe){Ae(Xe),bt.unsubscribe()}},error:Ae,complete:Re});this.subscribe(bt)})}_subscribe(Ve){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(Ve)}[Z.L](){return this}pipe(...Ve){return function _e(je){return 0===je.length?He.y:1===je.length?je[0]:function(Ve){return je.reduce((Ce,Re)=>Re(Ce),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=me(Ve))((Ce,Re)=>{let Ae;this.subscribe(bt=>Ae=bt,bt=>Re(bt),()=>Ce(Ae))})}}return je.create=$e=>new je($e),je})();function me(je){var $e;return null!==($e=je??ve.v.Promise)&&void 0!==$e?$e:Promise}},7579:(sn,mt,B)=>{"use strict";B.d(mt,{x:()=>ve});var d=B(8306),O=B(727);const He=(0,B(3888).d)(Le=>function(){Le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=B(8737),_e=B(2806);let ve=(()=>{class Le extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const Te=new ze(this,this);return Te.operator=me,Te}_throwIfClosed(){if(this.closed)throw new He}next(me){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(me)}})}error(me){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:Te}=this;for(;Te.length;)Te.shift().error(me)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:Te,isStopped:Fe,observers:je}=this;return Te||Fe?O.Lc:(this.currentObservers=null,je.push(me),new O.w0(()=>{this.currentObservers=null,(0,De.P)(je,me)}))}_checkFinalizedStatuses(me){const{hasError:Te,thrownError:Fe,isStopped:je}=this;Te?me.error(Fe):je&&me.complete()}asObservable(){const me=new d.y;return me.source=this,me}}return Le.create=(ge,me)=>new ze(ge,me),Le})();class ze extends ve{constructor(ge,me){super(),this.destination=ge,this.source=me}next(ge){var me,Te;null===(Te=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===Te||Te.call(me,ge)}error(ge){var me,Te;null===(Te=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===Te||Te.call(me,ge)}complete(){var ge,me;null===(me=null===(ge=this.destination)||void 0===ge?void 0:ge.complete)||void 0===me||me.call(ge)}_subscribe(ge){var me,Te;return null!==(Te=null===(me=this.source)||void 0===me?void 0:me.subscribe(ge))&&void 0!==Te?Te:O.Lc}}},930:(sn,mt,B)=>{"use strict";B.d(mt,{Hp:()=>Ve,Lv:()=>Te});var d=B(576),O=B(727),Z=B(2416),He=B(7849),De=B(5032);const _e=Le("C",void 0,void 0);function Le(W,Xe,Ge){return{kind:W,value:Xe,error:Ge}}var ge=B(3410),me=B(2806);class Te extends O.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,O.Nn)(Xe)&&Xe.add(this)):this.destination=bt}static create(Xe,Ge,Je){return new Ve(Xe,Ge,Je)}next(Xe){this.isStopped?Ae(function ze(W){return Le("N",W,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?Ae(function ve(W){return Le("E",void 0,W)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?Ae(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function je(W,Xe){return Fe.call(W,Xe)}class $e{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(Xe)}catch(Je){Ce(Je)}}error(Xe){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(Xe)}catch(Je){Ce(Je)}else Ce(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(Ge){Ce(Ge)}}}class Ve extends Te{constructor(Xe,Ge,Je){let et;if(super(),(0,d.m)(Xe)||!Xe)et={next:Xe??void 0,error:Ge??void 0,complete:Je??void 0};else{let ee;this&&Z.v.useDeprecatedNextContext?(ee=Object.create(Xe),ee.unsubscribe=()=>this.unsubscribe(),et={next:Xe.next&&je(Xe.next,ee),error:Xe.error&&je(Xe.error,ee),complete:Xe.complete&&je(Xe.complete,ee)}):et=Xe}this.destination=new $e(et)}}function Ce(W){Z.v.useDeprecatedSynchronousErrorHandling?(0,me.O)(W):(0,He.h)(W)}function Ae(W,Xe){const{onStoppedNotification:Ge}=Z.v;Ge&&ge.z.setTimeout(()=>Ge(W,Xe))}const bt={closed:!0,next:De.Z,error:function Re(W){throw W},complete:De.Z}},727:(sn,mt,B)=>{"use strict";B.d(mt,{Lc:()=>_e,w0:()=>De,Nn:()=>ve});var d=B(576);const Z=(0,B(3888).d)(Le=>function(me){Le(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((Te,Fe)=>`${Fe+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var He=B(8737);class De{constructor(ge){this.initialTeardown=ge,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ge;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const je of me)je.remove(this);else me.remove(this);const{initialTeardown:Te}=this;if((0,d.m)(Te))try{Te()}catch(je){ge=je instanceof Z?je.errors:[je]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const je of Fe)try{ze(je)}catch($e){ge=ge??[],$e instanceof Z?ge=[...ge,...$e.errors]:ge.push($e)}}if(ge)throw new Z(ge)}}add(ge){var me;if(ge&&ge!==this)if(this.closed)ze(ge);else{if(ge instanceof De){if(ge.closed||ge._hasParent(this))return;ge._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(ge)}}_hasParent(ge){const{_parentage:me}=this;return me===ge||Array.isArray(me)&&me.includes(ge)}_addParent(ge){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(ge),me):me?[me,ge]:ge}_removeParent(ge){const{_parentage:me}=this;me===ge?this._parentage=null:Array.isArray(me)&&(0,He.P)(me,ge)}remove(ge){const{_finalizers:me}=this;me&&(0,He.P)(me,ge),ge instanceof De&&ge._removeParent(this)}}De.EMPTY=(()=>{const Le=new De;return Le.closed=!0,Le})();const _e=De.EMPTY;function ve(Le){return Le instanceof De||Le&&"closed"in Le&&(0,d.m)(Le.remove)&&(0,d.m)(Le.add)&&(0,d.m)(Le.unsubscribe)}function ze(Le){(0,d.m)(Le)?Le():Le.unsubscribe()}},2416:(sn,mt,B)=>{"use strict";B.d(mt,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(sn,mt,B)=>{"use strict";B.d(mt,{z:()=>De});var d=B(8189),Z=B(7669),He=B(8996);function De(..._e){return function O(){return(0,d.J)(1)}()((0,He.D)(_e,(0,Z.yG)(_e)))}},9770:(sn,mt,B)=>{"use strict";B.d(mt,{P:()=>Z});var d=B(8306),O=B(8421);function Z(He){return new d.y(De=>{(0,O.Xf)(He()).subscribe(De)})}},515:(sn,mt,B)=>{"use strict";B.d(mt,{E:()=>O});const O=new(B(8306).y)(De=>De.complete())},8996:(sn,mt,B)=>{"use strict";B.d(mt,{D:()=>Xe});var d=B(8421),O=B(5363),Z=B(9468),_e=B(8306),ze=B(2202),Le=B(576),ge=B(9672);function Te(Ge,Je){if(!Ge)throw new Error("Iterable cannot be null");return new _e.y(et=>{(0,ge.f)(et,Je,()=>{const ee=Ge[Symbol.asyncIterator]();(0,ge.f)(et,Je,()=>{ee.next().then(qe=>{qe.done?et.complete():et.next(qe.value)})},0,!0)})})}var Fe=B(3670),je=B(8239),$e=B(1144),Ve=B(6495),Ce=B(2206),Re=B(4532),Ae=B(3260);function Xe(Ge,Je){return Je?function W(Ge,Je){if(null!=Ge){if((0,Fe.c)(Ge))return function He(Ge,Je){return(0,d.Xf)(Ge).pipe((0,Z.R)(Je),(0,O.Q)(Je))}(Ge,Je);if((0,$e.z)(Ge))return function ve(Ge,Je){return new _e.y(et=>{let ee=0;return Je.schedule(function(){ee===Ge.length?et.complete():(et.next(Ge[ee++]),et.closed||this.schedule())})})}(Ge,Je);if((0,je.t)(Ge))return function De(Ge,Je){return(0,d.Xf)(Ge).pipe((0,Z.R)(Je),(0,O.Q)(Je))}(Ge,Je);if((0,Ce.D)(Ge))return Te(Ge,Je);if((0,Ve.T)(Ge))return function me(Ge,Je){return new _e.y(et=>{let ee;return(0,ge.f)(et,Je,()=>{ee=Ge[ze.h](),(0,ge.f)(et,Je,()=>{let qe,he;try{({value:qe,done:he}=ee.next())}catch(pe){return void et.error(pe)}he?et.complete():et.next(qe)},0,!0)}),()=>(0,Le.m)(ee?.return)&&ee.return()})}(Ge,Je);if((0,Ae.L)(Ge))return function bt(Ge,Je){return Te((0,Ae.Q)(Ge),Je)}(Ge,Je)}throw(0,Re.z)(Ge)}(Ge,Je):(0,d.Xf)(Ge)}},4968:(sn,mt,B)=>{"use strict";B.d(mt,{R:()=>ge});var d=B(8421),O=B(8306),Z=B(5577),He=B(1144),De=B(576),_e=B(3268);const ve=["addListener","removeListener"],ze=["addEventListener","removeEventListener"],Le=["on","off"];function ge($e,Ve,Ce,Re){if((0,De.m)(Ce)&&(Re=Ce,Ce=void 0),Re)return ge($e,Ve,Ce).pipe((0,_e.Z)(Re));const[Ae,bt]=function je($e){return(0,De.m)($e.addEventListener)&&(0,De.m)($e.removeEventListener)}($e)?ze.map(W=>Xe=>$e[W](Ve,Xe,Ce)):function Te($e){return(0,De.m)($e.addListener)&&(0,De.m)($e.removeListener)}($e)?ve.map(me($e,Ve)):function Fe($e){return(0,De.m)($e.on)&&(0,De.m)($e.off)}($e)?Le.map(me($e,Ve)):[];if(!Ae&&(0,He.z)($e))return(0,Z.z)(W=>ge(W,Ve,Ce))((0,d.Xf)($e));if(!Ae)throw new TypeError("Invalid event target");return new O.y(W=>{const Xe=(...Ge)=>W.next(1<Ge.length?Ge:Ge[0]);return Ae(Xe),()=>bt(Xe)})}function me($e,Ve){return Ce=>Re=>$e[Ce](Ve,Re)}},8421:(sn,mt,B)=>{"use strict";B.d(mt,{Xf:()=>Fe});var d=B(655),O=B(1144),Z=B(8239),He=B(8306),De=B(3670),_e=B(2206),ve=B(4532),ze=B(6495),Le=B(3260),ge=B(576),me=B(7849),Te=B(8822);function Fe(W){if(W instanceof He.y)return W;if(null!=W){if((0,De.c)(W))return function je(W){return new He.y(Xe=>{const Ge=W[Te.L]();if((0,ge.m)(Ge.subscribe))return Ge.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(W);if((0,O.z)(W))return function $e(W){return new He.y(Xe=>{for(let Ge=0;Ge<W.length&&!Xe.closed;Ge++)Xe.next(W[Ge]);Xe.complete()})}(W);if((0,Z.t)(W))return function Ve(W){return new He.y(Xe=>{W.then(Ge=>{Xe.closed||(Xe.next(Ge),Xe.complete())},Ge=>Xe.error(Ge)).then(null,me.h)})}(W);if((0,_e.D)(W))return Re(W);if((0,ze.T)(W))return function Ce(W){return new He.y(Xe=>{for(const Ge of W)if(Xe.next(Ge),Xe.closed)return;Xe.complete()})}(W);if((0,Le.L)(W))return function Ae(W){return Re((0,Le.Q)(W))}(W)}throw(0,ve.z)(W)}function Re(W){return new He.y(Xe=>{(function bt(W,Xe){var Ge,Je,et,ee;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,d.KL)(W);!(Je=yield Ge.next()).done;)if(Xe.next(Je.value),Xe.closed)return}catch(qe){et={error:qe}}finally{try{Je&&!Je.done&&(ee=Ge.return)&&(yield ee.call(Ge))}finally{if(et)throw et.error}}Xe.complete()})})(W,Xe).catch(Ge=>Xe.error(Ge))})}},6451:(sn,mt,B)=>{"use strict";B.d(mt,{T:()=>_e});var d=B(8189),O=B(8421),Z=B(515),He=B(7669),De=B(8996);function _e(...ve){const ze=(0,He.yG)(ve),Le=(0,He._6)(ve,1/0),ge=ve;return ge.length?1===ge.length?(0,O.Xf)(ge[0]):(0,d.J)(Le)((0,De.D)(ge,ze)):Z.E}},9646:(sn,mt,B)=>{"use strict";B.d(mt,{of:()=>Z});var d=B(7669),O=B(8996);function Z(...He){const De=(0,d.yG)(He);return(0,O.D)(He,De)}},5403:(sn,mt,B)=>{"use strict";B.d(mt,{x:()=>O});var d=B(930);function O(He,De,_e,ve,ze){return new Z(He,De,_e,ve,ze)}class Z extends d.Lv{constructor(De,_e,ve,ze,Le,ge){super(De),this.onFinalize=Le,this.shouldUnsubscribe=ge,this._next=_e?function(me){try{_e(me)}catch(Te){De.error(Te)}}:super._next,this._error=ze?function(me){try{ze(me)}catch(Te){De.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(me){De.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},8372:(sn,mt,B)=>{"use strict";B.d(mt,{b:()=>He});var d=B(4986),O=B(4482),Z=B(5403);function He(De,_e=d.z){return(0,O.e)((ve,ze)=>{let Le=null,ge=null,me=null;const Te=()=>{if(Le){Le.unsubscribe(),Le=null;const je=ge;ge=null,ze.next(je)}};function Fe(){const je=me+De,$e=_e.now();if($e<je)return Le=this.schedule(void 0,je-$e),void ze.add(Le);Te()}ve.subscribe((0,Z.x)(ze,je=>{ge=je,me=_e.now(),Le||(Le=_e.schedule(Fe,De),ze.add(Le))},()=>{Te(),ze.complete()},void 0,()=>{ge=Le=null}))})}},6590:(sn,mt,B)=>{"use strict";B.d(mt,{d:()=>Z});var d=B(4482),O=B(5403);function Z(He){return(0,d.e)((De,_e)=>{let ve=!1;De.subscribe((0,O.x)(_e,ze=>{ve=!0,_e.next(ze)},()=>{ve||_e.next(He),_e.complete()}))})}},1884:(sn,mt,B)=>{"use strict";B.d(mt,{x:()=>He});var d=B(4671),O=B(4482),Z=B(5403);function He(_e,ve=d.y){return _e=_e??De,(0,O.e)((ze,Le)=>{let ge,me=!0;ze.subscribe((0,Z.x)(Le,Te=>{const Fe=ve(Te);(me||!_e(ge,Fe))&&(me=!1,ge=Fe,Le.next(Te))}))})}function De(_e,ve){return _e===ve}},9300:(sn,mt,B)=>{"use strict";B.d(mt,{h:()=>Z});var d=B(4482),O=B(5403);function Z(He,De){return(0,d.e)((_e,ve)=>{let ze=0;_e.subscribe((0,O.x)(ve,Le=>He.call(De,Le,ze++)&&ve.next(Le)))})}},590:(sn,mt,B)=>{"use strict";B.d(mt,{P:()=>ve});var d=B(6805),O=B(9300),Z=B(5698),He=B(6590),De=B(8068),_e=B(4671);function ve(ze,Le){const ge=arguments.length>=2;return me=>me.pipe(ze?(0,O.h)((Te,Fe)=>ze(Te,Fe,me)):_e.y,(0,Z.q)(1),ge?(0,He.d)(Le):(0,De.T)(()=>new d.K))}},4004:(sn,mt,B)=>{"use strict";B.d(mt,{U:()=>Z});var d=B(4482),O=B(5403);function Z(He,De){return(0,d.e)((_e,ve)=>{let ze=0;_e.subscribe((0,O.x)(ve,Le=>{ve.next(He.call(De,Le,ze++))}))})}},8189:(sn,mt,B)=>{"use strict";B.d(mt,{J:()=>Z});var d=B(5577),O=B(4671);function Z(He=1/0){return(0,d.z)(O.y,He)}},5577:(sn,mt,B)=>{"use strict";B.d(mt,{z:()=>ze});var d=B(4004),O=B(8421),Z=B(4482),He=B(9672),De=B(5403),ve=B(576);function ze(Le,ge,me=1/0){return(0,ve.m)(ge)?ze((Te,Fe)=>(0,d.U)((je,$e)=>ge(Te,je,Fe,$e))((0,O.Xf)(Le(Te,Fe))),me):("number"==typeof ge&&(me=ge),(0,Z.e)((Te,Fe)=>function _e(Le,ge,me,Te,Fe,je,$e,Ve){const Ce=[];let Re=0,Ae=0,bt=!1;const W=()=>{bt&&!Ce.length&&!Re&&ge.complete()},Xe=Je=>Re<Te?Ge(Je):Ce.push(Je),Ge=Je=>{je&&ge.next(Je),Re++;let et=!1;(0,O.Xf)(me(Je,Ae++)).subscribe((0,De.x)(ge,ee=>{Fe?.(ee),je?Xe(ee):ge.next(ee)},()=>{et=!0},void 0,()=>{if(et)try{for(Re--;Ce.length&&Re<Te;){const ee=Ce.shift();$e?(0,He.f)(ge,$e,()=>Ge(ee)):Ge(ee)}W()}catch(ee){ge.error(ee)}}))};return Le.subscribe((0,De.x)(ge,Xe,()=>{bt=!0,W()})),()=>{Ve?.()}}(Te,Fe,Le,me)))}},5363:(sn,mt,B)=>{"use strict";B.d(mt,{Q:()=>He});var d=B(9672),O=B(4482),Z=B(5403);function He(De,_e=0){return(0,O.e)((ve,ze)=>{ve.subscribe((0,Z.x)(ze,Le=>(0,d.f)(ze,De,()=>ze.next(Le),_e),()=>(0,d.f)(ze,De,()=>ze.complete(),_e),Le=>(0,d.f)(ze,De,()=>ze.error(Le),_e)))})}},5026:(sn,mt,B)=>{"use strict";B.d(mt,{R:()=>He});var d=B(4482),O=B(5403);function Z(De,_e,ve,ze,Le){return(ge,me)=>{let Te=ve,Fe=_e,je=0;ge.subscribe((0,O.x)(me,$e=>{const Ve=je++;Fe=Te?De(Fe,$e,Ve):(Te=!0,$e),ze&&me.next(Fe)},Le&&(()=>{Te&&me.next(Fe),me.complete()})))}}function He(De,_e){return(0,d.e)(Z(De,_e,arguments.length>=2,!0))}},3099:(sn,mt,B)=>{"use strict";B.d(mt,{B:()=>De});var d=B(8421),O=B(7579),Z=B(930),He=B(4482);function De(ve={}){const{connector:ze=(()=>new O.x),resetOnError:Le=!0,resetOnComplete:ge=!0,resetOnRefCountZero:me=!0}=ve;return Te=>{let Fe,je,$e,Ve=0,Ce=!1,Re=!1;const Ae=()=>{je?.unsubscribe(),je=void 0},bt=()=>{Ae(),Fe=$e=void 0,Ce=Re=!1},W=()=>{const Xe=Fe;bt(),Xe?.unsubscribe()};return(0,He.e)((Xe,Ge)=>{Ve++,!Re&&!Ce&&Ae();const Je=$e=$e??ze();Ge.add(()=>{Ve--,0===Ve&&!Re&&!Ce&&(je=_e(W,me))}),Je.subscribe(Ge),!Fe&&Ve>0&&(Fe=new Z.Hp({next:et=>Je.next(et),error:et=>{Re=!0,Ae(),je=_e(bt,Le,et),Je.error(et)},complete:()=>{Ce=!0,Ae(),je=_e(bt,ge),Je.complete()}}),(0,d.Xf)(Xe).subscribe(Fe))})(Te)}}function _e(ve,ze,...Le){if(!0===ze)return void ve();if(!1===ze)return;const ge=new Z.Hp({next:()=>{ge.unsubscribe(),ve()}});return ze(...Le).subscribe(ge)}},3151:(sn,mt,B)=>{"use strict";B.d(mt,{d:()=>De});var d=B(7579),O=B(6063);class Z extends d.x{constructor(ve=1/0,ze=1/0,Le=O.l){super(),this._bufferSize=ve,this._windowTime=ze,this._timestampProvider=Le,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ze===1/0,this._bufferSize=Math.max(1,ve),this._windowTime=Math.max(1,ze)}next(ve){const{isStopped:ze,_buffer:Le,_infiniteTimeWindow:ge,_timestampProvider:me,_windowTime:Te}=this;ze||(Le.push(ve),!ge&&Le.push(me.now()+Te)),this._trimBuffer(),super.next(ve)}_subscribe(ve){this._throwIfClosed(),this._trimBuffer();const ze=this._innerSubscribe(ve),{_infiniteTimeWindow:Le,_buffer:ge}=this,me=ge.slice();for(let Te=0;Te<me.length&&!ve.closed;Te+=Le?1:2)ve.next(me[Te]);return this._checkFinalizedStatuses(ve),ze}_trimBuffer(){const{_bufferSize:ve,_timestampProvider:ze,_buffer:Le,_infiniteTimeWindow:ge}=this,me=(ge?1:2)*ve;if(ve<1/0&&me<Le.length&&Le.splice(0,Le.length-me),!ge){const Te=ze.now();let Fe=0;for(let je=1;je<Le.length&&Le[je]<=Te;je+=2)Fe=je;Fe&&Le.splice(0,Fe+1)}}}var He=B(3099);function De(_e,ve,ze){let Le,ge=!1;return _e&&"object"==typeof _e?({bufferSize:Le=1/0,windowTime:ve=1/0,refCount:ge=!1,scheduler:ze}=_e):Le=_e??1/0,(0,He.B)({connector:()=>new Z(Le,ve,ze),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ge})}},8675:(sn,mt,B)=>{"use strict";B.d(mt,{O:()=>He});var d=B(7272),O=B(7669),Z=B(4482);function He(...De){const _e=(0,O.yG)(De);return(0,Z.e)((ve,ze)=>{(_e?(0,d.z)(De,ve,_e):(0,d.z)(De,ve)).subscribe(ze)})}},9468:(sn,mt,B)=>{"use strict";B.d(mt,{R:()=>O});var d=B(4482);function O(Z,He=0){return(0,d.e)((De,_e)=>{_e.add(Z.schedule(()=>De.subscribe(_e),He))})}},3900:(sn,mt,B)=>{"use strict";B.d(mt,{w:()=>He});var d=B(8421),O=B(4482),Z=B(5403);function He(De,_e){return(0,O.e)((ve,ze)=>{let Le=null,ge=0,me=!1;const Te=()=>me&&!Le&&ze.complete();ve.subscribe((0,Z.x)(ze,Fe=>{Le?.unsubscribe();let je=0;const $e=ge++;(0,d.Xf)(De(Fe,$e)).subscribe(Le=(0,Z.x)(ze,Ve=>ze.next(_e?_e(Fe,Ve,$e,je++):Ve),()=>{Le=null,Te()}))},()=>{me=!0,Te()}))})}},5698:(sn,mt,B)=>{"use strict";B.d(mt,{q:()=>He});var d=B(515),O=B(4482),Z=B(5403);function He(De){return De<=0?()=>d.E:(0,O.e)((_e,ve)=>{let ze=0;_e.subscribe((0,Z.x)(ve,Le=>{++ze<=De&&(ve.next(Le),De<=ze&&ve.complete())}))})}},8505:(sn,mt,B)=>{"use strict";B.d(mt,{b:()=>De});var d=B(576),O=B(4482),Z=B(5403),He=B(4671);function De(_e,ve,ze){const Le=(0,d.m)(_e)||ve||ze?{next:_e,error:ve,complete:ze}:_e;return Le?(0,O.e)((ge,me)=>{var Te;null===(Te=Le.subscribe)||void 0===Te||Te.call(Le);let Fe=!0;ge.subscribe((0,Z.x)(me,je=>{var $e;null===($e=Le.next)||void 0===$e||$e.call(Le,je),me.next(je)},()=>{var je;Fe=!1,null===(je=Le.complete)||void 0===je||je.call(Le),me.complete()},je=>{var $e;Fe=!1,null===($e=Le.error)||void 0===$e||$e.call(Le,je),me.error(je)},()=>{var je,$e;Fe&&(null===(je=Le.unsubscribe)||void 0===je||je.call(Le)),null===($e=Le.finalize)||void 0===$e||$e.call(Le)}))}):He.y}},8068:(sn,mt,B)=>{"use strict";B.d(mt,{T:()=>He});var d=B(6805),O=B(4482),Z=B(5403);function He(_e=De){return(0,O.e)((ve,ze)=>{let Le=!1;ve.subscribe((0,Z.x)(ze,ge=>{Le=!0,ze.next(ge)},()=>Le?ze.complete():ze.error(_e())))})}function De(){return new d.K}},4408:(sn,mt,B)=>{"use strict";B.d(mt,{o:()=>De});var d=B(727);class O extends d.w0{constructor(ve,ze){super()}schedule(ve,ze=0){return this}}const Z={setInterval(_e,ve,...ze){const{delegate:Le}=Z;return Le?.setInterval?Le.setInterval(_e,ve,...ze):setInterval(_e,ve,...ze)},clearInterval(_e){const{delegate:ve}=Z;return(ve?.clearInterval||clearInterval)(_e)},delegate:void 0};var He=B(8737);class De extends O{constructor(ve,ze){super(ve,ze),this.scheduler=ve,this.work=ze,this.pending=!1}schedule(ve,ze=0){if(this.closed)return this;this.state=ve;const Le=this.id,ge=this.scheduler;return null!=Le&&(this.id=this.recycleAsyncId(ge,Le,ze)),this.pending=!0,this.delay=ze,this.id=this.id||this.requestAsyncId(ge,this.id,ze),this}requestAsyncId(ve,ze,Le=0){return Z.setInterval(ve.flush.bind(ve,this),Le)}recycleAsyncId(ve,ze,Le=0){if(null!=Le&&this.delay===Le&&!1===this.pending)return ze;Z.clearInterval(ze)}execute(ve,ze){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Le=this._execute(ve,ze);if(Le)return Le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,ze){let ge,Le=!1;try{this.work(ve)}catch(me){Le=!0,ge=me||new Error("Scheduled action threw falsy error")}if(Le)return this.unsubscribe(),ge}unsubscribe(){if(!this.closed){const{id:ve,scheduler:ze}=this,{actions:Le}=ze;this.work=this.state=this.scheduler=null,this.pending=!1,(0,He.P)(Le,this),null!=ve&&(this.id=this.recycleAsyncId(ze,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(sn,mt,B)=>{"use strict";B.d(mt,{v:()=>Z});var d=B(6063);class O{constructor(De,_e=O.now){this.schedulerActionCtor=De,this.now=_e}schedule(De,_e=0,ve){return new this.schedulerActionCtor(this,De).schedule(ve,_e)}}O.now=d.l.now;class Z extends O{constructor(De,_e=O.now){super(De,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(De){const{actions:_e}=this;if(this._active)return void _e.push(De);let ve;this._active=!0;do{if(ve=De.execute(De.state,De.delay))break}while(De=_e.shift());if(this._active=!1,ve){for(;De=_e.shift();)De.unsubscribe();throw ve}}}},4986:(sn,mt,B)=>{"use strict";B.d(mt,{z:()=>Z});var d=B(4408);const Z=new(B(7565).v)(d.o)},6063:(sn,mt,B)=>{"use strict";B.d(mt,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(sn,mt,B)=>{"use strict";B.d(mt,{z:()=>d});const d={setTimeout(O,Z,...He){const{delegate:De}=d;return De?.setTimeout?De.setTimeout(O,Z,...He):setTimeout(O,Z,...He)},clearTimeout(O){const{delegate:Z}=d;return(Z?.clearTimeout||clearTimeout)(O)},delegate:void 0}},2202:(sn,mt,B)=>{"use strict";B.d(mt,{h:()=>O});const O=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(sn,mt,B)=>{"use strict";B.d(mt,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(sn,mt,B)=>{"use strict";B.d(mt,{K:()=>O});const O=(0,B(3888).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(sn,mt,B)=>{"use strict";B.d(mt,{_6:()=>_e,jO:()=>He,yG:()=>De});var d=B(576);function Z(ve){return ve[ve.length-1]}function He(ve){return(0,d.m)(Z(ve))?ve.pop():void 0}function De(ve){return function O(ve){return ve&&(0,d.m)(ve.schedule)}(Z(ve))?ve.pop():void 0}function _e(ve,ze){return"number"==typeof Z(ve)?ve.pop():ze}},4742:(sn,mt,B)=>{"use strict";B.d(mt,{D:()=>De});const{isArray:d}=Array,{getPrototypeOf:O,prototype:Z,keys:He}=Object;function De(ve){if(1===ve.length){const ze=ve[0];if(d(ze))return{args:ze,keys:null};if(function _e(ve){return ve&&"object"==typeof ve&&O(ve)===Z}(ze)){const Le=He(ze);return{args:Le.map(ge=>ze[ge]),keys:Le}}}return{args:ve,keys:null}}},8737:(sn,mt,B)=>{"use strict";function d(O,Z){if(O){const He=O.indexOf(Z);0<=He&&O.splice(He,1)}}B.d(mt,{P:()=>d})},3888:(sn,mt,B)=>{"use strict";function d(O){const He=O(De=>{Error.call(De),De.stack=(new Error).stack});return He.prototype=Object.create(Error.prototype),He.prototype.constructor=He,He}B.d(mt,{d:()=>d})},1810:(sn,mt,B)=>{"use strict";function d(O,Z){return O.reduce((He,De,_e)=>(He[De]=Z[_e],He),{})}B.d(mt,{n:()=>d})},2806:(sn,mt,B)=>{"use strict";B.d(mt,{O:()=>He,x:()=>Z});var d=B(2416);let O=null;function Z(De){if(d.v.useDeprecatedSynchronousErrorHandling){const _e=!O;if(_e&&(O={errorThrown:!1,error:null}),De(),_e){const{errorThrown:ve,error:ze}=O;if(O=null,ve)throw ze}}else De()}function He(De){d.v.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=De)}},9672:(sn,mt,B)=>{"use strict";function d(O,Z,He,De=0,_e=!1){const ve=Z.schedule(function(){He(),_e?O.add(this.schedule(null,De)):this.unsubscribe()},De);if(O.add(ve),!_e)return ve}B.d(mt,{f:()=>d})},4671:(sn,mt,B)=>{"use strict";function d(O){return O}B.d(mt,{y:()=>d})},1144:(sn,mt,B)=>{"use strict";B.d(mt,{z:()=>d});const d=O=>O&&"number"==typeof O.length&&"function"!=typeof O},2206:(sn,mt,B)=>{"use strict";B.d(mt,{D:()=>O});var d=B(576);function O(Z){return Symbol.asyncIterator&&(0,d.m)(Z?.[Symbol.asyncIterator])}},576:(sn,mt,B)=>{"use strict";function d(O){return"function"==typeof O}B.d(mt,{m:()=>d})},3670:(sn,mt,B)=>{"use strict";B.d(mt,{c:()=>Z});var d=B(8822),O=B(576);function Z(He){return(0,O.m)(He[d.L])}},6495:(sn,mt,B)=>{"use strict";B.d(mt,{T:()=>Z});var d=B(2202),O=B(576);function Z(He){return(0,O.m)(He?.[d.h])}},8239:(sn,mt,B)=>{"use strict";B.d(mt,{t:()=>O});var d=B(576);function O(Z){return(0,d.m)(Z?.then)}},3260:(sn,mt,B)=>{"use strict";B.d(mt,{L:()=>He,Q:()=>Z});var d=B(655),O=B(576);function Z(De){return(0,d.FC)(this,arguments,function*(){const ve=De.getReader();try{for(;;){const{value:ze,done:Le}=yield(0,d.qq)(ve.read());if(Le)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ze)}}finally{ve.releaseLock()}})}function He(De){return(0,O.m)(De?.getReader)}},4482:(sn,mt,B)=>{"use strict";B.d(mt,{A:()=>O,e:()=>Z});var d=B(576);function O(He){return(0,d.m)(He?.lift)}function Z(He){return De=>{if(O(De))return De.lift(function(_e){try{return He(_e,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(sn,mt,B)=>{"use strict";B.d(mt,{Z:()=>He});var d=B(4004);const{isArray:O}=Array;function He(De){return(0,d.U)(_e=>function Z(De,_e){return O(_e)?De(..._e):De(_e)}(De,_e))}},5032:(sn,mt,B)=>{"use strict";function d(){}B.d(mt,{Z:()=>d})},7849:(sn,mt,B)=>{"use strict";B.d(mt,{h:()=>Z});var d=B(2416),O=B(3410);function Z(He){O.z.setTimeout(()=>{const{onUnhandledError:De}=d.v;if(!De)throw He;De(He)})}},4532:(sn,mt,B)=>{"use strict";function d(O){return new TypeError(`You provided ${null!==O&&"object"==typeof O?"an invalid object":`'${O}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(mt,{z:()=>d})},863:(sn,mt,B)=>{var d={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function O(Z){if(!B.o(d,Z))return Promise.resolve().then(()=>{var _e=new Error("Cannot find module '"+Z+"'");throw _e.code="MODULE_NOT_FOUND",_e});var He=d[Z],De=He[0];return Promise.all(He.slice(1).map(B.e)).then(()=>B(De))}O.keys=()=>Object.keys(d),O.id=863,sn.exports=O},655:(sn,mt,B)=>{"use strict";function He(he,pe){var fe={};for(var le in he)Object.prototype.hasOwnProperty.call(he,le)&&pe.indexOf(le)<0&&(fe[le]=he[le]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Qe=0;for(le=Object.getOwnPropertySymbols(he);Qe<le.length;Qe++)pe.indexOf(le[Qe])<0&&Object.prototype.propertyIsEnumerable.call(he,le[Qe])&&(fe[le[Qe]]=he[le[Qe]])}return fe}function De(he,pe,fe,le){var Gt,Qe=arguments.length,Tt=Qe<3?pe:null===le?le=Object.getOwnPropertyDescriptor(pe,fe):le;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Tt=Reflect.decorate(he,pe,fe,le);else for(var Et=he.length-1;Et>=0;Et--)(Gt=he[Et])&&(Tt=(Qe<3?Gt(Tt):Qe>3?Gt(pe,fe,Tt):Gt(pe,fe))||Tt);return Qe>3&&Tt&&Object.defineProperty(pe,fe,Tt),Tt}function ze(he,pe,fe,le){return new(fe||(fe=Promise))(function(Tt,Gt){function Et(be){try{Be(le.next(be))}catch(Ye){Gt(Ye)}}function yt(be){try{Be(le.throw(be))}catch(Ye){Gt(Ye)}}function Be(be){be.done?Tt(be.value):function Qe(Tt){return Tt instanceof fe?Tt:new fe(function(Gt){Gt(Tt)})}(be.value).then(Et,yt)}Be((le=le.apply(he,pe||[])).next())})}function Ce(he){return this instanceof Ce?(this.v=he,this):new Ce(he)}function Re(he,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,le=fe.apply(he,pe||[]),Tt=[];return Qe={},Gt("next"),Gt("throw"),Gt("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe;function Gt(Ie){le[Ie]&&(Qe[Ie]=function(st){return new Promise(function(Rt,vt){Tt.push([Ie,st,Rt,vt])>1||Et(Ie,st)})})}function Et(Ie,st){try{!function yt(Ie){Ie.value instanceof Ce?Promise.resolve(Ie.value.v).then(Be,be):Ye(Tt[0][2],Ie)}(le[Ie](st))}catch(Rt){Ye(Tt[0][3],Rt)}}function Be(Ie){Et("next",Ie)}function be(Ie){Et("throw",Ie)}function Ye(Ie,st){Ie(st),Tt.shift(),Tt.length&&Et(Tt[0][0],Tt[0][1])}}function bt(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=he[Symbol.asyncIterator];return pe?pe.call(he):(he=function Te(he){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&he[pe],le=0;if(fe)return fe.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&le>=he.length&&(he=void 0),{value:he&&he[le++],done:!he}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),fe={},le("next"),le("throw"),le("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function le(Tt){fe[Tt]=he[Tt]&&function(Gt){return new Promise(function(Et,yt){!function Qe(Tt,Gt,Et,yt){Promise.resolve(yt).then(function(Be){Tt({value:Be,done:Et})},Gt)}(Et,yt,(Gt=he[Tt](Gt)).done,Gt.value)})}}}B.d(mt,{FC:()=>Re,KL:()=>bt,_T:()=>He,gn:()=>De,mG:()=>ze,qq:()=>Ce})},6895:(sn,mt,B)=>{"use strict";B.d(mt,{Do:()=>W,EM:()=>zo,HT:()=>De,JF:()=>Ci,K0:()=>ve,Mx:()=>xs,O5:()=>nt,PM:()=>Ro,S$:()=>Ce,V_:()=>ge,Ye:()=>Xe,b0:()=>bt,bD:()=>jr,ez:()=>qi,mk:()=>es,q:()=>Z,sg:()=>Ei,tP:()=>Nr,w_:()=>_e});var d=B(4650);let O=null;function Z(){return O}function De($){O||(O=$)}class _e{}const ve=new d.OlP("DocumentToken");let ze=(()=>{class ${historyGo(U){throw new Error("Not implemented")}}return $.\u0275fac=function(U){return new(U||$)},$.\u0275prov=d.Yz7({token:$,factory:function(){return function Le(){return(0,d.LFG)(me)}()},providedIn:"platform"}),$})();const ge=new d.OlP("Location Initialized");let me=(()=>{class $ extends ze{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(U){const ue=Z().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("popstate",U,!1),()=>ue.removeEventListener("popstate",U)}onHashChange(U){const ue=Z().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("hashchange",U,!1),()=>ue.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,ue,lt){Te()?this._history.pushState(U,ue,lt):this.location.hash=lt}replaceState(U,ue,lt){Te()?this._history.replaceState(U,ue,lt):this.location.hash=lt}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return $.\u0275fac=function(U){return new(U||$)(d.LFG(ve))},$.\u0275prov=d.Yz7({token:$,factory:function(){return function Fe(){return new me((0,d.LFG)(ve))}()},providedIn:"platform"}),$})();function Te(){return!!window.history.pushState}function je($,re){if(0==$.length)return re;if(0==re.length)return $;let U=0;return $.endsWith("/")&&U++,re.startsWith("/")&&U++,2==U?$+re.substring(1):1==U?$+re:$+"/"+re}function $e($){const re=$.match(/#|\?|$/),U=re&&re.index||$.length;return $.slice(0,U-("/"===$[U-1]?1:0))+$.slice(U)}function Ve($){return $&&"?"!==$[0]?"?"+$:$}let Ce=(()=>{class ${historyGo(U){throw new Error("Not implemented")}}return $.\u0275fac=function(U){return new(U||$)},$.\u0275prov=d.Yz7({token:$,factory:function(){return function Re(){const $=(0,d.LFG)(ve).location;return new bt((0,d.LFG)(ze),$&&$.origin||"")}()},providedIn:"root"}),$})();const Ae=new d.OlP("appBaseHref");let bt=(()=>{class $ extends Ce{constructor(U,ue){if(super(),this._platformLocation=U,this._removeListenerFns=[],null==ue&&(ue=this._platformLocation.getBaseHrefFromDOM()),null==ue)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ue}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return je(this._baseHref,U)}path(U=!1){const ue=this._platformLocation.pathname+Ve(this._platformLocation.search),lt=this._platformLocation.hash;return lt&&U?`${ue}${lt}`:ue}pushState(U,ue,lt,Ft){const Ct=this.prepareExternalUrl(lt+Ve(Ft));this._platformLocation.pushState(U,ue,Ct)}replaceState(U,ue,lt,Ft){const Ct=this.prepareExternalUrl(lt+Ve(Ft));this._platformLocation.replaceState(U,ue,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return $.\u0275fac=function(U){return new(U||$)(d.LFG(ze),d.LFG(Ae,8))},$.\u0275prov=d.Yz7({token:$,factory:$.\u0275fac}),$})(),W=(()=>{class $ extends Ce{constructor(U,ue){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=ue&&(this._baseHref=ue)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let ue=this._platformLocation.hash;return null==ue&&(ue="#"),ue.length>0?ue.substring(1):ue}prepareExternalUrl(U){const ue=je(this._baseHref,U);return ue.length>0?"#"+ue:ue}pushState(U,ue,lt,Ft){let Ct=this.prepareExternalUrl(lt+Ve(Ft));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.pushState(U,ue,Ct)}replaceState(U,ue,lt,Ft){let Ct=this.prepareExternalUrl(lt+Ve(Ft));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.replaceState(U,ue,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return $.\u0275fac=function(U){return new(U||$)(d.LFG(ze),d.LFG(Ae,8))},$.\u0275prov=d.Yz7({token:$,factory:$.\u0275fac}),$})(),Xe=(()=>{class ${constructor(U){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const ue=this._locationStrategy.getBaseHref();this._baseHref=$e(et(ue)),this._locationStrategy.onPopState(lt=>{this._subject.emit({url:this.path(!0),pop:!0,state:lt.state,type:lt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,ue=""){return this.path()==this.normalize(U+Ve(ue))}normalize(U){return $.stripTrailingSlash(function Je($,re){return $&&re.startsWith($)?re.substring($.length):re}(this._baseHref,et(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,ue="",lt=null){this._locationStrategy.pushState(lt,"",U,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ve(ue)),lt)}replaceState(U,ue="",lt=null){this._locationStrategy.replaceState(lt,"",U,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ve(ue)),lt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ue=>{this._notifyUrlChangeListeners(ue.url,ue.state)})),()=>{const ue=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(ue,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",ue){this._urlChangeListeners.forEach(lt=>lt(U,ue))}subscribe(U,ue,lt){return this._subject.subscribe({next:U,error:ue,complete:lt})}}return $.normalizeQueryParams=Ve,$.joinWithSlash=je,$.stripTrailingSlash=$e,$.\u0275fac=function(U){return new(U||$)(d.LFG(Ce))},$.\u0275prov=d.Yz7({token:$,factory:function(){return function Ge(){return new Xe((0,d.LFG)(Ce))}()},providedIn:"root"}),$})();function et($){return $.replace(/\/index.html$/,"")}function xs($,re){re=encodeURIComponent(re);for(const U of $.split(";")){const ue=U.indexOf("="),[lt,Ft]=-1==ue?[U,""]:[U.slice(0,ue),U.slice(ue+1)];if(lt.trim()===re)return decodeURIComponent(Ft)}return null}let es=(()=>{class ${constructor(U,ue,lt,Ft){this._iterableDiffers=U,this._keyValueDiffers=ue,this._ngEl=lt,this._renderer=Ft,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(U){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof U?U.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(U){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof U?U.split(/\s+/):U,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const U=this._iterableDiffer.diff(this._rawClass);U&&this._applyIterableChanges(U)}else if(this._keyValueDiffer){const U=this._keyValueDiffer.diff(this._rawClass);U&&this._applyKeyValueChanges(U)}}_applyKeyValueChanges(U){U.forEachAddedItem(ue=>this._toggleClass(ue.key,ue.currentValue)),U.forEachChangedItem(ue=>this._toggleClass(ue.key,ue.currentValue)),U.forEachRemovedItem(ue=>{ue.previousValue&&this._toggleClass(ue.key,!1)})}_applyIterableChanges(U){U.forEachAddedItem(ue=>{if("string"!=typeof ue.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(ue.item)}`);this._toggleClass(ue.item,!0)}),U.forEachRemovedItem(ue=>this._toggleClass(ue.item,!1))}_applyClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(ue=>this._toggleClass(ue,!0)):Object.keys(U).forEach(ue=>this._toggleClass(ue,!!U[ue])))}_removeClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(ue=>this._toggleClass(ue,!1)):Object.keys(U).forEach(ue=>this._toggleClass(ue,!1)))}_toggleClass(U,ue){(U=U.trim())&&U.split(/\s+/g).forEach(lt=>{ue?this._renderer.addClass(this._ngEl.nativeElement,lt):this._renderer.removeClass(this._ngEl.nativeElement,lt)})}}return $.\u0275fac=function(U){return new(U||$)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},$.\u0275dir=d.lG2({type:$,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),$})();class xi{constructor(re,U,ue,lt){this.$implicit=re,this.ngForOf=U,this.index=ue,this.count=lt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ei=(()=>{class ${constructor(U,ue,lt){this._viewContainer=U,this._template=ue,this._differs=lt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const ue=this._viewContainer;U.forEachOperation((lt,Ft,Ct)=>{if(null==lt.previousIndex)ue.createEmbeddedView(this._template,new xi(lt.item,this._ngForOf,-1,-1),null===Ct?void 0:Ct);else if(null==Ct)ue.remove(null===Ft?void 0:Ft);else if(null!==Ft){const _n=ue.get(Ft);ue.move(_n,Ct),te(_n,lt)}});for(let lt=0,Ft=ue.length;lt<Ft;lt++){const _n=ue.get(lt).context;_n.index=lt,_n.count=Ft,_n.ngForOf=this._ngForOf}U.forEachIdentityChange(lt=>{te(ue.get(lt.currentIndex),lt)})}static ngTemplateContextGuard(U,ue){return!0}}return $.\u0275fac=function(U){return new(U||$)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},$.\u0275dir=d.lG2({type:$,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),$})();function te($,re){$.context.$implicit=re.item}let nt=(()=>{class ${constructor(U,ue){this._viewContainer=U,this._context=new dt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ue}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){we("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){we("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,ue){return!0}}return $.\u0275fac=function(U){return new(U||$)(d.Y36(d.s_b),d.Y36(d.Rgc))},$.\u0275dir=d.lG2({type:$,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),$})();class dt{constructor(){this.$implicit=null,this.ngIf=null}}function we($,re){if(re&&!re.createEmbeddedView)throw new Error(`${$} must be a TemplateRef, but received '${(0,d.AaK)(re)}'.`)}let Nr=(()=>{class ${constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const ue=this._viewContainerRef;if(this._viewRef&&ue.remove(ue.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:lt,ngTemplateOutletContext:Ft,ngTemplateOutletInjector:Ct}=this;this._viewRef=ue.createEmbeddedView(lt,Ft,Ct?{injector:Ct}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return $.\u0275fac=function(U){return new(U||$)(d.Y36(d.s_b))},$.\u0275dir=d.lG2({type:$,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[d.TTD]}),$})(),qi=(()=>{class ${}return $.\u0275fac=function(U){return new(U||$)},$.\u0275mod=d.oAB({type:$}),$.\u0275inj=d.cJS({}),$})();const jr="browser";function Ro($){return"server"===$}let zo=(()=>{class ${}return $.\u0275prov=(0,d.Yz7)({token:$,providedIn:"root",factory:()=>new Ii((0,d.LFG)(ve),window)}),$})();class Ii{constructor(re,U){this.document=re,this.window=U,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(re){this.supportsScrolling()&&this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){if(!this.supportsScrolling())return;const U=function Mi($,re){const U=$.getElementById(re)||$.getElementsByName(re)[0];if(U)return U;if("function"==typeof $.createTreeWalker&&$.body&&($.body.createShadowRoot||$.body.attachShadow)){const ue=$.createTreeWalker($.body,NodeFilter.SHOW_ELEMENT);let lt=ue.currentNode;for(;lt;){const Ft=lt.shadowRoot;if(Ft){const Ct=Ft.getElementById(re)||Ft.querySelector(`[name="${re}"]`);if(Ct)return Ct}lt=ue.nextNode()}}return null}(this.document,re);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(re){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=re)}}scrollToElement(re){const U=re.getBoundingClientRect(),ue=U.left+this.window.pageXOffset,lt=U.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(ue-Ft[0],lt-Ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const re=Ts(this.window.history)||Ts(Object.getPrototypeOf(this.window.history));return!(!re||!re.writable&&!re.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ts($){return Object.getOwnPropertyDescriptor($,"scrollRestoration")}class Ci{}},4650:(sn,mt,B)=>{"use strict";B.d(mt,{$8M:()=>hl,$Z:()=>Vd,AFp:()=>AE,AaK:()=>ze,BQk:()=>im,CRH:()=>sE,CZH:()=>$v,CqO:()=>nv,D6c:()=>jC,DdM:()=>z0,EJc:()=>nC,EiD:()=>nc,Ez6:()=>Rt,F$t:()=>ay,F4k:()=>tv,FYo:()=>P0,FiY:()=>qt,G48:()=>bC,Gf:()=>rE,GfV:()=>k0,GkF:()=>oy,Gpc:()=>me,Gre:()=>Ey,Hsn:()=>ly,JOm:()=>Vs,JVY:()=>cd,L6k:()=>yl,LAX:()=>cf,LFG:()=>Qi,LSH:()=>Gl,Lbi:()=>JI,MMx:()=>R_,NdJ:()=>sm,OlP:()=>Qn,Oqu:()=>pm,PXZ:()=>yC,Q6J:()=>Qy,QGY:()=>ev,QP$:()=>Dm,Qsj:()=>Lw,R0b:()=>qu,RDi:()=>Fr,Rgc:()=>Ny,SBq:()=>Ry,Sil:()=>iC,Suo:()=>iE,TTD:()=>Ui,TgZ:()=>ng,Udp:()=>cm,X6Q:()=>CC,XFs:()=>Dt,Xpm:()=>Ue,Xts:()=>Ah,Y36:()=>Fa,YKP:()=>R0,YNc:()=>Zy,Yjl:()=>Un,Yz7:()=>st,ZZ4:()=>n0,_Bn:()=>x0,_UZ:()=>sy,_Vd:()=>My,_c5:()=>$C,_uU:()=>fv,aQg:()=>r0,c2e:()=>eC,cJS:()=>vt,cg1:()=>ym,dDg:()=>fC,deG:()=>pr,dqk:()=>en,eBb:()=>Ma,eFA:()=>UE,ekj:()=>dm,eoX:()=>BE,f3M:()=>Wa,g9A:()=>ME,h0i:()=>hg,hGG:()=>UC,hM9:()=>zw,hij:()=>Wu,iGM:()=>nE,ifc:()=>Yn,ip1:()=>SE,jDz:()=>B0,kL8:()=>rp,kYT:()=>ar,lG2:()=>ir,lqb:()=>Tl,lri:()=>FE,mCW:()=>jl,n5z:()=>mu,oAB:()=>un,oJD:()=>ua,oxw:()=>rv,pB0:()=>Bc,q3G:()=>os,q4F:()=>N0,qLn:()=>Lo,qOj:()=>Xg,qZA:()=>nm,qzn:()=>xa,rWj:()=>LE,s9C:()=>Qf,sBO:()=>DC,sIi:()=>Sc,s_b:()=>Lv,soG:()=>Uv,tb:()=>RE,tp0:()=>Rn,uIk:()=>ty,vHH:()=>$e,vpe:()=>rh,wAp:()=>wr,xp6:()=>Ig,ynx:()=>rm,z2F:()=>jv,z3N:()=>$l,zSh:()=>xh,zs3:()=>ql});var d=B(7579),O=B(727),Z=B(8306),He=B(6451),De=B(3099);function _e(n){for(let r in n)if(n[r]===_e)return r;throw Error("Could not find renamed property on target object.")}function ve(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function ze(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ze).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Le(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ge=_e({__forward_ref__:_e});function me(n){return n.__forward_ref__=me,n.toString=function(){return ze(this())},n}function Te(n){return Fe(n)?n():n}function Fe(n){return"function"==typeof n&&n.hasOwnProperty(ge)&&n.__forward_ref__===me}class $e extends Error{constructor(r,s){super(function Ve(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Ce(n){return"string"==typeof n?n:null==n?"":String(n)}function Xe(n,r){throw new $e(-201,!1)}function yt(n,r){null==n&&function Be(n,r,s,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${s} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function st(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const Rt=st;function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vt(n){return fn(n,In)||fn(n,Qt)}function fn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Zt(n){return n&&(n.hasOwnProperty(En)||n.hasOwnProperty(kn))?n[En]:null}const In=_e({\u0275prov:_e}),En=_e({\u0275inj:_e}),Qt=_e({ngInjectableDef:_e}),kn=_e({ngInjectorDef:_e});var Dt=(()=>((Dt=Dt||{})[Dt.Default=0]="Default",Dt[Dt.Host=1]="Host",Dt[Dt.Self=2]="Self",Dt[Dt.SkipSelf=4]="SkipSelf",Dt[Dt.Optional=8]="Optional",Dt))();let Sr;function rr(n){const r=Sr;return Sr=n,r}function yr(n,r,s){const c=Vt(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&Dt.Optional?null:void 0!==r?r:void Xe(ze(n))}function dr(n){return{toString:n}.toString()}var ei=(()=>((ei=ei||{})[ei.OnPush=0]="OnPush",ei[ei.Default=1]="Default",ei))(),Yn=(()=>{return(n=Yn||(Yn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Yn;var n})();const en=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yr={},vn=[],hi=_e({\u0275cmp:_e}),Zr=_e({\u0275dir:_e}),ti=_e({\u0275pipe:_e}),Er=_e({\u0275mod:_e}),Pr=_e({\u0275fac:_e}),Ke=_e({__NG_ELEMENT_ID__:_e});let Ze=0;function Ue(n){return dr(()=>{const s=!0===n.standalone,c={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ei.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,id:"c"+Ze++,styles:n.styles||vn,_:null,setInput:null,schemas:n.schemas||null,tView:null},y=n.dependencies,b=n.features;return f.inputs=On(n.inputs,c),f.outputs=On(n.outputs),b&&b.forEach(M=>M(f)),f.directiveDefs=y?()=>("function"==typeof y?y():y).map(We).filter(zt):null,f.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ur).filter(zt):null,f})}function We(n){return Jn(n)||Ar(n)}function zt(n){return null!==n}const Yt={};function un(n){return dr(()=>{const r={type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Yt[n.id]=n.type),r})}function ar(n,r){return dr(()=>{const s=or(n,!0);s.declarations=r.declarations||vn,s.imports=r.imports||vn,s.exports=r.exports||vn})}function On(n,r){if(null==n)return Yr;const s={};for(const c in n)if(n.hasOwnProperty(c)){let f=n[c],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),s[f]=c,r&&(r[f]=y)}return s}const ir=Ue;function Un(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Jn(n){return n[hi]||null}function Ar(n){return n[Zr]||null}function Ur(n){return n[ti]||null}function or(n,r){const s=n[Er]||null;if(!s&&!0===r)throw new Error(`Type ${ze(n)} does not have '\u0275mod' property.`);return s}function nt(n){return Array.isArray(n)&&"object"==typeof n[1]}function dt(n){return Array.isArray(n)&&!0===n[1]}function we(n){return 0!=(8&n.flags)}function Pe(n){return 2==(2&n.flags)}function gt(n){return 1==(1&n.flags)}function Lt(n){return null!==n.template}function Ot(n){return 0!=(256&n[2])}function Ms(n,r){return n.hasOwnProperty(Pr)?n[Pr]:null}class xo{constructor(r,s,c){this.previousValue=r,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ui(){return ps}function ps(n){return n.type.prototype.ngOnChanges&&(n.setInput=js),rs}function rs(){const n=Qs(this),r=n?.current;if(r){const s=n.previous;if(s===Yr)n.previous=r;else for(let c in r)s[c]=r[c];n.current=null,this.ngOnChanges(r)}}function js(n,r,s,c){const f=Qs(n)||function Go(n,r){return n[Zs]=r}(n,{previous:Yr,current:null}),y=f.current||(f.current={}),b=f.previous,M=this.declaredInputs[s],P=b[M];y[M]=new xo(P&&P.currentValue,r,b===Yr),n[c]=r}Ui.ngInherit=!0;const Zs="__ngSimpleChanges__";function Qs(n){return n[Zs]||null}function oi(n){for(;Array.isArray(n);)n=n[0];return n}function zo(n,r){return oi(r[n])}function Ii(n,r){return oi(r[n.index])}function Mi(n,r){return n.data[r]}function Ci(n,r){const s=r[n];return nt(s)?s:s[0]}function $(n){return 4==(4&n[2])}function re(n){return 64==(64&n[2])}function ue(n,r){return null==r?null:n[r]}function lt(n){n[18]=0}function Ft(n,r){n[5]+=r;let s=n,c=n[3];for(;null!==c&&(1===r&&1===s[5]||-1===r&&0===s[5]);)c[5]+=r,s=c,c=c[3]}const Ct={lFrame:ol(null),bindingsEnabled:!0};function vi(){return Ct.bindingsEnabled}function E(){return Ct.lFrame.lView}function H(){return Ct.lFrame.tView}function ie(){let n=xt();for(;null!==n&&64===n.type;)n=n.parent;return n}function xt(){return Ct.lFrame.currentTNode}function Mn(n,r){const s=Ct.lFrame;s.currentTNode=n,s.isParent=r}function fr(){return Ct.lFrame.isParent}function Mr(){Ct.lFrame.isParent=!1}function Bt(){return Ct.lFrame.bindingIndex++}function Pn(n){const r=Ct.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Ps(n,r){const s=Ct.lFrame;s.bindingIndex=s.bindingRootIndex=n,Oo(r)}function Oo(n){Ct.lFrame.currentDirectiveIndex=n}function go(){return Ct.lFrame.currentQueryIndex}function ra(n){Ct.lFrame.currentQueryIndex=n}function cs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function $a(n,r,s){if(s&Dt.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||s&Dt.Host||(f=cs(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;r=f,n=y}const c=Ct.lFrame=Ol();return c.currentTNode=r,c.lView=n,!0}function Wo(n){const r=Ol(),s=n[1];Ct.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ol(){const n=Ct.lFrame,r=null===n?null:n.child;return null===r?ol(n):r}function ol(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Pl(){const n=Ct.lFrame;return Ct.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const kl=Pl;function Zl(){const n=Pl();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ds(){return Ct.lFrame.selectedIndex}function Yi(n){Ct.lFrame.selectedIndex=n}function _i(){const n=Ct.lFrame;return Mi(n.tView,n.selectedIndex)}function va(n,r){for(let s=r.directiveStart,c=r.directiveEnd;s<c;s++){const y=n.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:M,ngAfterViewInit:P,ngAfterViewChecked:K,ngOnDestroy:se}=y;b&&(n.contentHooks||(n.contentHooks=[])).push(-s,b),M&&((n.contentHooks||(n.contentHooks=[])).push(s,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,M)),P&&(n.viewHooks||(n.viewHooks=[])).push(-s,P),K&&((n.viewHooks||(n.viewHooks=[])).push(s,K),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,K)),null!=se&&(n.destroyHooks||(n.destroyHooks=[])).push(s,se)}}function Fl(n,r,s){Yu(n,r,3,s)}function Ss(n,r,s,c){(3&n[2])===s&&Yu(n,r,s,c)}function ks(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Yu(n,r,s,c){const y=c??-1,b=r.length-1;let M=0;for(let P=void 0!==c?65535&n[18]:0;P<b;P++)if("number"==typeof r[P+1]){if(M=r[P],null!=c&&M>=c)break}else r[P]<0&&(n[18]+=65536),(M<y||-1==y)&&(qo(n,s,r,P),n[18]=(4294901760&n[18])+P+2),P++}function qo(n,r,s,c){const f=s[c]<0,y=s[c+1],M=n[f?-s[c]:s[c]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(M)}finally{}}}else try{y.call(M)}finally{}}class yo{constructor(r,s,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function Xo(n,r,s){let c=0;for(;c<s.length;){const f=s[c];if("number"==typeof f){if(0!==f)break;c++;const y=s[c++],b=s[c++],M=s[c++];n.setAttribute(r,b,M,y)}else{const y=f,b=s[++c];_a(y)?n.setProperty(r,y,b):n.setAttribute(r,y,b),c++}}return c}function gu(n){return 3===n||4===n||6===n}function _a(n){return 64===n.charCodeAt(0)}function oa(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let c=0;c<r.length;c++){const f=r[c];"number"==typeof f?s=f:0===s||Ns(n,s,f,null,-1===s||2===s?r[++c]:null)}}return n}function Ns(n,r,s,c,f){let y=0,b=n.length;if(-1===r)b=-1;else for(;y<n.length;){const M=n[y++];if("number"==typeof M){if(M===r){b=-1;break}if(M>r){b=y-1;break}}}for(;y<n.length;){const M=n[y];if("number"==typeof M)break;if(M===s){if(null===c)return void(null!==f&&(n[y+1]=f));if(c===n[y+1])return void(n[y+2]=f)}y++,null!==c&&y++,null!==f&&y++}-1!==b&&(n.splice(b,0,r),y=b+1),n.splice(y++,0,s),null!==c&&n.splice(y++,0,c),null!==f&&n.splice(y++,0,f)}function Ua(n){return-1!==n}function Jo(n){return 32767&n}function ea(n,r){let s=function is(n){return n>>16}(n),c=r;for(;s>0;)c=c[15],s--;return c}let ul=!0;function vo(n){const r=ul;return ul=n,r}let Xl=0;const ni={};function _o(n,r){const s=Yo(n,r);if(-1!==s)return s;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Ki(c.data,n),Ki(r,null),Ki(c.blueprint,null));const f=Eo(n,r),y=n.injectorIndex;if(Ua(f)){const b=Jo(f),M=ea(f,r),P=M[1].data;for(let K=0;K<8;K++)r[y+K]=M[b+K]|P[b+K]}return r[y+8]=f,y}function Ki(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Yo(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Eo(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,c=null,f=r;for(;null!==f;){if(c=Ca(f),null===c)return-1;if(s++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return-1}function Ea(n,r,s){!function ja(n,r,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(Ke)&&(c=s[Ke]),null==c&&(c=s[Ke]=Xl++);const f=255&c;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function rn(n,r,s){if(s&Dt.Optional)return n;Xe()}function Oi(n,r,s,c){if(s&Dt.Optional&&void 0===c&&(c=null),0==(s&(Dt.Self|Dt.Host))){const f=n[9],y=rr(void 0);try{return f?f.get(r,c,s&Dt.Optional):yr(r,c,s&Dt.Optional)}finally{rr(y)}}return rn(c,0,s)}function wa(n,r,s,c=Dt.Default,f){if(null!==n){if(1024&r[2]){const b=function vu(n,r,s,c,f){let y=n,b=r;for(;null!==y&&null!==b&&1024&b[2]&&!(256&b[2]);){const M=ko(y,b,s,c|Dt.Self,ni);if(M!==ni)return M;let P=y.parent;if(!P){const K=b[21];if(K){const se=K.get(s,ni,c);if(se!==ni)return se}P=Ca(b),b=b[15]}y=P}return f}(n,r,s,c,ni);if(b!==ni)return b}const y=ko(n,r,s,c,ni);if(y!==ni)return y}return Oi(r,s,c,f)}function ko(n,r,s,c,f){const y=function wn(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Ke)?n[Ke]:void 0;return"number"==typeof r?r>=0?255&r:Jl:r}(s);if("function"==typeof y){if(!$a(r,n,c))return c&Dt.Host?rn(f,0,c):Oi(r,s,c,f);try{const b=y(c);if(null!=b||c&Dt.Optional)return b;Xe()}finally{kl()}}else if("number"==typeof y){let b=null,M=Yo(n,r),P=-1,K=c&Dt.Host?r[16][6]:null;for((-1===M||c&Dt.SkipSelf)&&(P=-1===M?Eo(n,r):r[M+8],-1!==P&&Jt(c,!1)?(b=r[1],M=Jo(P),r=ea(P,r)):M=-1);-1!==M;){const se=r[1];if(Nt(y,M,se.data)){const xe=Ln(M,r,s,b,c,K);if(xe!==ni)return xe}P=r[M+8],-1!==P&&Jt(c,r[1].data[M+8]===K)&&Nt(y,M,r)?(b=se,M=Jo(P),r=ea(P,r)):M=-1}}return f}function Ln(n,r,s,c,f,y){const b=r[1],M=b.data[n+8],se=Hn(M,b,s,null==c?Pe(M)&&ul:c!=b&&0!=(3&M.type),f&Dt.Host&&y===M);return null!==se?Ia(r,b,se,M):ni}function Hn(n,r,s,c,f){const y=n.providerIndexes,b=r.data,M=1048575&y,P=n.directiveStart,se=y>>20,ft=f?M+se:n.directiveEnd;for(let At=c?M:M+se;At<ft;At++){const Xt=b[At];if(At<P&&s===Xt||At>=P&&Xt.type===s)return At}if(f){const At=b[P];if(At&&Lt(At)&&At.type===s)return P}return null}function Ia(n,r,s,c){let f=n[s];const y=r.data;if(function Gs(n){return n instanceof yo}(f)){const b=f;b.resolving&&function Ae(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new $e(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Re(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ce(n)}(y[s]));const M=vo(b.canSeeViewProviders);b.resolving=!0;const P=b.injectImpl?rr(b.injectImpl):null;$a(n,c,Dt.Default);try{f=n[s]=b.factory(void 0,y,n,c),r.firstCreatePass&&s>=c.directiveStart&&function hs(n,r,s){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(c){const b=ps(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,b)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),y&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y))}(s,y[s],r)}finally{null!==P&&rr(P),vo(M),b.resolving=!1,kl()}}return f}function Nt(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Jt(n,r){return!(n&Dt.Self||n&Dt.Host&&r)}class Di{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,c){return wa(this._tNode,this._lView,r,c,s)}}function Jl(){return new Di(ie(),E())}function mu(n){return dr(()=>{const r=n.prototype.constructor,s=r[Pr]||yu(r),c=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==c;){const y=f[Pr]||yu(f);if(y&&y!==s)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function yu(n){return Fe(n)?()=>{const r=yu(Te(n));return r&&r()}:Ms(n)}function Ca(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function hl(n){return function dl(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const c=s.length;let f=0;for(;f<c;){const y=s[f];if(gu(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<c&&"string"==typeof s[f];)f++;else{if(y===r)return s[f+1];f+=2}}}return null}(ie(),n)}const oo="__parameters__";function lr(n,r,s){return dr(()=>{const c=function Ta(n){return function(...s){if(n){const c=n(...s);for(const f in c)this[f]=c[f]}}}(r);function f(...y){if(this instanceof f)return c.apply(this,y),this;const b=new f(...y);return M.annotation=b,M;function M(P,K,se){const xe=P.hasOwnProperty(oo)?P[oo]:Object.defineProperty(P,oo,{value:[]})[oo];for(;xe.length<=se;)xe.push(null);return(xe[se]=xe[se]||[]).push(b),P}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Qn{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=st({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const pr=new Qn("AnalyzeForEntryComponents");function ln(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let c=n[s];Array.isArray(c)?(r===n&&(r=n.slice(0,s)),ln(c,r)):r!==n&&r.push(c)}return r}function gr(n,r){n.forEach(s=>Array.isArray(s)?gr(s,r):r(s))}function xn(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function ci(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function It(n,r){const s=[];for(let c=0;c<n;c++)s.push(r);return s}function ys(n,r,s){let c=zr(n,r);return c>=0?n[1|c]=s:(c=~c,function Eu(n,r,s,c){let f=n.length;if(f==r)n.push(s,c);else if(1===f)n.push(c,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=c}}(n,c,r,s)),c}function wu(n,r){const s=zr(n,r);if(s>=0)return n[1|s]}function zr(n,r){return function Dr(n,r,s){let c=0,f=n.length>>s;for(;f!==c;){const y=c+(f-c>>1),b=n[y<<s];if(r===b)return y<<s;b>r?f=y:c=y+1}return~(f<<s)}(n,r,1)}const Io={},vs="__NG_DI_FLAG__",Co="ngTempTokenPath",Ga=/\n/gm,yi="__source";let eo;function za(n){const r=eo;return eo=n,r}function fl(n,r=Dt.Default){if(void 0===eo)throw new $e(-203,!1);return null===eo?yr(n,void 0,r):eo.get(n,r&Dt.Optional?null:void 0,r)}function Qi(n,r=Dt.Default){return(function Zn(){return Sr}()||fl)(Te(n),r)}function Wa(n,r=Dt.Default){return Qi(n,r)}function N(n){const r=[];for(let s=0;s<n.length;s++){const c=Te(n[s]);if(Array.isArray(c)){if(0===c.length)throw new $e(900,!1);let f,y=Dt.Default;for(let b=0;b<c.length;b++){const M=c[b],P=ne(M);"number"==typeof P?-1===P?f=M.token:y|=P:f=M}r.push(Qi(f,y))}else r.push(Qi(c))}return r}function G(n,r){return n[vs]=r,n.prototype[vs]=r,n}function ne(n){return n[vs]}const qt=G(lr("Optional"),8),Rn=G(lr("SkipSelf"),4);let gl,_s,Vl;function Fr(n){gl=n}function Hi(n){return function Fc(){if(void 0===_s&&(_s=null,en.trustedTypes))try{_s=en.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _s}()?.createHTML(n)||n}function oh(n){return function Ku(){if(void 0===Vl&&(Vl=null,en.trustedTypes))try{Vl=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vl}()?.createHTML(n)||n}class nu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Lc extends nu{getTypeName(){return"HTML"}}class ah extends nu{getTypeName(){return"Style"}}class Fo extends nu{getTypeName(){return"Script"}}class Zu extends nu{getTypeName(){return"URL"}}class Ja extends nu{getTypeName(){return"ResourceURL"}}function $l(n){return n instanceof nu?n.changingThisBreaksApplicationSecurity:n}function xa(n,r){const s=function Cu(n){return n instanceof nu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function cd(n){return new Lc(n)}function yl(n){return new ah(n)}function Ma(n){return new Fo(n)}function cf(n){return new Zu(n)}function Bc(n){return new Ja(n)}class Ul{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Hi(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Vc{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const c=this.inertDocument.createElement("body");s.appendChild(c)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Hi(r),s;const c=this.inertDocument.createElement("body");return c.innerHTML=Hi(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(r){const s=r.attributes;for(let f=s.length-1;0<f;f--){const b=s.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&r.removeAttribute(b)}let c=r.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const bu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$c=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function jl(n){return(n=String(n)).match(bu)||n.match($c)?n:"unsafe:"+n}function lo(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function vl(...n){const r={};for(const s of n)for(const c in s)s.hasOwnProperty(c)&&(r[c]=!0);return r}const hd=lo("area,br,col,hr,img,wbr"),Du=lo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tu=lo("rp,rt"),fd=vl(hd,vl(Du,lo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(Tu,lo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(Tu,Du)),Hl=lo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Do=lo("srcset"),ec=vl(Hl,Do,lo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tc=lo("script,style,template");class Xi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,c=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?c=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,c&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let f=this.checkClobberedElement(s,s.nextSibling);if(f){s=f;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!fd.hasOwnProperty(s))return this.sanitizedSomething=!0,!tc.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const c=r.attributes;for(let f=0;f<c.length;f++){const y=c.item(f),b=y.name,M=b.toLowerCase();if(!ec.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let P=y.value;Hl[M]&&(P=jl(P)),Do[M]&&(n=P,P=(n=String(n)).split(",").map(r=>jl(r.trim())).join(", ")),this.buf.push(" ",b,'="',El(P),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();fd.hasOwnProperty(s)&&!hd.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(El(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const _l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ra=/([^\#-~ |!])/g;function El(n){return n.replace(/&/g,"&amp;").replace(_l,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ra,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pd;function nc(n,r){let s=null;try{pd=pd||function dd(n){const r=new Vc(n);return function df(){try{return!!(new window.DOMParser).parseFromString(Hi(""),"text/html")}catch{return!1}}()?new Ul(r):r}(n);let c=r?String(r):"";s=pd.getInertBodyElement(c);let f=5,y=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=y,y=s.innerHTML,s=pd.getInertBodyElement(c)}while(c!==y);return Hi((new Xi).sanitizeChildren(ru(s)||s))}finally{if(s){const c=ru(s)||s;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function ru(n){return"content"in n&&function ff(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var os=(()=>((os=os||{})[os.NONE=0]="NONE",os[os.HTML=1]="HTML",os[os.STYLE=2]="STYLE",os[os.SCRIPT=3]="SCRIPT",os[os.URL=4]="URL",os[os.RESOURCE_URL=5]="RESOURCE_URL",os))();function ua(n){const r=Qo();return r?oh(r.sanitize(os.HTML,n)||""):xa(n,"HTML")?oh($l(n)):nc(function ih(){return void 0!==gl?gl:typeof document<"u"?document:void 0}(),Ce(n))}function Gl(n){const r=Qo();return r?r.sanitize(os.URL,n)||"":xa(n,"URL")?$l(n):jl(Ce(n))}function Qo(){const n=E();return n&&n[12]}function Su(n){return n.ngOriginalError}class Lo{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Su(r);for(;s&&Su(s);)s=Su(s);return s||null}}const ac=new Map;let Oa=0;const fh="__ngContext__";function Ji(n,r){nt(r)?(n[fh]=r[20],function Hc(n){ac.set(n[20],n)}(r)):n[fh]=r}function el(n){const r=n[fh];return"number"==typeof r?function md(n){return ac.get(n)||null}(r):r||null}function Wl(n){const r=el(n);return r?nt(r)?r:r.lView:null}const v=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(en))();function Pt(n){return n instanceof Function?n():n}var Vs=(()=>((Vs=Vs||{})[Vs.Important=1]="Important",Vs[Vs.DashCase=2]="DashCase",Vs))();function Wc(n,r){return undefined(n,r)}function Pa(n){const r=n[3];return dt(r)?r[3]:r}function hc(n){return Vo(n[13])}function fc(n){return Vo(n[4])}function Vo(n){for(;null!==n&&!dt(n);)n=n[4];return n}function wl(n,r,s,c,f){if(null!=c){let y,b=!1;dt(c)?y=c:nt(c)&&(b=!0,c=c[0]);const M=oi(c);0===n&&null!==s?null==f?_h(r,s,M):gc(r,s,M,f||null,!0):1===n&&null!==s?gc(r,s,M,f||null,!0):2===n?function rl(n,r,s){const c=Ef(n,r);c&&function Mu(n,r,s,c){n.removeChild(r,s,c)}(n,c,r,s)}(r,M,b):3===n&&r.destroyNode(M),null!=y&&function Dd(n,r,s,c,f){const y=s[7];y!==oi(s)&&wl(r,n,c,y,f);for(let M=10;M<s.length;M++){const P=s[M];Il(P[1],P,n,r,c,y)}}(r,n,y,s,f)}}function yf(n,r,s){return n.createElement(r,s)}function mp(n,r){const s=n[9],c=s.indexOf(r),f=r[3];512&r[2]&&(r[2]&=-513,Ft(f,-1)),s.splice(c,1)}function vf(n,r){if(n.length<=10)return;const s=10+r,c=n[s];if(c){const f=c[17];null!==f&&f!==n&&mp(f,c),r>0&&(n[s-1][4]=c[4]);const y=ci(n,10+r);!function pp(n,r){Il(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const b=y[19];null!==b&&b.detachView(y[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function xu(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Il(n,r,s,3,null,null),function Am(n){let r=n[13];if(!r)return _d(n[1],n);for(;r;){let s=null;if(nt(r))s=r[13];else{const c=r[10];c&&(s=c)}if(!s){for(;r&&!r[4]&&r!==n;)nt(r)&&_d(r[1],r),r=r[3];null===r&&(r=n),nt(r)&&_d(r[1],r),s=r&&r[4]}r=s}}(r)}}function _d(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function xm(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let c=0;c<s.length;c+=2){const f=r[s[c]];if(!(f instanceof yo)){const y=s[c+1];if(Array.isArray(y))for(let b=0;b<y.length;b+=2){const M=f[y[b]],P=y[b+1];try{P.call(M)}finally{}}else try{y.call(f)}finally{}}}}(n,r),function _f(n,r){const s=n.cleanup,c=r[7];let f=-1;if(null!==s)for(let y=0;y<s.length-1;y+=2)if("string"==typeof s[y]){const b=s[y+1],M="function"==typeof b?b(r):oi(r[b]),P=c[f=s[y+2]],K=s[y+3];"boolean"==typeof K?M.removeEventListener(s[y],P,K):K>=0?c[f=K]():c[f=-K].unsubscribe(),y+=2}else{const b=c[f=s[y+1]];s[y].call(b)}if(null!==c){for(let y=f+1;y<c.length;y++)c[y]();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&dt(r[3])){s!==r[3]&&mp(s,r);const c=r[19];null!==c&&c.detachView(n)}!function gf(n){ac.delete(n[20])}(r)}}function mg(n,r,s){return function yg(n,r,s){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return s[0];if(2&c.flags){const f=n.data[c.directiveStart].encapsulation;if(f===Yn.None||f===Yn.Emulated)return null}return Ii(c,s)}(n,r.parent,s)}function gc(n,r,s,c,f){n.insertBefore(r,s,c,f)}function _h(n,r,s){n.appendChild(r,s)}function vg(n,r,s,c,f){null!==c?gc(n,r,s,c,f):_h(n,r,s)}function Ef(n,r){return n.parentNode(r)}function To(n,r,s){return wf(n,r,s)}let wf=function qc(n,r,s){return 40&n.type?Ii(n,s):null};function wd(n,r,s,c){const f=mg(n,c,r),y=r[11],M=To(c.parent||r[6],c,r);if(null!=f)if(Array.isArray(s))for(let P=0;P<s.length;P++)vg(y,f,s[P],M,!1);else vg(y,f,s,M,!1)}function wh(n,r){if(null!==r){const s=r.type;if(3&s)return Ii(r,n);if(4&s)return Cd(-1,n[r.index]);if(8&s){const c=r.child;if(null!==c)return wh(n,c);{const f=n[r.index];return dt(f)?Cd(-1,f):oi(f)}}if(32&s)return Wc(r,n)()||oi(n[r.index]);{const c=Id(n,r);return null!==c?Array.isArray(c)?c[0]:wh(Pa(n[16]),c):wh(n,r.next)}}return null}function Id(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Cd(n,r){const s=10+n+1;if(s<r.length){const c=r[s],f=c[1].firstChild;if(null!==f)return wh(c,f)}return r[7]}function iu(n,r,s,c,f,y,b){for(;null!=s;){const M=c[s.index],P=s.type;if(b&&0===r&&(M&&Ji(oi(M),c),s.flags|=4),64!=(64&s.flags))if(8&P)iu(n,r,s.child,c,f,y,!1),wl(r,n,f,M,y);else if(32&P){const K=Wc(s,c);let se;for(;se=K();)wl(r,n,f,se,y);wl(r,n,f,M,y)}else 16&P?Yc(n,r,c,s,f,y):wl(r,n,f,M,y);s=b?s.projectionNext:s.next}}function Il(n,r,s,c,f,y){iu(s,c,n.firstChild,r,f,y,!1)}function Yc(n,r,s,c,f,y){const b=s[16],P=b[6].projection[c.projection];if(Array.isArray(P))for(let K=0;K<P.length;K++)wl(r,n,f,P[K],y);else iu(n,r,P,b[3],f,y,!0)}function Ch(n,r,s){n.setAttribute(r,"style",s)}function Td(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function _g(n,r,s){let c=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===c||n.charCodeAt(f+y)<=32)return f}s=f+1}}const vp="ng-template";function If(n,r,s){let c=0;for(;c<n.length;){let f=n[c++];if(s&&"class"===f){if(f=n[c],-1!==_g(f.toLowerCase(),r,0))return!0}else if(1===f){for(;c<n.length&&"string"==typeof(f=n[c++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Sd(n){return 4===n.type&&n.value!==vp}function Ou(n,r,s){return r===(4!==n.type||s?n.value:vp)}function _p(n,r,s){let c=4;const f=n.attrs||[],y=function Ad(n){for(let r=0;r<n.length;r++)if(gu(n[r]))return r;return n.length}(f);let b=!1;for(let M=0;M<r.length;M++){const P=r[M];if("number"!=typeof P){if(!b)if(4&c){if(c=2|1&c,""!==P&&!Ou(n,P,s)||""===P&&1===r.length){if(Cl(c))return!1;b=!0}}else{const K=8&c?P:r[++M];if(8&c&&null!==n.attrs){if(!If(n.attrs,K,s)){if(Cl(c))return!1;b=!0}continue}const xe=Eg(8&c?"class":P,f,Sd(n),s);if(-1===xe){if(Cl(c))return!1;b=!0;continue}if(""!==K){let ft;ft=xe>y?"":f[xe+1].toLowerCase();const At=8&c?ft:null;if(At&&-1!==_g(At,K,0)||2&c&&K!==ft){if(Cl(c))return!1;b=!0}}}}else{if(!b&&!Cl(c)&&!Cl(P))return!1;if(b&&Cl(P))continue;b=!1,c=P|1&c}}return Cl(c)||b}function Cl(n){return 0==(1&n)}function Eg(n,r,s,c){if(null===r)return-1;let f=0;if(c||!s){let y=!1;for(;f<r.length;){const b=r[f];if(b===n)return f;if(3===b||6===b)y=!0;else{if(1===b||2===b){let M=r[++f];for(;"string"==typeof M;)M=r[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=y?1:2}return-1}return function Pu(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const c=n[s];if("number"==typeof c)return-1;if(c===r)return s;s++}return-1}(r,n)}function wg(n,r,s=!1){for(let c=0;c<r.length;c++)if(_p(n,r[c],s))return!0;return!1}function ku(n,r){e:for(let s=0;s<r.length;s++){const c=r[s];if(n.length===c.length){for(let f=0;f<n.length;f++)if(n[f]!==c[f])continue e;return!0}}return!1}function Dh(n,r){return n?":not("+r.trim()+")":r}function Cf(n){let r=n[0],s=1,c=2,f="",y=!1;for(;s<n.length;){let b=n[s];if("string"==typeof b)if(2&c){const M=n[++s];f+="["+b+(M.length>0?'="'+M+'"':"")+"]"}else 8&c?f+="."+b:4&c&&(f+=" "+b);else""!==f&&!Cl(b)&&(r+=Dh(y,f),f=""),c=b,y=y||!Cl(c);s++}return""!==f&&(r+=Dh(y,f)),r}const Tr={};function Ig(n){xd(H(),E(),ds()+n,!1)}function xd(n,r,s,c){if(!c)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Fl(r,y,s)}else{const y=n.preOrderHooks;null!==y&&Ss(r,y,0,s)}Yi(s)}const Ah=new Qn("ENVIRONMENT_INITIALIZER"),Fu=new Qn("INJECTOR_DEF_TYPES");function su(...n){return{\u0275providers:bl(0,n)}}function bl(n,...r){const s=[],c=new Set;let f;return gr(r,y=>{const b=y;Ep(b,s,[],c)&&(f||(f=[]),f.push(b))}),void 0!==f&&Dl(f,s),s}function Dl(n,r){for(let s=0;s<n.length;s++){const{providers:f}=n[s];gr(f,y=>{r.push(y)})}}function Ep(n,r,s,c){if(!(n=Te(n)))return!1;let f=null,y=Zt(n);const b=!y&&Jn(n);if(y||b){if(b&&!b.standalone)return!1;f=n}else{const P=n.ngModule;if(y=Zt(P),!y)return!1;f=P}const M=c.has(f);if(b){if(M)return!1;if(c.add(f),b.dependencies){const P="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const K of P)Ep(K,r,s,c)}}else{if(!y)return!1;{if(null!=y.imports&&!M){let K;c.add(f);try{gr(y.imports,se=>{Ep(se,r,s,c)&&(K||(K=[]),K.push(se))})}finally{}void 0!==K&&Dl(K,r)}if(!M){const K=Ms(f)||(()=>new f);r.push({provide:f,useFactory:K,deps:vn},{provide:Fu,useValue:f,multi:!0},{provide:Ah,useValue:()=>Qi(f),multi:!0})}const P=y.providers;null==P||M||gr(P,se=>{r.push(se)})}}return f!==n&&void 0!==n.providers}const Df=_e({provide:String,useValue:_e});function ka(n){return null!==n&&"object"==typeof n&&Df in n}function $o(n){return"function"==typeof n}const wp=new Qn("INJECTOR",-1);class mc{get(r,s=Io){if(s===Io){const c=new Error(`NullInjectorError: No provider for ${ze(r)}!`);throw c.name="NullInjectorError",c}return s}}const xh=new Qn("Set Injector scope."),ha={},Ip={};let Cp;function Mh(){return void 0===Cp&&(Cp=new mc),Cp}class Tl{}class Pd extends Tl{constructor(r,s,c,f){super(),this.parent=s,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ph(r,b=>this.processProvider(b)),this.records.set(wp,Xc(void 0,this)),f.has("environment")&&this.records.set(Tl,Xc(void 0,this));const y=this.records.get(xh);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Fu.multi,vn,Dt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}get(r,s=Io,c=Dt.Default){this.assertNotDestroyed();const f=za(this),y=rr(void 0);try{if(!(c&Dt.SkipSelf)){let M=this.records.get(r);if(void 0===M){const P=function no(n){return"function"==typeof n||"object"==typeof n&&n instanceof Qn}(r)&&Vt(r);M=P&&this.injectableDefInScope(P)?Xc(Tf(r),ha):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(c&Dt.Self?Mh():this.parent).get(r,s=c&Dt.Optional&&s===Io?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[Co]=b[Co]||[]).unshift(ze(r)),f)throw b;return function Ne(n,r,s,c){const f=n[Co];throw r[yi]&&f.unshift(r[yi]),n.message=function ot(n,r,s,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=ze(r);if(Array.isArray(r))f=r.map(ze).join(" -> ");else if("object"==typeof r){let y=[];for(let b in r)if(r.hasOwnProperty(b)){let M=r[b];y.push(b+":"+("string"==typeof M?JSON.stringify(M):ze(M)))}f=`{${y.join(", ")}}`}return`${s}${c?"("+c+")":""}[${f}]: ${n.replace(Ga,"\n  ")}`}("\n"+n.message,f,s,c),n.ngTokenPath=f,n[Co]=null,n}(b,r,"R3InjectorError",this.source)}throw b}finally{rr(y),za(f)}}resolveInjectorInitializers(){const r=za(this),s=rr(void 0);try{const c=this.get(Ah.multi,vn,Dt.Self);for(const f of c)f()}finally{za(r),rr(s)}}toString(){const r=[],s=this.records;for(const c of s.keys())r.push(ze(c));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processProvider(r){let s=$o(r=Te(r))?r:Te(r&&r.provide);const c=function Rh(n){return ka(n)?Xc(void 0,n.useValue):Xc(Sf(n),ha)}(r);if($o(r)||!0!==r.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=Xc(void 0,ha,!0),f.factory=()=>N(f.multi),this.records.set(s,f)),s=r,f.multi.push(r)}this.records.set(s,c)}hydrate(r,s){return s.value===ha&&(s.value=Ip,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Oh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Te(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Tf(n){const r=Vt(n),s=null!==r?r.factory:Ms(n);if(null!==s)return s;if(n instanceof Qn)throw new $e(204,!1);if(n instanceof Function)return function bp(n){const r=n.length;if(r>0)throw It(r,"?"),new $e(204,!1);const s=function hn(n){const r=n&&(n[In]||n[Qt]);if(r){const s=function Dn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new $e(204,!1)}function Sf(n,r,s){let c;if($o(n)){const f=Te(n);return Ms(f)||Tf(f)}if(ka(n))c=()=>Te(n.useValue);else if(function Dg(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...N(n.deps||[]));else if(function Qc(n){return!(!n||!n.useExisting)}(n))c=()=>Qi(Te(n.useExisting));else{const f=Te(n&&(n.useClass||n.provide));if(!function Rm(n){return!!n.deps}(n))return Ms(f)||Tf(f);c=()=>new f(...N(n.deps))}return c}function Xc(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Om(n){return!!n.\u0275providers}function Ph(n,r){for(const s of n)Array.isArray(s)?Ph(s,r):Om(s)?Ph(s.\u0275providers,r):r(s)}function Sg(n,r=null,s=null,c){const f=Ag(n,r,s,c);return f.resolveInjectorInitializers(),f}function Ag(n,r=null,s=null,c,f=new Set){const y=[s||vn,su(n)];return c=c||("object"==typeof n?void 0:ze(n)),new Pd(y,r||Mh(),c||null,f)}let ql=(()=>{class n{static create(s,c){if(Array.isArray(s))return Sg({name:""},c,s,"");{const f=s.name??"";return Sg({name:f},s.parent,s.providers,f)}}}return n.THROW_IF_NOT_FOUND=Io,n.NULL=new mc,n.\u0275prov=st({token:n,providedIn:"any",factory:()=>Qi(wp)}),n.__NG_ELEMENT_ID__=-1,n})();function Fa(n,r=Dt.Default){const s=E();return null===s?Qi(n,r):wa(ie(),s,Te(n),r)}function Vd(){throw new Error("invalid")}function jd(n,r){return n<<17|r<<2}function Sl(n){return n>>17&32767}function Ff(n){return 2|n}function So(n){return(131068&n)>>2}function wc(n,r){return-131069&n|r<<2}function Ic(n){return 1|n}function Um(n,r){const s=n.contentQueries;if(null!==s)for(let c=0;c<s.length;c+=2){const f=s[c],y=s[c+1];if(-1!==y){const b=n.data[y];ra(f),b.contentQueries(2,r[y],y)}}}function zd(n,r,s,c,f,y,b,M,P,K,se){const xe=r.blueprint.slice();return xe[0]=f,xe[2]=76|c,(null!==se||n&&1024&n[2])&&(xe[2]|=1024),lt(xe),xe[3]=xe[15]=n,xe[8]=s,xe[10]=b||n&&n[10],xe[11]=M||n&&n[11],xe[12]=P||n&&n[12]||null,xe[9]=K||n&&n[9]||null,xe[6]=y,xe[20]=function lc(){return Oa++}(),xe[21]=se,xe[16]=2==r.type?n[16]:xe,xe}function Bu(n,r,s,c,f){let y=n.data[r];if(null===y)y=function Up(n,r,s,c,f){const y=xt(),b=fr(),P=n.data[r]=function Hf(n,r,s,c,f,y){return{type:s,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?y:y&&y.parent,s,r,c,f);return null===n.firstChild&&(n.firstChild=P),null!==y&&(b?null==y.child&&null!==P.parent&&(y.child=P):null===y.next&&(y.next=P)),P}(n,r,s,c,f),function ui(){return Ct.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=s,y.value=c,y.attrs=f;const b=function cn(){const n=Ct.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===b?-1:b.injectorIndex}return Mn(y,!0),y}function Wd(n,r,s,c){if(0===s)return-1;const f=r.length;for(let y=0;y<s;y++)r.push(c),n.blueprint.push(c),n.data.push(null);return f}function qd(n,r,s){Wo(r);try{const c=n.viewQuery;null!==c&&$t(1,c,s);const f=n.template;null!==f&&Ao(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Um(n,r),n.staticViewQueries&&$t(2,n.viewQuery,s);const y=n.components;null!==y&&function $p(n,r){for(let s=0;s<r.length;s++)l(n,r[s])}(r,y)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,Zl()}}function rd(n,r,s,c){const f=r[2];if(128!=(128&f)){Wo(r);try{lt(r),function ce(n){return Ct.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Ao(n,r,s,2,c);const b=3==(3&f);if(b){const K=n.preOrderCheckHooks;null!==K&&Fl(r,K,null)}else{const K=n.preOrderHooks;null!==K&&Ss(r,K,0,null),ks(r,0)}if(function Hy(n){for(let r=hc(n);null!==r;r=fc(r)){if(!r[2])continue;const s=r[9];for(let c=0;c<s.length;c++){const f=s[c],y=f[3];0==(512&f[2])&&Ft(y,1),f[2]|=512}}}(r),function Qg(n){for(let r=hc(n);null!==r;r=fc(r))for(let s=10;s<r.length;s++){const c=r[s],f=c[1];re(c)&&rd(f,c,f.template,c[8])}}(r),null!==n.contentQueries&&Um(n,r),b){const K=n.contentCheckHooks;null!==K&&Fl(r,K)}else{const K=n.contentHooks;null!==K&&Ss(r,K,1),ks(r,1)}!function Uy(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const f=s[c];if(f<0)Yi(~f);else{const y=f,b=s[++c],M=s[++c];Ps(b,y),M(2,r[y])}}}finally{Yi(-1)}}(n,r);const M=n.components;null!==M&&function Vp(n,r){for(let s=0;s<r.length;s++)u(n,r[s])}(r,M);const P=n.viewQuery;if(null!==P&&$t(2,P,c),b){const K=n.viewCheckHooks;null!==K&&Fl(r,K)}else{const K=n.viewHooks;null!==K&&Ss(r,K,2),ks(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Ft(r[3],-1))}finally{Zl()}}}function bc(n,r,s,c){const f=r[10],b=$(r);try{!b&&f.begin&&f.begin(),b&&qd(n,r,c),rd(n,r,s,c)}finally{!b&&f.end&&f.end()}}function Ao(n,r,s,c,f){const y=ds(),b=2&c;try{Yi(-1),b&&r.length>22&&xd(n,r,22,!1),s(c,f)}finally{Yi(y)}}function Ba(n,r,s){if(we(r)){const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const b=n.data[y];b.contentQueries&&b.contentQueries(1,s[y],y)}}}function Dc(n,r,s){!vi()||(function zm(n,r,s,c){const f=s.directiveStart,y=s.directiveEnd;n.firstCreatePass||_o(s,r),Ji(c,r);const b=s.initialInputs;for(let M=f;M<y;M++){const P=n.data[M],K=Lt(P);K&&Zg(r,s,P);const se=Ia(r,n,M,s);Ji(se,r),null!==b&&Xp(0,M-f,se,P,0,b),K&&(Ci(s.index,r)[8]=se)}}(n,r,s,Ii(s,r)),128==(128&s.flags)&&function qp(n,r,s){const c=s.directiveStart,f=s.directiveEnd,y=s.index,b=function fo(){return Ct.lFrame.currentDirectiveIndex}();try{Yi(y);for(let M=c;M<f;M++){const P=n.data[M],K=r[M];Oo(M),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&Yp(P,K)}}finally{Yi(-1),Oo(b)}}(n,r,s))}function Uf(n,r,s=Ii){const c=r.localNames;if(null!==c){let f=r.index+1;for(let y=0;y<c.length;y+=2){const b=c[y+1],M=-1===b?s(r,n):n[b];n[f++]=M}}}function jp(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=jf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function jf(n,r,s,c,f,y,b,M,P,K){const se=22+c,xe=se+f,ft=function jm(n,r){const s=[];for(let c=0;c<r;c++)s.push(c<n?null:Tr);return s}(se,xe),At="function"==typeof K?K():K;return ft[1]={type:n,blueprint:ft,template:s,queries:null,viewQuery:M,declTNode:r,data:ft.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:P,consts:At,incompleteFirstPass:!1}}function Hp(n,r,s,c){const f=Br(r);null===s?f.push(c):(f.push(s),n.firstCreatePass&&Kr(n).push(c,f.length-1))}function Uh(n,r,s){for(let c in n)if(n.hasOwnProperty(c)){const f=n[c];(s=null===s?{}:s).hasOwnProperty(c)?s[c].push(r,f):s[c]=[r,f]}return s}function fa(n,r,s,c,f,y,b,M){const P=Ii(r,s);let se,K=r.inputs;!M&&null!=K&&(se=K[c])?(Ds(n,s,se,c,f),Pe(r)&&function Yg(n,r){const s=Ci(r,n);16&s[2]||(s[2]|=32)}(s,r.index)):3&r.type&&(c=function jh(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),f=null!=b?b(f,r.value||"",c):f,y.setProperty(P,c,f))}function Hh(n,r,s,c){let f=!1;if(vi()){const y=function Kp(n,r,s){const c=n.directiveRegistry;let f=null;if(c)for(let y=0;y<c.length;y++){const b=c[y];wg(s,b.selectors,!1)&&(f||(f=[]),Ea(_o(s,r),n,b.type),Lt(b)?(Kg(n,s),f.unshift(b)):f.push(b))}return f}(n,r,s),b=null===c?null:{"":-1};if(null!==y){f=!0,qf(s,n.data.length,y.length);for(let se=0;se<y.length;se++){const xe=y[se];xe.providersResolver&&xe.providersResolver(xe)}let M=!1,P=!1,K=Wd(n,r,y.length,null);for(let se=0;se<y.length;se++){const xe=y[se];s.mergedAttrs=oa(s.mergedAttrs,xe.hostAttrs),id(n,s,r,K,xe),Zp(K,xe,b),null!==xe.contentQueries&&(s.flags|=8),(null!==xe.hostBindings||null!==xe.hostAttrs||0!==xe.hostVars)&&(s.flags|=128);const ft=xe.type.prototype;!M&&(ft.ngOnChanges||ft.ngOnInit||ft.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),M=!0),!P&&(ft.ngOnChanges||ft.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),P=!0),K++}!function Gf(n,r){const c=r.directiveEnd,f=n.data,y=r.attrs,b=[];let M=null,P=null;for(let K=r.directiveStart;K<c;K++){const se=f[K],xe=se.inputs,ft=null===y||Sd(r)?null:Vu(xe,y);b.push(ft),M=Uh(xe,K,M),P=Uh(se.outputs,K,P)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=16),M.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=b,r.inputs=M,r.outputs=P}(n,s)}b&&function Wf(n,r,s){if(r){const c=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=s[r[f+1]];if(null==y)throw new $e(-301,!1);c.push(r[f],y)}}}(s,c,b)}return s.mergedAttrs=oa(s.mergedAttrs,s.attrs),f}function zp(n,r,s,c,f,y){const b=y.hostBindings;if(b){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const P=~r.index;(function Wp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(M)!=P&&M.push(P),M.push(c,f,b)}}function Yp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Kg(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Zp(n,r,s){if(s){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)s[r.exportAs[c]]=n;Lt(r)&&(s[""]=n)}}function qf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function id(n,r,s,c,f){n.data[c]=f;const y=f.factory||(f.factory=Ms(f.type)),b=new yo(y,Lt(f),Fa);n.blueprint[c]=b,s[c]=b,zp(n,r,0,c,Wd(n,s,f.hostVars,Tr),f)}function Zg(n,r,s){const c=Ii(r,n),f=jp(s),y=n[10],b=_(n,zd(n,f,null,s.onPush?32:16,c,r,y,y.createRenderer(c,s),null,null,null));n[r.index]=b}function Al(n,r,s,c,f,y){const b=Ii(n,r);!function Qp(n,r,s,c,f,y,b){if(null==y)n.removeAttribute(r,f,s);else{const M=null==b?Ce(y):b(y,c||"",f);n.setAttribute(r,f,M,s)}}(r[11],b,y,n.value,s,c,f)}function Xp(n,r,s,c,f,y){const b=y[r];if(null!==b){const M=c.setInput;for(let P=0;P<b.length;){const K=b[P++],se=b[P++],xe=b[P++];null!==M?c.setInput(s,xe,K,se):s[se]=xe}}}function Vu(n,r){let s=null,c=0;for(;c<r.length;){const f=r[c];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[c+1])),c+=2}else c+=2;else c+=4}return s}function qm(n,r,s,c){return new Array(n,!0,!1,r,null,0,c,s,null,null)}function u(n,r){const s=Ci(r,n);if(re(s)){const c=s[1];48&s[2]?rd(c,s,c.template,s[8]):s[5]>0&&a(s)}}function a(n){for(let c=hc(n);null!==c;c=fc(c))for(let f=10;f<c.length;f++){const y=c[f];if(512&y[2]){const b=y[1];rd(b,y,b.template,y[8])}else y[5]>0&&a(y)}const s=n[1].components;if(null!==s)for(let c=0;c<s.length;c++){const f=Ci(s[c],n);re(f)&&f[5]>0&&a(f)}}function l(n,r){const s=Ci(r,n),c=s[1];(function p(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(c,s),qd(c,s,s[8])}function _(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function S(n){for(;n;){n[2]|=32;const r=Pa(n);if(Ot(n)&&!r)return n;n=r}return null}function Se(n){!function X(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],c=Wl(s);if(null!==c){const f=c[1];bc(f,c,f.template,s)}}}(n[8])}function $t(n,r,s){ra(0),r(n,s)}const $n=(()=>Promise.resolve(null))();function Br(n){return n[7]||(n[7]=[])}function Kr(n){return n.cleanup||(n.cleanup=[])}function co(n,r){const s=n[9],c=s?s.get(Lo,null):null;c&&c.handleError(r)}function Ds(n,r,s,c,f){for(let y=0;y<s.length;){const b=s[y++],M=s[y++],P=r[b],K=n.data[b];null!==K.setInput?K.setInput(P,f,c,M):P[M]=f}}function $u(n,r,s){let c=s?n.styles:null,f=s?n.classes:null,y=0;if(null!==r)for(let b=0;b<r.length;b++){const M=r[b];"number"==typeof M?y=M:1==y?f=Le(f,M):2==y&&(c=Le(c,M+": "+r[++b]+";"))}s?n.styles=c:n.stylesWithoutHost=c,s?n.classes=f:n.classesWithoutHost=f}function Wv(){const n=ie();va(E()[1],n)}function Xg(n){let r=function Gy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const c=[n];for(;r;){let f;if(Lt(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new $e(903,!1);f=r.\u0275dir}if(f){if(s){c.push(f);const b=n;b.inputs=Jg(n.inputs),b.declaredInputs=Jg(n.declaredInputs),b.outputs=Jg(n.outputs);const M=f.hostBindings;M&&Qm(n,M);const P=f.viewQuery,K=f.contentQueries;if(P&&Km(n,P),K&&Zm(n,K),ve(n.inputs,f.inputs),ve(n.declaredInputs,f.declaredInputs),ve(n.outputs,f.outputs),Lt(f)&&f.data.animation){const se=n.data;se.animation=(se.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let b=0;b<y.length;b++){const M=y[b];M&&M.ngInherit&&M(n),M===Xg&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Ym(n){let r=0,s=null;for(let c=n.length-1;c>=0;c--){const f=n[c];f.hostVars=r+=f.hostVars,f.hostAttrs=oa(f.hostAttrs,s=oa(s,f.hostAttrs))}}(c)}function Jg(n){return n===Yr?{}:n===vn?[]:n}function Km(n,r){const s=n.viewQuery;n.viewQuery=s?(c,f)=>{r(c,f),s(c,f)}:r}function Zm(n,r){const s=n.contentQueries;n.contentQueries=s?(c,f,y)=>{r(c,f,y),s(c,f,y)}:r}function Qm(n,r){const s=n.hostBindings;n.hostBindings=s?(c,f)=>{r(c,f),s(c,f)}:r}let Kf=null;function Yd(){if(!Kf){const n=en.Symbol;if(n&&n.iterator)Kf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const c=r[s];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Kf=c)}}}return Kf}function Sc(n){return!!ey(n)&&(Array.isArray(n)||!(n instanceof Map)&&Yd()in n)}function ey(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function pa(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function ty(n,r,s,c){const f=E();return pa(f,Bt(),r)&&(H(),Al(_i(),f,n,r,s,c)),ty}function Kd(n,r,s,c){return pa(n,Bt(),s)?r+Ce(s)+c:Tr}function Zy(n,r,s,c,f,y,b,M){const P=E(),K=H(),se=n+22,xe=K.firstCreatePass?function iy(n,r,s,c,f,y,b,M,P){const K=r.consts,se=Bu(r,n,4,b||null,ue(K,M));Hh(r,s,se,ue(K,P)),va(r,se);const xe=se.tViews=jf(2,se,c,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,K);return null!==r.queries&&(r.queries.template(r,se),xe.queries=r.queries.embeddedTView(se)),se}(se,K,P,r,s,c,f,y,b):K.data[se];Mn(xe,!1);const ft=P[11].createComment("");wd(K,P,ft,xe),Ji(ft,P),_(P,P[se]=qm(ft,P,ft,xe)),gt(xe)&&Dc(K,P,xe),null!=b&&Uf(P,xe,M)}function Qy(n,r,s){const c=E();return pa(c,Bt(),r)&&fa(H(),_i(),c,n,r,c[11],s,!1),Qy}function Xy(n,r,s,c,f){const b=f?"class":"style";Ds(n,s,r.inputs[b],b,c)}function ng(n,r,s,c){const f=E(),y=H(),b=22+n,M=f[11],P=f[b]=yf(M,r,function al(){return Ct.lFrame.currentNamespace}()),K=y.firstCreatePass?function Uo(n,r,s,c,f,y,b){const M=r.consts,K=Bu(r,n,2,f,ue(M,y));return Hh(r,s,K,ue(M,b)),null!==K.attrs&&$u(K,K.attrs,!1),null!==K.mergedAttrs&&$u(K,K.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,K),K}(b,y,f,0,r,s,c):y.data[b];Mn(K,!0);const se=K.mergedAttrs;null!==se&&Xo(M,P,se);const xe=K.classes;null!==xe&&Td(M,P,xe);const ft=K.styles;return null!==ft&&Ch(M,P,ft),64!=(64&K.flags)&&wd(y,f,P,K),0===function Jr(){return Ct.lFrame.elementDepthCount}()&&Ji(P,f),function li(){Ct.lFrame.elementDepthCount++}(),gt(K)&&(Dc(y,f,K),Ba(y,K,f)),null!==c&&Uf(f,K),ng}function nm(){let n=ie();fr()?Mr():(n=n.parent,Mn(n,!1));const r=n;!function br(){Ct.lFrame.elementDepthCount--}();const s=H();return s.firstCreatePass&&(va(s,n),we(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ll(n){return 0!=(16&n.flags)}(r)&&Xy(s,r,E(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function pu(n){return 0!=(32&n.flags)}(r)&&Xy(s,r,E(),r.stylesWithoutHost,!1),nm}function sy(n,r,s,c){return ng(n,r,s,c),nm(),sy}function rm(n,r,s){const c=E(),f=H(),y=n+22,b=f.firstCreatePass?function Jy(n,r,s,c,f){const y=r.consts,b=ue(y,c),M=Bu(r,n,8,"ng-container",b);return null!==b&&$u(M,b,!0),Hh(r,s,M,ue(y,f)),null!==r.queries&&r.queries.elementStart(r,M),M}(y,f,c,r,s):f.data[y];Mn(b,!0);const M=c[y]=c[11].createComment("");return wd(f,c,M,b),Ji(M,c),gt(b)&&(Dc(f,c,b),Ba(f,b,c)),null!=s&&Uf(c,b),rm}function im(){let n=ie();const r=H();return fr()?Mr():(n=n.parent,Mn(n,!1)),r.firstCreatePass&&(va(r,n),we(n)&&r.queries.elementEnd(n)),im}function oy(n,r,s){return rm(n,r,s),im(),oy}function ev(n){return!!n&&"function"==typeof n.then}function tv(n){return!!n&&"function"==typeof n.subscribe}const nv=tv;function sm(n,r,s,c){const f=E(),y=H(),b=ie();return function Hu(n,r,s,c,f,y,b,M){const P=gt(c),se=n.firstCreatePass&&Kr(n),xe=r[8],ft=Br(r);let At=!0;if(3&c.type||M){const Bn=Ii(c,r),Kn=M?M(Bn):Bn,Or=ft.length,an=M?Ni=>M(oi(Ni[c.index])):c.index;let _r=null;if(!M&&P&&(_r=function g0(n,r,s,c){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const b=f[y];if(b===s&&f[y+1]===c){const M=r[7],P=f[y+2];return M.length>P?M[P]:null}"string"==typeof b&&(y+=2)}return null}(n,r,f,c.index)),null!==_r)(_r.__ngLastListenerFn__||_r).__ngNextListenerFn__=y,_r.__ngLastListenerFn__=y,At=!1;else{y=rg(c,r,xe,y,!1);const Ni=s.listen(Kn,f,y);ft.push(y,Ni),se&&se.push(f,an,Or,Or+1)}}else y=rg(c,r,xe,y,!1);const Xt=c.outputs;let mn;if(At&&null!==Xt&&(mn=Xt[f])){const Bn=mn.length;if(Bn)for(let Kn=0;Kn<Bn;Kn+=2){const io=r[mn[Kn]][mn[Kn+1]].subscribe(y),pg=ft.length;ft.push(y,io),se&&se.push(f,c.index,pg,-(pg+1))}}}(y,f,f[11],b,n,r,0,c),sm}function Zd(n,r,s,c){try{return!1!==s(c)}catch(f){return co(n,f),!1}}function rg(n,r,s,c,f){return function y(b){if(b===Function)return c;S(2&n.flags?Ci(n.index,r):r);let P=Zd(r,0,c,b),K=y.__ngNextListenerFn__;for(;K;)P=Zd(r,0,K,b)&&P,K=K.__ngNextListenerFn__;return f&&!1===P&&(b.preventDefault(),b.returnValue=!1),P}}function rv(n=1){return function Nl(n){return(Ct.lFrame.contextLView=function Po(n,r){for(;n>0;)r=r[15],n--;return r}(n,Ct.lFrame.contextLView))[8]}(n)}function Xv(n,r){let s=null;const c=function Mm(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const y=r[f];if("*"!==y){if(null===c?wg(n,y,!0):ku(c,y))return f}else s=f}return s}function ay(n){const r=E()[16][6];if(!r.projection){const c=r.projection=It(n?n.length:1,null),f=c.slice();let y=r.child;for(;null!==y;){const b=n?Xv(y,n):0;null!==b&&(f[b]?f[b].projectionNext=y:c[b]=y,f[b]=y),y=y.next}}}function ly(n,r=0,s){const c=E(),f=H(),y=Bu(f,22+n,16,null,s||null);null===y.projection&&(y.projection=r),Mr(),64!=(64&y.flags)&&function bd(n,r,s){Yc(r[11],0,r,s,mg(n,s,r),To(s.parent||r[6],s,r))}(f,c,y)}function Qf(n,r,s){return uy(n,"",r,"",s),Qf}function uy(n,r,s,c,f){const y=E(),b=Kd(y,r,s,c);return b!==Tr&&fa(H(),_i(),y,n,b,y[11],f,!1),uy}function Xd(n,r,s,c,f){const y=n[s+1],b=null===r;let M=c?Sl(y):So(y),P=!1;for(;0!==M&&(!1===P||b);){const se=n[M+1];uv(n[M],r)&&(P=!0,n[M+1]=c?Ic(se):Ff(se)),M=c?Sl(se):So(se)}P&&(n[s+1]=c?Ff(y):Ic(y))}function uv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&zr(n,r)>=0}const jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function am(n){return n.substring(jo.key,jo.keyEnd)}function sg(n,r){const s=jo.textEnd;return s===r?-1:(r=jo.keyEnd=function um(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,jo.key=r,s),ep(n,r,s))}function ep(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function cm(n,r,s){return Gu(n,r,s,!1),cm}function dm(n,r){return Gu(n,r,null,!0),dm}function Mc(n,r){for(let s=function Jv(n){return function Jf(n){jo.key=0,jo.keyEnd=0,jo.value=0,jo.valueEnd=0,jo.textEnd=n.length}(n),sg(n,ep(n,0,jo.textEnd))}(r);s>=0;s=sg(r,s))ys(n,am(r),!0)}function Gu(n,r,s,c){const f=E(),y=H(),b=Pn(2);y.firstUpdatePass&&cv(y,n,b,c),r!==Tr&&pa(f,b,r)&&my(y,y.data[ds()],f,f[11],n,f[b+1]=function vy(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ze($l(n)))),n}(r,s),c,b)}function py(n,r){return r>=n.expandoStartIndex}function cv(n,r,s,c){const f=n.data;if(null===f[s+1]){const y=f[ds()],b=py(n,s);lg(y,c)&&null===r&&!b&&(r=!1),r=function t_(n,r,s,c){const f=function po(n){const r=Ct.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=c?r.residualClasses:r.residualStyles;if(null===f)0===(c?r.classBindings:r.styleBindings)&&(s=ag(s=hm(null,n,r,s,c),r.attrs,c),y=null);else{const b=r.directiveStylingLast;if(-1===b||n[b]!==f)if(s=hm(f,n,r,s,c),null===y){let P=function dv(n,r,s){const c=s?r.classBindings:r.styleBindings;if(0!==So(c))return n[Sl(c)]}(n,r,c);void 0!==P&&Array.isArray(P)&&(P=hm(null,n,r,P[1],c),P=ag(P,r.attrs,c),function n_(n,r,s,c){n[Sl(s?r.classBindings:r.styleBindings)]=c}(n,r,c,P))}else y=function r_(n,r,s){let c;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)c=ag(c,n[y].hostAttrs,s);return ag(c,r.attrs,s)}(n,r,c)}return void 0!==y&&(c?r.residualClasses=y:r.residualStyles=y),s}(f,y,r,c),function dy(n,r,s,c,f,y){let b=y?r.classBindings:r.styleBindings,M=Sl(b),P=So(b);n[c]=s;let se,K=!1;if(Array.isArray(s)){const xe=s;se=xe[1],(null===se||zr(xe,se)>0)&&(K=!0)}else se=s;if(f)if(0!==P){const ft=Sl(n[M+1]);n[c+1]=jd(ft,M),0!==ft&&(n[ft+1]=wc(n[ft+1],c)),n[M+1]=function Bg(n,r){return 131071&n|r<<17}(n[M+1],c)}else n[c+1]=jd(M,0),0!==M&&(n[M+1]=wc(n[M+1],c)),M=c;else n[c+1]=jd(P,0),0===M?M=c:n[P+1]=wc(n[P+1],c),P=c;K&&(n[c+1]=Ff(n[c+1])),Xd(n,se,c,!0),Xd(n,se,c,!1),function lv(n,r,s,c,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&zr(y,r)>=0&&(s[c+1]=Ic(s[c+1]))}(r,se,n,c,y),b=jd(M,P),y?r.classBindings=b:r.styleBindings=b}(f,y,r,s,b,c)}}function hm(n,r,s,c,f){let y=null;const b=s.directiveEnd;let M=s.directiveStylingLast;for(-1===M?M=s.directiveStart:M++;M<b&&(y=r[M],c=ag(c,y.hostAttrs,f),y!==n);)M++;return null!==n&&(s.directiveStylingLast=M),c}function ag(n,r,s){const c=s?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const b=r[y];"number"==typeof b?f=b:f===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ys(n,b,!!s||r[++y]))}return void 0===n?null:n}function my(n,r,s,c,f,y,b,M){if(!(3&r.type))return;const P=n.data,K=P[M+1];fm(function Lf(n){return 1==(1&n)}(K)?yy(P,r,s,f,So(K),b):void 0)||(fm(y)||function Mp(n){return 2==(2&n)}(K)&&(y=yy(P,null,s,f,M,b)),function Ih(n,r,s,c,f){if(r)f?n.addClass(s,c):n.removeClass(s,c);else{let y=-1===c.indexOf("-")?void 0:Vs.DashCase;null==f?n.removeStyle(s,c,y):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),y|=Vs.Important),n.setStyle(s,c,f,y))}}(c,b,zo(ds(),s),f,y))}function yy(n,r,s,c,f,y){const b=null===r;let M;for(;f>0;){const P=n[f],K=Array.isArray(P),se=K?P[1]:P,xe=null===se;let ft=s[f+1];ft===Tr&&(ft=xe?vn:void 0);let At=xe?wu(ft,c):se===c?ft:void 0;if(K&&!fm(At)&&(At=wu(P,c)),fm(At)&&(M=At,b))return M;const Xt=n[f+1];f=b?Sl(Xt):So(Xt)}if(null!==r){let P=y?r.residualClasses:r.residualStyles;null!=P&&(M=wu(P,c))}return M}function fm(n){return void 0!==n}function lg(n,r){return 0!=(n.flags&(r?16:32))}function fv(n,r=""){const s=E(),c=H(),f=n+22,y=c.firstCreatePass?Bu(c,f,1,r,null):c.data[f],b=s[f]=function nl(n,r){return n.createText(r)}(s[11],r);wd(c,s,b,y),Mn(y,!1)}function pm(n){return Wu("",n,""),pm}function Wu(n,r,s){const c=E(),f=Kd(c,n,r,s);return f!==Tr&&function as(n,r,s){const c=zo(r,n);!function fp(n,r,s){n.setValue(r,s)}(n[11],c,s)}(c,ds(),f),Wu}function Ey(n,r,s){!function zu(n,r,s,c){const f=H(),y=Pn(2);f.firstUpdatePass&&cv(f,null,y,c);const b=E();if(s!==Tr&&pa(b,y,s)){const M=f.data[ds()];if(lg(M,c)&&!py(f,y)){let P=c?M.classesWithoutHost:M.stylesWithoutHost;null!==P&&(s=Le(P,s||"")),Xy(f,M,b,s,c)}else!function hv(n,r,s,c,f,y,b,M){f===Tr&&(f=vn);let P=0,K=0,se=0<f.length?f[0]:null,xe=0<y.length?y[0]:null;for(;null!==se||null!==xe;){const ft=P<f.length?f[P+1]:void 0,At=K<y.length?y[K+1]:void 0;let mn,Xt=null;se===xe?(P+=2,K+=2,ft!==At&&(Xt=xe,mn=At)):null===xe||null!==se&&se<xe?(P+=2,Xt=se):(K+=2,Xt=xe,mn=At),null!==Xt&&my(n,r,s,c,Xt,mn,b,M),se=P<f.length?f[P]:null,xe=K<y.length?y[K]:null}}(f,M,b,b[11],b[y+1],b[y+1]=function i_(n,r,s){if(null==s||""===s)return vn;const c=[],f=$l(s);if(Array.isArray(f))for(let y=0;y<f.length;y++)n(c,f[y],!0);else if("object"==typeof f)for(const y in f)f.hasOwnProperty(y)&&n(c,y,f[y]);else"string"==typeof f&&r(c,f);return c}(n,r,s),c,y)}}(ys,Mc,Kd(E(),n,r,s),!0)}const th=void 0;var Xh=["en",[["a","p"],["AM","PM"],th],[["AM","PM"],th,th],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],th,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],th,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",th,"{1} 'at' {0}",th],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tv(n){const s=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===c?1:5}];let ma={};function ym(n){const r=function Dy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=ip(r);if(s)return s;const c=r.split("-")[0];if(s=ip(c),s)return s;if("en"===c)return Xh;throw new $e(701,!1)}function rp(n){return ym(n)[wr.PluralCase]}function ip(n){return n in ma||(ma[n]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[n]),ma[n]}var wr=(()=>((wr=wr||{})[wr.LocaleId=0]="LocaleId",wr[wr.DayPeriodsFormat=1]="DayPeriodsFormat",wr[wr.DayPeriodsStandalone=2]="DayPeriodsStandalone",wr[wr.DaysFormat=3]="DaysFormat",wr[wr.DaysStandalone=4]="DaysStandalone",wr[wr.MonthsFormat=5]="MonthsFormat",wr[wr.MonthsStandalone=6]="MonthsStandalone",wr[wr.Eras=7]="Eras",wr[wr.FirstDayOfWeek=8]="FirstDayOfWeek",wr[wr.WeekendRange=9]="WeekendRange",wr[wr.DateFormat=10]="DateFormat",wr[wr.TimeFormat=11]="TimeFormat",wr[wr.DateTimeFormat=12]="DateTimeFormat",wr[wr.NumberSymbols=13]="NumberSymbols",wr[wr.NumberFormats=14]="NumberFormats",wr[wr.CurrencyCode=15]="CurrencyCode",wr[wr.CurrencySymbol=16]="CurrencySymbol",wr[wr.CurrencyName=17]="CurrencyName",wr[wr.Currencies=18]="Currencies",wr[wr.Directionality=19]="Directionality",wr[wr.PluralCase=20]="PluralCase",wr[wr.ExtraData=21]="ExtraData",wr))();const nh="en-US";let Sv=nh;function C_(n,r,s,c,f){if(n=Te(n),Array.isArray(n))for(let y=0;y<n.length;y++)C_(n[y],r,s,c,f);else{const y=H(),b=E();let M=$o(n)?n:Te(n.provide),P=Sf(n);const K=ie(),se=1048575&K.providerIndexes,xe=K.directiveStart,ft=K.providerIndexes>>20;if($o(n)||!n.multi){const At=new yo(P,f,Fa),Xt=D_(M,r,f?se:se+ft,xe);-1===Xt?(Ea(_o(K,b),y,M),b_(y,n,r.length),r.push(M),K.directiveStart++,K.directiveEnd++,f&&(K.providerIndexes+=1048576),s.push(At),b.push(At)):(s[Xt]=At,b[Xt]=At)}else{const At=D_(M,r,se+ft,xe),Xt=D_(M,r,se,se+ft),mn=At>=0&&s[At],Bn=Xt>=0&&s[Xt];if(f&&!Bn||!f&&!mn){Ea(_o(K,b),y,M);const Kn=function Rw(n,r,s,c,f){const y=new yo(n,s,Fa);return y.multi=[],y.index=r,y.componentProviders=0,A0(y,f,c&&!s),y}(f?Mw:xw,s.length,f,c,P);!f&&Bn&&(s[Xt].providerFactory=Kn),b_(y,n,r.length,0),r.push(M),K.directiveStart++,K.directiveEnd++,f&&(K.providerIndexes+=1048576),s.push(Kn),b.push(Kn)}else b_(y,n,At>-1?At:Xt,A0(s[f?Xt:At],P,!f&&c));!f&&c&&Bn&&s[Xt].componentProviders++}}}function b_(n,r,s,c){const f=$o(r),y=function Tg(n){return!!n.useClass}(r);if(f||y){const P=(y?Te(r.useClass):r).prototype.ngOnDestroy;if(P){const K=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const se=K.indexOf(s);-1===se?K.push(s,[c,P]):K[se+1].push(c,P)}else K.push(s,P)}}}function A0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function D_(n,r,s,c){for(let f=s;f<c;f++)if(r[f]===n)return f;return-1}function xw(n,r,s,c){return T_(this.multi,[])}function Mw(n,r,s,c){const f=this.multi;let y;if(this.providerFactory){const b=this.providerFactory.componentProviders,M=Ia(s,s[1],this.providerFactory.index,c);y=M.slice(0,b),T_(f,y);for(let P=b;P<M.length;P++)y.push(M[P])}else y=[],T_(f,y);return y}function T_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function x0(n,r=[]){return s=>{s.providersResolver=(c,f)=>function Aw(n,r,s){const c=H();if(c.firstCreatePass){const f=Lt(n);C_(s,c.data,c.blueprint,f,!0),C_(r,c.data,c.blueprint,f,!1)}}(c,f?f(n):n,r)}}class Pw{resolveComponentFactory(r){throw function Ow(n){const r=Error(`No component factory found for ${ze(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let My=(()=>{class n{}return n.NULL=new Pw,n})();class hg{}class R0{}class O0{}function Nw(){return Cm(ie(),E())}function Cm(n,r){return new Ry(Ii(n,r))}let Ry=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Nw,n})();function Fw(n){return n instanceof Ry?n.nativeElement:n}class P0{}let Lw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Bw(){const n=E(),s=Ci(ie().index,n);return(nt(s)?s:n)[11]}(),n})(),Vw=(()=>{class n{}return n.\u0275prov=st({token:n,providedIn:"root",factory:()=>null}),n})();class k0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const N0=new k0("14.0.6"),S_={};function Nv(n,r,s,c,f=!1){for(;null!==s;){const y=r[s.index];if(null!==y&&c.push(oi(y)),dt(y))for(let M=10;M<y.length;M++){const P=y[M],K=P[1].firstChild;null!==K&&Nv(P[1],P,K,c)}const b=s.type;if(8&b)Nv(n,r,s.child,c);else if(32&b){const M=Wc(s,r);let P;for(;P=M();)c.push(P)}else if(16&b){const M=Id(r,s);if(Array.isArray(M))c.push(...M);else{const P=Pa(r[16]);Nv(P[1],P,M,c,!0)}}s=f?s.projectionNext:s.next}return c}class Oy{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Nv(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(dt(r)){const s=r[8],c=s?s.indexOf(this):-1;c>-1&&(vf(r,c),ci(s,c))}this._attachedToViewContainer=!1}xu(this._lView[1],this._lView)}onDestroy(r){Hp(this._lView[1],this._lView,null,r)}markForCheck(){S(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function ae(n,r,s){const c=r[10];c.begin&&c.begin();try{rd(n,r,n.template,s)}catch(f){throw co(r,f),f}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sm(n,r){Il(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new $e(902,!1);this._appRef=r}}class $w extends Oy{constructor(r){super(r),this._view=r}detectChanges(){Se(this._view)}checkNoChanges(){}get context(){return null}}class A_ extends My{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Jn(r);return new x_(s,this.ngModule)}}function F0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class jw{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,c){const f=this.injector.get(r,S_,c);return f!==S_||s===S_?f:this.parentInjector.get(r,s,c)}}class x_ extends O0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Kc(n){return n.map(Cf).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return F0(this.componentDef.inputs)}get outputs(){return F0(this.componentDef.outputs)}create(r,s,c,f){let y=(f=f||this.ngModule)instanceof Tl?f:f?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const b=y?new jw(r,y):r,M=b.get(P0,null);if(null===M)throw new $e(407,!1);const P=b.get(Vw,null),K=M.createRenderer(null,this.componentDef),se=this.componentDef.selectors[0][0]||"div",xe=c?function Hm(n,r,s){return n.selectRootElement(r,s===Yn.ShadowDom)}(K,c,this.componentDef.encapsulation):yf(M.createRenderer(null,this.componentDef),se,function Uw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(se)),ft=this.componentDef.onPush?288:272,At=function Jp(n,r){return{components:[],scheduler:n||v,clean:$n,playerHandler:r||null,flags:0}}(),Xt=jf(0,null,null,1,0,null,null,null,null,null),mn=zd(null,Xt,At,ft,null,null,M,K,P,b,null);let Bn,Kn;Wo(mn);try{const Or=function Yf(n,r,s,c,f,y){const b=s[1];s[22]=n;const P=Bu(b,22,2,"#host",null),K=P.mergedAttrs=r.hostAttrs;null!==K&&($u(P,K,!0),null!==n&&(Xo(f,n,K),null!==P.classes&&Td(f,n,P.classes),null!==P.styles&&Ch(f,n,P.styles)));const se=c.createRenderer(n,r),xe=zd(s,jp(r),null,r.onPush?32:16,s[22],P,c,se,y||null,null,null);return b.firstCreatePass&&(Ea(_o(P,s),b,r.type),Kg(b,P),qf(P,s.length,1)),_(s,xe),s[22]=xe}(xe,this.componentDef,mn,M,K);if(xe)if(c)Xo(K,xe,["ng-version",N0.full]);else{const{attrs:an,classes:_r}=function Th(n){const r=[],s=[];let c=1,f=2;for(;c<n.length;){let y=n[c];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++c]):8===f&&s.push(y);else{if(!Cl(f))break;f=y}c++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);an&&Xo(K,xe,an),_r&&_r.length>0&&Td(K,xe,_r.join(" "))}if(Kn=Mi(Xt,22),void 0!==s){const an=Kn.projection=[];for(let _r=0;_r<this.ngContentSelectors.length;_r++){const Ni=s[_r];an.push(null!=Ni?Array.from(Ni):null)}}Bn=function Tc(n,r,s,c,f){const y=s[1],b=function zf(n,r,s){const c=ie();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),id(n,c,r,Wd(n,r,1,null),s));const f=Ia(r,n,c.directiveStart,c);Ji(f,r);const y=Ii(c,r);return y&&Ji(y,r),f}(y,s,r);if(c.components.push(b),n[8]=b,null!==f)for(const P of f)P(b,r);if(r.contentQueries){const P=ie();r.contentQueries(1,b,P.directiveStart)}const M=ie();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Yi(M.index),zp(s[1],M,0,M.directiveStart,M.directiveEnd,r),Yp(r,b)),b}(Or,this.componentDef,mn,At,[Wv]),qd(Xt,mn,null)}finally{Zl()}return new Gw(this.componentType,Bn,Cm(Kn,mn),mn,Kn)}}class Gw extends class kw{}{constructor(r,s,c,f,y){super(),this.location=c,this._rootLView=f,this._tNode=y,this.instance=s,this.hostView=this.changeDetectorRef=new $w(f),this.componentType=r}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function zw(n,r){return new L0(n,r??null)}class L0 extends hg{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new A_(this);const c=or(r);this._bootstrapComponents=Pt(c.bootstrap),this._r3Injector=Ag(r,s,[{provide:hg,useValue:this},{provide:My,useValue:this.componentFactoryResolver}],ze(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(r)}get(r,s=ql.THROW_IF_NOT_FOUND,c=Dt.Default){return r===ql||r===hg||r===wp?this:this._r3Injector.get(r,s,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class M_ extends R0{constructor(r){super(),this.moduleType=r}create(r){return new L0(this.moduleType,r)}}class Ww extends hg{constructor(r,s,c){super(),this.componentFactoryResolver=new A_(this),this.instance=null;const f=new Pd([...r,{provide:hg,useValue:this},{provide:My,useValue:this.componentFactoryResolver}],s||Mh(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function R_(n,r=null,s=null){return new Ww(n,r,s).injector}let qw=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const c=bl(0,s.type),f=c.length>0?R_([c],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,f)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=st({token:n,providedIn:"environment",factory:()=>new n(Qi(Tl))}),n})();function B0(n){n.getStandaloneInjector=r=>r.get(qw).getOrCreateStandaloneInjector(n)}function z0(n,r,s){const c=function V(){const n=Ct.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}()+n,f=E();return f[c]===Tr?function Uu(n,r,s){return n[r]=s}(f,c,s?r.call(s):r()):function eg(n,r){return n[r]}(f,c)}function P_(n){return r=>{setTimeout(n,void 0,r)}}const rh=class vI extends d.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,c){let f=r,y=s||(()=>null),b=c;if(r&&"object"==typeof r){const P=r;f=P.next?.bind(P),y=P.error?.bind(P),b=P.complete?.bind(P)}this.__isAsync&&(y=P_(y),f&&(f=P_(f)),b&&(b=P_(b)));const M=super.subscribe({next:f,error:y,complete:b});return r instanceof O.w0&&r.add(M),M}};function _I(){return this._results[Yd()]()}class k_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Yd(),c=k_.prototype;c[s]||(c[s]=_I)}get changes(){return this._changes||(this._changes=new rh)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const c=this;c.dirty=!1;const f=ln(r);(this._changesDetected=!function Ht(n,r,s){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let f=n[c],y=r[c];if(s&&(f=s(f),y=s(y)),y!==f)return!1}return!0}(c._results,f,s))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ny=(()=>{class n{}return n.__NG_ELEMENT_ID__=II,n})();const EI=Ny,wI=class extends EI{constructor(r,s,c){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=c}createEmbeddedView(r,s){const c=this._declarationTContainer.tViews,f=zd(this._declarationLView,c,r,16,null,c.declTNode,null,null,null,null,s||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(c)),qd(c,f,r),new Oy(f)}};function II(){return Fv(ie(),E())}function Fv(n,r){return 4&n.type?new wI(r,n,Cm(n,r)):null}let Lv=(()=>{class n{}return n.__NG_ELEMENT_ID__=CI,n})();function CI(){return J0(ie(),E())}const bI=Lv,Q0=class extends bI{constructor(r,s,c){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=c}get element(){return Cm(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){const r=Eo(this._hostTNode,this._hostLView);if(Ua(r)){const s=ea(r,this._hostLView),c=Jo(r);return new Di(s[1].data[c+8],s)}return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=X0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,c){let f,y;"number"==typeof c?f=c:null!=c&&(f=c.index,y=c.injector);const b=r.createEmbeddedView(s||{},y);return this.insert(b,f),b}createComponent(r,s,c,f,y){const b=r&&!function Oe(n){return"function"==typeof n}(r);let M;if(b)M=s;else{const xe=s||{};M=xe.index,c=xe.injector,f=xe.projectableNodes,y=xe.environmentInjector||xe.ngModuleRef}const P=b?r:new x_(Jn(r)),K=c||this.parentInjector;if(!y&&null==P.ngModule){const ft=(b?K:this.parentInjector).get(Tl,null);ft&&(y=ft)}const se=P.create(K,f,void 0,y);return this.insert(se.hostView,M),se}insert(r,s){const c=r._lView,f=c[1];if(function U(n){return dt(n[3])}(c)){const se=this.indexOf(r);if(-1!==se)this.detach(se);else{const xe=c[3],ft=new Q0(xe,xe[6],xe[3]);ft.detach(ft.indexOf(r))}}const y=this._adjustIndex(s),b=this._lContainer;!function gg(n,r,s,c){const f=10+c,y=s.length;c>0&&(s[f-1][4]=r),c<y-10?(r[4]=s[f],xn(s,10+c,r)):(s.push(r),r[4]=null),r[3]=s;const b=r[17];null!==b&&s!==b&&function pc(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(b,r);const M=r[19];null!==M&&M.insertView(n),r[2]|=64}(f,c,b,y);const M=Cd(y,b),P=c[11],K=Ef(P,b[7]);return null!==K&&function gp(n,r,s,c,f,y){c[0]=f,c[6]=r,Il(n,c,s,1,f,y)}(f,b[6],P,c,K,M),r.attachToViewContainerRef(),xn(N_(b),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=X0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),c=vf(this._lContainer,s);c&&(ci(N_(this._lContainer),s),xu(c[1],c))}detach(r){const s=this._adjustIndex(r,-1),c=vf(this._lContainer,s);return c&&null!=ci(N_(this._lContainer),s)?new Oy(c):null}_adjustIndex(r,s=0){return r??this.length+s}};function X0(n){return n[8]}function N_(n){return n[8]||(n[8]=[])}function J0(n,r){let s;const c=r[n.index];if(dt(c))s=c;else{let f;if(8&n.type)f=oi(c);else{const y=r[11];f=y.createComment("");const b=Ii(n,r);gc(y,Ef(y,b),f,function yp(n,r){return n.nextSibling(r)}(y,b),!1)}r[n.index]=s=qm(c,r,f,n),_(r,s)}return new Q0(s,n,r)}class F_{constructor(r){this.queryList=r,this.matches=null}clone(){return new F_(this.queryList)}setDirty(){this.queryList.setDirty()}}class L_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const c=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let y=0;y<c;y++){const b=s.getByIndex(y);f.push(this.queries[b.indexInDeclarationView].clone())}return new L_(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==lE(r,s).matches&&this.queries[s].setDirty()}}class eE{constructor(r,s,c=null){this.predicate=r,this.flags=s,this.read=c}}class B_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let c=0;c<this.length;c++){const f=null!==s?s.length:0,y=this.getByIndex(c).embeddedTView(r,f);y&&(y.indexInDeclarationView=c,null!==s?s.push(y):s=[y])}return null!==s?new B_(s):null}template(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class V_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new V_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const y=c[f];this.matchTNodeWithReadOption(r,s,SI(s,y)),this.matchTNodeWithReadOption(r,s,Hn(s,r,y,!1,!1))}else c===Ny?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Hn(s,r,c,!1,!1))}matchTNodeWithReadOption(r,s,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Ry||f===Lv||f===Ny&&4&s.type)this.addMatch(s.index,-2);else{const y=Hn(s,r,f,!1,!1);null!==y&&this.addMatch(s.index,y)}else this.addMatch(s.index,c)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function SI(n,r){const s=n.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===r)return s[c+1];return null}function xI(n,r,s,c){return-1===s?function AI(n,r){return 11&n.type?Cm(n,r):4&n.type?Fv(n,r):null}(r,n):-2===s?function MI(n,r,s){return s===Ry?Cm(r,n):s===Ny?Fv(r,n):s===Lv?J0(r,n):void 0}(n,r,c):Ia(n,n[1],s,r)}function tE(n,r,s,c){const f=r[19].queries[c];if(null===f.matches){const y=n.data,b=s.matches,M=[];for(let P=0;P<b.length;P+=2){const K=b[P];M.push(K<0?null:xI(r,y[K],b[P+1],s.metadata.read))}f.matches=M}return f.matches}function $_(n,r,s,c){const f=n.queries.getByIndex(s),y=f.matches;if(null!==y){const b=tE(n,r,f,s);for(let M=0;M<y.length;M+=2){const P=y[M];if(P>0)c.push(b[M/2]);else{const K=y[M+1],se=r[-P];for(let xe=10;xe<se.length;xe++){const ft=se[xe];ft[17]===ft[3]&&$_(ft[1],ft,K,c)}if(null!==se[9]){const xe=se[9];for(let ft=0;ft<xe.length;ft++){const At=xe[ft];$_(At[1],At,K,c)}}}}}return c}function nE(n){const r=E(),s=H(),c=go();ra(c+1);const f=lE(s,c);if(n.dirty&&$(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?$_(s,r,c,[]):tE(s,r,f,c);n.reset(y,Fw),n.notifyOnChanges()}return!0}return!1}function rE(n,r,s){const c=H();c.firstCreatePass&&(aE(c,new eE(n,r,s),-1),2==(2&r)&&(c.staticViewQueries=!0)),oE(c,E(),r)}function iE(n,r,s,c){const f=H();if(f.firstCreatePass){const y=ie();aE(f,new eE(r,s,c),y.index),function OI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}oE(f,E(),s)}function sE(){return function RI(n,r){return n[19].queries[r].queryList}(E(),go())}function oE(n,r,s){const c=new k_(4==(4&s));Hp(n,r,c,c.destroy),null===r[19]&&(r[19]=new L_),r[19].queries.push(new F_(c))}function aE(n,r,s){null===n.queries&&(n.queries=new B_),n.queries.track(new V_(r,s))}function lE(n,r){return n.queries.getByIndex(r)}function Dm(n){const r=Jn(n)||Ar(n)||Ur(n);return null!==r&&r.standalone}function Vv(...n){}const SE=new Qn("Application Initializer");let $v=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Vv,this.reject=Vv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(ev(y))s.push(y);else if(nv(y)){const b=new Promise((M,P)=>{y.subscribe({complete:M,error:P})});s.push(b)}}Promise.all(s).then(()=>{c()}).catch(f=>{this.reject(f)}),0===s.length&&c(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Qi(SE,8))},n.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AE=new Qn("AppId",{providedIn:"root",factory:function xE(){return`${z_()}${z_()}${z_()}`}});function z_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ME=new Qn("Platform Initializer"),JI=new Qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),RE=new Qn("appBootstrapListener");let eC=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Uv=new Qn("LocaleId",{providedIn:"root",factory:()=>Wa(Uv,Dt.Optional|Dt.SkipSelf)||function tC(){return typeof $localize<"u"&&$localize.locale||nh}()}),nC=new Qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class rC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let iC=(()=>{class n{compileModuleSync(s){return new M_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const c=this.compileModuleSync(s),y=Pt(or(s).declarations).reduce((b,M)=>{const P=Jn(M);return P&&b.push(new x_(P)),b},[]);return new rC(c,y)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aC=(()=>Promise.resolve(0))();function W_(n){typeof Zone>"u"?aC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class qu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rh(!1),this.onMicrotaskEmpty=new rh(!1),this.onStable=new rh(!1),this.onError=new rh(!1),typeof Zone>"u")throw new $e(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&s,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function lC(){let n=en.requestAnimationFrame,r=en.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function dC(n){const r=()=>{!function cC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(en,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Y_(n),n.isCheckStableRunning=!0,q_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Y_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,f,y,b,M)=>{try{return kE(n),s.invokeTask(f,y,b,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),NE(n)}},onInvoke:(s,c,f,y,b,M,P)=>{try{return kE(n),s.invoke(f,y,b,M,P)}finally{n.shouldCoalesceRunChangeDetection&&r(),NE(n)}},onHasTask:(s,c,f,y)=>{s.hasTask(f,y),c===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Y_(n),q_(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(s,c,f,y)=>(s.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qu.isInAngularZone())throw new $e(909,!1)}static assertNotInAngularZone(){if(qu.isInAngularZone())throw new $e(909,!1)}run(r,s,c){return this._inner.run(r,s,c)}runTask(r,s,c,f){const y=this._inner,b=y.scheduleEventTask("NgZoneEvent: "+f,r,uC,Vv,Vv);try{return y.runTask(b,s,c)}finally{y.cancelTask(b)}}runGuarded(r,s,c){return this._inner.runGuarded(r,s,c)}runOutsideAngular(r){return this._outer.run(r)}}const uC={};function q_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NE(n){n._nesting--,q_(n)}class hC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rh,this.onMicrotaskEmpty=new rh,this.onStable=new rh,this.onError=new rh}run(r,s,c){return r.apply(s,c)}runGuarded(r,s,c){return r.apply(s,c)}runOutsideAngular(r){return r()}runTask(r,s,c,f){return r.apply(s,c)}}const FE=new Qn(""),LE=new Qn("");let K_,fC=(()=>{class n{constructor(s,c,f){this._ngZone=s,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,K_||(function pC(n){K_=n}(f),f.addToWindow(c)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qu.assertNotInAngularZone(),W_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())W_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,f){let y=-1;c&&c>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==y),s(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:s,timeoutId:y,updateCb:f})}whenStable(s,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,c,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(Qi(qu),Qi(BE),Qi(LE))},n.\u0275prov=st({token:n,factory:n.\u0275fac}),n})(),BE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return K_?.findTestabilityInTree(this,s,c)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),up=null;const VE=new Qn("AllowMultipleToken"),Z_=new Qn("PlatformDestroyListeners");class yC{constructor(r,s){this.name=r,this.token=s}}function UE(n,r,s=[]){const c=`Platform: ${r}`,f=new Qn(c);return(y=[])=>{let b=Q_();if(!b||b.injector.get(VE,!1)){const M=[...s,...y,{provide:f,useValue:!0}];n?n(M):function vC(n){if(up&&!up.get(VE,!1))throw new $e(400,!1);up=n;const r=n.get(HE);(function $E(n){const r=n.get(ME,null);r&&r.forEach(s=>s())})(n)}(function jE(n=[],r){return ql.create({name:r,providers:[{provide:xh,useValue:"platform"},{provide:Z_,useValue:new Set([()=>up=null])},...n]})}(M,c))}return function EC(n){const r=Q_();if(!r)throw new $e(401,!1);return r}()}}function Q_(){return up?.get(HE)??null}let HE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const f=function wC(n,r){let s;return s="noop"===n?new hC:("zone.js"===n?void 0:n)||new qu(r),s}(c?.ngZone,function GE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(c)),y=[{provide:qu,useValue:f}];return f.run(()=>{const b=ql.create({providers:y,parent:this.injector,name:s.moduleType.name}),M=s.create(b),P=M.injector.get(Lo,null);if(!P)throw new $e(402,!1);return f.runOutsideAngular(()=>{const K=f.onError.subscribe({next:se=>{P.handleError(se)}});M.onDestroy(()=>{Hv(this._modules,M),K.unsubscribe()})}),function zE(n,r,s){try{const c=s();return ev(c)?c.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(P,f,()=>{const K=M.injector.get($v);return K.runInitializers(),K.donePromise.then(()=>(function Av(n){yt(n,"Expected localeId to be defined"),"string"==typeof n&&(Sv=n.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Uv,nh)||nh),this._moduleDoBootstrap(M),M))})})}bootstrapModule(s,c=[]){const f=WE({},c);return function gC(n,r,s){const c=new M_(s);return Promise.resolve(c)}(0,0,s).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(s){const c=s.injector.get(jv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new $e(403,!1);s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const s=this._injector.get(Z_,null);s&&(s.forEach(c=>c()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Qi(ql))},n.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function WE(n,r){return Array.isArray(r)?r.reduce(WE,n):{...n,...r}}let jv=(()=>{class n{constructor(s,c,f){this._zone=s,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new Z.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),b=new Z.y(M=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{qu.assertNotInAngularZone(),W_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const K=this._zone.onUnstable.subscribe(()=>{qu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{P.unsubscribe(),K.unsubscribe()}});this.isStable=(0,He.T)(y,b.pipe((0,De.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,c){const f=s instanceof O0;if(!this._injector.get($v).done)throw!f&&Dm(s),new $e(405,false);let b;b=f?s:this._injector.get(My).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const M=function mC(n){return n.isBoundToModule}(b)?void 0:this._injector.get(hg),K=b.create(ql.NULL,[],c||b.selector,M),se=K.location.nativeElement,xe=K.injector.get(FE,null);return xe?.registerApplication(se),K.onDestroy(()=>{this.detachView(K.hostView),Hv(this.components,K),xe?.unregisterApplication(se)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new $e(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;Hv(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(RE,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Hv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new $e(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Qi(qu),Qi(ql),Qi(Lo))},n.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let YE=!0,KE=!1;function CC(){return KE=!0,YE}function bC(){if(KE)throw new Error("Cannot enable prod mode after platform setup.");YE=!1}let DC=(()=>{class n{}return n.__NG_ELEMENT_ID__=TC,n})();function TC(n){return function SC(n,r,s){if(Pe(n)&&!s){const c=Ci(n.index,r);return new Oy(c,c)}return 47&n.type?new Oy(r[16],r):null}(ie(),E(),16==(16&n))}class JE{constructor(){}supports(r){return Sc(r)}create(r){return new PC(r)}}const OC=(n,r)=>r;class PC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||OC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,c=this._removalsHead,f=0,y=null;for(;s||c;){const b=!c||s&&s.currentIndex<tw(c,f,y)?s:c,M=tw(b,f,y),P=b.currentIndex;if(b===c)f--,c=c._nextRemoved;else if(s=s._next,null==b.previousIndex)f++;else{y||(y=[]);const K=M-f,se=P-f;if(K!=se){for(let ft=0;ft<K;ft++){const At=ft<y.length?y[ft]:y[ft]=0,Xt=At+ft;se<=Xt&&Xt<K&&(y[ft]=At+1)}y[b.previousIndex]=se-K}}M!==P&&r(b,M,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Sc(r))throw new $e(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,b,s=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let M=0;M<this.length;M++)y=r[M],b=this._trackByFn(M,y),null!==s&&Object.is(s.trackById,b)?(c&&(s=this._verifyReinsertion(s,y,b,M)),Object.is(s.item,y)||this._addIdentityChange(s,y)):(s=this._mismatch(s,y,b,M),c=!0),s=s._next}else f=0,function qv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Yd()]();let c;for(;!(c=s.next()).done;)r(c.value)}}(r,M=>{b=this._trackByFn(f,M),null!==s&&Object.is(s.trackById,b)?(c&&(s=this._verifyReinsertion(s,M,b,f)),Object.is(s.item,M)||this._addIdentityChange(s,M)):(s=this._mismatch(s,M,b,f),c=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,c,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,y,f)):r=this._addAfter(new kC(s,c),y,f),r}_verifyReinsertion(r,s,c,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,s,c),this._addToMoves(r,c),r}_moveAfter(r,s,c){return this._unlink(r),this._insertAfter(r,s,c),this._addToMoves(r,c),r}_addAfter(r,s,c){return this._insertAfter(r,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,c){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new ew),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,c=r._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ew),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class kC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const s=r._prevDup,c=r._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class ew{constructor(){this.map=new Map}put(r){const s=r.trackById;let c=this.map.get(s);c||(c=new NC,this.map.set(s,c)),c.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tw(n,r,s){const c=n.previousIndex;if(null===c)return c;let f=0;return s&&c<s.length&&(f=s[c]),c+r+f}class nw{constructor(){}supports(r){return r instanceof Map||ey(r)}create(){return new FC}}class FC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ey(r)))throw new $e(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const y=this._getOrCreateRecordForKey(f,c);s=this._insertBeforeOrAppend(s,y)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const c=r._prev;return s._next=r,s._prev=c,r._prev=s,c&&(c._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const y=f._prev,b=f._next;return y&&(y._next=b),b&&(b._prev=y),f._next=null,f._prev=null,f}const c=new LC(r);return this._records.set(r,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(c=>s(r[c],c))}}class LC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rw(){return new n0([new JE])}let n0=(()=>{class n{constructor(s){this.factories=s}static create(s,c){if(null!=c){const f=c.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:c=>n.create(s,c||rw()),deps:[[n,new Rn,new qt]]}}find(s){const c=this.factories.find(f=>f.supports(s));if(null!=c)return c;throw new $e(901,!1)}}return n.\u0275prov=st({token:n,providedIn:"root",factory:rw}),n})();function iw(){return new r0([new nw])}let r0=(()=>{class n{constructor(s){this.factories=s}static create(s,c){if(c){const f=c.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:c=>n.create(s,c||iw()),deps:[[n,new Rn,new qt]]}}find(s){const c=this.factories.find(f=>f.supports(s));if(c)return c;throw new $e(901,!1)}}return n.\u0275prov=st({token:n,providedIn:"root",factory:iw}),n})();const $C=UE(null,"core",[]);let UC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Qi(jv))},n.\u0275mod=un({type:n}),n.\u0275inj=vt({}),n})();function jC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(sn,mt,B)=>{"use strict";B.d(mt,{NI:()=>gt,u:()=>ls,cw:()=>ut,sg:()=>Ui,u5:()=>j,Cf:()=>et,JU:()=>$e,a5:()=>yr,JJ:()=>qr,JL:()=>mi,UX:()=>ie,_Y:()=>tn});var d=B(4650),O=B(6895),Z=B(8306),He=B(4742),De=B(8421),_e=B(7669),ve=B(5403),ze=B(3268),Le=B(1810),me=B(8996),Te=B(4004);let Fe=(()=>{class z{constructor(F,ce){this._renderer=F,this._elementRef=ce,this.onChange=Bt=>{},this.onTouched=()=>{}}setProperty(F,ce){this._renderer.setProperty(this._elementRef.nativeElement,F,ce)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return z.\u0275fac=function(F){return new(F||z)(d.Y36(d.Qsj),d.Y36(d.SBq))},z.\u0275dir=d.lG2({type:z}),z})(),je=(()=>{class z extends Fe{}return z.\u0275fac=function(){let V;return function(ce){return(V||(V=d.n5z(z)))(ce||z)}}(),z.\u0275dir=d.lG2({type:z,features:[d.qOj]}),z})();const $e=new d.OlP("NgValueAccessor"),Re={provide:$e,useExisting:(0,d.Gpc)(()=>W),multi:!0},bt=new d.OlP("CompositionEventMode");let W=(()=>{class z extends Fe{constructor(F,ce,Bt){super(F,ce),this._compositionMode=Bt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ae(){const z=(0,O.q)()?(0,O.q)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(F){this.setProperty("value",F??"")}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return z.\u0275fac=function(F){return new(F||z)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(bt,8))},z.\u0275dir=d.lG2({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,ce){1&F&&d.NdJ("input",function(Pn){return ce._handleInput(Pn.target.value)})("blur",function(){return ce.onTouched()})("compositionstart",function(){return ce._compositionStart()})("compositionend",function(Pn){return ce._compositionEnd(Pn.target.value)})},features:[d._Bn([Re]),d.qOj]}),z})();const et=new d.OlP("NgValidators"),ee=new d.OlP("NgAsyncValidators");function be(z){return null!=z}function Ye(z){return(0,d.QGY)(z)?(0,me.D)(z):z}function Ie(z){let V={};return z.forEach(F=>{V=null!=F?{...V,...F}:V}),0===Object.keys(V).length?null:V}function st(z,V){return V.map(F=>F(z))}function vt(z){return z.map(V=>function Rt(z){return!z.validate}(V)?V:F=>V.validate(F))}function fn(z){return null!=z?function Vt(z){if(!z)return null;const V=z.filter(be);return 0==V.length?null:function(F){return Ie(st(F,V))}}(vt(z)):null}function Dn(z){return null!=z?function hn(z){if(!z)return null;const V=z.filter(be);return 0==V.length?null:function(F){return function ge(...z){const V=(0,_e.jO)(z),{args:F,keys:ce}=(0,He.D)(z),Bt=new Z.y(Pn=>{const{length:ui}=F;if(!ui)return void Pn.complete();const us=new Array(ui);let Ps=ui,fo=ui;for(let Oo=0;Oo<ui;Oo++){let po=!1;(0,De.Xf)(F[Oo]).subscribe((0,ve.x)(Pn,go=>{po||(po=!0,fo--),us[Oo]=go},()=>Ps--,void 0,()=>{(!Ps||!po)&&(fo||Pn.next(ce?(0,Le.n)(ce,us):us),Pn.complete())}))}});return V?Bt.pipe((0,ze.Z)(V)):Bt}(st(F,V).map(Ye)).pipe((0,Te.U)(Ie))}}(vt(z)):null}function Zt(z,V){return null===z?[V]:Array.isArray(z)?[...z,V]:[z,V]}function In(z){return z._rawValidators}function En(z){return z._rawAsyncValidators}function Qt(z){return z?Array.isArray(z)?z:[z]:[]}function kn(z,V){return Array.isArray(z)?z.includes(V):z===V}function Dt(z,V){const F=Qt(V);return Qt(z).forEach(Bt=>{kn(F,Bt)||F.push(Bt)}),F}function Sr(z,V){return Qt(V).filter(F=>!kn(z,F))}class Zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=fn(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=Dn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,F){return!!this.control&&this.control.hasError(V,F)}getError(V,F){return this.control?this.control.getError(V,F):null}}class rr extends Zn{get formDirective(){return null}get path(){return null}}class yr extends Zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gi{constructor(V){this._cd=V}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let qr=(()=>{class z extends gi{constructor(F){super(F)}}return z.\u0275fac=function(F){return new(F||z)(d.Y36(yr,2))},z.\u0275dir=d.lG2({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,ce){2&F&&d.ekj("ng-untouched",ce.isUntouched)("ng-touched",ce.isTouched)("ng-pristine",ce.isPristine)("ng-dirty",ce.isDirty)("ng-valid",ce.isValid)("ng-invalid",ce.isInvalid)("ng-pending",ce.isPending)},features:[d.qOj]}),z})(),mi=(()=>{class z extends gi{constructor(F){super(F)}}return z.\u0275fac=function(F){return new(F||z)(d.Y36(rr,10))},z.\u0275dir=d.lG2({type:z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,ce){2&F&&d.ekj("ng-untouched",ce.isUntouched)("ng-touched",ce.isTouched)("ng-pristine",ce.isPristine)("ng-dirty",ce.isDirty)("ng-valid",ce.isValid)("ng-invalid",ce.isInvalid)("ng-pending",ce.isPending)("ng-submitted",ce.isSubmitted)},features:[d.qOj]}),z})();const un="VALID",ar="INVALID",On="PENDING",ir="DISABLED";function Un(z){return(or(z)?z.validators:z)||null}function Jn(z){return Array.isArray(z)?fn(z):z||null}function Ar(z,V){return(or(V)?V.asyncValidators:z)||null}function Ur(z){return Array.isArray(z)?Dn(z):z||null}function or(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}class jn{constructor(V,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=F,this._composedValidatorFn=Jn(this._rawValidators),this._composedAsyncValidatorFn=Ur(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===un}get invalid(){return this.status===ar}get pending(){return this.status==On}get disabled(){return this.status===ir}get enabled(){return this.status!==ir}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=Jn(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=Ur(V)}addValidators(V){this.setValidators(Dt(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Dt(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(Sr(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(Sr(V,this._rawAsyncValidators))}hasValidator(V){return kn(this._rawValidators,V)}hasAsyncValidator(V){return kn(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=On,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const F=this._parentMarkedDirty(V.onlySelf);this.status=ir,this.errors=null,this._forEachChild(ce=>{ce.disable({...V,onlySelf:!0})}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...V,skipPristineCheck:F}),this._onDisabledChange.forEach(ce=>ce(!0))}enable(V={}){const F=this._parentMarkedDirty(V.onlySelf);this.status=un,this._forEachChild(ce=>{ce.enable({...V,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors({...V,skipPristineCheck:F}),this._onDisabledChange.forEach(ce=>ce(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}getRawValue(){return this.value}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===un||this.status===On)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ir:un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=On,this._hasOwnPendingAsyncValidator=!0;const F=Ye(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(ce=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ce,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,F={}){this.errors=V,this._updateControlsErrors(!1!==F.emitEvent)}get(V){let F=V;return null==F||(Array.isArray(F)||(F=F.split(".")),0===F.length)?null:F.reduce((ce,Bt)=>ce&&ce._find(Bt),this)}getError(V,F){const ce=F?this.get(F):this;return ce&&ce.errors?ce.errors[V]:null}hasError(V,F){return!!this.getError(V,F)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ir:this.errors?ar:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(On)?On:this._anyControlsHaveStatus(ar)?ar:un}_anyControlsHaveStatus(V){return this._anyControls(F=>F.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){or(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(V){return null}}class ut extends jn{constructor(V,F,ce){super(Un(F),Ar(ce,F)),this.controls=V,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,F){return this.controls[V]?this.controls[V]:(this.controls[V]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(V,F,ce={}){this.registerControl(V,F),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}removeControl(V,F={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(V,F,ce={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],F&&this.registerControl(V,F),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,F={}){(function on(z,V,F){z._forEachChild((ce,Bt)=>{if(void 0===F[Bt])throw new d.vHH(1002,"")})})(this,0,V),Object.keys(V).forEach(ce=>{(function Xr(z,V,F){const ce=z.controls;if(!(V?Object.keys(ce):ce).length)throw new d.vHH(1e3,"");if(!ce[F])throw new d.vHH(1001,"")})(this,!0,ce),this.controls[ce].setValue(V[ce],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(V,F={}){null!=V&&(Object.keys(V).forEach(ce=>{const Bt=this.controls[ce];Bt&&Bt.patchValue(V[ce],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(V={},F={}){this._forEachChild((ce,Bt)=>{ce.reset(V[Bt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(V,F,ce)=>(V[ce]=F.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(F,ce)=>!!ce._syncPendingControls()||F);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){Object.keys(this.controls).forEach(F=>{const ce=this.controls[F];ce&&V(ce,F)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const[F,ce]of Object.entries(this.controls))if(this.contains(F)&&V(ce))return!0;return!1}_reduceValue(){return this._reduceChildren({},(F,ce,Bt)=>((ce.enabled||this.disabled)&&(F[Bt]=ce.value),F))}_reduceChildren(V,F){let ce=V;return this._forEachChild((Bt,Pn)=>{ce=F(ce,Bt,Pn)}),ce}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(V){return this.controls.hasOwnProperty(V)?this.controls[V]:null}}function qn(z,V){tr(z,V),V.valueAccessor.writeValue(z.value),z.disabled&&V.valueAccessor.setDisabledState?.(!0),function Fi(z,V){V.valueAccessor.registerOnChange(F=>{z._pendingValue=F,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&kr(z,V)})}(z,V),function Si(z,V){const F=(ce,Bt)=>{V.valueAccessor.writeValue(ce),Bt&&V.viewToModelUpdate(ce)};z.registerOnChange(F),V._registerOnDestroy(()=>{z._unregisterOnChange(F)})}(z,V),function Vr(z,V){V.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&kr(z,V),"submit"!==z.updateOn&&z.markAsTouched()})}(z,V),function er(z,V){if(V.valueAccessor.setDisabledState){const F=ce=>{V.valueAccessor.setDisabledState(ce)};z.registerOnDisabledChange(F),V._registerOnDestroy(()=>{z._unregisterOnDisabledChange(F)})}}(z,V)}function hr(z,V,F=!0){const ce=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(ce),V.valueAccessor.registerOnTouched(ce)),ri(z,V),z&&(V._invokeOnDestroyCallbacks(),z._registerOnCollectionChange(()=>{}))}function gn(z,V){z.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(V)})}function tr(z,V){const F=In(z);null!==V.validator?z.setValidators(Zt(F,V.validator)):"function"==typeof F&&z.setValidators([F]);const ce=En(z);null!==V.asyncValidator?z.setAsyncValidators(Zt(ce,V.asyncValidator)):"function"==typeof ce&&z.setAsyncValidators([ce]);const Bt=()=>z.updateValueAndValidity();gn(V._rawValidators,Bt),gn(V._rawAsyncValidators,Bt)}function ri(z,V){let F=!1;if(null!==z){if(null!==V.validator){const Bt=In(z);if(Array.isArray(Bt)&&Bt.length>0){const Pn=Bt.filter(ui=>ui!==V.validator);Pn.length!==Bt.length&&(F=!0,z.setValidators(Pn))}}if(null!==V.asyncValidator){const Bt=En(z);if(Array.isArray(Bt)&&Bt.length>0){const Pn=Bt.filter(ui=>ui!==V.asyncValidator);Pn.length!==Bt.length&&(F=!0,z.setAsyncValidators(Pn))}}}const ce=()=>{};return gn(V._rawValidators,ce),gn(V._rawAsyncValidators,ce),F}function kr(z,V){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function we(z,V){const F=z.indexOf(V);F>-1&&z.splice(F,1)}function Pe(z){return"object"==typeof z&&null!==z&&2===Object.keys(z).length&&"value"in z&&"disabled"in z}const gt=class extends jn{constructor(V=null,F,ce){super(Un(F),Ar(ce,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),or(F)&&(F.nonNullable||F.initialValueIsDefault)&&(this.defaultValue=Pe(V)?V.value:V)}setValue(V,F={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(ce=>ce(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(V,F={}){this.setValue(V,F)}reset(V=this.defaultValue,F={}){this._applyFormState(V),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){we(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){we(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){Pe(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}};let tn=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275dir=d.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),z})(),Wi=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=d.oAB({type:z}),z.\u0275inj=d.cJS({}),z})();const Us=new d.OlP("NgModelWithFormControlWarning"),xo={provide:rr,useExisting:(0,d.Gpc)(()=>Ui)};let Ui=(()=>{class z extends rr{constructor(F,ce){super(),this.validators=F,this.asyncValidators=ce,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(F),this._setAsyncValidators(ce)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ri(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const ce=this.form.get(F.path);return qn(ce,F),ce.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),ce}getControl(F){return this.form.get(F.path)}removeControl(F){hr(F.control||null,F,!1),function Ei(z,V){const F=z.indexOf(V);F>-1&&z.splice(F,1)}(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,ce){this.form.get(F.path).setValue(ce)}onSubmit(F){return this.submitted=!0,function Bi(z,V){z._syncPendingControls(),V.forEach(F=>{const ce=F.control;"submit"===ce.updateOn&&ce._pendingChange&&(F.viewToModelUpdate(ce._pendingValue),ce._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const ce=F.control,Bt=this.form.get(F.path);ce!==Bt&&(hr(ce||null,F),(z=>z instanceof gt)(Bt)&&(qn(Bt,F),F.control=Bt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const ce=this.form.get(F.path);(function ii(z,V){tr(z,V)})(ce,F),ce.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const ce=this.form.get(F.path);ce&&function Ai(z,V){return ri(z,V)}(ce,F)&&ce.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tr(this.form,this),this._oldForm&&ri(this._oldForm,this)}_checkFormPresent(){}}return z.\u0275fac=function(F){return new(F||z)(d.Y36(et,10),d.Y36(ee,10))},z.\u0275dir=d.lG2({type:z,selectors:[["","formGroup",""]],hostBindings:function(F,ce){1&F&&d.NdJ("submit",function(Pn){return ce.onSubmit(Pn)})("reset",function(){return ce.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([xo]),d.qOj,d.TTD]}),z})();const Go={provide:yr,useExisting:(0,d.Gpc)(()=>ls)};let ls=(()=>{class z extends yr{constructor(F,ce,Bt,Pn,ui){super(),this._ngModelWarningConfig=ui,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(ce),this._setAsyncValidators(Bt),this.valueAccessor=function xi(z,V){if(!V)return null;let F,ce,Bt;return Array.isArray(V),V.forEach(Pn=>{Pn.constructor===W?F=Pn:function Li(z){return Object.getPrototypeOf(z.constructor)===je}(Pn)?ce=Pn:Bt=Pn}),Bt||ce||F||null}(0,Pn)}set isDisabled(F){}ngOnChanges(F){this._added||this._setUpControl(),function ts(z,V){if(!z.hasOwnProperty("model"))return!1;const F=z.model;return!!F.isFirstChange()||!Object.is(V,F.currentValue)}(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return function pn(z,V){return[...V.path,z]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return z._ngModelWarningSentOnce=!1,z.\u0275fac=function(F){return new(F||z)(d.Y36(rr,13),d.Y36(et,10),d.Y36(ee,10),d.Y36($e,10),d.Y36(Us,8))},z.\u0275dir=d.lG2({type:z,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([Go]),d.qOj,d.TTD]}),z})(),I=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=d.oAB({type:z}),z.\u0275inj=d.cJS({imports:[Wi]}),z})(),j=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=d.oAB({type:z}),z.\u0275inj=d.cJS({imports:[I]}),z})(),ie=(()=>{class z{static withConfig(F){return{ngModule:z,providers:[{provide:Us,useValue:F.warnOnNgModelWithFormControl}]}}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=d.oAB({type:z}),z.\u0275inj=d.cJS({imports:[I]}),z})()},1481:(sn,mt,B)=>{"use strict";B.d(mt,{Dx:()=>mi,H7:()=>or,b2:()=>yr,q6:()=>Dt});var d=B(6895),O=B(4650);class Z extends d.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class He extends Z{static makeCurrent(){(0,d.HT)(new He)}onAndCancel(ke,Me,pt){return ke.addEventListener(Me,pt,!1),()=>{ke.removeEventListener(Me,pt,!1)}}dispatchEvent(ke,Me){ke.dispatchEvent(Me)}remove(ke){ke.parentNode&&ke.parentNode.removeChild(ke)}createElement(ke,Me){return(Me=Me||this.getDefaultDocument()).createElement(ke)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ke){return ke.nodeType===Node.ELEMENT_NODE}isShadowRoot(ke){return ke instanceof DocumentFragment}getGlobalEventTarget(ke,Me){return"window"===Me?window:"document"===Me?ke:"body"===Me?ke.body:null}getBaseHref(ke){const Me=function _e(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==Me?null:function ze(ut){ve=ve||document.createElement("a"),ve.setAttribute("href",ut);const ke=ve.pathname;return"/"===ke.charAt(0)?ke:`/${ke}`}(Me)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(ke){return(0,d.Mx)(document.cookie,ke)}}let ve,De=null;const Le=new O.OlP("TRANSITION_ID"),me=[{provide:O.ip1,useFactory:function ge(ut,ke,Me){return()=>{Me.get(O.CZH).donePromise.then(()=>{const pt=(0,d.q)(),Ut=ke.querySelectorAll(`style[ng-transition="${ut}"]`);for(let pn=0;pn<Ut.length;pn++)pt.remove(Ut[pn])})}},deps:[Le,d.K0,O.zs3],multi:!0}];let Fe=(()=>{class ut{build(){return new XMLHttpRequest}}return ut.\u0275fac=function(Me){return new(Me||ut)},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const je=new O.OlP("EventManagerPlugins");let $e=(()=>{class ut{constructor(Me,pt){this._zone=pt,this._eventNameToPlugin=new Map,Me.forEach(Ut=>Ut.manager=this),this._plugins=Me.slice().reverse()}addEventListener(Me,pt,Ut){return this._findPluginFor(pt).addEventListener(Me,pt,Ut)}addGlobalEventListener(Me,pt,Ut){return this._findPluginFor(pt).addGlobalEventListener(Me,pt,Ut)}getZone(){return this._zone}_findPluginFor(Me){const pt=this._eventNameToPlugin.get(Me);if(pt)return pt;const Ut=this._plugins;for(let pn=0;pn<Ut.length;pn++){const qn=Ut[pn];if(qn.supports(Me))return this._eventNameToPlugin.set(Me,qn),qn}throw new Error(`No event manager plugin found for event ${Me}`)}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(je),O.LFG(O.R0b))},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class Ve{constructor(ke){this._doc=ke}addGlobalEventListener(ke,Me,pt){const Ut=(0,d.q)().getGlobalEventTarget(this._doc,ke);if(!Ut)throw new Error(`Unsupported event target ${Ut} for event ${Me}`);return this.addEventListener(Ut,Me,pt)}}let Ce=(()=>{class ut{constructor(){this._stylesSet=new Set}addStyles(Me){const pt=new Set;Me.forEach(Ut=>{this._stylesSet.has(Ut)||(this._stylesSet.add(Ut),pt.add(Ut))}),this.onStylesAdded(pt)}onStylesAdded(Me){}getAllStyles(){return Array.from(this._stylesSet)}}return ut.\u0275fac=function(Me){return new(Me||ut)},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})(),Re=(()=>{class ut extends Ce{constructor(Me){super(),this._doc=Me,this._hostNodes=new Map,this._hostNodes.set(Me.head,[])}_addStylesToHost(Me,pt,Ut){Me.forEach(pn=>{const qn=this._doc.createElement("style");qn.textContent=pn,Ut.push(pt.appendChild(qn))})}addHost(Me){const pt=[];this._addStylesToHost(this._stylesSet,Me,pt),this._hostNodes.set(Me,pt)}removeHost(Me){const pt=this._hostNodes.get(Me);pt&&pt.forEach(Ae),this._hostNodes.delete(Me)}onStylesAdded(Me){this._hostNodes.forEach((pt,Ut)=>{this._addStylesToHost(Me,Ut,pt)})}ngOnDestroy(){this._hostNodes.forEach(Me=>Me.forEach(Ae))}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(d.K0))},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})();function Ae(ut){(0,d.q)().remove(ut)}const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},W=/%COMP%/g;function he(ut,ke,Me){for(let pt=0;pt<ke.length;pt++){let Ut=ke[pt];Array.isArray(Ut)?he(ut,Ut,Me):(Ut=Ut.replace(W,ut),Me.push(Ut))}return Me}function pe(ut){return ke=>{if("__ngUnwrap__"===ke)return ut;!1===ut(ke)&&(ke.preventDefault(),ke.returnValue=!1)}}let le=(()=>{class ut{constructor(Me,pt,Ut){this.eventManager=Me,this.sharedStylesHost=pt,this.appId=Ut,this.rendererByCompId=new Map,this.defaultRenderer=new Qe(Me)}createRenderer(Me,pt){if(!Me||!pt)return this.defaultRenderer;switch(pt.encapsulation){case O.ifc.Emulated:{let Ut=this.rendererByCompId.get(pt.id);return Ut||(Ut=new yt(this.eventManager,this.sharedStylesHost,pt,this.appId),this.rendererByCompId.set(pt.id,Ut)),Ut.applyToHost(Me),Ut}case 1:case O.ifc.ShadowDom:return new Be(this.eventManager,this.sharedStylesHost,Me,pt);default:if(!this.rendererByCompId.has(pt.id)){const Ut=he(pt.id,pt.styles,[]);this.sharedStylesHost.addStyles(Ut),this.rendererByCompId.set(pt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG($e),O.LFG(Re),O.LFG(O.AFp))},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class Qe{constructor(ke){this.eventManager=ke,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ke,Me){return Me?document.createElementNS(bt[Me]||Me,ke):document.createElement(ke)}createComment(ke){return document.createComment(ke)}createText(ke){return document.createTextNode(ke)}appendChild(ke,Me){(Et(ke)?ke.content:ke).appendChild(Me)}insertBefore(ke,Me,pt){ke&&(Et(ke)?ke.content:ke).insertBefore(Me,pt)}removeChild(ke,Me){ke&&ke.removeChild(Me)}selectRootElement(ke,Me){let pt="string"==typeof ke?document.querySelector(ke):ke;if(!pt)throw new Error(`The selector "${ke}" did not match any elements`);return Me||(pt.textContent=""),pt}parentNode(ke){return ke.parentNode}nextSibling(ke){return ke.nextSibling}setAttribute(ke,Me,pt,Ut){if(Ut){Me=Ut+":"+Me;const pn=bt[Ut];pn?ke.setAttributeNS(pn,Me,pt):ke.setAttribute(Me,pt)}else ke.setAttribute(Me,pt)}removeAttribute(ke,Me,pt){if(pt){const Ut=bt[pt];Ut?ke.removeAttributeNS(Ut,Me):ke.removeAttribute(`${pt}:${Me}`)}else ke.removeAttribute(Me)}addClass(ke,Me){ke.classList.add(Me)}removeClass(ke,Me){ke.classList.remove(Me)}setStyle(ke,Me,pt,Ut){Ut&(O.JOm.DashCase|O.JOm.Important)?ke.style.setProperty(Me,pt,Ut&O.JOm.Important?"important":""):ke.style[Me]=pt}removeStyle(ke,Me,pt){pt&O.JOm.DashCase?ke.style.removeProperty(Me):ke.style[Me]=""}setProperty(ke,Me,pt){ke[Me]=pt}setValue(ke,Me){ke.nodeValue=Me}listen(ke,Me,pt){return"string"==typeof ke?this.eventManager.addGlobalEventListener(ke,Me,pe(pt)):this.eventManager.addEventListener(ke,Me,pe(pt))}}function Et(ut){return"TEMPLATE"===ut.tagName&&void 0!==ut.content}class yt extends Qe{constructor(ke,Me,pt,Ut){super(ke),this.component=pt;const pn=he(Ut+"-"+pt.id,pt.styles,[]);Me.addStyles(pn),this.contentAttr=function ee(ut){return"_ngcontent-%COMP%".replace(W,ut)}(Ut+"-"+pt.id),this.hostAttr=function qe(ut){return"_nghost-%COMP%".replace(W,ut)}(Ut+"-"+pt.id)}applyToHost(ke){super.setAttribute(ke,this.hostAttr,"")}createElement(ke,Me){const pt=super.createElement(ke,Me);return super.setAttribute(pt,this.contentAttr,""),pt}}class Be extends Qe{constructor(ke,Me,pt,Ut){super(ke),this.sharedStylesHost=Me,this.hostEl=pt,this.shadowRoot=pt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const pn=he(Ut.id,Ut.styles,[]);for(let qn=0;qn<pn.length;qn++){const hr=document.createElement("style");hr.textContent=pn[qn],this.shadowRoot.appendChild(hr)}}nodeOrShadowRoot(ke){return ke===this.hostEl?this.shadowRoot:ke}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ke,Me){return super.appendChild(this.nodeOrShadowRoot(ke),Me)}insertBefore(ke,Me,pt){return super.insertBefore(this.nodeOrShadowRoot(ke),Me,pt)}removeChild(ke,Me){return super.removeChild(this.nodeOrShadowRoot(ke),Me)}parentNode(ke){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ke)))}}let be=(()=>{class ut extends Ve{constructor(Me){super(Me)}supports(Me){return!0}addEventListener(Me,pt,Ut){return Me.addEventListener(pt,Ut,!1),()=>this.removeEventListener(Me,pt,Ut)}removeEventListener(Me,pt,Ut){return Me.removeEventListener(pt,Ut)}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(d.K0))},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const Ye=["alt","control","meta","shift"],st={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vt={alt:ut=>ut.altKey,control:ut=>ut.ctrlKey,meta:ut=>ut.metaKey,shift:ut=>ut.shiftKey};let Vt=(()=>{class ut extends Ve{constructor(Me){super(Me)}supports(Me){return null!=ut.parseEventName(Me)}addEventListener(Me,pt,Ut){const pn=ut.parseEventName(pt),qn=ut.eventCallback(pn.fullKey,Ut,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,d.q)().onAndCancel(Me,pn.domEventName,qn))}static parseEventName(Me){const pt=Me.toLowerCase().split("."),Ut=pt.shift();if(0===pt.length||"keydown"!==Ut&&"keyup"!==Ut)return null;const pn=ut._normalizeKey(pt.pop());let qn="";if(Ye.forEach(gn=>{const er=pt.indexOf(gn);er>-1&&(pt.splice(er,1),qn+=gn+".")}),qn+=pn,0!=pt.length||0===pn.length)return null;const hr={};return hr.domEventName=Ut,hr.fullKey=qn,hr}static getEventFullKey(Me){let pt="",Ut=function fn(ut){let ke=ut.key;if(null==ke){if(ke=ut.keyIdentifier,null==ke)return"Unidentified";ke.startsWith("U+")&&(ke=String.fromCharCode(parseInt(ke.substring(2),16)),3===ut.location&&Rt.hasOwnProperty(ke)&&(ke=Rt[ke]))}return st[ke]||ke}(Me);return Ut=Ut.toLowerCase()," "===Ut?Ut="space":"."===Ut&&(Ut="dot"),Ye.forEach(pn=>{pn!=Ut&&vt[pn](Me)&&(pt+=pn+".")}),pt+=Ut,pt}static eventCallback(Me,pt,Ut){return pn=>{ut.getEventFullKey(pn)===Me&&Ut.runGuarded(()=>pt(pn))}}static _normalizeKey(Me){return"esc"===Me?"escape":Me}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(d.K0))},ut.\u0275prov=O.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const Dt=(0,O.eFA)(O._c5,"browser",[{provide:O.Lbi,useValue:d.bD},{provide:O.g9A,useValue:function In(){He.makeCurrent()},multi:!0},{provide:d.K0,useFactory:function Qt(){return(0,O.RDi)(document),document},deps:[]}]),Sr=new O.OlP(""),Zn=[{provide:O.rWj,useClass:class Te{addToWindow(ke){O.dqk.getAngularTestability=(pt,Ut=!0)=>{const pn=ke.findTestabilityInTree(pt,Ut);if(null==pn)throw new Error("Could not find testability for element.");return pn},O.dqk.getAllAngularTestabilities=()=>ke.getAllTestabilities(),O.dqk.getAllAngularRootElements=()=>ke.getAllRootElements(),O.dqk.frameworkStabilizers||(O.dqk.frameworkStabilizers=[]),O.dqk.frameworkStabilizers.push(pt=>{const Ut=O.dqk.getAllAngularTestabilities();let pn=Ut.length,qn=!1;const hr=function(gn){qn=qn||gn,pn--,0==pn&&pt(qn)};Ut.forEach(function(gn){gn.whenStable(hr)})})}findTestabilityInTree(ke,Me,pt){return null==Me?null:ke.getTestability(Me)??(pt?(0,d.q)().isShadowRoot(Me)?this.findTestabilityInTree(ke,Me.host,!0):this.findTestabilityInTree(ke,Me.parentElement,!0):null)}},deps:[]},{provide:O.lri,useClass:O.dDg,deps:[O.R0b,O.eoX,O.rWj]},{provide:O.dDg,useClass:O.dDg,deps:[O.R0b,O.eoX,O.rWj]}],rr=[{provide:O.zSh,useValue:"root"},{provide:O.qLn,useFactory:function En(){return new O.qLn},deps:[]},{provide:je,useClass:be,multi:!0,deps:[d.K0,O.R0b,O.Lbi]},{provide:je,useClass:Vt,multi:!0,deps:[d.K0]},{provide:le,useClass:le,deps:[$e,Re,O.AFp]},{provide:O.FYo,useExisting:le},{provide:Ce,useExisting:Re},{provide:Re,useClass:Re,deps:[d.K0]},{provide:$e,useClass:$e,deps:[je,O.R0b]},{provide:d.JF,useClass:Fe,deps:[]},[]];let yr=(()=>{class ut{constructor(Me){}static withServerTransition(Me){return{ngModule:ut,providers:[{provide:O.AFp,useValue:Me.appId},{provide:Le,useExisting:O.AFp},me]}}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(Sr,12))},ut.\u0275mod=O.oAB({type:ut}),ut.\u0275inj=O.cJS({providers:[...rr,...Zn],imports:[d.ez,O.hGG]}),ut})(),mi=(()=>{class ut{constructor(Me){this._doc=Me}getTitle(){return this._doc.title}setTitle(Me){this._doc.title=Me||""}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(d.K0))},ut.\u0275prov=O.Yz7({token:ut,factory:function(Me){let pt=null;return pt=Me?new Me:function qr(){return new mi((0,O.LFG)(d.K0))}(),pt},providedIn:"root"}),ut})();typeof window<"u"&&window;let or=(()=>{class ut{}return ut.\u0275fac=function(Me){return new(Me||ut)},ut.\u0275prov=O.Yz7({token:ut,factory:function(Me){let pt=null;return pt=Me?new(Me||ut):O.LFG(on),pt},providedIn:"root"}),ut})(),on=(()=>{class ut extends or{constructor(Me){super(),this._doc=Me}sanitize(Me,pt){if(null==pt)return null;switch(Me){case O.q3G.NONE:return pt;case O.q3G.HTML:return(0,O.qzn)(pt,"HTML")?(0,O.z3N)(pt):(0,O.EiD)(this._doc,String(pt)).toString();case O.q3G.STYLE:return(0,O.qzn)(pt,"Style")?(0,O.z3N)(pt):pt;case O.q3G.SCRIPT:if((0,O.qzn)(pt,"Script"))return(0,O.z3N)(pt);throw new Error("unsafe value used in a script context");case O.q3G.URL:return(0,O.qzn)(pt,"URL")?(0,O.z3N)(pt):(0,O.mCW)(String(pt));case O.q3G.RESOURCE_URL:if((0,O.qzn)(pt,"ResourceURL"))return(0,O.z3N)(pt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Me} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Me){return(0,O.JVY)(Me)}bypassSecurityTrustStyle(Me){return(0,O.L6k)(Me)}bypassSecurityTrustScript(Me){return(0,O.eBb)(Me)}bypassSecurityTrustUrl(Me){return(0,O.LAX)(Me)}bypassSecurityTrustResourceUrl(Me){return(0,O.pB0)(Me)}}return ut.\u0275fac=function(Me){return new(Me||ut)(O.LFG(d.K0))},ut.\u0275prov=O.Yz7({token:ut,factory:function(Me){let pt=null;return pt=Me?new Me:function Xr(ut){return new on(ut.get(d.K0))}(O.LFG(O.zs3)),pt},providedIn:"root"}),ut})()},2485:(sn,mt,B)=>{"use strict";B.d(mt,{gz:()=>Ot,y6:()=>qi,OD:()=>In,eC:()=>Tn,wm:()=>rn,wN:()=>Xo,F0:()=>ki,rH:()=>ja,yS:()=>_o,Bz:()=>mu,Hx:()=>qn});var d=B(6895),O=B(4650),Z=B(8306),He=B(4742),De=B(8996),_e=B(4671),ve=B(3268),ze=B(7669),Le=B(1810),ge=B(5403),me=B(9672);function Te(...x){const A=(0,ze.yG)(x),D=(0,ze.jO)(x),{args:L,keys:q}=(0,He.D)(x);if(0===L.length)return(0,De.D)([],A);const oe=new Z.y(function Fe(x,A,D=_e.y){return L=>{je(A,()=>{const{length:q}=x,oe=new Array(q);let Oe=q,it=q;for(let Ht=0;Ht<q;Ht++)je(A,()=>{const ln=(0,De.D)(x[Ht],A);let gr=!1;ln.subscribe((0,ge.x)(L,xn=>{oe[Ht]=xn,gr||(gr=!0,it--),it||L.next(D(oe.slice()))},()=>{--Oe||L.complete()}))},L)},L)}}(L,A,q?Oe=>(0,Le.n)(q,Oe):_e.y));return D?oe.pipe((0,ve.Z)(D)):oe}function je(x,A,D){x?(0,me.f)(D,x,A):A()}var $e=B(576);function Ve(x,A){const D=(0,$e.m)(x)?x:()=>x,L=q=>q.error(D());return new Z.y(A?q=>A.schedule(L,0,q):L)}var Ce=B(727),Re=B(4482);function Ae(){return(0,Re.e)((x,A)=>{let D=null;x._refCount++;const L=(0,ge.x)(A,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(D=null);const q=x._connection,oe=D;D=null,q&&(!oe||q===oe)&&q.unsubscribe(),A.unsubscribe()});x.subscribe(L),L.closed||(D=x.connect())})}class bt extends Z.y{constructor(A,D){super(),this.source=A,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Re.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new Ce.w0;const D=this.getSubject();A.add(this.source.subscribe((0,ge.x)(D,void 0,()=>{this._teardown(),D.complete()},L=>{this._teardown(),D.error(L)},()=>this._teardown()))),A.closed&&(this._connection=null,A=Ce.w0.EMPTY)}return A}refCount(){return Ae()(this)}}var W=B(9646),Xe=B(1135),Ge=B(6805),Je=B(7272),et=B(9770),ee=B(515),qe=B(7579),he=B(8421);function pe(x){return(0,Re.e)((A,D)=>{let oe,L=null,q=!1;L=A.subscribe((0,ge.x)(D,void 0,void 0,Oe=>{oe=(0,he.Xf)(x(Oe,pe(x)(A))),L?(L.unsubscribe(),L=null,oe.subscribe(D)):q=!0})),q&&(L.unsubscribe(),L=null,oe.subscribe(D))})}var fe=B(5577);function le(x,A){return(0,$e.m)(A)?(0,fe.z)(x,A,1):(0,fe.z)(x,1)}var Qe=B(9300);function Tt(x){return x<=0?()=>ee.E:(0,Re.e)((A,D)=>{let L=[];A.subscribe((0,ge.x)(D,q=>{L.push(q),x<L.length&&L.shift()},()=>{for(const q of L)D.next(q);D.complete()},void 0,()=>{L=null}))})}var Gt=B(8068),Et=B(6590),Be=B(4004);function Ye(x){return(0,Re.e)((A,D)=>{try{A.subscribe(D)}finally{D.add(x)}})}var Ie=B(3900),st=B(5698),Rt=B(8675),vt=B(5026),Vt=B(590),fn=B(8505),hn=B(8189),Dn=B(1481);class Zt{constructor(A,D){this.id=A,this.url=D}}class In extends Zt{constructor(A,D,L="imperative",q=null){super(A,D),this.type=0,this.navigationTrigger=L,this.restoredState=q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class En extends Zt{constructor(A,D,L){super(A,D),this.urlAfterRedirects=L,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qt extends Zt{constructor(A,D,L){super(A,D),this.reason=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kn extends Zt{constructor(A,D,L){super(A,D),this.error=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dt extends Zt{constructor(A,D,L,q){super(A,D),this.urlAfterRedirects=L,this.state=q,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends Zt{constructor(A,D,L,q){super(A,D),this.urlAfterRedirects=L,this.state=q,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn extends Zt{constructor(A,D,L,q,oe){super(A,D),this.urlAfterRedirects=L,this.state=q,this.shouldActivate=oe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rr extends Zt{constructor(A,D,L,q){super(A,D),this.urlAfterRedirects=L,this.state=q,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends Zt{constructor(A,D,L,q){super(A,D),this.urlAfterRedirects=L,this.state=q,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gi{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dr{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ei{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mi{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yn{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class en{constructor(A,D,L){this.routerEvent=A,this.position=D,this.anchor=L,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tn="primary";class Yr{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const D=this.params[A];return Array.isArray(D)?D[0]:D}return null}getAll(A){if(this.has(A)){const D=this.params[A];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function vn(x){return new Yr(x)}const hi="Redirecting to ",Zr="ngNavigationCancelingError";function ti(x){const A=Error("NavigationCancelingError: "+(x||""));return A[Zr]=!0,A}function Pr(x,A,D){const L=D.path.split("/");if(L.length>x.length||"full"===D.pathMatch&&(A.hasChildren()||L.length<x.length))return null;const q={};for(let oe=0;oe<L.length;oe++){const Oe=L[oe],it=x[oe];if(Oe.startsWith(":"))q[Oe.substring(1)]=it;else if(Oe!==it.path)return null}return{consumed:x.slice(0,L.length),posParams:q}}function Ze(x,A){const D=x?Object.keys(x):void 0,L=A?Object.keys(A):void 0;if(!D||!L||D.length!=L.length)return!1;let q;for(let oe=0;oe<D.length;oe++)if(q=D[oe],!Ue(x[q],A[q]))return!1;return!0}function Ue(x,A){if(Array.isArray(x)&&Array.isArray(A)){if(x.length!==A.length)return!1;const D=[...x].sort(),L=[...A].sort();return D.every((q,oe)=>L[oe]===q)}return x===A}function tt(x){return Array.prototype.concat.apply([],x)}function We(x){return x.length>0?x[x.length-1]:null}function Yt(x,A){for(const D in x)x.hasOwnProperty(D)&&A(x[D],D)}function un(x){return(0,O.CqO)(x)?x:(0,O.QGY)(x)?(0,De.D)(Promise.resolve(x)):(0,W.of)(x)}const ir={exact:function Ur(x,A,D){if(!Ut(x.segments,A.segments)||!jn(x.segments,A.segments,D)||x.numberOfChildren!==A.numberOfChildren)return!1;for(const L in A.children)if(!x.children[L]||!Ur(x.children[L],A.children[L],D))return!1;return!0},subset:Xr},Un={exact:function Ar(x,A){return Ze(x,A)},subset:function or(x,A){return Object.keys(A).length<=Object.keys(x).length&&Object.keys(A).every(D=>Ue(x[D],A[D]))},ignored:()=>!0};function Jn(x,A,D){return ir[D.paths](x.root,A.root,D.matrixParams)&&Un[D.queryParams](x.queryParams,A.queryParams)&&!("exact"===D.fragment&&x.fragment!==A.fragment)}function Xr(x,A,D){return on(x,A,A.segments,D)}function on(x,A,D,L){if(x.segments.length>D.length){const q=x.segments.slice(0,D.length);return!(!Ut(q,D)||A.hasChildren()||!jn(q,D,L))}if(x.segments.length===D.length){if(!Ut(x.segments,D)||!jn(x.segments,D,L))return!1;for(const q in A.children)if(!x.children[q]||!Xr(x.children[q],A.children[q],L))return!1;return!0}{const q=D.slice(0,x.segments.length),oe=D.slice(x.segments.length);return!!(Ut(x.segments,q)&&jn(x.segments,q,L)&&x.children[Tn])&&on(x.children[Tn],A,oe,L)}}function jn(x,A,D){return A.every((L,q)=>Un[D](x[q].parameters,L.parameters))}class ut{constructor(A,D,L){this.root=A,this.queryParams=D,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return gn.serialize(this)}}class ke{constructor(A,D){this.segments=A,this.children=D,this.parent=null,Yt(D,(L,q)=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return er(this)}}class Me{constructor(A,D){this.path=A,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=vn(this.parameters)),this._parameterMap}toString(){return Ai(this)}}function Ut(x,A){return x.length===A.length&&x.every((D,L)=>D.path===A[L].path)}class qn{}class hr{parse(A){const D=new Ei(A);return new ut(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(A){const D=`/${tr(A.root,!0)}`,L=function Cr(x){const A=Object.keys(x).map(D=>{const L=x[D];return Array.isArray(L)?L.map(q=>`${Fi(D)}=${Fi(q)}`).join("&"):`${Fi(D)}=${Fi(L)}`}).filter(D=>!!D);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${D}${L}${"string"==typeof A.fragment?`#${function Vr(x){return encodeURI(x)}(A.fragment)}`:""}`}}const gn=new hr;function er(x){return x.segments.map(A=>Ai(A)).join("/")}function tr(x,A){if(!x.hasChildren())return er(x);if(A){const D=x.children[Tn]?tr(x.children[Tn],!1):"",L=[];return Yt(x.children,(q,oe)=>{oe!==Tn&&L.push(`${oe}:${tr(q,!1)}`)}),L.length>0?`${D}(${L.join("//")})`:D}{const D=function pn(x,A){let D=[];return Yt(x.children,(L,q)=>{q===Tn&&(D=D.concat(A(L,q)))}),Yt(x.children,(L,q)=>{q!==Tn&&(D=D.concat(A(L,q)))}),D}(x,(L,q)=>q===Tn?[tr(x.children[Tn],!1)]:[`${q}:${tr(L,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[Tn]?`${er(x)}/${D[0]}`:`${er(x)}/(${D.join("//")})`}}function ri(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fi(x){return ri(x).replace(/%3B/gi,";")}function kr(x){return ri(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Si(x){return decodeURIComponent(x)}function ii(x){return Si(x.replace(/\+/g,"%20"))}function Ai(x){return`${kr(x.path)}${function si(x){return Object.keys(x).map(A=>`;${kr(A)}=${kr(x[A])}`).join("")}(x.parameters)}`}const xs=/^[^\/()?;=#]+/;function es(x){const A=x.match(xs);return A?A[0]:""}const ts=/^[^=?&#]+/,Bi=/^[^&#]+/;class Ei{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(A.length>0||Object.keys(D).length>0)&&(L[Tn]=new ke(A,D)),L}parseSegment(){const A=es(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new O.vHH(4009,!1);return this.capture(A),new Me(Si(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const D=es(this.remaining);if(!D)return;this.capture(D);let L="";if(this.consumeOptional("=")){const q=es(this.remaining);q&&(L=q,this.capture(L))}A[Si(D)]=Si(L)}parseQueryParam(A){const D=function Li(x){const A=x.match(ts);return A?A[0]:""}(this.remaining);if(!D)return;this.capture(D);let L="";if(this.consumeOptional("=")){const Oe=function xi(x){const A=x.match(Bi);return A?A[0]:""}(this.remaining);Oe&&(L=Oe,this.capture(L))}const q=ii(D),oe=ii(L);if(A.hasOwnProperty(q)){let Oe=A[q];Array.isArray(Oe)||(Oe=[Oe],A[q]=Oe),Oe.push(oe)}else A[q]=oe}parseParens(A){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=es(this.remaining),q=this.remaining[L.length];if("/"!==q&&")"!==q&&";"!==q)throw new O.vHH(4010,!1);let oe;L.indexOf(":")>-1?(oe=L.slice(0,L.indexOf(":")),this.capture(oe),this.capture(":")):A&&(oe=Tn);const Oe=this.parseChildren();D[oe]=1===Object.keys(Oe).length?Oe[Tn]:new ke([],Oe),this.consumeOptional("//")}return D}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new O.vHH(4011,!1)}}class te{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const D=this.pathFromRoot(A);return D.length>1?D[D.length-2]:null}children(A){const D=Ee(A,this._root);return D?D.children.map(L=>L.value):[]}firstChild(A){const D=Ee(A,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(A){const D=nt(A,this._root);return D.length<2?[]:D[D.length-2].children.map(q=>q.value).filter(q=>q!==A)}pathFromRoot(A){return nt(A,this._root).map(D=>D.value)}}function Ee(x,A){if(x===A.value)return A;for(const D of A.children){const L=Ee(x,D);if(L)return L}return null}function nt(x,A){if(x===A.value)return[A];for(const D of A.children){const L=nt(x,D);if(L.length)return L.unshift(A),L}return[]}class dt{constructor(A,D){this.value=A,this.children=D}toString(){return`TreeNode(${this.value})`}}function we(x){const A={};return x&&x.children.forEach(D=>A[D.value.outlet]=D),A}class Pe extends te{constructor(A,D){super(A),this.snapshot=D,Nr(this,A)}toString(){return this.snapshot.toString()}}function gt(x,A){const D=function Lt(x,A){const Oe=new Fn([],{},{},"",{},Tn,A,null,x.root,-1,{});return new Wn("",new dt(Oe,[]))}(x,A),L=new Xe.X([new Me("",{})]),q=new Xe.X({}),oe=new Xe.X({}),Oe=new Xe.X({}),it=new Xe.X(""),Ht=new Ot(L,q,Oe,it,oe,Tn,A,D.root);return Ht.snapshot=D.root,new Pe(new dt(Ht,[]),D)}class Ot{constructor(A,D,L,q,oe,Oe,it,Ht){this.url=A,this.params=D,this.queryParams=L,this.fragment=q,this.data=oe,this.outlet=Oe,this.component=it,this._futureSnapshot=Ht}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(A=>vn(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(A=>vn(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wt(x,A="emptyOnly"){const D=x.pathFromRoot;let L=0;if("always"!==A)for(L=D.length-1;L>=1;){const q=D[L],oe=D[L-1];if(q.routeConfig&&""===q.routeConfig.path)L--;else{if(oe.component)break;L--}}return function yn(x){return x.reduce((A,D)=>({params:{...A.params,...D.params},data:{...A.data,...D.data},resolve:{...D.data,...A.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(L))}class Fn{constructor(A,D,L,q,oe,Oe,it,Ht,ln,gr,xn,ci){this.url=A,this.params=D,this.queryParams=L,this.fragment=q,this.data=oe,this.outlet=Oe,this.component=it,this.routeConfig=Ht,this._urlSegment=ln,this._lastPathIndex=gr,this._correctedLastPathIndex=ci??gr,this._resolve=xn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wn extends te{constructor(A,D){super(D),this.url=A,Nr(this,D)}toString(){return wi(this._root)}}function Nr(x,A){A.value._routerState=x,A.children.forEach(D=>Nr(x,D))}function wi(x){const A=x.children.length>0?` { ${x.children.map(wi).join(", ")} } `:"";return`${x.value}${A}`}function rt(x){if(x.snapshot){const A=x.snapshot,D=x._futureSnapshot;x.snapshot=D,Ze(A.queryParams,D.queryParams)||x.queryParams.next(D.queryParams),A.fragment!==D.fragment&&x.fragment.next(D.fragment),Ze(A.params,D.params)||x.params.next(D.params),function Ke(x,A){if(x.length!==A.length)return!1;for(let D=0;D<x.length;++D)if(!Ze(x[D],A[D]))return!1;return!0}(A.url,D.url)||x.url.next(D.url),Ze(A.data,D.data)||x.data.next(D.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function ct(x,A){const D=Ze(x.params,A.params)&&function pt(x,A){return Ut(x,A)&&x.every((D,L)=>Ze(D.parameters,A[L].parameters))}(x.url,A.url);return D&&!(!x.parent!=!A.parent)&&(!x.parent||ct(x.parent,A.parent))}function jt(x,A,D){if(D&&x.shouldReuseRoute(A.value,D.value.snapshot)){const L=D.value;L._futureSnapshot=A.value;const q=function tn(x,A,D){return A.children.map(L=>{for(const q of D.children)if(x.shouldReuseRoute(L.value,q.value.snapshot))return jt(x,L,q);return jt(x,L)})}(x,A,D);return new dt(L,q)}{if(x.shouldAttach(A.value)){const oe=x.retrieve(A.value);if(null!==oe){const Oe=oe.route;return Oe.value._futureSnapshot=A.value,Oe.children=A.children.map(it=>jt(x,it)),Oe}}const L=function An(x){return new Ot(new Xe.X(x.url),new Xe.X(x.params),new Xe.X(x.queryParams),new Xe.X(x.fragment),new Xe.X(x.data),x.outlet,x.component,x)}(A.value),q=A.children.map(oe=>jt(x,oe));return new dt(L,q)}}function xr(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function Wi(x){return"object"==typeof x&&null!=x&&x.outlets}function ws(x,A,D,L,q){let oe={};if(L&&Yt(L,(it,Ht)=>{oe[Ht]=Array.isArray(it)?it.map(ln=>`${ln}`):`${it}`}),x===A)return new ut(D,oe,q);const Oe=Is(x,A,D);return new ut(Oe,oe,q)}function Is(x,A,D){const L={};return Yt(x.children,(q,oe)=>{L[oe]=q===A?D:Is(q,A,D)}),new ke(x.segments,L)}class ns{constructor(A,D,L){if(this.isAbsolute=A,this.numberOfDoubleDots=D,this.commands=L,A&&L.length>0&&xr(L[0]))throw new O.vHH(4003,false);const q=L.find(Wi);if(q&&q!==We(L))throw new O.vHH(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Us{constructor(A,D,L){this.segmentGroup=A,this.processChildren=D,this.index=L}}function Ui(x,A,D){if(x||(x=new ke([],{})),0===x.segments.length&&x.hasChildren())return ps(x,A,D);const L=function rs(x,A,D){let L=0,q=A;const oe={match:!1,pathIndex:0,commandIndex:0};for(;q<x.segments.length;){if(L>=D.length)return oe;const Oe=x.segments[q],it=D[L];if(Wi(it))break;const Ht=`${it}`,ln=L<D.length-1?D[L+1]:null;if(q>0&&void 0===Ht)break;if(Ht&&ln&&"object"==typeof ln&&void 0===ln.outlets){if(!Go(Ht,ln,Oe))return oe;L+=2}else{if(!Go(Ht,{},Oe))return oe;L++}q++}return{match:!0,pathIndex:q,commandIndex:L}}(x,A,D),q=D.slice(L.commandIndex);if(L.match&&L.pathIndex<x.segments.length){const oe=new ke(x.segments.slice(0,L.pathIndex),{});return oe.children[Tn]=new ke(x.segments.slice(L.pathIndex),x.children),ps(oe,0,q)}return L.match&&0===q.length?new ke(x.segments,{}):L.match&&!x.hasChildren()?js(x,A,D):L.match?ps(x,0,q):js(x,A,D)}function ps(x,A,D){if(0===D.length)return new ke(x.segments,{});{const L=function xo(x){return Wi(x[0])?x[0].outlets:{[Tn]:x}}(D),q={};return Yt(L,(oe,Oe)=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(q[Oe]=Ui(x.children[Oe],A,oe))}),Yt(x.children,(oe,Oe)=>{void 0===L[Oe]&&(q[Oe]=oe)}),new ke(x.segments,q)}}function js(x,A,D){const L=x.segments.slice(0,A);let q=0;for(;q<D.length;){const oe=D[q];if(Wi(oe)){const Ht=Zs(oe.outlets);return new ke(L,Ht)}if(0===q&&xr(D[0])){L.push(new Me(x.segments[A].path,Qs(D[0]))),q++;continue}const Oe=Wi(oe)?oe.outlets[Tn]:`${oe}`,it=q<D.length-1?D[q+1]:null;Oe&&it&&xr(it)?(L.push(new Me(Oe,Qs(it))),q+=2):(L.push(new Me(Oe,{})),q++)}return new ke(L,{})}function Zs(x){const A={};return Yt(x,(D,L)=>{"string"==typeof D&&(D=[D]),null!==D&&(A[L]=js(new ke([],{}),0,D))}),A}function Qs(x){const A={};return Yt(x,(D,L)=>A[L]=`${D}`),A}function Go(x,A,D){return x==D.path&&Ze(A,D.parameters)}class ls{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new qi,this.attachRef=null}}class qi{constructor(){this.contexts=new Map}onChildOutletCreated(A,D){const L=this.getOrCreateContext(A);L.outlet=D,this.contexts.set(A,L)}onChildOutletDestroyed(A){const D=this.getContext(A);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let D=this.getContext(A);return D||(D=new ls,this.contexts.set(A,D)),D}getContext(A){return this.contexts.get(A)||null}}const jr=!1;let so=(()=>{class x{constructor(D,L,q,oe,Oe){this.parentContexts=D,this.location=L,this.changeDetector=oe,this.environmentInjector=Oe,this.activated=null,this._activatedRoute=null,this.activateEvents=new O.vpe,this.deactivateEvents=new O.vpe,this.attachEvents=new O.vpe,this.detachEvents=new O.vpe,this.name=q||Tn,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O.vHH(4012,jr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O.vHH(4012,jr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O.vHH(4012,jr);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,L){this.activated=D,this._activatedRoute=L,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,L){if(this.isActivated)throw new O.vHH(4013,jr);this._activatedRoute=D;const q=this.location,Oe=D._futureSnapshot.component,it=this.parentContexts.getOrCreateContext(this.name).children,Ht=new Rs(D,it,q.injector);if(L&&function Mo(x){return!!x.resolveComponentFactory}(L)){const ln=L.resolveComponentFactory(Oe);this.activated=q.createComponent(ln,q.length,Ht)}else this.activated=q.createComponent(Oe,{index:q.length,injector:Ht,environmentInjector:L??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(D){return new(D||x)(O.Y36(qi),O.Y36(O.s_b),O.$8M("name"),O.Y36(O.sBO),O.Y36(O.lqb))},x.\u0275dir=O.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),x})();class Rs{constructor(A,D,L){this.route=A,this.childContexts=D,this.parent=L}get(A,D){return A===Ot?this.route:A===qi?this.childContexts:this.parent.get(A,D)}}let gs=(()=>{class x{}return x.\u0275fac=function(D){return new(D||x)},x.\u0275cmp=O.Xpm({type:x,selectors:[["ng-component"]],decls:1,vars:0,template:function(D,L){1&D&&O._UZ(0,"router-outlet")},dependencies:[so],encapsulation:2}),x})();function Ro(x,A){return x.providers&&!x._injector&&(x._injector=(0,O.MMx)(x.providers,A,`Route: ${x.path}`)),x._injector??A}function Ci(x){const A=x.children&&x.children.map(Ci),D=A?{...x,children:A}:{...x};return!D.component&&!D.loadComponent&&(A||D.loadChildren)&&D.outlet&&D.outlet!==Tn&&(D.component=gs),D}function $(x){return x.outlet||Tn}function re(x,A){const D=x.filter(L=>$(L)===A);return D.push(...x.filter(L=>$(L)!==A)),D}function U(x){if(!x)return null;if(x.routeConfig?._injector)return x.routeConfig._injector;for(let A=x.parent;A;A=A.parent){const D=A.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class lt{constructor(A,D,L,q){this.routeReuseStrategy=A,this.futureState=D,this.currState=L,this.forwardEvent=q}activate(A){const D=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,L,A),rt(this.futureState.root),this.activateChildRoutes(D,L,A)}deactivateChildRoutes(A,D,L){const q=we(D);A.children.forEach(oe=>{const Oe=oe.value.outlet;this.deactivateRoutes(oe,q[Oe],L),delete q[Oe]}),Yt(q,(oe,Oe)=>{this.deactivateRouteAndItsChildren(oe,L)})}deactivateRoutes(A,D,L){const q=A.value,oe=D?D.value:null;if(q===oe)if(q.component){const Oe=L.getContext(q.outlet);Oe&&this.deactivateChildRoutes(A,D,Oe.children)}else this.deactivateChildRoutes(A,D,L);else oe&&this.deactivateRouteAndItsChildren(D,L)}deactivateRouteAndItsChildren(A,D){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,D):this.deactivateRouteAndOutlet(A,D)}detachAndStoreRouteSubtree(A,D){const L=D.getContext(A.value.outlet),q=L&&A.value.component?L.children:D,oe=we(A);for(const Oe of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[Oe],q);if(L&&L.outlet){const Oe=L.outlet.detach(),it=L.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:Oe,route:A,contexts:it})}}deactivateRouteAndOutlet(A,D){const L=D.getContext(A.value.outlet),q=L&&A.value.component?L.children:D,oe=we(A);for(const Oe of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[Oe],q);L&&L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated(),L.attachRef=null,L.resolver=null,L.route=null)}activateChildRoutes(A,D,L){const q=we(D);A.children.forEach(oe=>{this.activateRoutes(oe,q[oe.value.outlet],L),this.forwardEvent(new Yn(oe.value.snapshot))}),A.children.length&&this.forwardEvent(new qr(A.value.snapshot))}activateRoutes(A,D,L){const q=A.value,oe=D?D.value:null;if(rt(q),q===oe)if(q.component){const Oe=L.getOrCreateContext(q.outlet);this.activateChildRoutes(A,D,Oe.children)}else this.activateChildRoutes(A,D,L);else if(q.component){const Oe=L.getOrCreateContext(q.outlet);if(this.routeReuseStrategy.shouldAttach(q.snapshot)){const it=this.routeReuseStrategy.retrieve(q.snapshot);this.routeReuseStrategy.store(q.snapshot,null),Oe.children.onOutletReAttached(it.contexts),Oe.attachRef=it.componentRef,Oe.route=it.route.value,Oe.outlet&&Oe.outlet.attach(it.componentRef,it.route.value),rt(it.route.value),this.activateChildRoutes(A,null,Oe.children)}else{const it=U(q.snapshot),Ht=it?.get(O._Vd)??null;Oe.attachRef=null,Oe.route=q,Oe.resolver=Ht,Oe.injector=it,Oe.outlet&&Oe.outlet.activateWith(q,Oe.injector),this.activateChildRoutes(A,null,Oe.children)}}else this.activateChildRoutes(A,null,L)}}function Ft(x){return"function"==typeof x}function _n(x){return x instanceof ut}const vi=Symbol("INITIAL_VALUE");function Gr(){return(0,Ie.w)(x=>Te(x.map(A=>A.pipe((0,st.q)(1),(0,Rt.O)(vi)))).pipe((0,vt.R)((A,D)=>{let L=!1;return D.reduce((q,oe,Oe)=>q!==vi?q:(oe===vi&&(L=!0),L||!1!==oe&&Oe!==D.length-1&&!_n(oe)?q:oe),A)},vi),(0,Qe.h)(A=>A!==vi),(0,Be.U)(A=>_n(A)?A:!0===A),(0,st.q)(1)))}const Ri={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function E(x,A,D){if(""===A.path)return"full"===A.pathMatch&&(x.hasChildren()||D.length>0)?{...Ri}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const q=(A.matcher||Pr)(D,x,A);if(!q)return{...Ri};const oe={};Yt(q.posParams,(it,Ht)=>{oe[Ht]=it.path});const Oe=q.consumed.length>0?{...oe,...q.consumed[q.consumed.length-1].parameters}:oe;return{matched:!0,consumedSegments:q.consumed,remainingSegments:D.slice(q.consumed.length),parameters:Oe,positionalParamSegments:q.posParams??{}}}function H(x,A,D,L,q="corrected"){if(D.length>0&&function ie(x,A,D){return D.some(L=>cn(x,A,L)&&$(L)!==Tn)}(x,D,L)){const Oe=new ke(A,function j(x,A,D,L){const q={};q[Tn]=L,L._sourceSegment=x,L._segmentIndexShift=A.length;for(const oe of D)if(""===oe.path&&$(oe)!==Tn){const Oe=new ke([],{});Oe._sourceSegment=x,Oe._segmentIndexShift=A.length,q[$(oe)]=Oe}return q}(x,A,L,new ke(D,x.children)));return Oe._sourceSegment=x,Oe._segmentIndexShift=A.length,{segmentGroup:Oe,slicedSegments:[]}}if(0===D.length&&function xt(x,A,D){return D.some(L=>cn(x,A,L))}(x,D,L)){const Oe=new ke(x.segments,function I(x,A,D,L,q,oe){const Oe={};for(const it of L)if(cn(x,D,it)&&!q[$(it)]){const Ht=new ke([],{});Ht._sourceSegment=x,Ht._segmentIndexShift="legacy"===oe?x.segments.length:A.length,Oe[$(it)]=Ht}return{...q,...Oe}}(x,A,D,L,x.children,q));return Oe._sourceSegment=x,Oe._segmentIndexShift=A.length,{segmentGroup:Oe,slicedSegments:D}}const oe=new ke(x.segments,x.children);return oe._sourceSegment=x,oe._segmentIndexShift=A.length,{segmentGroup:oe,slicedSegments:D}}function cn(x,A,D){return(!(x.hasChildren()||A.length>0)||"full"!==D.pathMatch)&&""===D.path}function Mn(x,A,D,L){return!!($(x)===L||L!==Tn&&cn(A,D,x))&&("**"===x.path||E(A,x,D).matched)}function fr(x,A,D){return 0===A.length&&!x.children[D]}const Mr=!1;class bi{constructor(A){this.segmentGroup=A||null}}class fi{constructor(A){this.urlTree=A}}function $i(x){return Ve(new bi(x))}function z(x){return Ve(new fi(x))}class Bt{constructor(A,D,L,q,oe){this.injector=A,this.configLoader=D,this.urlSerializer=L,this.urlTree=q,this.config=oe,this.allowRedirects=!0}apply(){const A=H(this.urlTree.root,[],[],this.config).segmentGroup,D=new ke(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,D,Tn).pipe((0,Be.U)(oe=>this.createUrlTree(ui(oe),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pe(oe=>{if(oe instanceof fi)return this.allowRedirects=!1,this.match(oe.urlTree);throw oe instanceof bi?this.noMatchError(oe):oe}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,Tn).pipe((0,Be.U)(q=>this.createUrlTree(ui(q),A.queryParams,A.fragment))).pipe(pe(q=>{throw q instanceof bi?this.noMatchError(q):q}))}noMatchError(A){return new O.vHH(4002,Mr)}createUrlTree(A,D,L){const q=A.segments.length>0?new ke([],{[Tn]:A}):A;return new ut(q,D,L)}expandSegmentGroup(A,D,L,q){return 0===L.segments.length&&L.hasChildren()?this.expandChildren(A,D,L).pipe((0,Be.U)(oe=>new ke([],oe))):this.expandSegment(A,L,D,L.segments,q,!0)}expandChildren(A,D,L){const q=[];for(const oe of Object.keys(L.children))"primary"===oe?q.unshift(oe):q.push(oe);return(0,De.D)(q).pipe(le(oe=>{const Oe=L.children[oe],it=re(D,oe);return this.expandSegmentGroup(A,it,Oe,oe).pipe((0,Be.U)(Ht=>({segment:Ht,outlet:oe})))}),(0,vt.R)((oe,Oe)=>(oe[Oe.outlet]=Oe.segment,oe),{}),function yt(x,A){const D=arguments.length>=2;return L=>L.pipe(x?(0,Qe.h)((q,oe)=>x(q,oe,L)):_e.y,Tt(1),D?(0,Et.d)(A):(0,Gt.T)(()=>new Ge.K))}())}expandSegment(A,D,L,q,oe,Oe){return(0,De.D)(L).pipe(le(it=>this.expandSegmentAgainstRoute(A,D,L,it,q,oe,Oe).pipe(pe(ln=>{if(ln instanceof bi)return(0,W.of)(null);throw ln}))),(0,Vt.P)(it=>!!it),pe((it,Ht)=>{if(it instanceof Ge.K||"EmptyError"===it.name)return fr(D,q,oe)?(0,W.of)(new ke([],{})):$i(D);throw it}))}expandSegmentAgainstRoute(A,D,L,q,oe,Oe,it){return Mn(q,D,oe,Oe)?void 0===q.redirectTo?this.matchSegmentAgainstRoute(A,D,q,oe,Oe):it&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,D,L,q,oe,Oe):$i(D):$i(D)}expandSegmentAgainstRouteUsingRedirect(A,D,L,q,oe,Oe){return"**"===q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,L,q,Oe):this.expandRegularSegmentAgainstRouteUsingRedirect(A,D,L,q,oe,Oe)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,D,L,q){const oe=this.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?z(oe):this.lineralizeSegments(L,oe).pipe((0,fe.z)(Oe=>{const it=new ke(Oe,{});return this.expandSegment(A,it,D,Oe,q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,D,L,q,oe,Oe){const{matched:it,consumedSegments:Ht,remainingSegments:ln,positionalParamSegments:gr}=E(D,q,oe);if(!it)return $i(D);const xn=this.applyRedirectCommands(Ht,q.redirectTo,gr);return q.redirectTo.startsWith("/")?z(xn):this.lineralizeSegments(q,xn).pipe((0,fe.z)(ci=>this.expandSegment(A,D,L,ci.concat(ln),Oe,!1)))}matchSegmentAgainstRoute(A,D,L,q,oe){if("**"===L.path)return A=Ro(L,A),L.loadChildren?(L._loadedRoutes?(0,W.of)({routes:L._loadedRoutes,injector:L._loadedInjector}):this.configLoader.loadChildren(A,L)).pipe((0,Be.U)(xn=>(L._loadedRoutes=xn.routes,L._loadedInjector=xn.injector,new ke(q,{})))):(0,W.of)(new ke(q,{}));const{matched:Oe,consumedSegments:it,remainingSegments:Ht}=E(D,L,q);return Oe?(A=Ro(L,A),this.getChildConfig(A,L,q).pipe((0,fe.z)(gr=>{const xn=gr.injector??A,ci=gr.routes,{segmentGroup:It,slicedSegments:Cs}=H(D,it,Ht,ci),Fs=new ke(It.segments,It.children);if(0===Cs.length&&Fs.hasChildren())return this.expandChildren(xn,ci,Fs).pipe((0,Be.U)(No=>new ke(it,No)));if(0===ci.length&&0===Cs.length)return(0,W.of)(new ke(it,{}));const Eu=$(L)===oe;return this.expandSegment(xn,Fs,ci,Cs,Eu?Tn:oe,!0).pipe((0,Be.U)(zs=>new ke(it.concat(zs.segments),zs.children)))}))):$i(D)}getChildConfig(A,D,L){return D.children?(0,W.of)({routes:D.children,injector:A}):D.loadChildren?void 0!==D._loadedRoutes?(0,W.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):this.runCanLoadGuards(A,D,L).pipe((0,fe.z)(q=>q?this.configLoader.loadChildren(A,D).pipe((0,fn.b)(oe=>{D._loadedRoutes=oe.routes,D._loadedInjector=oe.injector})):function F(x){return Ve(ti(Mr))}())):(0,W.of)({routes:[],injector:A})}runCanLoadGuards(A,D,L){const q=D.canLoad;if(!q||0===q.length)return(0,W.of)(!0);const oe=q.map(Oe=>{const it=A.get(Oe);return un(function ai(x){return x&&Ft(x.canLoad)}(it)?it.canLoad(D,L):it(D,L))});return(0,W.of)(oe).pipe(Gr(),(0,fn.b)(Oe=>{if(!_n(Oe))return;const it=ti(hi+this.urlSerializer.serialize(Oe));throw it.url=Oe,it}),(0,Be.U)(Oe=>!0===Oe))}lineralizeSegments(A,D){let L=[],q=D.root;for(;;){if(L=L.concat(q.segments),0===q.numberOfChildren)return(0,W.of)(L);if(q.numberOfChildren>1||!q.children[Tn])return Ve(new O.vHH(4e3,Mr));q=q.children[Tn]}}applyRedirectCommands(A,D,L){return this.applyRedirectCreatreUrlTree(D,this.urlSerializer.parse(D),A,L)}applyRedirectCreatreUrlTree(A,D,L,q){const oe=this.createSegmentGroup(A,D.root,L,q);return new ut(oe,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(A,D){const L={};return Yt(A,(q,oe)=>{if("string"==typeof q&&q.startsWith(":")){const it=q.substring(1);L[oe]=D[it]}else L[oe]=q}),L}createSegmentGroup(A,D,L,q){const oe=this.createSegments(A,D.segments,L,q);let Oe={};return Yt(D.children,(it,Ht)=>{Oe[Ht]=this.createSegmentGroup(A,it,L,q)}),new ke(oe,Oe)}createSegments(A,D,L,q){return D.map(oe=>oe.path.startsWith(":")?this.findPosParam(A,oe,q):this.findOrReturn(oe,L))}findPosParam(A,D,L){const q=L[D.path.substring(1)];if(!q)throw new O.vHH(4001,Mr);return q}findOrReturn(A,D){let L=0;for(const q of D){if(q.path===A.path)return D.splice(L),q;L++}return A}}function ui(x){const A={};for(const L of Object.keys(x.children)){const oe=ui(x.children[L]);(oe.segments.length>0||oe.hasChildren())&&(A[L]=oe)}return function Pn(x){if(1===x.numberOfChildren&&x.children[Tn]){const A=x.children[Tn];return new ke(x.segments.concat(A.segments),A.children)}return x}(new ke(x.segments,A))}class Ps{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class fo{constructor(A,D){this.component=A,this.route=D}}function Oo(x,A,D){const L=x._root;return ra(L,A?A._root:null,D,[L.value])}function go(x,A,D){return(U(A)??D).get(x)}function ra(x,A,D,L,q={canDeactivateChecks:[],canActivateChecks:[]}){const oe=we(A);return x.children.forEach(Oe=>{(function cs(x,A,D,L,q={canDeactivateChecks:[],canActivateChecks:[]}){const oe=x.value,Oe=A?A.value:null,it=D?D.getContext(x.value.outlet):null;if(Oe&&oe.routeConfig===Oe.routeConfig){const Ht=function $a(x,A,D){if("function"==typeof D)return D(x,A);switch(D){case"pathParamsChange":return!Ut(x.url,A.url);case"pathParamsOrQueryParamsChange":return!Ut(x.url,A.url)||!Ze(x.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ct(x,A)||!Ze(x.queryParams,A.queryParams);default:return!ct(x,A)}}(Oe,oe,oe.routeConfig.runGuardsAndResolvers);Ht?q.canActivateChecks.push(new Ps(L)):(oe.data=Oe.data,oe._resolvedData=Oe._resolvedData),ra(x,A,oe.component?it?it.children:null:D,L,q),Ht&&it&&it.outlet&&it.outlet.isActivated&&q.canDeactivateChecks.push(new fo(it.outlet.component,Oe))}else Oe&&Wo(A,it,q),q.canActivateChecks.push(new Ps(L)),ra(x,null,oe.component?it?it.children:null:D,L,q)})(Oe,oe[Oe.value.outlet],D,L.concat([Oe.value]),q),delete oe[Oe.value.outlet]}),Yt(oe,(Oe,it)=>Wo(Oe,D.getContext(it),q)),q}function Wo(x,A,D){const L=we(x),q=x.value;Yt(L,(oe,Oe)=>{Wo(oe,q.component?A?A.children.getContext(Oe):null:A,D)}),D.canDeactivateChecks.push(new fo(q.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,q))}class _i{}function Ql(x){return new Z.y(A=>A.error(x))}class mo{constructor(A,D,L,q,oe,Oe){this.rootComponentType=A,this.config=D,this.urlTree=L,this.url=q,this.paramsInheritanceStrategy=oe,this.relativeLinkResolution=Oe}recognize(){const A=H(this.urlTree.root,[],[],this.config.filter(Oe=>void 0===Oe.redirectTo),this.relativeLinkResolution).segmentGroup,D=this.processSegmentGroup(this.config,A,Tn);if(null===D)return null;const L=new Fn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tn,this.rootComponentType,null,this.urlTree.root,-1,{}),q=new dt(L,D),oe=new Wn(this.url,q);return this.inheritParamsAndData(oe._root),oe}inheritParamsAndData(A){const D=A.value,L=Wt(D,this.paramsInheritanceStrategy);D.params=Object.freeze(L.params),D.data=Object.freeze(L.data),A.children.forEach(q=>this.inheritParamsAndData(q))}processSegmentGroup(A,D,L){return 0===D.segments.length&&D.hasChildren()?this.processChildren(A,D):this.processSegment(A,D,D.segments,L)}processChildren(A,D){const L=[];for(const oe of Object.keys(D.children)){const Oe=D.children[oe],it=re(A,oe),Ht=this.processSegmentGroup(it,Oe,oe);if(null===Ht)return null;L.push(...Ht)}const q=va(L);return function fu(x){x.sort((A,D)=>A.value.outlet===Tn?-1:D.value.outlet===Tn?1:A.value.outlet.localeCompare(D.value.outlet))}(q),q}processSegment(A,D,L,q){for(const oe of A){const Oe=this.processSegmentAgainstRoute(oe,D,L,q);if(null!==Oe)return Oe}return fr(D,L,q)?[]:null}processSegmentAgainstRoute(A,D,L,q){if(A.redirectTo||!Mn(A,D,L,q))return null;let oe,Oe=[],it=[];if("**"===A.path){const It=L.length>0?We(L).parameters:{},Cs=ks(D)+L.length;oe=new Fn(L,It,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qo(A),$(A),A.component??A._loadedComponent??null,A,Ss(D),Cs,ia(A),Cs)}else{const It=E(D,A,L);if(!It.matched)return null;Oe=It.consumedSegments,it=It.remainingSegments;const Cs=ks(D)+Oe.length;oe=new Fn(Oe,It.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qo(A),$(A),A.component??A._loadedComponent??null,A,Ss(D),Cs,ia(A),Cs)}const Ht=function al(x){return x.children?x.children:x.loadChildren?x._loadedRoutes:[]}(A),{segmentGroup:ln,slicedSegments:gr}=H(D,Oe,it,Ht.filter(It=>void 0===It.redirectTo),this.relativeLinkResolution);if(0===gr.length&&ln.hasChildren()){const It=this.processChildren(Ht,ln);return null===It?null:[new dt(oe,It)]}if(0===Ht.length&&0===gr.length)return[new dt(oe,[])];const xn=$(A)===q,ci=this.processSegment(Ht,ln,gr,xn?Tn:q);return null===ci?null:[new dt(oe,ci)]}}function hs(x){const A=x.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function va(x){const A=[],D=new Set;for(const L of x){if(!hs(L)){A.push(L);continue}const q=A.find(oe=>L.value.routeConfig===oe.value.routeConfig);void 0!==q?(q.children.push(...L.children),D.add(q)):A.push(L)}for(const L of D){const q=va(L.children);A.push(new dt(L.value,q))}return A.filter(L=>!D.has(L))}function Ss(x){let A=x;for(;A._sourceSegment;)A=A._sourceSegment;return A}function ks(x){let A=x,D=A._segmentIndexShift??0;for(;A._sourceSegment;)A=A._sourceSegment,D+=A._segmentIndexShift??0;return D-1}function qo(x){return x.data||{}}function ia(x){return x.resolve||{}}const Gs=Symbol("RouteTitle");function ji(x){return"string"==typeof x.title||null===x.title}function ll(x){return(0,Ie.w)(A=>{const D=x(A);return D?(0,De.D)(D).pipe((0,Be.U)(()=>A)):(0,W.of)(A)})}class Xo{}class _a extends class gu{shouldDetach(A){return!1}store(A,D){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,D){return A.routeConfig===D.routeConfig}}{}const Ns=new O.OlP("ROUTES");let Ua=(()=>{class x{constructor(D,L){this.injector=D,this.compiler=L,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,W.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const L=un(D.loadComponent()).pipe((0,fn.b)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=oe}),Ye(()=>{this.componentLoaders.delete(D)})),q=new bt(L,()=>new qe.x).pipe(Ae());return this.componentLoaders.set(D,q),q}loadChildren(D,L){if(this.childrenLoaders.get(L))return this.childrenLoaders.get(L);if(L._loadedRoutes)return(0,W.of)({routes:L._loadedRoutes,injector:L._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(L);const oe=this.loadModuleFactoryOrRoutes(L.loadChildren).pipe((0,Be.U)(it=>{this.onLoadEndListener&&this.onLoadEndListener(L);let Ht,ln,gr=!1;Array.isArray(it)?ln=it:(Ht=it.create(D).injector,ln=tt(Ht.get(Ns,[],O.XFs.Self|O.XFs.Optional)));return{routes:ln.map(Ci),injector:Ht}}),Ye(()=>{this.childrenLoaders.delete(L)})),Oe=new bt(oe,()=>new qe.x).pipe(Ae());return this.childrenLoaders.set(L,Oe),Oe}loadModuleFactoryOrRoutes(D){return un(D()).pipe((0,fe.z)(L=>L instanceof O.YKP||Array.isArray(L)?(0,W.of)(L):(0,De.D)(this.compiler.compileModuleAsync(L))))}}return x.\u0275fac=function(D){return new(D||x)(O.LFG(O.zs3),O.LFG(O.Sil))},x.\u0275prov=O.Yz7({token:x,factory:x.\u0275fac}),x})();class is{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,D){return A}}function ul(x){throw x}function vo(x,A,D){return A.parse("/")}const Rc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ki=(()=>{class x{constructor(D,L,q,oe,Oe,it,Ht){this.rootComponentType=D,this.urlSerializer=L,this.rootContexts=q,this.location=oe,this.config=Ht,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qe.x,this.errorHandler=ul,this.malformedUriErrorHandler=vo,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,W.of)(void 0),this.urlHandlingStrategy=new is,this.routeReuseStrategy=new _a,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Oe.get(Ua),this.configLoader.onLoadEndListener=ci=>this.triggerEvent(new dr(ci)),this.configLoader.onLoadStartListener=ci=>this.triggerEvent(new gi(ci)),this.ngModule=Oe.get(O.h0i),this.console=Oe.get(O.c2e);const xn=Oe.get(O.R0b);this.isNgZoneEnabled=xn instanceof O.R0b&&O.R0b.isInAngularZone(),this.resetConfig(Ht),this.currentUrlTree=function On(){return new ut(new ke([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gt(this.currentUrlTree,this.rootComponentType),this.transitions=new Xe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(D){const L=this.events;return D.pipe((0,Qe.h)(q=>0!==q.id),(0,Be.U)(q=>({...q,extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),(0,Ie.w)(q=>{let oe=!1,Oe=!1;return(0,W.of)(q).pipe((0,fn.b)(it=>{this.currentNavigation={id:it.id,initialUrl:it.rawUrl,extractedUrl:it.extractedUrl,trigger:it.source,extras:it.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ie.w)(it=>{const Ht=this.browserUrlTree.toString(),ln=!this.navigated||it.extractedUrl.toString()!==Ht||Ht!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ln)&&this.urlHandlingStrategy.shouldProcessUrl(it.rawUrl))return ni(it.source)&&(this.browserUrlTree=it.extractedUrl),(0,W.of)(it).pipe((0,Ie.w)(xn=>{const ci=this.transitions.getValue();return L.next(new In(xn.id,this.serializeUrl(xn.extractedUrl),xn.source,xn.restoredState)),ci!==this.transitions.getValue()?ee.E:Promise.resolve(xn)}),function us(x,A,D,L){return(0,Ie.w)(q=>function ce(x,A,D,L,q){return new Bt(x,A,D,L,q).apply()}(x,A,D,q.extractedUrl,L).pipe((0,Be.U)(oe=>({...q,urlAfterRedirects:oe}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fn.b)(xn=>{this.currentNavigation={...this.currentNavigation,finalUrl:xn.urlAfterRedirects}}),function yo(x,A,D,L,q){return(0,fe.z)(oe=>function ya(x,A,D,L,q="emptyOnly",oe="legacy"){try{const Oe=new mo(x,A,D,L,q,oe).recognize();return null===Oe?Ql(new _i):(0,W.of)(Oe)}catch(Oe){return Ql(Oe)}}(x,A,oe.urlAfterRedirects,D(oe.urlAfterRedirects),L,q).pipe((0,Be.U)(Oe=>({...oe,targetSnapshot:Oe}))))}(this.rootComponentType,this.config,xn=>this.serializeUrl(xn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fn.b)(xn=>{if("eager"===this.urlUpdateStrategy){if(!xn.extras.skipLocationChange){const It=this.urlHandlingStrategy.merge(xn.urlAfterRedirects,xn.rawUrl);this.setBrowserUrl(It,xn)}this.browserUrlTree=xn.urlAfterRedirects}const ci=new Dt(xn.id,this.serializeUrl(xn.extractedUrl),this.serializeUrl(xn.urlAfterRedirects),xn.targetSnapshot);L.next(ci)}));if(ln&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ci,extractedUrl:It,source:Cs,restoredState:Fs,extras:Eu}=it,Sa=new In(ci,this.serializeUrl(It),Cs,Fs);L.next(Sa);const zs=gt(It,this.rootComponentType).snapshot;return(0,W.of)({...it,targetSnapshot:zs,urlAfterRedirects:It,extras:{...Eu,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=it.rawUrl,it.resolve(null),ee.E}),(0,fn.b)(it=>{const Ht=new Sr(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(Ht)}),(0,Be.U)(it=>({...it,guards:Oo(it.targetSnapshot,it.currentSnapshot,this.rootContexts)})),function Ol(x,A){return(0,fe.z)(D=>{const{targetSnapshot:L,currentSnapshot:q,guards:{canActivateChecks:oe,canDeactivateChecks:Oe}}=D;return 0===Oe.length&&0===oe.length?(0,W.of)({...D,guardsResult:!0}):function ol(x,A,D,L){return(0,De.D)(x).pipe((0,fe.z)(q=>function ds(x,A,D,L,q){const oe=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,W.of)(!0);const Oe=oe.map(it=>{const Ht=go(it,A,q);return un(function br(x){return x&&Ft(x.canDeactivate)}(Ht)?Ht.canDeactivate(x,A,D,L):Ht(x,A,D,L)).pipe((0,Vt.P)())});return(0,W.of)(Oe).pipe(Gr())}(q.component,q.route,D,A,L)),(0,Vt.P)(q=>!0!==q,!0))}(Oe,L,q,x).pipe((0,fe.z)(it=>it&&function Ct(x){return"boolean"==typeof x}(it)?function Pl(x,A,D,L){return(0,De.D)(A).pipe(le(q=>(0,Je.z)(function Zl(x,A){return null!==x&&A&&A(new ei(x)),(0,W.of)(!0)}(q.route.parent,L),function kl(x,A){return null!==x&&A&&A(new mi(x)),(0,W.of)(!0)}(q.route,L),function Po(x,A,D){const L=A[A.length-1],oe=A.slice(0,A.length-1).reverse().map(Oe=>function po(x){const A=x.routeConfig?x.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:x,guards:A}:null}(Oe)).filter(Oe=>null!==Oe).map(Oe=>(0,et.P)(()=>{const it=Oe.guards.map(Ht=>{const ln=go(Ht,Oe.node,D);return un(function li(x){return x&&Ft(x.canActivateChild)}(ln)?ln.canActivateChild(L,x):ln(L,x)).pipe((0,Vt.P)())});return(0,W.of)(it).pipe(Gr())}));return(0,W.of)(oe).pipe(Gr())}(x,q.path,D),function Nl(x,A,D){const L=A.routeConfig?A.routeConfig.canActivate:null;if(!L||0===L.length)return(0,W.of)(!0);const q=L.map(oe=>(0,et.P)(()=>{const Oe=go(oe,A,D);return un(function Jr(x){return x&&Ft(x.canActivate)}(Oe)?Oe.canActivate(A,x):Oe(A,x)).pipe((0,Vt.P)())}));return(0,W.of)(q).pipe(Gr())}(x,q.route,D))),(0,Vt.P)(q=>!0!==q,!0))}(L,oe,x,A):(0,W.of)(it)),(0,Be.U)(it=>({...D,guardsResult:it})))})}(this.ngModule.injector,it=>this.triggerEvent(it)),(0,fn.b)(it=>{if(_n(it.guardsResult)){const ln=ti(`Redirecting to "${this.serializeUrl(it.guardsResult)}"`);throw ln.url=it.guardsResult,ln}const Ht=new Zn(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot,!!it.guardsResult);this.triggerEvent(Ht)}),(0,Qe.h)(it=>!!it.guardsResult||(this.restoreHistory(it),this.cancelNavigationTransition(it,""),!1)),ll(it=>{if(it.guards.canActivateChecks.length)return(0,W.of)(it).pipe((0,fn.b)(Ht=>{const ln=new rr(Ht.id,this.serializeUrl(Ht.extractedUrl),this.serializeUrl(Ht.urlAfterRedirects),Ht.targetSnapshot);this.triggerEvent(ln)}),(0,Ie.w)(Ht=>{let ln=!1;return(0,W.of)(Ht).pipe(function Xs(x,A){return(0,fe.z)(D=>{const{targetSnapshot:L,guards:{canActivateChecks:q}}=D;if(!q.length)return(0,W.of)(D);let oe=0;return(0,De.D)(q).pipe(le(Oe=>function sa(x,A,D,L){const q=x.routeConfig,oe=x._resolve;return void 0!==q?.title&&!ji(q)&&(oe[Gs]=q.title),function Pi(x,A,D,L){const q=function Ll(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}(x);if(0===q.length)return(0,W.of)({});const oe={};return(0,De.D)(q).pipe((0,fe.z)(Oe=>function pu(x,A,D,L){const q=go(x,A,L);return un(q.resolve?q.resolve(A,D):q(A,D))}(x[Oe],A,D,L).pipe((0,Vt.P)(),(0,fn.b)(it=>{oe[Oe]=it}))),Tt(1),function be(x){return(0,Be.U)(()=>x)}(oe),pe(Oe=>Oe instanceof Ge.K?ee.E:Ve(Oe)))}(oe,x,A,L).pipe((0,Be.U)(Oe=>(x._resolvedData=Oe,x.data=Wt(x,D).resolve,q&&ji(q)&&(x.data[Gs]=q.title),null)))}(Oe.route,L,x,A)),(0,fn.b)(()=>oe++),Tt(1),(0,fe.z)(Oe=>oe===q.length?(0,W.of)(D):ee.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fn.b)({next:()=>ln=!0,complete:()=>{ln||(this.restoreHistory(Ht),this.cancelNavigationTransition(Ht,"At least one route resolver didn't emit any value."))}}))}),(0,fn.b)(Ht=>{const ln=new yr(Ht.id,this.serializeUrl(Ht.extractedUrl),this.serializeUrl(Ht.urlAfterRedirects),Ht.targetSnapshot);this.triggerEvent(ln)}))}),ll(it=>{const Ht=ln=>{const gr=[];ln.routeConfig?.loadComponent&&!ln.routeConfig._loadedComponent&&gr.push(this.configLoader.loadComponent(ln.routeConfig).pipe((0,fn.b)(xn=>{ln.component=xn}),(0,Be.U)(()=>{})));for(const xn of ln.children)gr.push(...Ht(xn));return gr};return Te(Ht(it.targetSnapshot.root)).pipe((0,Et.d)(),(0,st.q)(1))}),ll(()=>this.afterPreactivation()),(0,Be.U)(it=>{const Ht=function _t(x,A,D){const L=jt(x,A._root,D?D._root:void 0);return new Pe(L,A)}(this.routeReuseStrategy,it.targetSnapshot,it.currentRouterState);return{...it,targetRouterState:Ht}}),(0,fn.b)(it=>{this.currentUrlTree=it.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(it.urlAfterRedirects,it.rawUrl),this.routerState=it.targetRouterState,"deferred"===this.urlUpdateStrategy&&(it.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,it),this.browserUrlTree=it.urlAfterRedirects)}),((x,A,D)=>(0,Be.U)(L=>(new lt(A,L.targetRouterState,L.currentRouterState,D).activate(x),L)))(this.rootContexts,this.routeReuseStrategy,it=>this.triggerEvent(it)),(0,fn.b)({next(){oe=!0},complete(){oe=!0}}),Ye(()=>{oe||Oe||this.cancelNavigationTransition(q,`Navigation ID ${q.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===q.id&&(this.currentNavigation=null)}),pe(it=>{if(Oe=!0,function Er(x){return x&&x[Zr]}(it)){const Ht=_n(it.url);Ht||(this.navigated=!0,this.restoreHistory(q,!0));const ln=new Qt(q.id,this.serializeUrl(q.extractedUrl),it.message);if(L.next(ln),Ht){const gr=this.urlHandlingStrategy.merge(it.url,this.rawUrlTree),xn={skipLocationChange:q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ni(q.source)};this.scheduleNavigation(gr,"imperative",null,xn,{resolve:q.resolve,reject:q.reject,promise:q.promise})}else q.resolve(!1)}else{this.restoreHistory(q,!0);const Ht=new kn(q.id,this.serializeUrl(q.extractedUrl),it);L.next(Ht);try{q.resolve(this.errorHandler(it))}catch(ln){q.reject(ln)}}return ee.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next({...this.transitions.value,...D})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const L="popstate"===D.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{const q={replaceUrl:!0},oe=D.state?.navigationId?D.state:null;if(oe){const it={...oe};delete it.navigationId,delete it.\u0275routerPageId,0!==Object.keys(it).length&&(q.state=it)}const Oe=this.parseUrl(D.url);this.scheduleNavigation(Oe,L,oe,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){this.config=D.map(Ci),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,L={}){const{relativeTo:q,queryParams:oe,fragment:Oe,queryParamsHandling:it,preserveFragment:Ht}=L,ln=q||this.routerState.root,gr=Ht?this.currentUrlTree.fragment:Oe;let xn=null;switch(it){case"merge":xn={...this.currentUrlTree.queryParams,...oe};break;case"preserve":xn=this.currentUrlTree.queryParams;break;default:xn=oe||null}return null!==xn&&(xn=this.removeEmptyProps(xn)),function Vi(x,A,D,L,q){if(0===D.length)return ws(A.root,A.root,A.root,L,q);const oe=function Ys(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new ns(!0,0,x);let A=0,D=!1;const L=x.reduce((q,oe,Oe)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const it={};return Yt(oe.outlets,(Ht,ln)=>{it[ln]="string"==typeof Ht?Ht.split("/"):Ht}),[...q,{outlets:it}]}if(oe.segmentPath)return[...q,oe.segmentPath]}return"string"!=typeof oe?[...q,oe]:0===Oe?(oe.split("/").forEach((it,Ht)=>{0==Ht&&"."===it||(0==Ht&&""===it?D=!0:".."===it?A++:""!=it&&q.push(it))}),q):[...q,oe]},[]);return new ns(D,A,L)}(D);return oe.toRoot()?ws(A.root,A.root,new ke([],{}),L,q):function Oe(Ht){const ln=function Ks(x,A,D,L){return x.isAbsolute?new Us(A.root,!0,0):-1===L?new Us(D,D===A.root,0):function Ms(x,A,D){let L=x,q=A,oe=D;for(;oe>q;){if(oe-=q,L=L.parent,!L)throw new O.vHH(4005,!1);q=L.segments.length}return new Us(L,!1,q-oe)}(D,L+(xr(x.commands[0])?0:1),x.numberOfDoubleDots)}(oe,A,x.snapshot?._urlSegment,Ht),gr=ln.processChildren?ps(ln.segmentGroup,ln.index,oe.commands):Ui(ln.segmentGroup,ln.index,oe.commands);return ws(A.root,ln.segmentGroup,gr,L,q)}(x.snapshot?._lastPathIndex)}(ln,this.currentUrlTree,D,xn,gr??null)}navigateByUrl(D,L={skipLocationChange:!1}){const q=_n(D)?D:this.parseUrl(D),oe=this.urlHandlingStrategy.merge(q,this.rawUrlTree);return this.scheduleNavigation(oe,"imperative",null,L)}navigate(D,L={skipLocationChange:!1}){return function Xl(x){for(let A=0;A<x.length;A++){if(null==x[A])throw new O.vHH(4008,!1)}}(D),this.navigateByUrl(this.createUrlTree(D,L),L)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let L;try{L=this.urlSerializer.parse(D)}catch(q){L=this.malformedUriErrorHandler(q,this.urlSerializer,D)}return L}isActive(D,L){let q;if(q=!0===L?{...Rc}:!1===L?{...cl}:L,_n(D))return Jn(this.currentUrlTree,D,q);const oe=this.parseUrl(D);return Jn(this.currentUrlTree,oe,q)}removeEmptyProps(D){return Object.keys(D).reduce((L,q)=>{const oe=D[q];return null!=oe&&(L[q]=oe),L},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new En(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,L,q,oe,Oe){if(this.disposed)return Promise.resolve(!1);let it,Ht,ln;Oe?(it=Oe.resolve,Ht=Oe.reject,ln=Oe.promise):ln=new Promise((ci,It)=>{it=ci,Ht=It});const gr=++this.navigationId;let xn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(q=this.location.getState()),xn=q&&q.\u0275routerPageId?q.\u0275routerPageId:oe.replaceUrl||oe.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):xn=0,this.setTransition({id:gr,targetPageId:xn,source:L,restoredState:q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:oe,resolve:it,reject:Ht,promise:ln,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ln.catch(ci=>Promise.reject(ci))}setBrowserUrl(D,L){const q=this.urlSerializer.serialize(D),oe={...L.extras.state,...this.generateNgRouterState(L.id,L.targetPageId)};this.location.isCurrentPathEqualTo(q)||L.extras.replaceUrl?this.location.replaceState(q,"",oe):this.location.go(q,"",oe)}restoreHistory(D,L=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===q?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===q&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(q)}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,L){const q=new Qt(D.id,this.serializeUrl(D.extractedUrl),L);this.triggerEvent(q),D.resolve(!1)}generateNgRouterState(D,L){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:L}:{navigationId:D}}}return x.\u0275fac=function(D){O.$Z()},x.\u0275prov=O.Yz7({token:x,factory:x.\u0275fac}),x})();function ni(x){return"imperative"!==x}let ja=(()=>{class x{constructor(D,L,q,oe,Oe){this.router=D,this.route=L,this.tabIndexAttribute=q,this.renderer=oe,this.el=Oe,this.commands=null,this.onChanges=new qe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const L=this.renderer,q=this.el.nativeElement;null!==D?L.setAttribute(q,"tabindex",D):L.removeAttribute(q,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const D={skipLocationChange:(0,O.D6c)(this.skipLocationChange),replaceUrl:(0,O.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,D),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,O.D6c)(this.preserveFragment)})}}return x.\u0275fac=function(D){return new(D||x)(O.Y36(ki),O.Y36(Ot),O.$8M("tabindex"),O.Y36(O.Qsj),O.Y36(O.SBq))},x.\u0275dir=O.lG2({type:x,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,L){1&D&&O.NdJ("click",function(){return L.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[O.TTD]}),x})(),_o=(()=>{class x{constructor(D,L,q){this.router=D,this.route=L,this.locationStrategy=q,this.commands=null,this.href=null,this.onChanges=new qe.x,this.subscription=D.events.subscribe(oe=>{oe instanceof En&&this.updateTargetUrlAndHref()})}set routerLink(D){this.commands=null!=D?Array.isArray(D)?D:[D]:null}ngOnChanges(D){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(D,L,q,oe,Oe){if(0!==D||L||q||oe||Oe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const it={skipLocationChange:(0,O.D6c)(this.skipLocationChange),replaceUrl:(0,O.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,it),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,O.D6c)(this.preserveFragment)})}}return x.\u0275fac=function(D){return new(D||x)(O.Y36(ki),O.Y36(Ot),O.Y36(d.S$))},x.\u0275dir=O.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(D,L){1&D&&O.NdJ("click",function(oe){return L.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&D&&O.uIk("target",L.target)("href",L.href,O.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[O.TTD]}),x})();class Eo{buildTitle(A){let D,L=A.root;for(;void 0!==L;)D=this.getResolvedTitleForRoute(L)??D,L=L.children.find(q=>q.outlet===Tn);return D}getResolvedTitleForRoute(A){return A.data[Gs]}}let Ea=(()=>{class x extends Eo{constructor(D){super(),this.title=D}updateTitle(D){const L=this.buildTitle(D);void 0!==L&&this.title.setTitle(L)}}return x.\u0275fac=function(D){return new(D||x)(O.LFG(Dn.Dx))},x.\u0275prov=O.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();class dl{}let rn=(()=>{class x{preload(D,L){return L().pipe(pe(()=>(0,W.of)(null)))}}return x.\u0275fac=function(D){return new(D||x)},x.\u0275prov=O.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),wa=(()=>{class x{constructor(D,L,q,oe,Oe){this.router=D,this.injector=q,this.preloadingStrategy=oe,this.loader=Oe}setUpPreloading(){this.subscription=this.router.events.pipe((0,Qe.h)(D=>D instanceof En),le(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,L){const q=[];for(const oe of L){oe.providers&&!oe._injector&&(oe._injector=(0,O.MMx)(oe.providers,D,`Route: ${oe.path}`));const Oe=oe._injector??D,it=oe._loadedInjector??Oe;oe.loadChildren&&!oe._loadedRoutes||oe.loadComponent&&!oe._loadedComponent?q.push(this.preloadConfig(Oe,oe)):(oe.children||oe._loadedRoutes)&&q.push(this.processRoutes(it,oe.children??oe._loadedRoutes))}return(0,De.D)(q).pipe((0,hn.J)())}preloadConfig(D,L){return this.preloadingStrategy.preload(L,()=>{let q;q=L.loadChildren&&void 0===L.canLoad?this.loader.loadChildren(D,L):(0,W.of)(null);const oe=q.pipe((0,fe.z)(Oe=>null===Oe?(0,W.of)(void 0):(L._loadedRoutes=Oe.routes,L._loadedInjector=Oe.injector,this.processRoutes(Oe.injector??D,Oe.routes))));if(L.loadComponent&&!L._loadedComponent){const Oe=this.loader.loadComponent(L);return(0,De.D)([oe,Oe]).pipe((0,hn.J)())}return oe})}}return x.\u0275fac=function(D){return new(D||x)(O.LFG(ki),O.LFG(O.Sil),O.LFG(O.lqb),O.LFG(dl),O.LFG(Ua))},x.\u0275prov=O.Yz7({token:x,factory:x.\u0275fac}),x})();const ko=new O.OlP("");let Ln=(()=>{class x{constructor(D,L,q={}){this.router=D,this.viewportScroller=L,this.options=q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},q.scrollPositionRestoration=q.scrollPositionRestoration||"disabled",q.anchorScrolling=q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof In?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof En&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof en&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,L){this.router.triggerEvent(new en(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(D){O.$Z()},x.\u0275prov=O.Yz7({token:x,factory:x.\u0275fac}),x})();const wn=new O.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),Nt=new O.OlP("ROUTER_FORROOT_GUARD"),Jt=new O.OlP(""),Di=[d.Ye,{provide:qn,useClass:hr},{provide:ki,useFactory:function oo(x,A,D,L,q,oe,Oe={},it,Ht,ln,gr){const xn=new ki(null,x,A,D,L,q,tt(oe));return ln&&(xn.urlHandlingStrategy=ln),gr&&(xn.routeReuseStrategy=gr),xn.titleStrategy=Ht??it,function Da(x,A){x.errorHandler&&(A.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(A.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(A.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(A.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(A.urlUpdateStrategy=x.urlUpdateStrategy),x.canceledNavigationResolution&&(A.canceledNavigationResolution=x.canceledNavigationResolution)}(Oe,xn),xn},deps:[qn,qi,d.Ye,O.zs3,O.Sil,Ns,wn,Ea,[Eo,new O.FiY],[class Jo{},new O.FiY],[Xo,new O.FiY]]},qi,{provide:Ot,useFactory:function _u(x){return x.routerState.root},deps:[ki]},Ua];function Jl(){return new O.PXZ("Router",ki)}let mu=(()=>{class x{constructor(D,L){}static forRoot(D,L){return{ngModule:x,providers:[Di,[],ba(D),{provide:Nt,useFactory:hl,deps:[[ki,new O.FiY,new O.tp0]]},{provide:wn,useValue:L||{}},L?.useHash?{provide:d.S$,useClass:d.Do}:{provide:d.S$,useClass:d.b0},{provide:ko,useFactory:()=>{const x=(0,O.f3M)(ki),A=(0,O.f3M)(d.EM),D=(0,O.f3M)(wn);return D.scrollOffset&&A.setOffset(D.scrollOffset),new Ln(x,A,D)}},L?.preloadingStrategy?ms(L.preloadingStrategy):[],{provide:O.PXZ,multi:!0,useFactory:Jl},L?.initialNavigation?Ha(L):[],[{provide:lr,useFactory:Ta},{provide:O.tb,multi:!0,useExisting:lr}]]}}static forChild(D){return{ngModule:x,providers:[ba(D)]}}}return x.\u0275fac=function(D){return new(D||x)(O.LFG(Nt,8),O.LFG(ki,8))},x.\u0275mod=O.oAB({type:x}),x.\u0275inj=O.cJS({}),x})();function hl(x){return"guarded"}function ba(x){return[{provide:O.deG,multi:!0,useValue:x},{provide:Ns,multi:!0,useValue:x}]}function Ta(){const x=(0,O.f3M)(O.zs3);return A=>{const D=x.get(O.z2F);if(A!==D.components[0])return;const L=x.get(ki),q=x.get(Qn);null===x.get(wo,null,O.XFs.Optional)&&L.initialNavigation(),x.get(Jt,null,O.XFs.Optional)?.setUpPreloading(),x.get(ko,null,O.XFs.Optional)?.init(),L.resetRootComponentType(D.componentTypes[0]),q.next(),q.complete()}}const lr=new O.OlP("");function Ha(x){return["disabled"===x.initialNavigation?[{provide:O.ip1,multi:!0,useFactory:()=>{const x=(0,O.f3M)(ki);return()=>{x.setUpLocationChangeListener()}}},{provide:wo,useValue:"disabled"}]:[],"enabledBlocking"===x.initialNavigation?[{provide:wo,useValue:"enabledBlocking"},{provide:O.ip1,multi:!0,deps:[O.zs3],useFactory:x=>{const A=x.get(d.V_,Promise.resolve(null));let D=!1;return()=>A.then(()=>new Promise(q=>{const oe=x.get(ki),Oe=x.get(Qn);(function L(q){const oe=x.get(ki);oe.events.pipe((0,Qe.h)(Oe=>Oe instanceof En||Oe instanceof Qt||Oe instanceof kn),(0,Be.U)(Oe=>{if(Oe instanceof En)return!0;const it=oe.navigationId!==Oe.id,Ht=Oe instanceof Qt&&-1!==Oe.reason.indexOf(hi);return!(!it&&!Ht)&&null}),(0,Qe.h)(Oe=>null!==Oe),(0,st.q)(1)).subscribe(()=>{q()})})(()=>{q(!0),D=!0}),oe.afterPreactivation=()=>(q(!0),D||Oe.closed?(0,W.of)(void 0):Oe),oe.initialNavigation()}))}}]:[]]}const Qn=new O.OlP("",{factory:()=>new qe.x}),wo=new O.OlP("");function ms(x){return[wa,{provide:Jt,useExisting:wa},{provide:dl,useExisting:x}]}},3942:(sn,mt,B)=>{"use strict";B.d(mt,{Z:()=>$e});var d=B(2090),O=B(4859),Z=B(9681),He=B(1877);class De{constructor(Ce,Re){this._delegate=Ce,this.firebase=Re,(0,Z._addComponent)(Ce,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Ce,Re=Z._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const bt=this._delegate.container.getProvider(Ce);return!bt.isInitialized()&&"EXPLICIT"===(null===(Ae=bt.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:Re})}_removeServiceInstance(Ce,Re=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(Re)}_addComponent(Ce){(0,Z._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,Z._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function Le(){const Ve=function ze(Ve){const Ce={},Re={__esModule:!0,initializeApp:function W(et,ee={}){const qe=Z.initializeApp(et,ee);if((0,d.r3)(Ce,qe.name))return Ce[qe.name];const he=new Ve(qe,Re);return Ce[qe.name]=he,he},app:bt,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function Ge(et){const ee=et.name,qe=ee.replace("-compat","");if(Z._registerComponent(et)&&"PUBLIC"===et.type){const he=(pe=bt())=>{if("function"!=typeof pe[qe])throw ve.create("invalid-app-argument",{appName:ee});return pe[qe]()};void 0!==et.serviceProps&&(0,d.ZB)(he,et.serviceProps),Re[qe]=he,Ve.prototype[qe]=function(...pe){return this._getService.bind(this,ee).apply(this,et.multipleInstances?pe:[])}}return"PUBLIC"===et.type?Re[qe]:null},removeApp:function Ae(et){delete Ce[et]},useAsService:function Je(et,ee){return"serverAuth"===ee?null:ee},modularAPIs:Z}};function bt(et){if(!(0,d.r3)(Ce,et=et||Z._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:et});return Ce[et]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Xe(){return Object.keys(Ce).map(et=>Ce[et])}}),bt.App=Ve,Re}(De);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:Le,extendNamespace:function Ce(Re){(0,d.ZB)(Ve,Re)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ve}(),me=new He.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=ge;!function je(Ve){(0,Z.registerVersion)("@firebase/app-compat","0.1.29",Ve)}()},9681:(sn,mt,B)=>{"use strict";B.r(mt),B.d(mt,{FirebaseError:()=>He.ZR,SDK_VERSION:()=>In,_DEFAULT_ENTRY_NAME:()=>yt,_addComponent:()=>Ie,_addOrOverwriteComponent:()=>st,_apps:()=>be,_clearComponents:()=>fn,_components:()=>Ye,_getProvider:()=>vt,_registerComponent:()=>Rt,_removeServiceInstance:()=>Vt,deleteApp:()=>Dt,getApp:()=>Qt,getApps:()=>kn,initializeApp:()=>En,onLog:()=>rr,registerVersion:()=>Zn,setLogLevel:()=>yr});var d=B(5861),O=B(4859),Z=B(1877),He=B(2090),De=B(8766);class _e{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function ve(Ue){return"VERSION"===Ue.getComponent()?.type}(We)){const zt=We.getImmediate();return`${zt.library}/${zt.version}`}return null}).filter(We=>We).join(" ")}}const ze="@firebase/app",ge=new Z.Yd("@firebase/app"),yt="[DEFAULT]",Be={[ze]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},be=new Map,Ye=new Map;function Ie(Ue,tt){try{Ue.container.addComponent(tt)}catch(We){ge.debug(`Component ${tt.name} failed to register with FirebaseApp ${Ue.name}`,We)}}function st(Ue,tt){Ue.container.addOrOverwriteComponent(tt)}function Rt(Ue){const tt=Ue.name;if(Ye.has(tt))return ge.debug(`There were multiple attempts to register component ${tt}.`),!1;Ye.set(tt,Ue);for(const We of be.values())Ie(We,Ue);return!0}function vt(Ue,tt){const We=Ue.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Ue.container.getProvider(tt)}function Vt(Ue,tt,We=yt){vt(Ue,tt).clearInstance(We)}function fn(){Ye.clear()}const Dn=new He.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Zt{constructor(tt,We,zt){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=zt,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const In="9.9.0";function En(Ue,tt={}){"object"!=typeof tt&&(tt={name:tt});const We=Object.assign({name:yt,automaticDataCollectionEnabled:!1},tt),zt=We.name;if("string"!=typeof zt||!zt)throw Dn.create("bad-app-name",{appName:String(zt)});const Yt=be.get(zt);if(Yt){if((0,He.vZ)(Ue,Yt.options)&&(0,He.vZ)(We,Yt.config))return Yt;throw Dn.create("duplicate-app",{appName:zt})}const un=new O.H0(zt);for(const On of Ye.values())un.addComponent(On);const ar=new Zt(Ue,We,un);return be.set(zt,ar),ar}function Qt(Ue=yt){const tt=be.get(Ue);if(!tt)throw Dn.create("no-app",{appName:Ue});return tt}function kn(){return Array.from(be.values())}function Dt(Ue){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(Ue){const tt=Ue.name;be.has(tt)&&(be.delete(tt),yield Promise.all(Ue.container.getProviders().map(We=>We.delete())),Ue.isDeleted=!0)})).apply(this,arguments)}function Zn(Ue,tt,We){var zt;let Yt=null!==(zt=Be[Ue])&&void 0!==zt?zt:Ue;We&&(Yt+=`-${We}`);const un=Yt.match(/\s|\//),ar=tt.match(/\s|\//);if(un||ar){const On=[`Unable to register library "${Yt}" with version "${tt}":`];return un&&On.push(`library name "${Yt}" contains illegal characters (whitespace or "/")`),un&&ar&&On.push("and"),ar&&On.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void ge.warn(On.join(" "))}Rt(new O.wA(`${Yt}-version`,()=>({library:Yt,version:tt}),"VERSION"))}function rr(Ue,tt){if(null!==Ue&&"function"!=typeof Ue)throw Dn.create("invalid-log-argument");(0,Z.Am)(Ue,tt)}function yr(Ue){(0,Z.Ub)(Ue)}const ei="firebase-heartbeat-store";let qr=null;function mi(){return qr||(qr=(0,De.X3)("firebase-heartbeat-database",1,{upgrade:(Ue,tt)=>{0===tt&&Ue.createObjectStore(ei)}}).catch(Ue=>{throw Dn.create("storage-open",{originalErrorMessage:Ue.message})})),qr}function en(){return(en=(0,d.Z)(function*(Ue){var tt;try{return(yield mi()).transaction(ei).objectStore(ei).get(Yr(Ue))}catch(We){throw Dn.create("storage-get",{originalErrorMessage:null===(tt=We)||void 0===tt?void 0:tt.message})}})).apply(this,arguments)}function zn(Ue,tt){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(Ue,tt){var We;try{const Yt=(yield mi()).transaction(ei,"readwrite");return yield Yt.objectStore(ei).put(tt,Yr(Ue)),Yt.done}catch(zt){throw Dn.create("storage-set",{originalErrorMessage:null===(We=zt)||void 0===We?void 0:We.message})}})).apply(this,arguments)}function Yr(Ue){return`${Ue.name}!${Ue.options.appId}`}class Zr{constructor(tt){this.container=tt,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Pr(We),this._heartbeatsCachePromise=this._storage.read().then(zt=>(this._heartbeatsCache=zt,zt))}triggerHeartbeat(){var tt=this;return(0,d.Z)(function*(){const zt=tt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yt=ti();if(null===tt._heartbeatsCache&&(tt._heartbeatsCache=yield tt._heartbeatsCachePromise),tt._heartbeatsCache.lastSentHeartbeatDate!==Yt&&!tt._heartbeatsCache.heartbeats.some(un=>un.date===Yt))return tt._heartbeatsCache.heartbeats.push({date:Yt,agent:zt}),tt._heartbeatsCache.heartbeats=tt._heartbeatsCache.heartbeats.filter(un=>{const ar=new Date(un.date).valueOf();return Date.now()-ar<=2592e6}),tt._storage.overwrite(tt._heartbeatsCache)})()}getHeartbeatsHeader(){var tt=this;return(0,d.Z)(function*(){if(null===tt._heartbeatsCache&&(yield tt._heartbeatsCachePromise),null===tt._heartbeatsCache||0===tt._heartbeatsCache.heartbeats.length)return"";const We=ti(),{heartbeatsToSend:zt,unsentEntries:Yt}=function Er(Ue,tt=1024){const We=[];let zt=Ue.slice();for(const Yt of Ue){const un=We.find(ar=>ar.agent===Yt.agent);if(un){if(un.dates.push(Yt.date),Ke(We)>tt){un.dates.pop();break}}else if(We.push({agent:Yt.agent,dates:[Yt.date]}),Ke(We)>tt){We.pop();break}zt=zt.slice(1)}return{heartbeatsToSend:We,unsentEntries:zt}}(tt._heartbeatsCache.heartbeats),un=(0,He.L)(JSON.stringify({version:2,heartbeats:zt}));return tt._heartbeatsCache.lastSentHeartbeatDate=We,Yt.length>0?(tt._heartbeatsCache.heartbeats=Yt,yield tt._storage.overwrite(tt._heartbeatsCache)):(tt._heartbeatsCache.heartbeats=[],tt._storage.overwrite(tt._heartbeatsCache)),un})()}}function ti(){return(new Date).toISOString().substring(0,10)}class Pr{constructor(tt){this.app=tt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,He.hl)()&&(0,He.eu)().then(()=>!0).catch(()=>!1)})()}read(){var tt=this;return(0,d.Z)(function*(){return(yield tt._canUseIndexedDBPromise)&&(yield function Yn(Ue){return en.apply(this,arguments)}(tt.app))||{heartbeats:[]}})()}overwrite(tt){var We=this;return(0,d.Z)(function*(){var zt;if(yield We._canUseIndexedDBPromise){const un=yield We.read();return zn(We.app,{lastSentHeartbeatDate:null!==(zt=tt.lastSentHeartbeatDate)&&void 0!==zt?zt:un.lastSentHeartbeatDate,heartbeats:tt.heartbeats})}})()}add(tt){var We=this;return(0,d.Z)(function*(){var zt;if(yield We._canUseIndexedDBPromise){const un=yield We.read();return zn(We.app,{lastSentHeartbeatDate:null!==(zt=tt.lastSentHeartbeatDate)&&void 0!==zt?zt:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...tt.heartbeats]})}})()}}function Ke(Ue){return(0,He.L)(JSON.stringify({version:2,heartbeats:Ue})).length}!function Ze(Ue){Rt(new O.wA("platform-logger",tt=>new _e(tt),"PRIVATE")),Rt(new O.wA("heartbeat",tt=>new Zr(tt),"PRIVATE")),Zn(ze,"0.7.28",Ue),Zn(ze,"0.7.28","esm2017"),Zn("fire-js","")}("")},4859:(sn,mt,B)=>{"use strict";B.d(mt,{H0:()=>ze,wA:()=>Z,zt:()=>De});var d=B(5861),O=B(2090);class Z{constructor(ge,me,Te){this.name=ge,this.instanceFactory=me,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const He="[DEFAULT]";class De{constructor(ge,me){this.name=ge,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const me=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(me)){const Te=new O.BH;if(this.instancesDeferred.set(me,Te),this.isInitialized(me)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:me});Fe&&Te.resolve(Fe)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(ge){var me;const Te=this.normalizeInstanceIdentifier(ge?.identifier),Fe=null!==(me=ge?.optional)&&void 0!==me&&me;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(je){if(Fe)return null;throw je}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function ve(Le){return"EAGER"===Le.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:He})}catch{}for(const[me,Te]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(me);try{const je=this.getOrInitializeService({instanceIdentifier:Fe});Te.resolve(je)}catch{}}}}clearInstance(ge=He){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,d.Z)(function*(){const me=Array.from(ge.instances.values());yield Promise.all([...me.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...me.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=He){return this.instances.has(ge)}getOptions(ge=He){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:me={}}=ge,Te=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Te,options:me});for(const[je,$e]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(je)&&$e.resolve(Fe);return Fe}onInit(ge,me){var Te;const Fe=this.normalizeInstanceIdentifier(me),je=null!==(Te=this.onInitCallbacks.get(Fe))&&void 0!==Te?Te:new Set;je.add(ge),this.onInitCallbacks.set(Fe,je);const $e=this.instances.get(Fe);return $e&&ge($e,Fe),()=>{je.delete(ge)}}invokeOnInitCallbacks(ge,me){const Te=this.onInitCallbacks.get(me);if(Te)for(const Fe of Te)try{Fe(ge,me)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:me={}}){let Te=this.instances.get(ge);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(Le=ge,Le===He?void 0:Le),options:me}),this.instances.set(ge,Te),this.instancesOptions.set(ge,me),this.invokeOnInitCallbacks(Te,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,Te)}catch{}var Le;return Te||null}normalizeInstanceIdentifier(ge=He){return this.component?this.component.multipleInstances?ge:He:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ze{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const me=this.getProvider(ge.name);if(me.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);me.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const me=new De(ge,this);return this.providers.set(ge,me),me}getProviders(){return Array.from(this.providers.values())}}},1877:(sn,mt,B)=>{"use strict";B.d(mt,{Am:()=>Le,Ub:()=>ze,Yd:()=>ve,in:()=>O});const d=[];var O=(()=>{return(ge=O||(O={}))[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",O;var ge})();const Z={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},He=O.INFO,De={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},_e=(ge,me,...Te)=>{if(me<ge.logLevel)return;const Fe=(new Date).toISOString(),je=De[me];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[je](`[${Fe}]  ${ge.name}:`,...Te)};class ve{constructor(me){this.name=me,this._logLevel=He,this._logHandler=_e,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in O))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?Z[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...me),this._logHandler(this,O.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...me),this._logHandler(this,O.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,O.INFO,...me),this._logHandler(this,O.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,O.WARN,...me),this._logHandler(this,O.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...me),this._logHandler(this,O.ERROR,...me)}}function ze(ge){d.forEach(me=>{me.setLogLevel(ge)})}function Le(ge,me){for(const Te of d){let Fe=null;me&&me.level&&(Fe=Z[me.level]),Te.userLogHandler=null===ge?null:(je,$e,...Ve)=>{const Ce=Ve.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");$e>=(Fe??je.logLevel)&&ge({level:O[$e].toLowerCase(),message:Ce,args:Ve,type:je.name})}}}},8766:(sn,mt,B)=>{"use strict";B.d(mt,{Lj:()=>W,X3:()=>bt});var d=B(5861);let Z,He;const ve=new WeakMap,ze=new WeakMap,Le=new WeakMap,ge=new WeakMap,me=new WeakMap;let je={get(ee,qe,he){if(ee instanceof IDBTransaction){if("done"===qe)return ze.get(ee);if("objectStoreNames"===qe)return ee.objectStoreNames||Le.get(ee);if("store"===qe)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return Re(ee[qe])},set:(ee,qe,he)=>(ee[qe]=he,!0),has:(ee,qe)=>ee instanceof IDBTransaction&&("done"===qe||"store"===qe)||qe in ee};function Ce(ee){return"function"==typeof ee?function Ve(ee){return ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return He||(He=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ee)?function(...qe){return ee.apply(Ae(this),qe),Re(ve.get(this))}:function(...qe){return Re(ee.apply(Ae(this),qe))}:function(qe,...he){const pe=ee.call(Ae(this),qe,...he);return Le.set(pe,qe.sort?qe.sort():[qe]),Re(pe)}}(ee):(ee instanceof IDBTransaction&&function Fe(ee){if(ze.has(ee))return;const qe=new Promise((he,pe)=>{const fe=()=>{ee.removeEventListener("complete",le),ee.removeEventListener("error",Qe),ee.removeEventListener("abort",Qe)},le=()=>{he(),fe()},Qe=()=>{pe(ee.error||new DOMException("AbortError","AbortError")),fe()};ee.addEventListener("complete",le),ee.addEventListener("error",Qe),ee.addEventListener("abort",Qe)});ze.set(ee,qe)}(ee),((ee,qe)=>qe.some(he=>ee instanceof he))(ee,function De(){return Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ee,je):ee)}function Re(ee){if(ee instanceof IDBRequest)return function Te(ee){const qe=new Promise((he,pe)=>{const fe=()=>{ee.removeEventListener("success",le),ee.removeEventListener("error",Qe)},le=()=>{he(Re(ee.result)),fe()},Qe=()=>{pe(ee.error),fe()};ee.addEventListener("success",le),ee.addEventListener("error",Qe)});return qe.then(he=>{he instanceof IDBCursor&&ve.set(he,ee)}).catch(()=>{}),me.set(qe,ee),qe}(ee);if(ge.has(ee))return ge.get(ee);const qe=Ce(ee);return qe!==ee&&(ge.set(ee,qe),me.set(qe,ee)),qe}const Ae=ee=>me.get(ee);function bt(ee,qe,{blocked:he,upgrade:pe,blocking:fe,terminated:le}={}){const Qe=indexedDB.open(ee,qe),Tt=Re(Qe);return pe&&Qe.addEventListener("upgradeneeded",Gt=>{pe(Re(Qe.result),Gt.oldVersion,Gt.newVersion,Re(Qe.transaction))}),he&&Qe.addEventListener("blocked",()=>he()),Tt.then(Gt=>{le&&Gt.addEventListener("close",()=>le()),fe&&Gt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),Tt}function W(ee,{blocked:qe}={}){const he=indexedDB.deleteDatabase(ee);return qe&&he.addEventListener("blocked",()=>qe()),Re(he).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],Je=new Map;function et(ee,qe){if(!(ee instanceof IDBDatabase)||qe in ee||"string"!=typeof qe)return;if(Je.get(qe))return Je.get(qe);const he=qe.replace(/FromIndex$/,""),pe=qe!==he,fe=Ge.includes(he);if(!(he in(pe?IDBIndex:IDBObjectStore).prototype)||!fe&&!Xe.includes(he))return;const le=function(){var Qe=(0,d.Z)(function*(Tt,...Gt){const Et=this.transaction(Tt,fe?"readwrite":"readonly");let yt=Et.store;return pe&&(yt=yt.index(Gt.shift())),(yield Promise.all([yt[he](...Gt),fe&&Et.done]))[0]});return function(Gt){return Qe.apply(this,arguments)}}();return Je.set(qe,le),le}!function $e(ee){je=ee(je)}(ee=>({...ee,get:(qe,he,pe)=>et(qe,he)||ee.get(qe,he,pe),has:(qe,he)=>!!et(qe,he)||ee.has(qe,he)}))},8635:(sn,mt,B)=>{"use strict";B.d(mt,{g6:()=>Gt,fi:()=>Be});var d=B(5861),O=B(4650);const Z={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},He=new O.OlP("config",{providedIn:"root",factory:()=>({modules:Z})});var _e=B(6895),ve=B(1481),ze=B(8306),Le=B(576);function ge(be){return!!be&&(be instanceof ze.y||(0,Le.m)(be.lift)&&(0,Le.m)(be.subscribe))}var me=B(6805),Te=B(930);function Fe(be,Ye){const Ie="object"==typeof Ye;return new Promise((st,Rt)=>{const vt=new Te.Hp({next:Vt=>{st(Vt),vt.unsubscribe()},error:Rt,complete:()=>{Ie?st(Ye.defaultValue):Rt(new me.K)}});be.subscribe(vt)})}var je=B(9770),$e=B(727),Ve=B(4968),Ce=B(3151),Re=B(5577),Ae=B(8372),bt=B(433);function W(be,Ye){1&be&&O._UZ(0,"div",2)}function Xe(be,Ye){1&be&&O._UZ(0,"pre",2)}function Ge(be,Ye){if(1&be&&(O.ynx(0),O.YNc(1,W,1,0,"div",1),O.YNc(2,Xe,1,0,"pre",1),O.BQk()),2&be){const Ie=O.oxw();O.xp6(1),O.Q6J("ngIf",!Ie.preserve),O.xp6(1),O.Q6J("ngIf",Ie.preserve)}}function Je(be,Ye){1&be&&O._UZ(0,"div",2)}function et(be,Ye){1&be&&O._UZ(0,"pre",2)}function ee(be,Ye){if(1&be&&(O.ynx(0),O.YNc(1,Je,1,0,"div",1),O.YNc(2,et,1,0,"pre",1),O.BQk()),2&be){const Ie=O.oxw();O.xp6(1),O.Q6J("ngIf",!Ie.preserve),O.xp6(1),O.Q6J("ngIf",Ie.preserve)}}const qe=[[["","quill-editor-toolbar",""]]],he=["[quill-editor-toolbar]"];function pe(be,Ye){1&be&&O._UZ(0,"div",1)}function fe(be,Ye){1&be&&O._UZ(0,"pre",1)}const le=(be,Ye)=>be||Ye||"html";let Qe=(()=>{class be{constructor(Ie,st){var Rt=this;this.config=st,this.quill$=(0,je.P)((0,d.Z)(function*(){if(!Rt.Quill){const vt=Rt.document.addEventListener;Rt.document.addEventListener=Rt.document.__zone_symbol__addEventListener||Rt.document.addEventListener;const Vt=yield B.e(9971).then(B.t.bind(B,9971,19));Rt.document.addEventListener=vt,Rt.Quill=Vt.default?Vt.default:Vt}return Rt.config.customOptions?.forEach(vt=>{const Vt=Rt.Quill.import(vt.import);Vt.whitelist=vt.whitelist,Rt.Quill.register(Vt,!0,Rt.config.suppressGlobalRegisterWarning)}),yield Rt.registerCustomModules(Rt.Quill,Rt.config.customModules,Rt.config.suppressGlobalRegisterWarning)})).pipe((0,Ce.d)({bufferSize:1,refCount:!0})),this.document=Ie.get(_e.K0),this.config||(this.config={modules:Z})}getQuill(){return this.quill$}registerCustomModules(Ie,st,Rt){return(0,d.Z)(function*(){if(Array.isArray(st))for(let{implementation:vt,path:Vt}of st)ge(vt)&&(vt=yield Fe(vt)),Ie.register(Vt,vt,Rt);return Ie})()}}return be.\u0275fac=function(Ie){return new(Ie||be)(O.LFG(O.zs3),O.LFG(He,8))},be.\u0275prov=O.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})(),Tt=(()=>{class be{constructor(Ie,st,Rt,vt,Vt,fn,hn,Dn){this.elementRef=st,this.cd=Rt,this.domSanitizer=vt,this.platformId=Vt,this.renderer=fn,this.zone=hn,this.service=Dn,this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new O.vpe,this.onEditorChanged=new O.vpe,this.onContentChanged=new O.vpe,this.onSelectionChanged=new O.vpe,this.onFocus=new O.vpe,this.onBlur=new O.vpe,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.valueGetter=(Zt,In)=>{let En=In.querySelector(".ql-editor").innerHTML;("<p><br></p>"===En||"<div><br></div>"===En)&&(En=this.defaultEmptyValue);let Qt=En;const kn=le(this.format,this.service.config.format);if("text"===kn)Qt=Zt.getText();else if("object"===kn)Qt=Zt.getContents();else if("json"===kn)try{Qt=JSON.stringify(Zt.getContents())}catch{Qt=Zt.getText()}return Qt},this.valueSetter=(Zt,In)=>{const En=le(this.format,this.service.config.format);if("html"===En)return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(In=this.domSanitizer.sanitize(O.q3G.HTML,In)),Zt.clipboard.convert(In);if("json"===En)try{return JSON.parse(In)}catch{return[{insert:In}]}return In},this.selectionChangeHandler=(Zt,In,En)=>{const Qt=!Zt&&!!this.onModelTouched;!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!Qt||this.zone.run(()=>{null===Zt?this.onBlur.emit({editor:this.quillEditor,source:En}):null===In&&this.onFocus.emit({editor:this.quillEditor,source:En}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:In,range:Zt,source:En}),Qt&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(Zt,In,En)=>{const Qt=this.quillEditor.getText(),kn=this.quillEditor.getContents();let Dt=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===Dt||"<div><br></div>"===Dt)&&(Dt=this.defaultEmptyValue);const Sr=this.trackChanges||this.service.config.trackChanges,Zn=("user"===En||Sr&&"all"===Sr)&&!!this.onModelChange;!this.onContentChanged.observed&&!Zn||this.zone.run(()=>{Zn&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:kn,delta:Zt,editor:this.quillEditor,html:Dt,oldDelta:In,source:En,text:Qt}),this.cd.markForCheck()})},this.editorChangeHandler=(Zt,In,En,Qt)=>{if(this.onEditorChanged.observed)if("text-change"===Zt){const kn=this.quillEditor.getText(),Dt=this.quillEditor.getContents();let Sr=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===Sr||"<div><br></div>"===Sr)&&(Sr=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:Dt,delta:In,editor:this.quillEditor,event:Zt,html:Sr,oldDelta:En,source:Qt,text:kn}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:Zt,oldRange:En,range:In,source:Qt}),this.cd.markForCheck()})},this.document=Ie.get(_e.K0)}static normalizeClassNames(Ie){return Ie.trim().split(" ").reduce((Rt,vt)=>{const Vt=vt.trim();return Vt&&Rt.push(Vt),Rt},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){(0,_e.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,Re.z)(Ie=>{const st=[this.service.registerCustomModules(Ie,this.customModules)],Rt=this.beforeRender??this.service.config.beforeRender;return Rt&&st.push(Rt()),Promise.all(st).then(()=>Ie)})).subscribe(Ie=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const st=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),Rt=Object.assign({},this.modules||this.service.config.modules);st?Rt.toolbar=st:void 0===Rt.toolbar&&(Rt.toolbar=Z.toolbar);let vt=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===vt&&(vt="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(En=>{this.renderer.setStyle(this.editorElem,En,this.styles[En])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(En=>{const Qt=Ie.import(En.import);Qt.whitelist=En.whitelist,Ie.register(Qt,!0)});let Vt=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;Vt||(Vt=this.service.config.bounds?this.service.config.bounds:this.document.body);let fn=this.debug;!fn&&!1!==fn&&this.service.config.debug&&(fn=this.service.config.debug);let hn=this.readOnly;!hn&&!1!==this.readOnly&&(hn=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let Dn=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(Dn=this.service.config.defaultEmptyValue);let Zt=this.scrollingContainer;!Zt&&null!==this.scrollingContainer&&(Zt=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let In=this.formats;if(!In&&void 0===In&&(In=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new Ie(this.editorElem,{bounds:Vt,debug:fn,formats:In,modules:Rt,placeholder:vt,readOnly:hn,defaultEmptyValue:Dn,scrollingContainer:Zt,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const Qt=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");Qt?.dataset&&(Qt.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===le(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const Qt=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(Qt,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(Ie){if(this.quillEditor){if(Ie.readOnly&&this.quillEditor.enable(!Ie.readOnly.currentValue),Ie.placeholder&&(this.quillEditor.root.dataset.placeholder=Ie.placeholder.currentValue),Ie.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=Ie.defaultEmptyValue.currentValue),Ie.styles){const st=Ie.styles.currentValue,Rt=Ie.styles.previousValue;Rt&&Object.keys(Rt).forEach(vt=>{this.renderer.removeStyle(this.editorElem,vt)}),st&&Object.keys(st).forEach(vt=>{this.renderer.setStyle(this.editorElem,vt,this.styles[vt])})}if(Ie.classes){const st=Ie.classes.currentValue,Rt=Ie.classes.previousValue;Rt&&this.removeClasses(Rt),st&&this.addClasses(st)}Ie.debounceTime&&this.addQuillEventListeners()}}addClasses(Ie){be.normalizeClassNames(Ie).forEach(st=>{this.renderer.addClass(this.editorElem,st)})}removeClasses(Ie){be.normalizeClassNames(Ie).forEach(st=>{this.renderer.removeClass(this.editorElem,st)})}writeValue(Ie){if(this.filterNull&&null===Ie||(this.content=Ie,!this.quillEditor))return;const st=le(this.format,this.service.config.format),Rt=this.valueSetter(this.quillEditor,Ie);if(this.compareValues){const vt=this.quillEditor.getContents();if(JSON.stringify(vt)===JSON.stringify(Rt))return}Ie?"text"===st?this.quillEditor.setText(Ie):this.quillEditor.setContents(Rt):this.quillEditor.setText("")}setDisabledState(Ie=this.disabled){this.disabled=Ie,this.quillEditor&&(Ie?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(Ie){this.onModelChange=Ie}registerOnTouched(Ie){this.onModelTouched=Ie}registerOnValidatorChange(Ie){this.onValidatorChanged=Ie}validate(){if(!this.quillEditor)return null;const Ie={};let st=!0;const Rt=this.quillEditor.getText(),vt=this.trimOnValidation?Rt.trim().length:1===Rt.length&&0===Rt.trim().length?0:Rt.length-1,Vt=this.quillEditor.getContents().ops,fn=Vt&&1===Vt.length&&["\n",""].includes(Vt[0].insert);return this.minLength&&vt&&vt<this.minLength&&(Ie.minLengthError={given:vt,minLength:this.minLength},st=!1),this.maxLength&&vt>this.maxLength&&(Ie.maxLengthError={given:vt,maxLength:this.maxLength},st=!1),this.required&&!vt&&fn&&(Ie.requiredError={empty:!0},st=!1),st?null:Ie}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new $e.w0,this.subscription.add((0,Ve.R)(this.quillEditor,"selection-change").subscribe(([Rt,vt,Vt])=>{this.selectionChangeHandler(Rt,vt,Vt)}));let Ie=(0,Ve.R)(this.quillEditor,"text-change"),st=(0,Ve.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(Ie=Ie.pipe((0,Ae.b)(this.debounceTime)),st=st.pipe((0,Ae.b)(this.debounceTime))),this.subscription.add(Ie.subscribe(([Rt,vt,Vt])=>{this.textChangeHandler(Rt,vt,Vt)})),this.subscription.add(st.subscribe(([Rt,vt,Vt,fn])=>{this.editorChangeHandler(Rt,vt,Vt,fn)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return be.\u0275fac=function(Ie){return new(Ie||be)(O.Y36(O.zs3),O.Y36(O.SBq),O.Y36(O.sBO),O.Y36(ve.H7),O.Y36(O.Lbi),O.Y36(O.Qsj),O.Y36(O.R0b),O.Y36(Qe))},be.\u0275dir=O.lG2({type:be,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",beforeRender:"beforeRender",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[O.TTD]}),be})(),Gt=(()=>{class be extends Tt{constructor(Ie,st,Rt,vt,Vt,fn,hn,Dn){super(Ie,st,Rt,vt,Vt,fn,hn,Dn)}}return be.\u0275fac=function(Ie){return new(Ie||be)(O.Y36(O.zs3),O.Y36(O.SBq),O.Y36(O.sBO),O.Y36(ve.H7),O.Y36(O.Lbi),O.Y36(O.Qsj),O.Y36(O.R0b),O.Y36(Qe))},be.\u0275cmp=O.Xpm({type:be,selectors:[["quill-editor"]],standalone:!0,features:[O._Bn([{multi:!0,provide:bt.JU,useExisting:(0,O.Gpc)(()=>be)},{multi:!0,provide:bt.Cf,useExisting:(0,O.Gpc)(()=>be)}]),O.qOj,O.jDz],ngContentSelectors:he,decls:3,vars:2,consts:[[4,"ngIf"],["quill-editor-element","",4,"ngIf"],["quill-editor-element",""]],template:function(Ie,st){1&Ie&&(O.F$t(qe),O.YNc(0,Ge,3,2,"ng-container",0),O.Hsn(1),O.YNc(2,ee,3,2,"ng-container",0)),2&Ie&&(O.Q6J("ngIf","top"!==st.toolbarPosition),O.xp6(2),O.Q6J("ngIf","top"===st.toolbarPosition))},dependencies:[_e.ez,_e.O5],styles:[":host{display:inline-block}\n"],encapsulation:2}),be})(),Et=(()=>{class be{constructor(Ie,st){this.sanitizer=Ie,this.service=st,this.content="",this.innerHTML="",this.themeClass="ql-snow"}ngOnChanges(Ie){if(Ie.theme?this.themeClass=`ql-${Ie.theme.currentValue||(this.service.config.theme?this.service.config.theme:"snow")} ngx-quill-view-html`:this.theme||(this.themeClass=`ql-${this.service.config.theme?this.service.config.theme:"snow"} ngx-quill-view-html`),Ie.content){const st=Ie.content.currentValue,Rt=[!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1;this.innerHTML=Rt?st:this.sanitizer.bypassSecurityTrustHtml(st)}}}return be.\u0275fac=function(Ie){return new(Ie||be)(O.Y36(ve.H7),O.Y36(Qe))},be.\u0275cmp=O.Xpm({type:be,selectors:[["quill-view-html"]],inputs:{content:"content",theme:"theme",sanitize:"sanitize"},standalone:!0,features:[O.TTD,O.jDz],decls:2,vars:2,consts:[[1,"ql-container",3,"ngClass"],[1,"ql-editor",3,"innerHTML"]],template:function(Ie,st){1&Ie&&(O.TgZ(0,"div",0),O._UZ(1,"div",1),O.qZA()),2&Ie&&(O.Q6J("ngClass",st.themeClass),O.xp6(1),O.Q6J("innerHTML",st.innerHTML,O.oJD))},dependencies:[_e.ez,_e.mk],styles:[".ql-container.ngx-quill-view-html{border:0}\n"],encapsulation:2}),be})(),yt=(()=>{class be{constructor(Ie,st,Rt,vt,Vt,fn){this.elementRef=Ie,this.renderer=st,this.zone=Rt,this.service=vt,this.domSanitizer=Vt,this.platformId=fn,this.strict=!0,this.customModules=[],this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new O.vpe,this.preserve=!1,this.quillSubscription=null,this.valueSetter=(hn,Dn)=>{const Zt=le(this.format,this.service.config.format);let In=Dn;if("text"===Zt)hn.setText(In);else{if("html"===Zt)([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(Dn=this.domSanitizer.sanitize(O.q3G.HTML,Dn)),In=hn.clipboard.convert(Dn);else if("json"===Zt)try{In=JSON.parse(Dn)}catch{In=[{insert:Dn}]}hn.setContents(In)}}}ngOnInit(){this.preserve=this.preserveWhitespace}ngOnChanges(Ie){!this.quillEditor||Ie.content&&this.valueSetter(this.quillEditor,Ie.content.currentValue)}ngAfterViewInit(){(0,_e.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,Re.z)(Ie=>{const st=[this.service.registerCustomModules(Ie,this.customModules)],Rt=this.beforeRender??this.service.config.beforeRender;return Rt&&st.push(Rt()),Promise.all(st).then(()=>Ie)})).subscribe(Ie=>{const st=Object.assign({},this.modules||this.service.config.modules);st.toolbar=!1,this.customOptions.forEach(fn=>{const hn=Ie.import(fn.import);hn.whitelist=fn.whitelist,Ie.register(hn,!0)});let Rt=this.debug;!Rt&&!1!==Rt&&this.service.config.debug&&(Rt=this.service.config.debug);let vt=this.formats;!vt&&void 0===vt&&(vt=this.service.config.formats?Object.assign({},this.service.config.formats):null===this.service.config.formats?null:void 0);const Vt=this.theme||(this.service.config.theme?this.service.config.theme:"snow");this.editorElem=this.elementRef.nativeElement.querySelector("[quill-view-element]"),this.zone.runOutsideAngular(()=>{this.quillEditor=new Ie(this.editorElem,{debug:Rt,formats:vt,modules:st,readOnly:!0,strict:this.strict,theme:Vt})}),this.renderer.addClass(this.editorElem,"ngx-quill-view"),this.content&&this.valueSetter(this.quillEditor,this.content),this.onEditorCreated.observers.length&&requestAnimationFrame(()=>{this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.quillSubscription?.unsubscribe(),this.quillSubscription=null}}return be.\u0275fac=function(Ie){return new(Ie||be)(O.Y36(O.SBq),O.Y36(O.Qsj),O.Y36(O.R0b),O.Y36(Qe),O.Y36(ve.H7),O.Y36(O.Lbi))},be.\u0275cmp=O.Xpm({type:be,selectors:[["quill-view"]],inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",formats:"formats",sanitize:"sanitize",beforeRender:"beforeRender",strict:"strict",content:"content",customModules:"customModules",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace"},outputs:{onEditorCreated:"onEditorCreated"},standalone:!0,features:[O.TTD,O.jDz],decls:2,vars:2,consts:[["quill-view-element","",4,"ngIf"],["quill-view-element",""]],template:function(Ie,st){1&Ie&&(O.YNc(0,pe,1,0,"div",0),O.YNc(1,fe,1,0,"pre",0)),2&Ie&&(O.Q6J("ngIf",!st.preserve),O.xp6(1),O.Q6J("ngIf",st.preserve))},dependencies:[_e.ez,_e.O5],styles:[".ql-container.ngx-quill-view{border:0}\n"],encapsulation:2}),be})(),Be=(()=>{class be{static forRoot(Ie){return{ngModule:be,providers:[{provide:He,useValue:Ie}]}}}return be.\u0275fac=function(Ie){return new(Ie||be)},be.\u0275mod=O.oAB({type:be}),be.\u0275inj=O.cJS({imports:[Gt,yt,Et]}),be})()},5861:(sn,mt,B)=>{"use strict";function d(Z,He,De,_e,ve,ze,Le){try{var ge=Z[ze](Le),me=ge.value}catch(Te){return void De(Te)}ge.done?He(me):Promise.resolve(me).then(_e,ve)}function O(Z){return function(){var He=this,De=arguments;return new Promise(function(_e,ve){var ze=Z.apply(He,De);function Le(me){d(ze,_e,ve,Le,ge,"next",me)}function ge(me){d(ze,_e,ve,Le,ge,"throw",me)}Le(void 0)})}}B.d(mt,{Z:()=>O})}},sn=>{sn(sn.s=4223)}]);